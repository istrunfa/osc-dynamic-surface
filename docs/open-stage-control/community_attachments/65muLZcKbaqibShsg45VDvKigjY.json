{
  "type": "root",
  "id": "root",
  "linkId": "",
  "color": "auto",
  "css": "",
  "default": "",
  "value": "",
  "precision": 2,
  "address": "/root",
  "preArgs": "",
  "target": "",
  "bypass": false,
  "traversing": false,
  "variables": {},
  "tabs": [
    {
      "type": "tab",
      "id": "tab_1",
      "linkId": "",
      "label": "auto",
      "color": "auto",
      "css": "",
      "default": "",
      "value": "",
      "precision": 2,
      "address": "/tab_1",
      "preArgs": "",
      "target": "",
      "bypass": false,
      "variables": "@{parent.variables}",
      "widgets": [
        {
          "type": "push",
          "top": 90,
          "left": 90,
          "id": "push_1",
          "linkId": "",
          "width": 100,
          "height": 60,
          "label": "auto",
          "color": "auto",
          "css": "",
          "doubleTap": false,
          "on": 1,
          "off": 0,
          "norelease": false,
          "value": "",
          "precision": 2,
          "address": "/push_1",
          "preArgs": "",
          "target": "",
          "bypass": false
        },
        {
          "type": "script",
          "top": 160,
          "left": 90,
          "id": "script_1",
          "linkId": "",
          "width": "auto",
          "height": "auto",
          "label": "auto",
          "color": "auto",
          "css": "",
          "default": "",
          "value": "@{push_1}",
          "precision": 2,
          "address": "/script_1",
          "preArgs": "",
          "target": "",
          "bypass": false,
          "condition": 1,
          "script": "JS{{\n\nif (!global.taptempo) {\n  global.taptempo = {}\n  global.taptempo.MAX_DUR = 1000 * 60 / 40\n  global.taptempo.TAPS = []\n  global.taptempo.LAST_TIME = 0\n  global.taptempo.INDEX = -1\n  global.taptempo.RESET = function(){\n    global.taptempo.TAPS = [0,0,0,0,0]\n    global.taptempo.INDEX = -1\n  }\n}\n\nvar tt =  global.taptempo,\n       time = Date.now(),\n       duration = time - tt.LAST_TIME\n\nif (!value || duration < 100) return\n\nif (duration > tt.MAX_DUR) {\n  tt.LAST_TIME = time\n  tt.RESET()\n  return\n}\n\ntt.INDEX++\nglobal.taptempo.TAPS[tt.INDEX % global.taptempo.TAPS.length] = duration\ntt.LAST_TIME = time\n\n// filter tap durations (exclude zeros)\nvar taps = global.taptempo.TAPS.filter(x=>x>0)\n\n// we need at least one value\nif  (taps.length < 1) return\n\n// compute average tap duration\nvar sum = taps.reduce((previous, current) => current += previous),\n       avg = sum / taps.length,\n       bpm = Math.round(60 / (avg / 1000))\n\nset(\"input_1\", bpm)\n\n}}"
        },
        {
          "type": "input",
          "top": 230,
          "left": 90,
          "id": "input_1",
          "linkId": "",
          "width": "auto",
          "height": "auto",
          "label": "auto",
          "color": "auto",
          "css": "",
          "vertical": false,
          "align": "",
          "unit": "",
          "editable": true,
          "asYouType": false,
          "default": "",
          "value": "",
          "precision": 2,
          "address": "/bpm",
          "preArgs": "",
          "target": "",
          "bypass": false
        }
      ],
      "tabs": [],
      "scroll": true
    }
  ],
  "scroll": true,
  "label": false
}