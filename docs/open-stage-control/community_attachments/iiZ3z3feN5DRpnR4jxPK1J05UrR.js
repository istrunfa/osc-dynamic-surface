// set midi target in interface
//app.on('sessionOpened', ()=>{
//    receive('/SET', 'midi_target', 'midi:' + MIDI_DEVICE_NAME)
//})
 
var effectsHex = ['00','off','01','Wah Wah [WAH]','02','Wah Wah Low Pass [WAH]','03','Wah High Pass [WAH]','04','Wah Vowel Filter [WAH]','06','Wah Phaser [WAH]','07','Wah Flanger [WAH]',
                  '08','Wah Rate Reducer [WAH]','09','Wah Ring Modulator [WAH]','0a','Wah Freq Shifter [WAH]','0c','Wah Formant Shift [WAH]','21','Green Scream [DISTORTION]','22',
				  'Plus DS [DISTORTION]','23','One DS [DISTORTION]','24','Muffin [DISTORTION]','25','Mouse [DISTORTION]','2a','Full DC [DISTORTION]','26','Fuzz DS [DISTORTION]',
				  '27','Metal DS [DISTORTION]','20','Kemper Drive [DISTORTION]'];
//var stompEffect = effectsHex.forEach(mapFxName);

var stompArgs = ['A',' 32 ',17,'B',' 33 ', 18,'C',' 34 ',19,'D', ' 35 ',20];  //stomp update in osc outfilter

function findEffect(entry,ind, arr) {
   return entry == arr[ind]; 	
}	

var testval = [1,127]
var collType = ["E-HEAVY","E-CRCL","ACC","BASS"]

var maxFxControls = 36;

var stompTemp,stompIdent,stompFxVal,curFxId,fxKnobFinalValue,stompFxIdent; 
var i,j,knobVal,updateId,textSplitSysex,sysexText;


var multiReqAdr11 = ['/kempBassVol','/kempBassVolText','/kempMidVol','/kempMidVolText','/kempTrebVol','/kempTrebVolText','/kempPresVol','/kempPresVolText','/kempRigVol',
                     '/kempRigVolText','/kempDefVol','/kempDefVolText','/kempPowSagVol','/kempPowSagVolText','/kempPickVol','/kempPickVolText','/kempCompVol','/kempCompVolText',
					 ,'/kempClarVol','/kempClarVolText','/kempTubeShapeVol','/kempTubeShapeVolText','/kempTubeBiasVol','/kempTubeBiasVolText','/kempDirMixVol','/kempDirMixVolText'];	
var outAdrToKemp = ['/kempRigVol','04 01 ','/kempGainVol','0a 04 ','/kempBassVol','0b 04 ','/kempMidVol','0b 05 ','/kempTrebVol','0b 06 ','/kempPresVol','0b 07 ',  
                    '/kempDefVol','0a 06 ','/kempPowSagVol','0a 08 ','/kempPickVol','0a 09 ','/kempCompVol','0a 0a ','/kempClarVol','0a 07 ','/kempTubeShapeVol','0a 0b ',  
                     '/kempTubeBiasVol','0a 0c ','/kempDirMixVol','0a 0f ',
					 '/kempStompA','32 03 ','/kempStompB','33 03 ','/kempStompC','34 03 ','/kempStompD','35 03 ','/kempStomps','04 40 ','/stompASel','32 00 ','/stompBSel','33 00 ', '/stompCSel','34 00 ','/stompDSel','35 00 '];
var inSysexText = ['f0 00 20 33 00 00 03 00 00 01','/kempTextRigname','f0 00 20 33 00 00 03 00 00 02','/kempTextAuthname','f0 00 20 33 00 00 03 00 00 10','/kempTextAmpname',
                    'f0 00 20 33 00 00 01 00 32 00','/kempTextStompAFX','f0 00 20 33 00 00 01 00 33 00','/kempTextStompBFX','f0 00 20 33 00 00 03 00 00 04','/kempTextTemp',
					'f0 00 20 33 00 00 03 00 03 00','/kempTextTemp1'];					 



fxControlVals ={
	
};

//start position in the splitted hex string
fxMultiControlId = {  
   "00 00": [""],
   "00 01": [26,28,30,114,34,18,116,22],  // position one of two hex splits -> manual, peak, pedal range, peak range, pedal mode, mix, ducking, volume
   "00 02": [26,28,30,114,34,18,116,22],
   "00 03": [26,28,30,114,34,18,116,22]   
};	

//hex identifer per fx to update the kemper
fxIdentHex = {
   "00 00": [""],
   "00 01": ["08","09","0a","34","0c","04","35","06"],
   "00 02": ["08","09","0a","34","0c","04","35","06"] ,
   "00 03": ["08","09","0a","34","0c","04","35","06"]    
} || {};
	
fxLabelControl = {
  "00 00": [ "" ],
  "00 01": [ "Manual", "Peak", "Pedal Range", "Peak Range",  "Pedal Mode", "Mix", "Ducking", "Volume" ],
  "00 02": [ "Manual", "Peak", "Pedal Range", "Peak Range",  "Pedal Mode" , "Mix", "Ducking", "Volume" ],
  "00 03": [ "Manual", "Peak", "Pedal Range", "Peak Range",  "Pedal Mode", "Mix", "Ducking", "Volume" ],
  "00 04": [ "Manual", "Peak", "Pedal Range", "Peak Range",  "Pedal Mode", "Mix", "Ducking", "Touch Attack", "Touch Release", "Touch Boost", "Volume" ],
  "00 06": [ "Manual", "Peak", "Pedal Range", "Peak Range", "Pedal Mode", "Spread", "Stages", "Pedal Mode", "Mix", "Ducking", "Touch Attack", "Touch Release", "Touch Boost", "Volume" ],
  "00 07": [ "Manual", "Peak", "Pedal Range", "Peak Range", "Touch Mode", "Mix", "Ducking", "Touch Attack", "Touch Release", "Touch Boost", "Volume"],
  "00 08": [ "Manual", "Peak", "Pedal Range", "Peak Range", "Pedal Mode", "Mix", "Ducking", "Volume" ],
  "00 09": [ "Manual", "Pedal Range", "Pedal Mode", "Mix", "Ducking", "Volume"],
  "00 0a": [ "Manual", "Pedal Range", "Pedal Mode", "Mix", "Ducking", "Volume"],
  "00 0c": [ "Manual", "Pedal Range", "Pitch Shift", "Pedal Mode", "Mix", "Ducking", "Volume" ],
  "00 21": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 22": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 23": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 24": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 25": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 2a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 26": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 27": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 20": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 71": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 72": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 73": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 74": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 11": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 12": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 13": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 14": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 15": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 61": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 62": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 63": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 64": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 65": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 66": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 67": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 31": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 32": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 3a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 41": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 42": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 43": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 47": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 44": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 45": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 46": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 51": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 52": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 53": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 59": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 5b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 01": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 0b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 0d": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 02": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 03": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 04": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 12": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 13": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 14": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 15": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 21": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 24": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 11": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 16": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 17": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 18": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 09": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0c": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 22": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 23": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 25": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 26": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 41": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 32": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 33": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 34": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 35": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 36": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 37": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 40": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 31": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 79": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 7a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 7b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ]
};

var fxStompIdent = {
   "32" : "A",	
   "33" : "B",
   "34" : "C",
   "35" : "D",
   "38" : "X",
   "3a" : "M"
}	

var fxControlsKnobVal = {
   "00 00": [""],
   "00 01": [128,0,10,128,0,10,128,-100,100,128,-100,100,6,0,5,128,0,100,128,-5,5,128,-5,5],  // position one of two hex splits -> manual, peak, pedal range, peak range, pedal mode, mix, ducking, volume
   "00 02": [128,0,10,128,0,10,128,-100,100,128,-100,100,6,0,5,128,0,100,128,-5,5,128,-5,5],
   "00 03": [128,0,10,128,0,10,128,-100,100,128,-100,100,6,0,5,128,0,100,128,-5,5,128,-5,5]   
};	

var fxControlsKnobSetup = {
  "00 00": [0],
  "00 01": [128,0,16383,128,0,16383,128,0, 16383,128,0,16383,6,0,5,128,0,16383,128,0,16383,128,0,16383] ,
  "00 02": [128,0,16383,128,0,16383,128,0, 16383,128,0,16383,6,0,5,128,0,16383,128,0,16383,128,0,16383 ],
  "00 03": [128,0,16383,128,0,16383,128,0, 16383,128,0,16383,6,0,5,128,0,16383,128,0,16383,128,0,16383],
  "00 04": [128,0,16383,128,0,16383,128,0, 16383,128,0,16383,6,0,5,128,0,16383,128,0,16383,128,0,16383,128,0,16383,128,0,16383,128,0,16383 ],
  "00 06": [128,0,16383,128,0,16383,128,0, 16383,128,0,16383,6,0,5,128,0,16383,6,0,5,6,0,5,128,0,16383,128,0,16383,128,0,16383,128,0,16383,128,0,16383],
  "00 07": [128,0,16383, 128,0,16383, 128,0,16383, 128,0,16383, 6,0,5, 128,0,16383, 128,0,16383, 128,0,16383],
  "00 08": [128,0,16383, 128,0,16383, 128,0,16383, 128,0,16383, 6,0,5,128,0,16383, 128,0,16383, 128,0,16383 ],
  "00 09": [ 128,0,16383, 128,0,16383, 6,0,5, 128,0,16383, 128,0,16383, 128,0,16383],
  "00 0a": [128,0,16383, 128,0,16383, 6,0,5, 128,0,16383, 128,0,16383, 128,0,16383],
  "00 0c": [ 128,0,16383, 128,0,16383,73,0,72 , 6,0,5, 128,0,16383, 128,0,16383, 128,0,16383 ],
  "00 21": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 22": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 23": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 24": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 25": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 2a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 26": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 27": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 20": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 71": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 72": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 73": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 74": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 11": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 12": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 13": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 14": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 15": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 61": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 62": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 63": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 64": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 65": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 66": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 67": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 31": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 32": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 3a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 41": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 42": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 43": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 47": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 44": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 45": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 46": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 51": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 52": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 53": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 59": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 5b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 01": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 0b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 0d": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 02": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 03": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 04": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 12": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 13": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 14": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 15": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 21": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 24": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 11": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 16": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 17": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 18": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 09": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 0c": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 22": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 23": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 25": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 26": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 41": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 32": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 33": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 34": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 35": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 36": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 37": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 40": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "01 31": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 79": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 7a": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ],
  "00 7b": [ "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "" ]
	
};	

var stompReqMulti = {
	 "f0 00 20 33 00 00 02 00 32 00" : []
};

var stompReqMultiFxId = {
	1: []
};

//console.log(' fxviscontrol ' + fxVisControl['00 01'][0]); // get of hex effect number '00 01' the first switch, when 0 hide it, when 1 show it


//f0 00 20 33 00 00 01 00 xx xx    singleparameter value in
//f0 00 20 33 02 7f 3c 00 xx xx    singleparamter string in 

//var widgetData = loadJSON('OpenStageControl4reaper_16.json')
//app.on('sessionOpened',function(data,client){
   //receive('/GET',JSON.stringify(widgetData.session.tabs[5].widgets[15].widgets[1].widgets[3]));	
   // receive('/EDIT','collType',JSON.stringify(widgetData))	
//   console.log(' widgetdataaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa ' + widgetData.session.tabs[5].widgets[15].widgets[1].widgets[3].values);
//})

//get values property of kemper/stompPanel/kempStompAFXSel/dummyVisibility  per fx an array which control is activ an visible , the key is x'xx xx' of the fx and the value is [1,1,0...] -> FXKNOB0TO16383_1 and FXKNOB0TO16383_2 is activ  
//Object.keys(widgetData.session.tabs[5].widgets[15].widgets[1].widgets[3].values).forEach(function (key) {
//   var visibleControls = widgetData.session.tabs[5].widgets[15].widgets[1].widgets[3].values;
   //visibleControls['00 01'][0] -> wah wah first control visible ?
   //  var visibleControls = widgetData.session.tabs[5].widgets[15].widgets[1].widgets[3].values[key];
//});	
//console.log(Object.keys(widgetData.session.tabs)['kemper'] + ' ' );
//Object.keys(widgetData.session.tabs[5].widgets[15]).forEach(function (key) {
//   var valuessss = widgetData.session.tabs[5].widgets[15][key];
//   console.log(' key ' + key + ' value ' + valuessss );
//	
//});	

  
  
// convert 33 from a 0-10 range to a 0-16383
// var n = scaleValue(33, [0,16383],[0,10])
function scaleValue(valueToConv, from, to){
	var scale = (to[1] - to[0]) / (from[1] - from[0]);
	var capped = Math.min(from[1], Math.max(from[0],valueToConv)) - from[0];
	return Number(capped * scale + to[0]).toFixed(2);
}


function getKeyByValue(object, value) {
	return Object.keys(object).find(key => object[key] === value);	
}	

function inFilterHelper(inValue,hostType){
	var valSplit9,updateKnobValKemper,valSplitMulti;  //infilter vars
	textSplitSysex = inValue.split(" ");
	updateId = '';
	
	for (i = 0;i < outAdrToKemp.length; i = i + 2) {
	   if (textSplitSysex[8] + ' ' +  textSplitSysex[9] + ' ' == outAdrToKemp[i + 1]) {updateId = outAdrToKemp[i]}
	}	
			 
	console.log('infilterhelper   ' + '#' + textSplitSysex + '#' + updateId + ' host ' + hostType); 
    if((textSplitSysex[4] == '00') && (textSplitSysex[5] == '00') && (textSplitSysex[6] == '01')) {	 // single parameter return 
	    //console.log('###infilterhelper'  + textSplitSysex + 'invalue ');
		knobVal = (parseInt(textSplitSysex[10],16) * 128) + parseInt(textSplitSysex[11],16);
		updateKnobValKemper = 'f0 00 20 33 02 7f 7c 00 ' + textSplitSysex[8] + ' ' + textSplitSysex[9] + ' ' + textSplitSysex[10] + ' ' + textSplitSysex[11] + ' ' + textSplitSysex[12];		
		receive('127.0.0.1','9000',updateId,knobVal);  //update interface value
		if (updateId === '/kempBassVol' || updateId === '/kempMidVol' || updateId === '/kempTrebVol' || updateId === '/kempPresVol') {
    		receive('127.0.0.1','9000',updateId + 'Text', scaleValue(knobVal,[0,16383],[-5,5]) + ' db');  //write decibel as -5 to +5db converted from the decimal value of the 14 bit hex
		} 
       	else if (updateId === '/kempGainVol') {
			receive('127.0.0.1','9000',updateId + 'Text', scaleValue(knobVal,[0,16383],[0,10]));  //write gain as 0 to +10 converted from the decimal value of the 14 bit hex
        }
		else if (updateId === '/kempStomps' || updateId === '/kempStompA' || updateId === '/kempStompB' || updateId === '/kempStompC' || updateId === '/kempStompD' ) {
			receive('127.0.0.1','9000',updateId,textSplitSysex[11] );  //write gain as 0 to +10 converted from the decimal value of the 14 bit hex
        }
		else if (updateId === '/stompASel' || updateId === '/stompBSel' || updateId === '/stompCSel' || updateId === '/stompDSel') {
			//console.log('kempstompafxsel ' + effectsHex[effectsHex.indexOf(textSplitSysex[10])] + ' ' + effectsHex[effectsHex.indexOf(textSplitSysex[11])] + hostType );
            receive('127.0.0.1','9000',updateId, effectsHex[effectsHex.indexOf(textSplitSysex[10])] + ' ' + effectsHex[effectsHex.indexOf(textSplitSysex[11])]); 
		
        }
        else if (updateId === '/kempRigVol'){
		   send('midi', 'UCX1', '/sysex', updateKnobValKemper); //update rig volume, etc. as this is somekind of nonlinear calc just ask per sysex for the string 
		   //send('midi','UCX1','/sysex', volKnobStringUpdate);
		}			
			
    } else if((textSplitSysex[4] == '02') && (textSplitSysex[5] == '7f') && (textSplitSysex[6] == '3c')) {
		valSplit9 = inValue.split(" ").slice(9).map(x=>parseInt(x,16));
		textSplitSysex = valSplit9.slice(1).map(x=>String.fromCharCode(x));
		console.log('string empfang ' + textSplitSysex + ' updateid ' + updateId); 
		textSplitSysex.pop();
		textSplitSysex.shift();
		textSplitSysex.shift();
		receive('127.0.0.1','9000',updateId + 'Text',textSplitSysex.join(""));  //write decibel rigvol
	} else {
		console.log('xxxxxxxxxxxxxxxxx ' + inValue );
	}	
}

function outFilterHelper(addressOut,argsValue){
   var volKnobUpdateKemper,volKnobStringUpdate;
	updateId = '';
	
	for (i = 0;i <= outAdrToKemp.length; i = i + 2) {
	   if (addressOut == outAdrToKemp[i]) {updateId = outAdrToKemp[i + 1]}
	}
    
 	volKnobUpdateKemper =  'f0 00 20 33 02 7f 01 00 ' + updateId + (argsValue & 0x7f).toString(16).padStart(2,'0') + ' ' + ((argsValue >> 7) & 0x7f).toString(16).padStart(2,'0') + ' f7';		
	volKnobStringUpdate = 'f0 00 20 33 02 7f 7c 00 ' + updateId + ((argsValue >> 7) & 0x7f).toString(16).padStart(2,'0') + ' ' + (argsValue & 0x7f).toString(16).padStart(2,'0') + ' f7';
    console.log('outfilterhelper ' + addressOut + ' ' + updateId + ' ' + volKnobStringUpdate);
	    
	 
	if (addressOut === "/kempStompA" || addressOut === "/kempStompB" || addressOut === "/kempStompC" || addressOut === "/kempStompD" || addressOut === "/kempStomps") {
	   volKnobUpdateKemper =  'f0 00 20 33 00 00 01 00 ' + updateId + (argsValue & 0x7f).toString(16).padStart(2,'0') + ' ' + ((argsValue >> 7) & 0x7f).toString(16).padStart(2,'0') + ' f7';
	}
	else if (addressOut === '/kempBassVol' || addressOut === '/kempMidVol' || addressOut === '/kempTrebVol' || addressOut === '/kempPresVol'){ //update volume text in interface
		receive('127.0.0.1','9000',addressOut + 'Text', scaleValue(argsValue,[0,16383],[-5,5]) + ' db');      	
	} else if (addressOut === '/kempGainVol' ) {                                                                                                                                  //update gain volume scale is 0 - 10
		receive('127.0.0.1','9000',addressOut + 'Text', scaleValue(argsValue,[0,16383],[0,10]));
	} else if (addressOut === '/kempRigVol' ) {                                                                                                                                  //update gain volume scale is 0 - 10
		//send('midi','UCX1','/sysex', volKnobStringUpdate);                                    // request string of rig volume from kemper
	}
	if (updateId != '') {                                                                                                                        //update kemper  
	    console.log('rigvolknob#############' + volKnobUpdateKemper + '####' + argsValue);
    	send('midi','UCX1','/sysex',volKnobUpdateKemper);
        if (addressOut === '/kempRigVol') { send('midi','UCX1','/sysex', volKnobStringUpdate); }   		
	}	
	
}	


module.exports = {
	
	init: function() {
		
	},	
	
    oscOutFilter: function(data) {

        var {address, args, host, port} = data
		
		var outArgs = args.map(x=>x.value),
			outArgs = [],
			outAction = '',
			testout;
		
		
        console.log('outfilter: colltype: ' + '#' +  ' value  ' + args[0].value + '###' );	
		
		if (address.substring(0,10) === '/kempFxDet'){    //set the values global when clicking on fx details
			stompIdent = address.substring(10,11);                             
			
			stompFxIdent = args[0].value;
			//receive('/FXKNOB_1/showFxControls','A',1);
		   //todo show all knobs and labels the fx is known
		    console.log('stompident ' + stompIdent + ' stompfxindent ' + stompFxIdent );
		   	j = 0;  // counter for steps, min and max
			for(i = 0; i < maxFxControls; i ++) {
				
                if (i <  fxLabelControl[args[0].value].length && args[0].value !== '00 00') {      //set labels show the knobs
			    console.log('  fxControlsKnobSetup[args[0].value][1] ' +  fxControlsKnobSetup[args[0].value][j] + ' j ' + j + ' ' + fxControlsKnobSetup[args[0].value][j + 1]);	
               receive('/FXKNOB_' + i + '/showFxControls',stompIdent,1);               //every label has a knob so show them 
			   //receive('/FXKNOBVAL_' + i + '/showFxControls',stompIdent,fxVisControl[args[0].value][i]);               //show or hide value field of the knobs
			   //receive('127.0.0.1','9000','/FXKNOBVAL_0',stompident, i);    //print the value of the knobs 
			   receive('/FXKNOB_' + i + '/showFxControlsHtmlLabel', stompIdent , '<h6 style="color:red;text-align:center;"> ' + fxLabelControl[args[0].value][i] + ' </h6>');  //set html property of knob		
			   receive('/FXKNOB_' + i + '/showFxControlsSteps',stompIdent,fxControlsKnobSetup[args[0].value][j]); 
			   receive('/FXKNOB_' + i + '/showFxControlsRange',stompIdent,'{ "min": ' + fxControlsKnobSetup[args[0].value][j + 1] + ',"max":' + fxControlsKnobSetup[args[0].value][j + 2] + '}');
			   } else {                                       // hide the rest and default it
			       receive('/FXKNOB_' + i + '/showFxControls',stompIdent,0);
                   receive('/FXKNOB_' + i + '/showFxControlsHtmlLabel', stompIdent,'');
				   receive('/FXKNOB_' + i + '/showFxControlsSteps',stompIdent,128); 
			       receive('/FXKNOB_' + i + '/showFxControlsRange',stompIdent,{ "min": 0,"max": 16383});
			   }	
			   j = j + 3;
			}	
		   
		} 
		
		if (address.substring(0,8) === '/FXKNOB_'){
			//stompFxIdent = args[1].value;
			//stompIdent = address.substring(8,9);
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 01 00' + stompArgs[stompTemp] + '00 ' +  args[0].value + ' f7'); 
		   	console.log('fxknob_0 ################' + stompFxIdent + '#' + stompIdent + '#' + 'getKeyByValue(fxStompIdent,stompIdent) ' + getKeyByValue(fxStompIdent,stompIdent) + '#' + address.substring(8,9) + '#'  + args[0].value + '#' );
            console.log((args[0].value & 0x7f).toString(16).padStart(2,'0') + ' ' + ((args[0].value >> 7) & 0x7f).toString(16).padStart(2,'0') + ' f7');
			// todo update values on the knobs when using on the touch screen 
			
	        send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 01 00 ' +  getKeyByValue(fxStompIdent,stompIdent) + ' ' + fxIdentHex[stompFxIdent][address.substring(8,9)] +  (args[0].value & 0x7f).toString(16).padStart(2,'0') + ' ' + ((args[0].value >> 7) & 0x7f).toString(16).padStart(2,'0') + ' f7');
 
 }	
		if (address === '/control'){
			
		}	
		
		if (address.substring(0,6) === '/stomp') {   // preselect stomps 
		     console.log('stopmaselllllllllll ' + address + '#' + '#' + args[0].value + '#' + args[0].type + '#' +  fxControlsKnobSetup[1]);
			 stompIdent = address.substring(6,7);
			   
			//receive('/FXKNOBVAL_0/showFxControls',stompIdent,0);   
			//receive('/FXKNOB_1/showFxControlsSteps',stompIdent,{ "min": 1004 ,"max":1600}); 
			//receive('/FXKNOB_1/showFxControlsSteps',stompIdent,4);
			
			
			//receive('/FXKNOB_1/showFxControlsSteps',stompIdent,6);     // set range according to array fxControlsKnobSetup
			//receive('/FXKNOB_1/showFxControlsRange',stompIdent,'{ "min": ' + 0 + ',"max":' + 5 + '}'); // set min and max according to array fxControlsKnobSetup
			
		
		  
			 stompTemp = stompArgs.indexOf(address.substring(6,7)) + 1; 
		    console.log('stompargs index ' + '#' + stompTemp + '#' + stompArgs[stompTemp] + '#' + args[0].value + ' i ' + i); 
				
  		    if (args[0].value !== '00' && args[0].value !== 'undefined' ) {   // value of the effects of stomp a to d value '00' means off
                send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 01 00' + stompArgs[stompTemp] + '00 ' +  args[0].value + ' f7');  //first select the effect			
     			send('midi', 'UCX1', '/control', 1, stompArgs[stompTemp + 1], 1);                                                //after that turn on the stomp
			} else {
			   send('midi', 'UCX1', '/control', 1,stompArgs[stompTemp + 1], 0);                                                 //turn off the stomp   
			   send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 01 00' + stompArgs[stompTemp] + '00 ' +  args[0].value + ' f7');                      // remove effect by setting it to 'off'
			}	
			return;
			
		}	
		if (address.substring(0,5) === '/kemp') { 
		    console.log('vor outfilter ' + address + '#' + '#' + args[0].value); 
			outFilterHelper(address,args[0].value);
			return;
			//return {address, args, host, port};
		}	

		
		if (address === '/program') {
			//console.log('programm changeeeeeeeeeeeeeerrrrrrrrreeeeerrrrrrr ' + args[0].value ); 
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 04 f7');   //req string for how its profile info
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 05 f7');   //req string for your user
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 04 f7');   //kempTextTemp
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 03 00 f7');   //kempTextTemp1
			// request desired values and strings when changing the rig
			
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 01 f7');   //req string for current rig name
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 02 f7');   //req string for current author name			
            //send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 43 00 00 10 f7');   //req string for amp description						
			//send('midi','UCX1','/sysex', 'f0 00 20 33 02 7f 41 00 0a 04 f7');  //req single parameter gain vol
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 04 01 f7');  //req single parameter rig vol
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 32 00 f7');  //req single parameter stomps A type
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 32 03 f7');  //req single parameter stomps A on/off
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 33 00 f7');  //req single parameter stomps B type
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 33 03 f7');  //req single parameter stomps B on/off
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 34 00 f7');  //req single parameter stomps C type
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 34 03 f7');  //req single parameter stomps C on/off
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 35 00 f7');  //req single parameter stomps D type
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 35 03 f7');  //req single parameter stomps D on/off
			
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 41 00 0a 02 f7');  //req single parameter Amps on / off
			
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 0a 00 f7');  //req multi parameter Amplifier 
			
			//send('midi','UCX1','/sysex','f0 00 20 33 02 7f 41 00 04 40 f7');  //req single parameter stomps
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 0b 00 f7');  //req multi parameter adr. 11 
			
			////////////////////////////////////////////////////////////////////////////////////////////////////////
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 04 00 f7');  //req multi parameter RIG
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 09 00 f7');  //req multi parameter INPUT
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 0a 00 f7');  //req multi parameter Amplifier
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 0b 00 f7');  //req multi parameter Equalizer
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 0c 00 f7');  //req multi parameter Cabinet
			send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 32 00 f7');  //req multi parameter Stomp A
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 33 00 f7');  //req multi parameter Stomp B
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 34 00 f7');  //req multi parameter Stomp C
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 35 00 f7');  //req multi parameter Stomp D
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 38 00 f7');  //req multi parameter Stomp X
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 3a 00 f7');  //req multi parameter Stomp Mod
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 3c 00 f7');  //req multi parameter Stomp Delay
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 4B 00 f7');  //req multi parameter REverb
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 7d 00 f7');  //req multi parameter System 1
			//send('midi', 'UCX1', '/sysex', 'f0 00 20 33 02 7f 42 00 7f 00 f7');  //req multi parameter System 2
			
			//return;
			return {address, args, host, port};
		}			
		else if (address === '/sysex'){

		}else {
		   console.log('otherwise return default');		
		   return {address, args, host, port};
        }  		
    },

    oscInFilter: function(data) {

        var {host, port, address, args} = data     			 
        
		var inArgs = args.map(x=>x.value),
			outArgs = [],
			action = '';
		
		if (address === '/stompASel'){
				
		}	
		if (address.substring(0,7) === '/FXKNOB') {
			console.log('innnnn ' + address);
		    receive('/FXKNOB_1/showFxControls','A',1); 	
		}	
		if (address === '/sysex'){
			var [value] = inArgs;
	        console.log('infilter sysexxxxxxxxxxx ' + value + '###' + inSysexText[0] + '###' + host);   	
			// f0 00 20 33 00 00 03 00 00 xx
     		//for(i = 0; i < inSysexText.length;i = i + 2) {  //parse incoming sysex strings for display as text, id must start with '/kemptext' 
			 //  	sysexText = inSysexText[i + 1];
			//	if (sysexText.substring(0,9) === '/kempText' && value.includes(inSysexText[i])) {
			//	   	valSplit9 = value.split(" ").slice(9).map(x=>parseInt(x,16));
			//		textSplitSysex = valSplit9.slice(1).map(x=>String.fromCharCode(x));
			//		textSplitSysex.pop();
			//	    receive('127.0.0.1','9000',sysexText,textSplitSysex.join(""));
			//		break;
			//	}			 
			//}	
			if (value.includes("f0 00 20 33 00 00 01 00 ") )    {         // singleparameter 
				inFilterHelper(value,host);		
             //   return;  				
			} 
			else if (value.includes("f0 00 20 33 02 7f 3c 00 ")) { // singleparameter rigvol as string
			   	inFilterHelper(value,host);
			}
					
			if (value.includes("f0 00 20 33 00 00 02 00 0b")) { // multiparameter in eq. address apge 11
               	valSplitMulti = value.split(" ");
				for (i = 0;i <= multiReqAdr11.length; i = i + 2 ){
				   knobVal = (parseInt(valSplitMulti[i + 18],16) * 128) + parseInt(valSplitMulti[i + 19],16);	
				   //console.log(' multiiiiiiiiiiiiiii knobval ' + knobval);
				   receive('127.0.0.1','9000',multiReqAdr11[i],knobVal);
				   receive('127.0.0.1','9000',multiReqAdr11[i + 1], scaleValue(knobVal,[0,16383],[-5,5]) + ' db');
				}		
						
			} 
			else if (value.includes("f0 00 20 33 00 00 02 00 0a")) {
				valSplitMulti = value.split(" ");
			    for (i = 0;i <= multiReqAdr11.length; i = i + 2 ){
				   knobVal = (parseInt(valSplitMulti[i + 18],16) * 128) + parseInt(valSplitMulti[i + 19],16);	
				   //console.log(' multiiiiiiiiiiiiiii knobval ' + knobVal + ' i ' + i + ' multiReqAdr11 ' + multiReqAdr11[i] );
				   receive('127.0.0.1','9000',multiReqAdr11[i],knobVal);
				   receive('127.0.0.1','9000',multiReqAdr11[i + 1], scaleValue(knobVal,[0,16383],[-5,5]) + ' db');
				}		
			}	
			//catch the multireq of stomps FX, convert the values to values like shown on kemper print these values and set the knob to the correct position
		    else if (value.includes("f0 00 20 33 00 00 02 00 32 00") || value.includes("f0 00 20 33 00 00 02 00 33 00") || value.includes("f0 00 20 33 00 00 02 00 34 00") ||    
			         value.includes("f0 00 20 33 00 00 02 00 35 00") || value.includes("f0 00 20 33 00 00 02 00 39 00") || value.includes("f0 00 20 33 00 00 02 00 3a 00")) {
				valSplitMulti = value.split(" ");
				stompIdent = fxStompIdent[valSplitMulti[8]];  // check stomp from hexval at pos 8
				curFxId = valSplitMulti[10] + ' ' + valSplitMulti[11]; //four hex chars define the fx id according to kemper response
				console.log('testttttttt on or off ' + valSplitMulti[12] + '#' + valSplitMulti[13]);	
				j = 0;
			   receive('127.0.0.1','9000','/stomp' + stompIdent + 'Sel', valSplitMulti[10] + ' ' + valSplitMulti[11] );    // set stomp[x]Sel widget 		
			   if (valSplitMulti[11] === '00') {  // if off is sent turn of the stomp button, otherwise turn it on
				   receive('127.0.0.1','9000','/kempStomp' + stompIdent , 0 );     		
			   } else {
				   receive('127.0.0.1','9000','/kempStomp' + stompIdent , 1 );  
			   }	   
    			for (i = 0; i < fxMultiControlId[curFxId].length; i++ ) {
					stompTemp = fxMultiControlId[curFxId][i];  // starting position of hex string 
	                knobVal =   (parseInt( valSplitMulti[stompTemp],16) * 128) + parseInt( valSplitMulti[stompTemp + 1],16);
    				//console.log('testttttttttfinallll ' + knobVal + '#' + scaleValue(knobVal,[fxControlsKnobSetup[curFxId][j + 1],fxControlsKnobSetup[curFxId][j + 2]],[fxControlsKnobVal[curFxId][j + 1],fxControlsKnobVal[curFxId][j + 2]]));               
					fxKnobFinalValue = scaleValue(knobVal,[fxControlsKnobSetup[curFxId][j + 1],fxControlsKnobSetup[curFxId][j + 2]],[fxControlsKnobVal[curFxId][j + 1],fxControlsKnobVal[curFxId][j + 2]]);
					receive('127.0.0.1','9000','/FXKNOB_' + i,'A', knobVal );
					receive('127.0.0.1','9000','/FXKNOBVAL_' + i,'A', fxKnobFinalValue );
				  j = j + 3;
				}	
				
			    //console.log('stompaaaaaa type ' + valSplitMulti[10] +  valSplitMulti[11] + ' mix ' + valSplitMulti[18] + valSplitMulti[19] + ' volume ' + valSplitMulti[22] + valSplitMulti[23] 
				//             + ' wah manual ' + valSplitMulti[26] + valSplitMulti[27]  + ' peak ' + valSplitMulti[28] + valSplitMulti[29] + ' range ' + valSplitMulti[114] + valSplitMulti[115]
				//			 + ' pedal mode ' + valSplitMulti[34] + valSplitMulti[35] + ' ducking ' + valSplitMulti[116] + valSplitMulti[117] + '#' + stompIdent);	   
			
			}	
		 
		    
		
		}

          		
        //return;  
		return {address, args, host, port};
    }


}
