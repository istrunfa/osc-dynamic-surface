# Return Switches to Unselected State in Modal

When opening a modal with switches, it is desired that none of the switches retain a previous selection and all appear unselected. However, after the first opening, the switches maintain their last selected values.

## Solution

To ensure that switches return to an unselected state each time the modal is opened, you can utilize the modal’s `scripts` property to reset the switch values. Here’s how to implement it:

1. Use the following script to set the switch values to a default state when the modal opens:

   ```javascript
   if (value === 1) {
       set("switch_id", "default_value");
   }
   ```

2. If you need to reset multiple switch IDs simultaneously, you can use a block statement to group the `set()` calls:

   ```javascript
   if (value === 1) {
       set("switch_id1", "default_value");
       set("switch_id2", "value 2");
       set("switch_id3", "default_value");
   }
   ```

This approach ensures that the switches are reset to their default values each time the modal is opened, preventing any previous selections from being retained.

# Setting Dropdown Values with OSC in Open Stage Control

## Problem Description
Users may encounter issues when attempting to dynamically set the values of a dropdown menu using OSC messages. Specifically, there is confusion regarding the use of the `send()` function within the context of dropdown value properties, leading to errors such as "send is not defined." Additionally, users may struggle with correctly formatting the values for the dropdown based on OSC responses.

## Solution
1. **Understanding `send()` Limitations**: The `send()` function can only be called from scripting properties, not directly within the dropdown values property. 

2. **Setting Dropdown Values**: To set dropdown values using a loop, you can use the following JavaScript code snippet:
   ```javascript
   var values = {};
   for (var i = 0; i < 5; i++) {
       values['test ' + i] = i;
   }
   return values;
   ```

3. **Using OSC to Retrieve Names**: If you need to retrieve names from OSC and set them as dropdown values, you can create a variable matrix to store these values. Here’s a suggested approach:
   - Define a variable matrix to receive OSC messages with the correct address format.
   - Use a loop to populate the dropdown values:
   ```javascript
   var n_values = OSC{/global/project/adm/obj/count} || 16;
   var values = {};
   for (var i = 0; i < n_values; i++) {
       var name = get('name_' + (i + 1));
       values[name] = i;
   }
   return values;
   ```

4. **Handling Undefined Functions**: If you encounter "get is undefined," ensure that you are using it in the correct context. The `get()` function should be used to retrieve values from the variable matrix that you have defined.

5. **Concatenation in OSC**: Note that you cannot use JavaScript concatenation within the `OSC{}` block. Instead, prepare your OSC addresses using a variable matrix as described above.

By following these guidelines, you can effectively set dropdown values based on OSC messages in Open Stage Control.

[Attachment: dropdownValues.json]

[Attachment: ymzWS6vbEWksqg7f2nTcUcsTc4H.json]

[Attachment: dBdxtHrxo0hwoxOtwXBQUC9NgNc.json]

[Attachment: gtVAwzwu6err7XXkyRHggzoxeTH.json]

# Fader Value Label Scaling

## Problem Description
A user wants to display a fader's value on a text label, scaling the MIDI fader's output range of 1-127 to a display range of 0-99. The challenge is to implement the necessary calculation within Open Stage Control.

## Solution
To achieve the desired scaling, you can use the following JavaScript code in the 'value' section of the text widget:

```javascript
JS{{
var val = @{fader_Name}
return Math.round(val / 127 * 99)
}}
```

This script takes the fader value, divides it by 127 (the maximum MIDI value), and multiplies it by 99 to scale it down to the desired range. The `Math.round` function ensures the result is a whole number.

For additional reference, you can look at the attached example files:
- [Attachment: tqiuCVRVkTLDWBfqsPHKoeC4mke.json]
- [Attachment: uliq9fjIwxJT2F63NuHPA5G6gI3.json] 

If you simply want to display the fader value without scaling, create a text widget with the same name as the fader. This will automatically show the fader's current value.

# Node Implementation Not Firing a Message on Button Click to oscOutFilter in Custom Module

**Problem Description:**
A button configured with `mode: tap` and `id: oblique_get` is not sending messages to `oscOutFilter` when tapped in Open Stage Control running on Raspberry Pi 5. This functionality worked previously on Windows 10, but is not functioning in the new environment.

**Solution:**
To ensure the button correctly sends messages to the `oscOutFilter`, follow these steps:

1. **Set the Target Property:**
   - Ensure the button has a target property defined. For internal messaging, use:
     ```javascript
     target: "custom:module"
     ```
   - This allows the message to be processed within the custom module.

2. **Configure Address and PreArgs:**
   - Set the address and preArgs as needed. For example:
     ```javascript
     address: "auto",
     preArgs: [1, 1]
     ```
   - If preArgs are not set, warnings may occur.

3. **Handle the Message in the Custom Module:**
   - In your custom module, ensure you handle the incoming message appropriately. For example:
     ```javascript
     module.exports = {
         oscOutFilter: function(data) {
             console.log(data);
             if (address === '/oblique_get') {
                 console.log('In Oblique');
                 receive('/modal_oblique', { type: 'f', value: 1 });
                 var obliqueList = this.getObliqueList(); 
                 var item = obliqueList[Math.floor(Math.random() * obliqueList.length)];
                 receive('/oblique/set', { type: 'i', value: item });
             }
         }
     }
     ```

4. **Stop the Message:**
   - To prevent further processing, include an empty return statement in the custom module to "swallow" the message.

By following these steps, the button should function correctly in the new environment, allowing messages to be sent to `oscOutFilter` as intended.

# Sending a NOTE_ON Message with Velocity 0 on APCKey25

## Problem Description
When attempting to send a MIDI message to turn off a button on the APCKey25 using Open Stage Control (OSC), sending a `NOTE_ON` message with a velocity of 0 results in OSC automatically converting it to a `NOTE_OFF` message. This behavior prevents the button from turning off as expected.

## Solution
To send a `NOTE_ON` message with a velocity of 0 without OSC converting it to a `NOTE_OFF`, you can use a raw MIDI message. The following command can be used:

```javascript
send('midi:port', '/sysex', '90 3C 00')
```

In this command:
- `90` indicates a `NOTE_ON` message for channel 1.
- `3C` is the note value (in this case, note 60).
- `00` is the velocity (0).

### Important Notes:
- Remove the content of the `typeTags` property when sending the raw message, as sending integers is not necessary; values are automatically converted when sending MIDI.
- Ensure there are no spaces between letters in the `typeTags` property.

This method allows you to effectively control the button light on the APCKey25 as intended. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: image4.png]  
[Attachment: image5.png]  
[Attachment: image6.png]  
(attachment reference missing)

# How to Add Padding on CSS Background-color

When defining a background color for an image in CSS, the normal padding may not apply as expected, causing inconsistencies in button sizes.

## Solution

1. **Apply Background to the Label Element**: Instead of applying the background color directly to the button, apply it to the `label` element. Use the following CSS rule:

   ```css
   label {
     background: /* your background settings here */;
   }
   ```

   Ensure that the `label` property is set to `true` so that the background can be displayed.

2. **Using colorWidget Property**: If applicable, consider using the `colorWidget` property to define the widget's color, which is specifically designed for this purpose.

3. **Hiding Text**: If you want to hide the text on the button, you can either:
   - Add a space in the `label` property.
   - Use the following CSS rule to set the font size to zero:

   ```css
   label {
     font-size: 0;
   }
   ```

4. **Creating a Theme File**: For multiple buttons styled similarly, create a theme file and extend the icon set as described in the Open Stage Control documentation.

[Attachment: Bildschirmfoto 2022-01-30 um 13.17.33 1680×564 59.1 KB]  
[Attachment: Bildschirmfoto 2022-01-30 um 14.31.48 2124×696 122 KB]  
[Attachment: Bildschirmfoto 2022-01-30 um 15.10.26 1814×556 52.2 KB]

# Setting Dropdown Values via OSC and Parsing Time Format

## Problem Description
Users may encounter issues when trying to set dropdown menu values in Open Stage Control (OSC) using OSC strings. Specifically, when sending a JSON-like string, the values may not be parsed correctly, leading to unexpected formats. Additionally, users may need to parse elapsed time strings into a more readable format.

## Solution

### Setting Dropdown Values
To set dropdown values correctly using OSC, ensure that the OSC string is formatted properly. For example, if you want to send a list of cues, the OSC string should look like this:

```
"{'Cue1':1, 'Cue2':2}"
```

In the dropdown's `values` property, use the following syntax to receive the message:

```
OSC{/list}
```

If you receive the values in an array format (e.g., `['one:', 1, 'two:', 2]`), you can convert it to an object using the following JavaScript code:

```javascript
var qlab_values = OSC{/list} || [];
var values = {};
for (var i = 0; i < qlab_values.length; i += 2) {
  values[qlab_values[i]] = qlab_values[i + 1];
}
return values;
```

### Parsing Elapsed Time
To convert an elapsed time string (e.g., `0,268961` seconds) into a time format (mm:ss), use the following JavaScript code:

```javascript
var time_in_seconds = parseInt(OSC{/time_elapsed});
return new Date(1000 * time_in_seconds).toISOString().substr(11, 5);
```

This will format the time correctly for display.

By following these guidelines, you should be able to effectively set dropdown values and parse time formats in Open Stage Control.

# Change Widget State Without Triggering OSC Output

**Problem:**
Is it possible to change a widget's state with an OSC message without triggering its own OSC output?

**Solution:**
Sending an OSC message to a widget's address will not cause it to send its own OSC message unless a reply mechanism is set up using a custom module. Additionally, if the new value triggers an `onCreate` script that includes `send()` calls, it may result in OSC output. To avoid this, ensure that the widget's configuration does not include such scripts or reply mechanisms.

# Fader Widget MIDI In

**Problem Description:**
Users want to send MIDI messages from their DAW (Cubase) to a fader widget in Open Stage Control (OSC) to reflect adjustments made in Cubase on the OSC interface.

**Solution:**
To achieve bi-directional communication between Cubase and OSC, ensure that Cubase's VST Quick Controls are configured to send and receive MIDI messages on the same channel. This allows OSC to detect the messages sent back from Cubase.

1. In Cubase, go to the **Studio Setup** window.
2. In the **MIDI Port Setup**:
   - For **Input**: Select `OSC midictrl`, ensure it is visible and active.
   - For **Output**: Select `OSC midictrl`, ensure it is visible and active.
3. In the **Track Quick Control** settings:
   - Set **MIDI Input** to `OSC midictrl`.
   - Set **MIDI Output** to `OSC midictrl`.
   - Configure Quick Control 1 with:
     - Channel: 1
     - Address: 50
     - Max: 127
     - Flags: Receive, Transmit

This configuration will allow the fader widget in OSC to update in response to changes made in Cubase.

(attachment reference missing)

# Set OSC Options from Custom Module

## Problem Description
The user seeks to set OSC options, specifically the MIDI input list, from a custom module in Open Stage Control. The current workflow involves stopping OSC, running an external script to reorder the MIDI list, and then pasting the new list back into OSC, which is inefficient.

## Solution
It is not possible to set server options directly from the custom module. However, you can enhance your configuration by using port names instead of port numbers. This approach makes your setup more resilient to changes in the device list. 

You can specify the MIDI input and output ports as either port numbers or strings. If you use a string, Open Stage Control will select the first port whose name contains the specified string (case-insensitive). 

Refer to the MIDI configuration section in the Open Stage Control documentation for more details. 

[Attachment: filename.ext]

# Menu Issue: Menus Reset When Second Client Loads

**Problem Description:**
When loading a GUI in multiple clients using the same JSON configuration, the menu widgets reset to default values in the second client, while the first client retains its settings. This issue causes all buttons to toggle to the 'on' position in the second client, disrupting the intended functionality. The problem persists despite attempts to clear address and target fields, and setting the `bypass` property to `true` does not resolve the issue of syncing between clients.

**Solution:**
The root cause of the problem is that all menu widgets share the same address or `preArgs`, which leads to synchronization issues across clients. To resolve this:

1. **Assign Unique Addresses or PreArgs:**
   - Ensure that each menu widget has a distinct address or `preArgs`. This will prevent them from syncing across clients.

2. **Use Bypass Property:**
   - If you want to maintain synchronization of menu values across clients, do not set the `bypass` property to `true`. However, if you need to prevent synchronization, you can set `bypass` to `true`, but this will require unique addresses or `preArgs` for each menu.

3. **Modify OnValue Script:**
   - Consider adding a condition in the `onValue` script to check the source of the event. For example:
     ```javascript
     if (!event.fromSync) {
         // Your existing logic here
     }
     ```
   This will help manage how the script responds based on whether it was triggered by a sync event or a manual change.

For further assistance, refer to the attached demo file for a simplified version of the session: [Attachment: hb957dbCcXiHyfJLEzcf6tmLdCC.json].

# Implication Organ

## Problem Description
A user has created a GUI frontend for a Csound instrument called the Implication Organ, which runs on a Raspberry Pi using Open Stage Control (O-S-C). The user transitioned from using Lemur for the UI to O-S-C, appreciating its compatibility with any device that has a compliant browser and its use of JavaScript and JSON.

## Solution
The project can be accessed through the following links:
- Project repository: [Implication Organ GitHub Repository](https://github.com/DaveSeidel/music-src/tree/master/implication-organ)
- O-S-C project file: [implication_organ.json](https://github.com/DaveSeidel/music-src/blob/master/implication-organ/open-stage-control/implication_organ.json)

Additionally, a JSON file related to the project is available for download: [Attachment: implication_organ_1.json].

# Can a Push Button Open a Tab?

**Problem Description:**
Users want to know if a push button can open a tab or if a tab can execute a push command to send a specific OSC command before interacting with the tab content.

**Solution:**
A tab container's value determines the index of the opened tab. You can set this value using a script or use it to trigger another script. 

To monitor which tab is opened in the main container (id=root), create a script with the following setup:

1. Set the value to `@{root}`.
2. Set the script property to:

   ```javascript
   JS{{
   if (value == 0) {
     // 1st tab
     // do something
   } else if (value == 1) {
     // 2nd tab
     // do something else...
   }
   }}
   ```

Note: It is no longer necessary to use a script widget; the container's script property can be used directly.

# Applying Math Formula to Incoming OSC Value to Translate Float

**Problem Description:**
To convert an incoming float value (0.00 - 1.00) for BPM from Resolume into a BPM number by multiplying the float by 500 (where 0 corresponds to 0 BPM and 1 corresponds to 500 BPM), a formula needs to be applied to the incoming OSC value.

**Solution:**
1. Use a script widget and a text widget.
2. Configure the script widget’s OSC-related properties to receive the float value.
3. Set the script property of the script widget to:
   ```javascript
   set("text_widget_id", value * 500)
   ```

This will effectively translate the incoming float value into the desired BPM number.

# Help With Simple Scripting Behavior

## Problem Description
A user is trying to implement a script in Open Stage Control that compares two text indicators and updates a third indicator based on their equality. Additionally, if the indicators are not equal, the user wants to change the color of both compared indicators to red.

## Solution
To achieve the desired behavior, the user can utilize the `setVar` function in conjunction with the `VAR{}` syntax for the `colorWidget` property of the text widgets. Here is how to implement it:

1. Use the following script to compare the two indicators and update the third:
   ```javascript
   if (get('ableton_section_a') == get('ableton_section_b')) {
       set('sync_status', 'Sessions In Sync!');
   } else {
       set('sync_status', 'Sessions Out Of Sync!');
       setVar('ableton_section_a', 'color', 'red'); // Change to red
       setVar('ableton_section_b', 'color', 'red'); // Change to red
   }
   ```

2. The `color` variable can accept any valid CSS color format, including:
   - Named colors (e.g., 'red')
   - Hexadecimal strings (e.g., `#ff0000`)
   - RGB values (e.g., `rgb(255,0,0)`)

This approach allows for dynamic color changes based on the comparison results.

# Script Widget: Using Default --send IP:Port in send() Function

**Problem Description:**
When using the Script widget in Open Stage Control, there is a need to reference the IP:Port specified with the `--send` argument during launch in the `send()` function. The desired syntax is:
```javascript
send(@{default_send}, "/oscaddress", "myvalue");
```
However, the correct method to reference the default send address is unclear.

**Solution:**
To use the default IP:Port specified with the `--send` argument in the `send()` function, set the first argument to `false`. This will allow the function to utilize the script widget’s own target, which is extended with the server’s targets by default. 

Example usage:
```javascript
send(false, "/oscaddress", "myvalue");
```

# Sending OSC Commands with Menu Selection

**Problem:**
How to send an OSC command when selecting a value from a menu in Open Stage Control.

**Solution:**
To send an OSC command upon selecting a menu value, set the address property of the menu to the desired OSC path. For example, use `/foo/boo` in the address property. The selected value will be sent as an OSC command when an entry is chosen from the menu.

# Round Value at Center Position and Input Saved with Templates

## Problem Description
1. A MIDI knob's value ranges from 0.10 to 2.00, with the center position (64) corresponding to 1.01 instead of 1. The user seeks a solution to adjust the value mathematically.
2. The user wants to dynamically set the MIDI channel using an input widget and wishes to save this setting with templates.

## Solution
1. To adjust the MIDI knob value, a script can be used to scale the value appropriately. The proposed solution is as follows:
   ```javascript
   var result = val < 64 ? 
   (val / 64 * 0.9 + 0.1) : 
   ((val - 64) / 63 + 1);
   ```
   This script effectively maps the knob value to the desired range.

2. For saving the MIDI channel setting, you can utilize the browser's local storage. However, note that this method does not save the setting in the session file. Alternatively, you can save and load settings to/from a JSON file using a custom module. For more information on local storage, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/#storage).

# How to Access Matrix Values from Child Element

When attempting to replicate a matrix example from an older version of Open Stage Control, users may encounter issues with accessing values for child elements.

## Problem Description
The matrix does not hold values directly, and using the `value` property may not yield the expected results. Users may be confused about how to assign different names to buttons within the matrix.

## Solution
Instead of using the `value` property, define the `props` property using JavaScript syntax. Here’s a reliable method to achieve this:

```javascript
JS{
var props = {}

var labels = ['a', 'b', 'c']
props.label = labels[$]

return props
}
```

This approach allows you to dynamically assign labels to buttons based on their index in the matrix.

# Custom Module Filtering Incoming OSC from Unreal to Match Client ID

**Problem Description:**
The user is attempting to display data specific to each client in the `thrustFwdReport` text widget after processing OSC messages from Unreal. The goal is to ensure that each client receives only their respective score based on their button press timing. However, the current implementation updates all clients instead of filtering the messages to individual clients.

**Solution:**
To ensure that OSC messages are sent to a specific client, the following approach should be used:

1. **Use `receive()` Function**: Instead of allowing messages to pass through the `oscInFilter`, utilize the `receive()` function to send messages directly to the intended client. This prevents the original message from being broadcasted to all clients.

   ```javascript
   if (conditions_are_met) {
       receive(data.address, args[0], { clientId: single_client_id });
       return; // Prevent the original message from passing through
   }
   ```

2. **Use Incoming Client ID**: Instead of relying on a potentially outdated local variable for the client ID, always use the client ID present in the incoming message. This ensures that the correct client ID is used for each message.

3. **Implementation Example**:
   Update your `oscInFilter` function as follows:

   ```javascript
   oscInFilter: function (data) {
       var { address, args } = data;
       var incomingClientId = args[1].value; // Get the client ID from the incoming message

       if (incomingClientId) {
           receive(data.address, args[0], { clientId: incomingClientId });
           return; // Prevent the original message from passing through
       }
   }
   ```

4. **Client Management**: Ensure that the client management logic correctly tracks connected clients and their IDs. This will help in managing multiple clients effectively.

By implementing these changes, the `thrustFwdReport` text widget should correctly display data specific to each client, improving the accuracy of the timing feedback provided to users.

[Attachment: Screenshot 2024-07-21 125536]
[Attachment: Screenshot 2024-07-21 125725]
[Attachment: Screenshot 2024-07-21 125706]

# Macro Control with Randomization

## Problem Description
Users are looking for a way to implement a macro control with randomization options in Open Stage Control, particularly for generating variations in plugin parameters. There are also inquiries about saving and recalling states, as well as suggestions for additional features like a reset button and tooltips.

## Solution
To use the macro control with randomization:

1. **Saving States**: 
   - Hold down the "diskette" button and click on one of the buttons labeled 1, 2, 3, or 4 to save the current state.
   
2. **Recalling States**:
   - Simply press any of the buttons labeled 1, 2, 3, or 4 to recall the saved state.

3. **Toggle Mode**:
   - To make the "diskette" button easier to use, you can set it to toggle mode in the editor. If you want it to remain in toggle mode, re-save the project with this option.

4. **Reset Button**:
   - A dedicated reset button can be implemented to set all faders to zero. Individual resets can also be achieved using the `doubleTap` property.

5. **Tooltips**:
   - Adding help hints or tooltips for buttons is possible and can enhance user experience.

For further enhancements, consider the updated version of the macro control module available here: [Attachment: vXraO3NGpoVFSF4jFYcedzz87VM.json]. 

Additionally, the initial version of the module can be found here: [Attachment: ab- Macro Sliders with Smooth Random v1.02.json].

# Server Authentication Stops .json From Loading + Deprecation Warning

## Problem Description
When using Open Stage Control with server authentication (user:password), remote clients are unable to load the .json file, while it works fine without authentication. This issue is observed specifically on iOS devices. Additionally, a deprecation warning appears in the console: 

```
(node: 10144) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
```

## Solution
The issue with loading the .json file when authentication is enabled has been resolved in version 1.25.4 of Open Stage Control. It is recommended to update to this version to eliminate the problem.

The deprecation warning is harmless and unrelated to the loading issue. 

For enhanced security during rehearsals or performances, consider using a private network as an alternative to the authentication method.

[Attachment: filename.ext]

# Required Chrome Version for Open Stage Control

When attempting to connect to Open Stage Control on an Android 4.4 tablet, users may encounter a white screen with the label "Open Stage Control 1.14.6". 

## Solution

The Open Stage Control client is compatible with the following browser versions:
- **Firefox**: version 75 or higher
- **Chromium / Chrome**: version 60 or higher
- **iOS devices**: version 10.3 or higher

If you are unable to install Chrome version 60 on your device, consider using an older version of Open Stage Control. Version 0.49.12 is still available [here](attachment reference missing) and documented [here](attachment reference missing), but note that it is outdated and no longer supported.

For those looking for legacy versions, it is possible to find older releases, but be aware that they may not function properly and support is not guaranteed.

# Sending OSC Commands on Template Load

**Problem Description**  
Users may want to send OSC or MIDI commands automatically when loading or opening a template in Open Stage Control, without needing to interact with any widgets.

**Solution**  
To achieve this, you can create a custom module that sends commands when a session is opened. Below is a basic example of how to implement this:

```javascript
module.exports = {
    init: function() {
        // Executed once when the server starts
        send('127.0.0.1', 5555, '/server/started');

        app.on('sessionOpened', (data, client) => {
            // Executed each time a session is opened
            // This applies only for sessions loaded from the server's filesystem
            send('127.0.0.1', 5555, '/session/opened', data.path);
        });
    }
}
```

For sending OSC messages when a modal dialog opens, you can use the `oscOutFilter` function as follows:

```javascript
module.exports = {
    init: function() {
        // Executed when the server starts
    },

    oscOutFilter: function(data) {
        var {address, args} = data;

        // Assuming the modal's address is /modal_address
        if (address === '/modal_address' && args[0].value === 1) {
            send('127.0.0.1', 5555, '/modal_opened');
            return; // Empty return to bypass the original OSC message
        }

        return data;
    }
}
```

### Dynamic IP and Port Configuration  
If you want to avoid hardcoding the IP and port in your custom module, you can retrieve the server's "send" options like this:

```javascript
var serverTargets = settings.read('send'); // Array of "ip:port" strings
var [host1, port1] = serverTargets[0].split(':');
```

This allows you to use the same IP and port configured in the OSC settings, making it easier for users to manage their configurations without modifying the JavaScript file.

For more details, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/custom-module/). 

[Attachment: filename.ext]

# Changing Switch Values with OSC Messages

## Problem Description
Users may encounter issues when attempting to change the values of a switch widget in Open Stage Control using OSC messages. Specifically, sending an array of values from an external application (like Max) may not update the switch widget as expected. Additionally, there is confusion regarding the correct format for sending key-value pairs in OSC messages.

## Solution
1. **Updating Switch Values**:
   - If you want to change the values of a switch widget using OSC, ensure that your OSC message is structured correctly. For example, to send an array of values, use:
     ```
     /switch_2/vals uno dos tres
     ```
   - Note that there is a known bug in the switch widget that may prevent it from updating correctly. This issue is expected to be fixed in a future version.

2. **Sending Key-Value Pairs**:
   - To send an object of pairs in an OSC message, format your message as a stringified JSON object. For example:
     ```
     '{"Value1": 1, "Value2": 2}'
     ```
   - Ensure that you use double quotes around keys, as they are mandatory in JSON.

3. **Setting Default Values**:
   - The OSC listener syntax does not allow for complex default values directly. Instead, you can use a JavaScript block to define default values. For example:
     ```javascript
     JS{{
       var oscValues = OSC{values}
       return oscValues || {
         "Value 1": 1,
         "Value 2": 2
       }
     }}
     ```

4. **Additional Resources**:
   - Currently, there is no repository of example files demonstrating simple use cases for Open Stage Control, but this is on the wish list for future updates.

By following these guidelines, you should be able to effectively change switch values and send structured OSC messages in Open Stage Control.

# Opening and Closing Modals in Open Stage Control

## Problem Description
When using multiple buttons in a modal, there is a need to close the current modal and open another modal upon button press. The setup involves a panel containing two modals, which are cloned multiple times with variable IDs. The challenge is to manage modal visibility effectively when a button is pressed.

## Solution
To close the current modal and open a new one, use the following approach:

1. **Close the Current Modal**: Use the `set()` function to change the modal's visibility.
2. **Open the New Modal**: After closing the current modal, set the ID of the new modal without providing `preargs`.

The correct command structure is:
```javascript
set('id', 'newModalID')
```
Do not include `preargs` in the `set()` function, as it only accepts the first argument after the ID.

This method ensures that the current modal is closed and the new modal is opened as expected.

# Multi XY Current Point Selection

## Problem Description
Users need a method to identify which point is currently being moved, touched, or selected in a Multi XY control within Open Stage Control.

## Solution
To track the currently touched points, implement the following scripts:

### Initialization (onCreate)
```javascript
var touchedPoints = {};
for (var i = 0; i < getProp(this, 'points'); i++) {
  touchedPoints[i] = false;
}
setVar(this, 'touchedPoints', touchedPoints);
```

### Touch Handling (onTouch)
```javascript
if (event.handle !== undefined) {
  var touchedPoints = getVar(this, 'touchedPoints');
  touchedPoints[event.handle] = event.type == 'start'; // true or false
  setVar(this, 'touchedPoints', touchedPoints);
}
```

### Accessing Touched Points
To check if a specific point is touched, use the following in any scripting property:
```javascript
var multixyTouchedPoints = getVar('multixy_id', 'touchedPoints');
var point0Touched = multixyTouchedPoints[0];
```

### Example Usage (onValue)
```javascript
var multixyTouchedPoints = getVar('multixy_1', 'touchedPoints');
var point1Touched = multixyTouchedPoints[0];

if (point1Touched === true) {
  var src1 = get('switch_srcMulti1');
  send('/adm/obj/' + src1 + '/xy', value[0], value[1]);
}
```

### Touch Event Handling
```javascript
var multixyTouchedPoints = getVar('multixy_1', 'touchedPoints');
var point1Touched = multixyTouchedPoints[0];

if (point1Touched === true) {
  var src = get('switch_srcMulti1');
  if (event.type == 'start') {
    send('/adm/obj/' + src + '/xy', 'touch');
    send('/adm/obj/' + src + '/select', 1);
  } else if (event.type == 'stop') {
    send('/adm/obj/' + src + '/xy', 'release');
    send('/adm/obj/' + src + '/select', 0);
  }
}
```

This approach allows you to effectively monitor and respond to touch events on Multi XY points. 

[Attachment: testMulti.json]  
[Attachment: 4Ue5CLbABUrfNENe3hyngqvGJnI.json]

# Issue Retrieving Dynamic Child IDs

When attempting to retrieve the IDs of all child widgets within a panel or matrix, the IDs include any `@{}` notation instead of resolving the variable. This can complicate the process of obtaining the actual IDs.

## Solution

Use the following command to retrieve the resolved IDs of the widgets:

```javascript
stateGet("panel_1")
```

This command returns an object containing ID:value pairs for the widget and all its descendants, providing the resolved IDs as needed.

[Attachment: widgets_id_issue.json]  
[Attachment: unzCofL5RqYH3zO0Yi0WpuwXL2H.json]

# Sending On and Off State for Button

**Problem Description:**
Users want to create a single button in Open Stage Control that toggles between two states (e.g., "Show ALL" and "Show Only HITS") and also control another button to deselect the current selection.

**Solution:**
To achieve this functionality, follow these steps:

1. **Create a Toggle Button:**
   - Set the button mode to `toggle`.
   - Use the following script in the `onValue` property of the button:

   ```javascript
   // Show only hits
   if (value === 1) {
     // target, address, midiChannel, midiAddress, midiValue
     send("midi:OSCtoDAW", "/control", 1, 1, 1);
     // Deselect another button
     set("REPLACEMEWITHID", 0);
   }

   // Show all
   if (value === 0) {
     // target, address, midiChannel, midiAddress, midiValue
     send("midi:OSCtoDAW", "/control", 1, 2, 1);
   }
   ```

   Replace `REPLACEMEWITHID` with the ID of the button you want to deselect.

2. **Create Additional Buttons:**
   - If you want to create another button to specifically turn off the first button, use the following script in its `onValue` property:

   ```javascript
   // idOfWidget, value
   set("REPLACEMEWITHID", 0);
   ```

   Ensure that this button is also set as a toggle button if desired.

By implementing these scripts, you can effectively control the visibility of elements in your DAW using Open Stage Control. 

[Attachment: filename.ext]

# Button Matrix: Activating One Button per Column

## Problem Description
The goal is to configure a button matrix of 128 buttons such that only one button can be active in each column.

## Solution
To achieve this functionality, use the following JavaScript code snippet:

```javascript
var props = {};
var index = $; 
var col = index % 8; 

props.label = [index + 1]; 

props.onValue = `for (var i = ${col}; i < 128; i += 8) {
                     if (value === 1 && i !== ${index}) set('matrix_note/' + i, 0, {script: false});
                 }`;

return props;
```

### Key Points:
- Replace `index` with `getIndex()` if needed.
- Ensure to include `{script: false}` in the `set()` function to prevent unintended script execution when buttons are turned off. 

This code will ensure that when a button is activated, all other buttons in the same column will be deactivated.

# Client Buttons Stopped Syncing

**Problem Description:**
Buttons on the playback tab are not syncing between clients on different devices, while tab changes are functioning correctly. The issue arises specifically with the playback tab's buttons.

**Solution:**
Widgets with the `bypass` property set to `true` do not sync across clients. To resolve the syncing issue, ensure that the `bypass` property is set to `false` for the affected widgets.

If you want to prevent an auto-generated OSC message from being sent on interaction without using the `bypass` option, you can set the widget's target to empty and use the server's `send` option. Set `ignoreDefaults` to `true` right before the `target` property to achieve this.

For example:
```json
{
  "ignoreDefaults": true,
  "target": ""
}
```

This configuration will allow you to manage OSC messages effectively without encountering errors from the OSC Python library when receiving undefined messages.

[Attachment: oscolaCTRL.json]  
[Attachment: ilNkGZjAlM7DIbY6AAyStTBclND.json]

# Make 5 Different Button Widgets Act as a Switch

## Problem Description
The goal is to configure five button widgets so that when one button is pressed, the other four automatically turn off. Each button has a unique "on" value, with Button 1 sending 1, Button 2 sending 2, and so on up to Button 5 sending 5. The challenge arises from the need to manage these values without creating a loop in the scripting.

## Solution
To achieve the desired functionality, follow these steps:

1. **Remove Custom Variables**: Eliminate any custom variables that may complicate the logic.
2. **Use Conditional Statements**: Implement a simple conditional check in the scripting. For example:
   ```javascript
   if (value === 1) {
       // Turn off Buttons 2, 3, 4, and 5
   }
   if (value === 2) {
       // Turn off Buttons 1, 3, 4, and 5
   }
   // Repeat for Buttons 3, 4, and 5
   ```
3. **Set Off Values**: Ensure that the other buttons are set to "off" when one button is activated.

This approach avoids loops and ensures that only one button is active at any time.

**Note**: It is also possible to use a single image with CSS filters to create different button appearances, which may simplify the implementation if you store the images in a folder next to your session file instead of using Base64.

[Attachment: image]

# Change CSS by JavaScript in Open Stage Control

## Problem Description
A user wants to change the text color of a widget named `timeDisplay` based on a variable `n` in their JavaScript script. Specifically, they want to change the color when `n` is less than a certain value.

## Solution
To change the text color of the `timeDisplay` widget, follow these steps:

1. In the `timeDisplay` widget, define a CSS variable for the text color:
   ```css
   :host {
     color: VAR{textColor, white};
   }
   ```

2. In your JavaScript code, add a condition to change the CSS variable when `n` is below the desired threshold. For example, to change the color to red when `n` is less than 10:
   ```javascript
   if (n < 10) {
       // setVar(widgetId, varName, value)
       setVar("timeDisplay", "textColor", "red");
   }
   ```

This approach allows you to dynamically change the text color of the `timeDisplay` widget based on the value of `n`.

# How to Detect if the Shift Key is Pressed in Open Stage Control

## Problem Description
Users may want to detect if the Shift key is pressed to modify knob steps in Open Stage Control. Specifically, the goal is to set the knob steps to 10 when the Shift key is held down and to 0 when it is not.

## Solution
To achieve this functionality, you can use a script widget along with the VAR syntax. Here is a basic implementation:

1. Create a script widget and use the following code to set the knob steps based on the Shift key state:

   ```javascript
   setVar(`knob_*`, 'steps', type == 'keydown' ? 10 : 0);
   ```

2. Ensure that you monitor the property value of the knob by using:

   ```javascript
   @{knob_1.steps}
   ```

   This allows you to display the current steps value correctly.

3. Note that there may be issues with mouse functionality when the Shift key is pressed, which will be addressed in a future release.

For reference, you can find the initial implementation in the attached file: [Attachment: shift_step_knob.json]. If you encounter issues, please refer to the file [Attachment: shift-knob-steps-no-working.json] for troubleshooting.

[Attachment: 4LguTkmd2oxEAtX6ZEf4047JWEd.json]

[Attachment: fI8eZ4A2KZJmwXBJWc931m1BVu3.json]

# Looping a Knob in Open Stage Control

**Problem Description:**
Users may want to create a knob that behaves like an encoder, looping its value between 0 and 1. A common issue arises when attempting to reset the knob's value to 0 when it reaches 1, which can lead to unexpected behavior, such as the knob getting stuck at 0.

**Solution:**
To implement a looping knob, ensure you use the correct comparison operator in your script. Here’s a corrected example:

```javascript
if (value == 1) {
    set("playheadEncoder", 0);
}
```

Make sure to use `==` for comparison instead of `=` which is used for assignment. 

Note that the touch state of a knob is read-only and can only be changed through user interaction, so it cannot be reset programmatically. If you require a looping behavior, consider using a snap knob or an encoder that fits your needs better.

For further customization, you might explore different control types or configurations that can achieve the desired functionality. 

[Attachment: filename.ext] (attachment reference missing)

# Color Property Editing in Open Stage Control

## Problem Description
Users have noted that while editing the scripting property, pressing the return key keeps the cursor inside the text field, which is an improvement over the previous behavior. However, Mac users have requested that the combination for committing changes be changed from `ctrl+return` to `cmd+return`, aligning it with common practices in applications like Photoshop.

## Solution
The request for changing the commit key combination for Mac users to `cmd+return` has been acknowledged and will be implemented. This adjustment will enhance the user experience by providing consistency with other applications on macOS. 

[Attachment: image]

# Script - Push Command Issue

**Problem Description:**
When attempting to create an array using the `push` method in a script, the code does not function as expected. The original code incorrectly overwrites the array instead of adding elements to it.

**Solution:**
To correctly use the `push` method to add elements to an array, ensure that you are not overwriting the array variable within the loop. The corrected code is as follows:

```javascript
var harpScale = value;
var scaleGroupColor = [];
for (var i = 0; i < harpScale.scales.length; i++) {
  scaleGroupColor.push(harpScale.scales[i].groupColor);
}
setVar("menu_2A_harp_scale", "harpGroupColor", scaleGroupColor);
```

Make sure there are no unnecessary spaces in the `setVar` function call, as this can lead to issues. Spaces before parentheses are allowed but not commonly used.

# Can't Separate "TypeTags"

## Problem Description
The user needs to send an OSC message in the format `/example, arg1, arg2, arg3`, where `arg1` and `arg2` must be integers and `arg3` must be a float. However, the TypeTags settings are causing all arguments to be sent as floats, integers, or strings, which the target does not understand.

## Solution
To resolve this issue, use the following TypeTags format:

```
iif
```

This configuration allows the first two arguments to be sent as integers and the last argument as a float, meeting the requirements of the target system.

# How to Dynamically Change the Address of a Widget

## Problem Description
You have multiple sliders (S0, S1, S2, S3) that represent a "page" of sliders in OSC. When switching to a different page, you want to rename these sliders to S4, S5, S6, and S7 based on the current page number. The goal is to dynamically change the address of the sliders using a variable that represents the page number.

## Solution
Instead of renaming the sliders by changing their `id` property, you can define the sliders' address properties to depend on a variable widget. Use the following syntax for the address of each slider:

```
S#{ @{variable_widget_id} * 4 + 0 }
S#{ @{variable_widget_id} * 4 + 1 }
S#{ @{variable_widget_id} * 4 + 2 }
S#{ @{variable_widget_id} * 4 + 3 }
```

This approach allows the slider addresses to dynamically reflect the current page number based on the variable widget's value. You can also apply the same logic to set the value of a text widget above each slider if you wish to display the "name" of your sliders.

For more information, refer to the [Open Stage Control documentation on advanced syntaxes](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/).

# Visualizer Widget Send Function Issue

**Problem Description:**
The visualizer widget in Open Stage Control is unable to send messages using the `send()` function. Additionally, it disables other widgets' ability to send messages when using the `set()` function in the visualizer's script. Attempts to use the visualizer to send messages or to set the value of a button for sending messages have also failed.

**Solution:**
The `send()` function in Open Stage Control only operates when triggered by user interaction, not by incoming messages. This limitation applies to all widgets, not just the visualizer. To successfully send messages, ensure that the `send()` function is called in response to a user action.

For example, the following code snippet can be used to send a message when a button is pressed:

```javascript
if(value == 127) {
  send("/control", 10, 126, 127);
} else {
  send("/control", 10, 126, 0);
}
```

For more information, refer to the following resources:
- [Send osc back when receiving - #2 by jean-emmanuel](https://forum.openstagecontrol.com/t/send-osc-back-when-receiving/2)
- [Scripting - Open Stage Control](https://openstagecontrol.ammd.net/docs/scripting)

# Open Stage Control Themes

## Problem Description
Users may encounter issues when attempting to load templates created in older versions of Open Stage Control (OSC). Specifically, templates may not display correctly due to compatibility issues, and users may receive warnings about the need for conversion. There is a desire to modify these older templates while maintaining their original formatting, including fonts and textures.

## Solution
To resolve compatibility issues with older OSC templates:

1. **Download Older Version**: The last pre-v1 version of Open Stage Control can be found [here](attachment reference missing). Note that this version is no longer maintained, and bugs will not be fixed.

2. **Use Older Version for Legacy Templates**: If you want to use an older template, it is recommended to work with the version it was created in. This will ensure that the formatting, fonts, and textures remain intact.

3. **Transition to New Projects**: For new projects, it is advisable to use the latest version of Open Stage Control. Porting older templates to the new version can be complex and is not recommended for beginners.

By following these steps, users can effectively utilize older templates while also taking advantage of the features available in the latest version of Open Stage Control.

# Cubase / Transpose Module Issue

**Problem Description:**
When using a custom controller template for Cubase, the transpose functionality was not working correctly. The OSC messages sent for the transpose commands resulted in "NaN" (Not a Number) errors, preventing Cubase from receiving the correct messages.

**Solution:**
The issue was identified as a misuse of the `oscInFilter` function, which is intended for filtering incoming messages rather than outgoing ones. To resolve the problem, the following steps were taken:

1. **Change Function Usage:** Replace `oscInFilter` with `oscOutFilter` to properly handle outgoing OSC messages sent by widgets.
2. **Correct Widget Configuration:** Ensure that the widget sending the transpose commands is configured to send integers. Specifically, the `typeTags` property should not be set to "i" (for integers) if the command is a string (e.g., "up" or "down"). Removing the `typeTags` property entirely can prevent the "NaN" issue.

After implementing these changes, the transpose functionality began to work as expected. 

For further reference, see the attached code snippet for the original implementation. 

[Attachment: code_snippet.js]

# Infinite Loop Detection Too Strict

## Problem Description
When executing nested for loops in Open Stage Control, the code triggers a 'possible infinite loop' warning and exits prematurely. For example, the following code stops executing when the variable 'i' reaches 3:

```javascript
for (var n = 0; n < 18; n++) {
    set("fader_"+n, getProp("fader_"+n, "default"));
}
var widgets = getProp('fx_panel_1', "widgets");
for (var idx = widgets.length - 1; idx >= 0; idx--) {
    var id = widgets[idx].id.split('@')[0];
    for (var i = 1; i < 10; i++) {
        var wid = id + i;
        console.log(wid);
        var df = getProp(wid, 'default');
        set(wid, df);
    }
}
```

## Solution
To bypass the loop protection mechanism, you can add the following comment at the beginning of your code:

```javascript
// noprotect
```

This will prevent the infinite loop detection from interrupting your code execution. This information will also be included in the error message for future reference.

# Sending HEX Data Using net.Socket in Open Stage Control

## Problem Description
When attempting to send HEX data using a custom TCP module in Open Stage Control, an error occurs: `SyntaxError: Unexpected string`. The initial approach using `hex"48656C6C6F20576F726C64"` fails, while sending data as UTF-8 results in incorrect byte representation.

## Solution
The issue can be resolved by using the `buffer-from` package to convert HEX strings into a buffer before sending them over the socket. Here’s how to implement the solution:

1. Install the `buffer-from` package.
2. Import the package in your custom module.
3. Use `bufferFrom` to convert the HEX string to a buffer before sending it.

Here is the corrected code:

```javascript
const net = nativeRequire('net');
const bufferFrom = nativeRequire('buffer-from');
const port = 10001;
const host = '192.168.1.76'; //'192.168.0.222';
const socket = new net.Socket();

socket.connect(port, host, function() {
    console.log('>>> TCP SOCKET CONNECTED');
});

module.exports = {
    oscOutFilter: function(data) {
        var { address, args, host, port } = data;
        if (address === '/rawtcp') {
            socket.write(bufferFrom(data.args[0].value, "hex"));
            console.log('>>> RAW TCP:  ' + data.args[0].value);
        }
        return { address, args, host, port };
    },
};
```

This code will correctly send the HEX data over the TCP socket.

# loadJSON - Callback and Error Handling

## Problem Description
When integrating with the Google Sheets API, there is a need for error handling and a callback mechanism while using the `loadJSON` function for file access. The user encountered an error indicating a read-only file system when attempting to open `./config.json`, which does not occur when running the code outside of Open Stage Control.

## Solution
1. **Error Handling and Callbacks**: While `loadJSON` does not currently support error handling or callbacks, it is suggested to use the native `fs` module for more robust file handling. An optional `errorCallback` argument could be added to `loadJSON` in future updates.

2. **File Path Resolution**: The error message `EROFS: read-only file system` suggests that the file path `./config.json` may not resolve correctly within the Open Stage Control environment. Verify the file's location and ensure that it is accessible and writable in the context of Open Stage Control.

For further assistance, consider checking the file permissions and the working directory from which Open Stage Control is running.

# How to Get Value from Dropdown and Set it as Negative for an Encoder

**Problem Description**  
Users may want to control the values sent by an encoder in Open Stage Control by selecting different values from a dropdown menu and applying mathematical operations to them, such as converting them to negative values.

**Solution**  
To achieve this, you can use the following syntax in the encoder's settings:

- In the **forth** field, use:
  ```
  @{dropdown_id}
  ```

- In the **back** field, use:
  ```
  -@{dropdown_id}
  ```

For more advanced mathematical operations, you can use:
```
#{@{dropdown_id} * 2.5}
```

For further details, refer to the documentation on [Advanced syntaxes - Open Stage Control].

# Change Panel Height Property from Tab Buttons

## Problem Description
Users may encounter difficulties in changing the height of a panel from tab buttons within the same panel.

## Solution
To change the height of the entire panel, use the following JavaScript code in the "height" dialog:

```javascript
// Example code to set panel height
panel.height = 'desired-height'; // Replace 'desired-height' with the actual height value
```

Ensure that the syntax is correct to avoid issues. For reference, an example configuration is provided in the attached file.

[Attachment: PanelTabHeightSwitching.json]  
[Attachment: vqJkhVM2nwcj0ilfIfOpWChkEVy.json]

# Open Stage Control Basic Widget Usage

## Problem Description
Users often encounter challenges when configuring buttons and text widgets in Open Stage Control (OSC), particularly regarding sending MIDI CC messages, managing widget values, and formatting text. Questions arise about how to effectively use buttons to control multiple faders and how to format text for labels.

## Solution

### Sending MIDI CC Messages with Buttons
To send a MIDI CC message with a button in tap mode, set the `on` property of the button to the desired value. For example, to send channel 1, CC1 with a value of 64, configure the button as follows:
```json
{
  "type": "button",
  "on": 64
}
```
In tap mode, the button will only send the `on` value.

### Using Text Widgets for Labels
To create multi-line labels in text widgets, use `Shift + Enter` to insert a line break. Additionally, you can adjust the line spacing by modifying the `line-height` property in the CSS of the text widget:
```css
label {
    line-height: 1.25em;
}
```

### Sending Values from Multiple Faders
To send the current or default values of multiple faders with a single tap button, utilize the `linkId` property. Set the button as the master and the faders as slaves by prepending the `linkId` with `>>` for the master and `<<` for the slaves. This configuration allows the button to control the values of all linked faders.

### Scripting to Modify Widget Properties
When using scripting to modify widget properties, ensure that widget IDs, variable names, and property names are enclosed in quotes. For example:
```javascript
if (get("button_2") == 1) {
    setVar("Faders", "fadersVis", false);
}
```
This syntax ensures that the visibility of the panel changes upon button press.

### Resetting Faders to Different Values
If you want different faders to reset to different values, you will need to configure each fader individually, specifying the desired reset value in the button's script or properties.

### Attachments
- [Attachment: hLFRppfwvSB0PU19yYhnrxMaVsp.json]

[Attachment: mObM2Q272CULwPUYEMZSQmC1PGV.json]

# Pitch Bend Fader Configuration for OSC

## Problem Description
The user is attempting to utilize a pitch bend fader to control light intensity in Unreal Engine via OSC. They are experiencing difficulties in obtaining the correct pitch range/value information and are unsure how to configure the fader to provide a dynamic range rather than a simple on/off button effect.

## Solution
To properly configure the pitch bend messages in Open Stage Control, use the following format:

```
/pitch [channel] [value]
```

- **Channel**: This is the first pre-argument and should be specified as the MIDI channel.
- **Value**: The second argument should be a value between 0 and 16383, which corresponds to the MIDI pitch bend range.

Ensure that you do not include a second pre-argument, as this can lead to incorrect values. By following this structure, you can achieve the desired dynamic range for your fader control.

For further reference, see the MIDI messages documentation in Open Stage Control. 

[Attachment: 12.11.2022_15.07.17_REC]

# Triggering Several Push Buttons Simultaneously

**Problem Description:**
Users may want to trigger multiple push buttons at the same time using a single button. The `set(id,var)` command can be used, but it only works if the receiving button is set to toggle. Additionally, when using the `external: true` option, the button's value updates without sending the MIDI message, particularly when the button is decoupled.

**Solution:**
To successfully trigger multiple push buttons, use the following approach:

1. Use the `set()` command to set the button's value. For example:
   ```javascript
   set('push_id', 1) // Set the button to 'on'
   ```

2. If you need to simulate a button release, use a timeout:
   ```javascript
   setTimeout(() => {
     set('push_id', 0) // Set the button to 'off'
   });
   ```

3. If you require feedback simulation, include `{external: true}`:
   ```javascript
   set('push_id', 1, {external: true}); // Simulate button press with feedback
   setTimeout(() => {
     set('push_id', 0, {external: true}); // Simulate button release with feedback
   });
   ```

**Note:** Be aware that when `external: true` is passed to `set()`, no MIDI message will be sent. This behavior is expected and will be addressed in a future release.

# Encoder Widget for Absolute Positioning in Open Stage Control

## Problem Description
The user seeks to implement an encoder widget that exposes an absolute value, similar to a knob, but does not reset to the minimum value after reaching the maximum. This functionality is needed for creating a jog wheel compatible with VirtualDJ 8, as the current knob behavior stops at the maximum value and does not allow for continuous rotation.

## Solution
To achieve the desired functionality for the encoder widget, you can define it using the following properties in your configuration:

```json
{
  "type": "encoder",
  "cc": <MIDI cc>,
  "ccmsb": <optional MIDI cc of the MSB>,
  "inverted": <optional true/false>,
  "full": <number of steps for a full rotation (default is 128)>,
  "max": <optional value at which the jog wheel wraps>,
  "mask": <optional bitmask to apply to the cc value>,
  "sendstatic": <optional true/false>
}
```

This configuration allows the jog wheel to send messages with its absolute position, enabling continuous rotation without stopping at the maximum value. Adjust the parameters as necessary to fit your specific setup with VirtualDJ.

For more detailed information on configuring MIDI controllers, refer to the VirtualDJ documentation: [VirtualDJ - VDJPedia - ControllerDefinitionMIDI](https://www.virtualdj.com/manuals/virtualdj/VDJPedia/ControllerDefinitionMIDI.html).

(attachment reference missing)

# Running Open Stage Control in Headless Mode on Windows

## Problem Description
Users may encounter issues when attempting to run Open Stage Control in headless mode on Windows. The command line may produce errors related to module loading, particularly when trying to specify options such as `--port` or when launching the application without the correct path.

## Solution
To successfully run Open Stage Control in headless mode on Windows, follow these steps:

1. Set the environment variable for headless mode:
   ```bash
   set ELECTRON_RUN_AS_NODE=1
   ```

2. Use the correct command to launch Open Stage Control, ensuring to include the path to the application scripts:
   ```bash
   open-stage-control.exe resources\app --no-gui --port 9000 --send 127.0.0.1:8000
   ```

3. If you encounter an error indicating that the headless mode detection is not functioning properly, explicitly include the `--no-gui` flag in your command.

This configuration allows the web server and OSC/MIDI backend to run without the graphical user interface, enabling access to the client app through a compatible web browser.

For further details, refer to the documentation on [running with node](https://openstagecontrol.ammd.net/docs/getting-started/running-with-node/#lite-headless-mode).

**Note:** If you continue to experience issues, ensure that you are using the binary version of Open Stage Control and that all necessary files are present in the specified directories. 

[Attachment: filename.ext]

# Visibility Update Issue in Nested Panels

## Problem Description
Users have reported an issue with visibility parameters in nested panels within Open Stage Control. When modifying the visibility of widgets inside a panel that is not currently visible, the new visibility values do not apply correctly. Instead, the widgets retain their last visible state from when the panel was active, leading to inconsistencies in the interface. The only way to reset the visibility is to toggle the parameters while the panel is visible, which can cause rendering glitches.

## Solution
A fix for this issue has been implemented in the source code. Users experiencing similar problems with visibility updates in hidden panels should ensure they are using the latest version of Open Stage Control. 

For those using older versions, it is recommended to explicitly send update commands when switching between panels to ensure that visibility states are correctly applied.

For further reference, a minimal session file demonstrating the issue can be found here: [Attachment: visibility_issue.json]. 

If you encounter similar issues, please verify your version and consider updating to the latest release.

[Attachment: iEf7cJ3TGNvwC8rwCdt5MYdbmRL.json]

# Nested Objects in Variables Field

## Problem Description
When attempting to access nested objects in the Variables field using the inheritance syntax, users may encounter an "undefined" error. For example, accessing a nested property like `@{parent.variables.values.fader}` results in an undefined value, while accessing the parent object directly with `@{parent.variables.values}` works correctly.

## Solution
Nested objects are supported in Open Stage Control; however, the inheritance syntax (`@{}`) does not support deep access. To correctly access a nested property, use the following syntax:

```javascript
#{@{parent.variables}.values.fader}
```

This approach allows you to retrieve the desired nested value without encountering errors.

# How to Script a Dropdown to Output MIDI CC Values

## Problem Description
Users may want to control a dropdown menu in Ableton Live using another dropdown menu in Open Stage Control, specifically to output MIDI CC values.

## Solution
To achieve this, you can set the values of the items in the dropdown menu based on the number of items in Ableton's menu. Below is an example configuration for the dropdown menu.

### Example Configuration
You can use the following JSON structure for your dropdown menu:

```json
{
  "type": "dropdown",
  "items": [
    {"label": "Option 1", "value": 1},
    {"label": "Option 2", "value": 2},
    // Add more options as needed
  ],
  "onChange": "sendMidiCC(value)"
}
```

Make sure to adjust the `value` for each item to correspond to the desired MIDI CC values in Ableton.

For a complete example, refer to the attached file for a sample dropdown menu configuration:
[Attachment: jdnqFU9WNnWYFXuMZzPP9f6Nic4.json]

# Dynamically Updating Text Based on Fader CC

## Problem Description
Users may encounter issues when trying to dynamically update a text widget based on the CC channel of a fader in Open Stage Control. Specifically, when attempting to access an element of the `preArgs` array of a fader, the text widget may return `undefined`.

## Solution
To correctly reference the CC channel from the fader's `preArgs`, use the following syntax in the text widget's "value" property:

```javascript
CC #{@{fader_1.preArgs}[1]}
```

This utilizes the `#{}` syntax to evaluate the JavaScript expression correctly.

Additionally, for organizing multiple widgets, it is recommended to create a main container with a vertical layout that contains separate horizontal containers for faders and labels. This allows for better control over the height and alignment of the widgets. 

For example:
- **Main Container**: Vertical layout
- **Faders Container**: Horizontal layout, set height to 90%
- **Labels Container**: Horizontal layout, set height to 10%

This structure allows for easy duplication of faders and associated labels without needing to manually adjust IDs. When duplicating a panel, ensure that the text widget references the panel's ID to automatically update the label based on the fader's settings.

If further adjustments are needed, consider using the `expand` property for both faders and text labels to utilize available space effectively.

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]

[Attachment: 6dzATVkzJFZgDHJVaUGpnN408VA.json]

# Sending and Receiving SysEx on the Same Fader

**Problem Description:**
Users are attempting to create a control application for devices like the Yamaha digital console and DSI Evolver Synth, which communicate via MIDI SysEx messages. While they can successfully send SysEx messages from a fader to the device, they are struggling to receive and parse incoming SysEx messages back into the application.

**Solution:**
To receive and parse MIDI SysEx messages in Open Stage Control, you will need to implement a custom module. Here’s a basic outline of the steps involved:

1. **Create a Custom Module:**
   - Use the `oscInFilter` function to handle incoming SysEx messages. This function allows you to filter and process the incoming OSC messages based on your specific requirements.

2. **Configure the Widget:**
   - Ensure that the widget you are using to control the fader is set up correctly. If you do not require every widget to send OSC messages on port 8000, you can leave the `send` field empty in the launcher's configuration form.

3. **Example Code:**
   - Here is a simple example of how you might set up the custom module:
     ```javascript
     function oscInFilter(msg) {
         // Check if the message is a SysEx message
         if (msg[0] === 240) { // 240 is the start of a SysEx message
             // Parse the SysEx message and update the widget accordingly
             // Your parsing logic here
         }
     }
     ```

By following these steps, you should be able to receive and update your application with the SysEx messages sent from your devices.

[Attachment: Screen Shot 2023-07-14 at 16.17.26]

# How to Set the RGB Widget's RGB Start Value

When attempting to set the RGB widget's touch position using OSC, you may encounter difficulties in defining the starting color value.

## Solution

To set the RGB widget's starting value, use a JavaScript array format. For example, to set the color to red, you should input the following in the widget's default value setting:

```javascript
[255, 0, 0]
```

This configuration will establish the starting value when the session is loaded.

# Sending OSC Messages Using Command-Line Tools

**Problem Description**  
When attempting to send an OSC message using the `nc` (netcat) command, an error occurs indicating a malformed type tag string. The command used is:
```bash
echo -n "/start" | nc -4u -w1 192.168.0.225 9999
```
The debug console returns the error: `(ERROR, UDP) A malformed type tag string was found while reading the arguments of an OSC message.`

**Solution**  
A raw UDP packet is not formatted as a valid OSC message. To send OSC messages correctly, it is recommended to use dedicated command-line tools that adhere to the OSC specification. 

One such tool available on Linux is `pyliblo-utils`, which includes commands like `send_osc` and `dump_osc`. These tools are specifically designed for sending OSC messages and will help avoid formatting issues encountered with netcat.

For further references on dedicated command-line tools, consider searching online for additional options that support OSC message formatting.

# Adding Labels to Keys in a Keyboard Container

To add labels to keys in a keyboard container, you can utilize CSS for a more efficient solution than using individual text indicator widgets.

## Solution

You can apply the following CSS to label each key:

```css
.key:after {
  content: "";
  position: absolute;
  bottom: 10%;
  left: 0; right: 0;
  font-size: 150%;
  text-align: center;
  z-index: 10;
}
.key.white:after {
  color: black;
}
.key:nth-child(1):after {
  content: "F";
}
.key:nth-child(2):after {
  content: "F#";
}
/* Continue for additional keys */
```

This code positions the labels at the bottom of each key, allowing for a clean display. 

Additionally, if you need to adjust the font size dynamically based on the key or panel width, you can use the following CSS snippet:

```css
word-break: normal;

/* font size depends on the viewport width */
--font-size: 1vw;

/* font size also depends on the panel width */
--panel-width: #{parseInt(@{panel_1.width})};

/* font size also depends on the button width */
--button-width: #{parseInt(@{this.width})};

--fs: calc(var(--font-size)*#{parseInt(@{panel_1.width})}*#{parseInt(@{this.width})}/2400);
font-size: var(--fs);

/* line height scales the same */
line-height: calc(var(--fs)*1.2);
```

Note that while this approach helps with font sizing, it may require further adjustments to ensure text fits within the key width, as the keyboard widget's layout can affect text display.

For a complete example, you can refer to the attached JSON file that contains a sample keyboard configuration: [Attachment: osDqZlHMhk0rD21xNa3uw7quLMB.json].

# Pitch Bend Fader Snap Configuration

## Problem Description
Users want to configure a pitch bend fader to switch between two different step values (0 steps and 6 steps) using a toggle button.

## Solution
To achieve this, you can use the advanced syntax in the fader's steps property. Here’s how to set it up:

1. Create a toggle button and note its ID.
2. In the fader's steps property, use the following code:

   ```javascript
   JS{
     // steps property
     // replace "button_id" with the actual ID of your toggle button
     if (@{button_id} === @{button_id.on}) {
       return 6
     } else {
       return 0
     }
   }
   ```

   Alternatively, you can use a shorter version:

   ```javascript
   #{@{button_id} === 1 ? 6 : 0}
   ```

Make sure to replace `button_id` with the actual ID of your toggle button. This setup will allow the fader to snap between 0 and 6 steps based on the toggle button's state.

# Modal Missing After Update from v1.16.2 to v1.25.6

**Problem Description:**
After updating from version 1.16.2 to 1.25.6, a modal button is no longer visible. The modal reappears when reverting to version 1.16.2. Additionally, the application language changed to German, which was not the case in the previous version. The user is unsure how to debug the issue or if there is an API incompatibility between the versions.

**Solution:**
1. **Language Configuration:**
   To set the application language to English, use the following command line argument:
   ```
   --client-options lang=en
   ```
   This can also be added to the `config.json` file, although the specific structure for this configuration was not provided.

2. **Bug Identification:**
   A bug causing the modal issue has been identified. A fix is expected in a future release following version 1.25.6.

3. **Config File Error:**
   If you encounter an error regarding the `config.json` file not being found, ensure that the file exists at the specified path:
   ```
   /home/node/.config/open-stage-control/config.json
   ```
   If the file is missing, you may need to create it or check your installation.

**Attachments:**
- [Attachment: dmx-mobile-ctrls.json]
- [Attachment: modal_failed_to_load.json]

[Attachment: c4QwXY9YBKley2Hx8xK0SJMMYgY.json]

[Attachment: dcE1OB4eQst0kaLW1yxj1PIMtPI.json]

# MIDI Input to Control Open Stage Control GUI

**Problem:**
Users want to control the Open Stage Control GUI using an external MIDI controller and send OSC controls in response to MIDI messages.

**Solution:**
To control the GUI with an external MIDI controller, refer to the examples provided in the Open Stage Control documentation. For sending OSC messages in response to incoming MIDI messages, you will need to create a custom module. The following examples will help you get started:

- [Reply to MIDI messages](https://openstagecontrol.ammd.net/docs/custom-module/examples/#reply)
- [MIDI routing](https://openstagecontrol.ammd.net/docs/custom-module/examples/#midi-routing)

# Tap for Tempo Button Implementation

## Problem Description
Users want to implement a "Tap for Tempo" button in Open Stage Control that allows them to tap a button to set and display the tempo in beats per minute (BPM). The functionality should reset after a period of inactivity.

## Solution
A custom module can be created to handle the tap input and calculate the BPM. Below is an implementation example provided by **jean-emmanuel**.

### Required Files
- [Attachment: tzVGBlue1CIqx9sIxCTDJWHQfCj.js]
- [Attachment: wpCQLVxlUMGU8PU0aSdiDZGqzW1.json]

### Module Code
```javascript
const MIN_BPM = 40;

var tapDurations, tapIndex,
    lastTapTime = 0,
    maxTapLength = 1000 * 60 / MIN_BPM;

function reset() {
    tapDurations = [0, 0, 0, 0, 0];
    tapIndex = -1;
}

function receiveTap(data) {
    var tapTime = Date.now();

    // Reset if the last tap is too far apart
    if (tapTime - lastTapTime > maxTapLength) {
        lastTapTime = tapTime;
        reset();
        return;
    }

    // Store tap duration
    tapIndex++;
    tapDurations[tapIndex % tapDurations.length] = tapTime - lastTapTime;
    lastTapTime = tapTime;

    // Update BPM
    updateBpm(data);
}

function updateBpm(data) {
    // Filter tap durations (exclude zeros)
    var durations = tapDurations.filter(x => x > 0);

    // Ensure at least one value is present
    if (durations.length < 1) return;

    // Compute average tap duration
    var sum = durations.reduce((previous, current) => current += previous),
        avg = sum / durations.length,
        bpm = Math.round(60 / (avg / 1000));

    // Send BPM back to the interface
    receive('/bpm', bpm);

    // Send BPM to the button's original target/address
    send(data.host, data.port, data.address, bpm);
}

module.exports = {
    oscOutFilter: function(data) {
        var { host, port, address, args } = data;

        if (address === '/bpm/tap' && args[0].value === 1) {
            // Update BPM when the interface sends /bpm/tap 1
            receiveTap(data);
            return; // Bypass original OSC message
        }

        // Process other messages normally
        return data;
    }
};
```

### Notes
- Ensure that the button in your interface is configured to send the `/bpm/tap` message with a value of `1` when tapped.
- If you encounter issues with BPM output, verify that your button setup matches the example provided.

[Attachment: wiMf7CYTWOWmQrx481NsLnnDahs.json]

[Attachment: wiMf7CYTWOWmQrx481NsLnnDahs_1.json]

[Attachment: 65muLZcKbaqibShsg45VDvKigjY.json]

# Disable/Enable Tabbing in Open Stage Control

## Problem Description
In a top-level panel with multiple tabs, there is a requirement to disable tab switching when a play button is pressed, while still allowing interaction with the widgets within the currently selected tab. Attempts to set the interaction property of the top-level panel resulted in locking down the entire GUI.

## Solution
To disable tab switching while keeping the current tab's widgets interactive, add the following CSS to the panel:

```javascript
// assuming play button's on value is 1
if (@{playbutton_id} === 1) return `
:host > inner > .navigation {
  pointer-events: none;
  filter: grayscale(100%);
}`
```

This code snippet will disable pointer events on the tab navigation when the play button is active, effectively preventing users from switching tabs while still allowing interaction with the widgets in the active tab.

# Using the XY Pad in Open Stage Control

## Problem Description
Users have reported difficulties in configuring the XY pad for sending values to a DAW, specifically for controlling parameters using OSC messages. The goal is to send values for the X and Y axes to specific device parameters, but users have encountered issues with updating the XY pad when parameters are modified externally.

## Solution
To correctly configure the XY pad for sending values to your DAW, follow these steps:

1. **Set the OSC Address**:
   - Set the `osc.address` property to `/device/param`.

2. **Use the onValue Script**:
   - In the `onValue` script, use the following code:
     ```javascript
     send('/device/param/1/value', value[0]);
     send('/device/param/2/value', value[1]);
     ```
   - Ensure that the `bypass` property is set to `true` to prevent default XY messages from being sent.

3. **Updating the XY Pad with External Changes**:
   - The XY pad listens for a single address for a pair of values. To update the XY pad when parameters are modified externally, you can use one of the following methods:
     - **Using OSC Syntax**:
       - Set the `value` property to:
         ```javascript
         [OSC{/device/param/1/value}, OSC{/device/param/2/value}]
         ```
     - **Using Script Widgets**:
       - Create two script widgets, one for each parameter, with the following code:
         - **Script Widget 1** (for X axis):
           ```javascript
           var xy = get('xy_id');
           xy[0] = value;
           set('xy_id', xy);
           ```
         - **Script Widget 2** (for Y axis):
           ```javascript
           var xy = get('xy_id');
           xy[1] = value;
           set('xy_id', xy);
           ```

By following these steps, you should be able to effectively use the XY pad for your Bitwig controller and ensure it updates correctly with external changes.

[Attachment: image1.png]

# How to Concatenate Strings in Open Stage Control

**Problem Description:**
Users may encounter confusion when trying to concatenate strings and utilize JavaScript functions like `toUpperCase()` within Open Stage Control.

**Solution:**
1. **String Concatenation:**
   - In Open Stage Control, you do not need to use quotes or the plus sign for string concatenation. Instead, you can directly use the `#{}` syntax.

2. **Using JavaScript Functions:**
   - To apply JavaScript functions such as `toUpperCase()`, use the following syntax:
     ```javascript
     #{@{text_1}.toUpperCase()}
     ```
   - This syntax serves as shorthand for `JS{{}}`, allowing for one-liner expressions with implicit return.

**Note:** Always include property names in your screenshots for clarity, as it may not be immediately obvious which property is being edited. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]

# Handling Complex Interactions Between Widgets in Open Stage Control

## Problem Description
The goal is to manage the visibility of a panel based on interactions with multiple switches. Specifically, a main switch should display the panel when activated, while inner switches should hide the panel when pressed. However, if a side switch is active, the panel should remain visible despite the inner switches being pressed. The challenge lies in coordinating these interactions effectively, especially since the main switch's linkId is already in use for tab selection.

## Solution
### Method 1: Using Modal as Container
1. **Create a modal** to contain the tab panel.
2. **Control the modal's visibility** using script widgets linked to the switches:
   - For the main switch (to open the modal):
     ```javascript
     JS{{
     // script property
     set("modal_id", 1) // open the modal
     }}
     ```
   - For the inner switches (to close the modal):
     ```javascript
     JS{{
     // script property
     if (!@{sidetoggle}) {
       set("modal_id", 0) // close the modal
     }
     }}
     ```
   - Note: You can assign multiple linkIds to a single widget by using an array format: `["linkId_1", "linkId_2"]`.

### Method 2: Using a Custom Module
1. **Create a custom module** to manage the state of the switches:
   ```javascript
   // keep track of the sidetoggle's value
   var sidetoggle = 0;

   module.exports = {
       oscOutFilter: function(data) {
           var {host, port, address, args} = data;

           if (address === '/sidetoggle') {
               // update sidetoggle
               sidetoggle = args[0].value;
           } else if (address.includes('/inner_switch')) {
               // close the modal when an inner switch changes if sidetoggle is on
               if (sidetoggle) receive('/modal', 0);
           } else if (address === '/main_switch') {
               // open the modal when the main switch updates
               if (!sidetoggle) receive('/modal', 1);
           }

           return data;
       }
   }
   ```

### Global Variables
For maintaining a global variable, the recommended approach is to use a custom module, as illustrated with the `sidetoggle` variable. Alternatively, JavaScript formulas (`JS{{}}`) can utilize a global object named `global` to store and access variables across different formulas, although the custom module approach is cleaner and easier to maintain.

[Attachment: filename.ext]

# Controlling Cubase Key Commands with Open Stage Control

## Problem Description
Users may want to create buttons in Open Stage Control (OSC) to control key commands in Cubase, but they may be unsure of how to set up the necessary MIDI communication, especially if they lack scripting knowledge.

## Solution
1. **Set Up a Virtual MIDI Port**:
   - On Windows, use **loopMIDI** to create a virtual MIDI port.
   - On macOS, use the **Audio MIDI Setup** application to create a virtual MIDI port.

2. **Configuration Recommendations**:
   - It is advisable to run OSC on the same computer that runs Cubase to simplify the setup. If you must use a separate computer (e.g., for a touchscreen), ensure both computers are connected via LAN.
   - Avoid using **rtpMIDI**; instead, use **loopMIDI** for all MIDI communication. 

3. **Creating MIDI Ports**:
   - If you are already using a MIDI port for an existing OSC template, create an additional MIDI port for the new buttons you plan to create. This helps in managing MIDI messages effectively.

4. **Accessing the OSC GUI**:
   - Set a static IP address on the computer running Cubase and OSC. This computer will act as the server, while other devices will be clients accessing the OSC GUI via a web browser (preferably Google Chrome).
   - The OSC server's IP address and port (usually 8080) will be displayed in the OSC console upon starting the server.

5. **Starting OSC and Cubase**:
   - Remember to start the OSC server every time you launch Cubase to ensure proper communication.

By following these steps, users can effectively set up OSC to control key commands in Cubase without needing extensive scripting knowledge.

[Attachment: fp0dFw7AsQG9PNP55GDUAcjqxX0.json]

# Possible Infinite Loop Error in JavaScript Code

**Problem Description:**
A JavaScript error indicating a "possible infinite loop" occurs at line 764 of the provided code. The error arises when executing a loop that may take too long to complete.

**Solution:**
To determine if the code is running indefinitely or simply taking a long time to execute, add the following line to your code:

```javascript
// no protect
```

If the error does not occur after adding this line, it suggests that the loop is not infinite but rather slow. Consider optimizing the code to improve execution time.

# Issue with OSC Message Transmission and Port Conflict

**Problem Description:**
OSC messages stopped being transmitted during use, and the transmission did not resume after reloading the session or relaunching the built-in app. The error message indicated that port 8080 was already in use, preventing the server from starting correctly. Despite attempts to identify and terminate any background processes associated with Open Stage Control, the port remained busy.

**Solution:**
The issue was resolved by identifying that a test UDP send module in another application was using port 8080. This module typically does not interfere with Open Stage Control but had unexpectedly captured the port after Open Stage Control was closed. To prevent this from happening in the future, ensure that any applications that may use the same port are closed before starting Open Stage Control.

If you encounter similar issues, consider the following steps:
1. Check for any applications that might be using the same port (e.g., using `netstat` in the command prompt).
2. Close any conflicting applications before launching Open Stage Control.
3. If the port remains busy, restart the application that is using it or the computer if necessary.

[Attachment: filename.ext] (attachment reference missing)

# Fader "Touched" Indicator

## Problem Description
Users want to create an indicator that becomes visible when a fader is touched or moved and disappears when the fader is released. This functionality is similar to what was available in Lemur, and users are looking for a solution in Open Stage Control.

## Solution
To achieve this, you can utilize the 'touch' parameter in Open Stage Control. The following code snippet can be implemented:

```javascript
if (touch !== undefined) {
    touch === 1 ? set('indicator', 1) : set('indicator', 0);
}
```

This code will set the indicator to visible (1) when the fader is touched and hidden (0) when released.

### Additional Features
For users interested in creating multiple LED indicators that light up based on the fader's velocity, this can also be accomplished. The following example files demonstrate how to create a bar graph-like indicator:

- [Attachment: faderTouchMultiIndicator.json]
- [Attachment: faderTouchMultiIndicatorB.json]

These examples illustrate how to light up different indicators based on specific fader values.

[Attachment: nWnXsN5pwKSvRhggDXwZC5vWj9S.json]

[Attachment: j5ybUAEBk4FDfxy2FkvdjPjHPfY.json]

[Attachment: fDZcVb4fMJaOMVmZTlYFJ4SpOai.json]

# Setting Matrix Button States Using Another Button

## Problem Description
A user wants to control a matrix of buttons such that pressing one button sets the first button in the matrix to "on" while ensuring all other buttons are "off". The initial attempts to achieve this did not yield the desired result.

## Solution
To correctly set the first button in the matrix to "on" and all others to "off", use the following code:

```javascript
var m_id = 'matrix_' + getProp('parent','variables').id + 'StepSeq/';
set(m_id + '*', 0); // Set all buttons off
set(m_id + '0', 127); // Set first button on (use 0 for the first index)
```

### Important Note
- Ensure that the value `127` is used to turn the button "on" if the buttons are configured to use MIDI. If using OSC, the value may differ.
- The first button's index is `0`, not `1`.

### Attachments
- [Attachment: matrix.json]
- [Attachment: matrixTest.json]

[Attachment: ulFd8hVX1OYUGGJkbi99FhFlkNo.json]

[Attachment: nGF8tDAbTAoCOsUlEhrkqttaQV0.json]

# Linking Tab View Between Computer and Pad

**Problem:**
Users want to display the selected tab on a pad (e.g., iPad) on the computer interface in Open Stage Control. This functionality is expected to work seamlessly, but issues may arise due to specific settings.

**Solution:**
1. **Default Behavior:** The synchronization of tab views between devices is the default behavior unless the following conditions are met:
   - The `bypass` option is enabled in the tab's parent.
   - The `clientSync` option is set to `0`.

2. **Configuration Check:**
   - Ensure that the `bypass` option is set to `false` in the root configuration to allow synchronization from the pad to the computer.
   - Confirm that the session is saved after making changes, as this is necessary for the updates to propagate to the iPad.

3. **Browser Compatibility:** 
   - The Open Stage Control client is compatible with:
     - Firefox: version 75 and higher
     - Chromium/Chrome: version 60 and higher
     - iOS devices must be running version 10.3 or higher.

4. **Testing:** If issues persist, test the functionality using different browsers. For example, if it works in Firefox but not in Safari, it may indicate a browser compatibility issue.

For further information, refer to the Open Stage Control documentation at [openstagecontrol.ammd.net](https://openstagecontrol.ammd.net).

[Attachment: filename.ext] (attachment reference missing)

# Questions about the Switcher Widget

## Problem Description
Users have questions regarding the configuration of the switcher widget in Open Stage Control, specifically about the `linkedWidgets` property format, how to display values from linked widgets, and the possibility of dynamically changing labels or making a switch's buttons transparent.

## Solution

1. **Linked Widgets Property Format**:
   - The `linkedWidgets` property should be defined as an array of strings, with each widget ID enclosed in double quotes and brackets:
     ```json
     [
       "mebiii_selector",
       "group1a_selector"
     ]
     ```

2. **Displaying Values from Linked Widgets**:
   - The `values` property is not intended for directly displaying the values of linked widgets. Instead, it defines a set of banks that store the values of linked widgets when they change. When a linked widget updates, the current bank stores the new value, and selecting a different bank sets the linked widgets to the stored value.

3. **Dynamically Changing Labels**:
   - To change the labels of a switch dynamically based on the values of other widgets, you can use advanced property syntax in the `values` property:
     ```json
     {
       "@{widget_id1}": 1,
       "@{widget_id2}": 2
     }
     ```
   - However, using this method may lead to the widget being recreated each time the value changes. It may be more efficient to use input or text widgets for displaying these values.

4. **Making Switch Button Labels Transparent**:
   - To hide labels on a switch's buttons, you can apply custom CSS. For example, using the `:host{}` selector can help achieve transparency for the entire widget:
     ```css
     :host {
       opacity: 0; /* Makes the widget transparent */
     }
     ```

For further customization and advanced configurations, refer to the Open Stage Control documentation. 

[Attachment: filename.ext] (attachment reference missing)

# Matrix Switches and Labeling Issues

**Problem Description:**
When using a matrix in Open Stage Control, an empty object is set for properties and labeled with an array received via OSC. However, when new elements are added to the matrix, the last element only displays a number instead of the expected string from the OSC listener. This issue may arise because the JavaScript code executes before the OSC listener processes the incoming data.

**Solution:**
To resolve this issue, consider using a matrix of clone widgets instead of a standard matrix. This approach allows for more advanced syntaxes and better handling of dynamic updates. Refer to the example provided in the `clones_and_variables.json` file for guidance.

Additionally, if you need to filter an object into an array based on specific value conditions, the following code can be used:

```javascript
rigsListArray = Object.entries(rigsList); // Convert object to an array of key/value pairs
rigsListArrayPart = rigsListArray.filter(([key, value]) => (value >= 15 && value < 19)); // Filter array by value
rigsListPart = Object.fromEntries(rigsListArrayPart); // Convert filtered array back to an object
```

This method effectively filters the object based on the specified criteria. However, no more convenient methods have been identified for this task.

# Dynamic Switch Values in Open Stage Control

## Problem Description
Users may want to create dynamic widgets in Open Stage Control, specifically a list of instruments where the options in a second switch change based on the selection made in the first switch. 

## Solution
To implement dynamic switch values, utilize the `receive()` function to transmit commands from the custom module to the clients. The values for the second switch can be defined using advanced syntax that references the selected value of the first switch. 

Here is an example configuration for dynamic switch values:

1. Define the first switch with instrument options (e.g., piano, electric piano, organ).
2. Set the `values` property of the second switch to depend on the selection made in the first switch.

For reference, a sample configuration file is provided: [Attachment: switch_values.json]. This file demonstrates how to set up the second switch's values based on the first switch's selection.

[Attachment: 7Jz0niGJVTFu4tCt9s2q54WX49c.json]

# Can Only Activate Button, Cannot Toggle Off

When attempting to toggle a button, it only activates but does not toggle off, except in edit mode. Interaction is set to true.

## Solution

1. Ensure that the "on" and "off" values are not set to the same value. This will prevent proper toggling.
2. Check for any feedback messages that may be sent from the software. If the software replies with "off" when you send "on," it can cause issues.
3. If scripting is involved, review the scripts for potential conflicts. In this case, removing the button scripts resolved the issue.
4. Specifically, the problem was identified in the `globals.fade` script, particularly the call to `set()` at line 22 in the `fadeScript`.
5. Additionally, the CSS for the button may affect functionality. The following CSS rule was identified as problematic:
   ```css
   .button-container.on {
       pointer-events: none;
   }
   ```

By addressing these points, the button should function correctly, allowing both activation and toggling off. 

[Attachment: znFrym4Tb1mqKsK28Nch6Jb43RE.json]

# Sending UDP Commands to Open Stage Control

**Problem Description:**
When attempting to send UDP packets from a Wi-Fi Arduino to Open Stage Control, an error message is encountered: 
`(ERROR, UDP) The header of an OSC packet didn’t contain an OSC address or a #bundle string.` This indicates that the packets being sent do not conform to the OSC (Open Sound Control) protocol.

**Solution:**
Open Stage Control expects OSC messages rather than raw UDP packets. To resolve this issue, use a library that constructs OSC messages on Arduino. Refer to the OSC specification for guidance on formatting these messages correctly. 

For implementation examples, you can visit the following resource: [Open Sound Control Implementation for Arduino](http://opensoundcontrol.org/implementation/arduino-max-msp-osc).

Ensure that the messages you send from your Arduino include the correct OSC address and adhere to the OSC protocol to avoid errors.

# Text Alignment in Button's Label

When attempting to position the button label text underneath the image using CSS, the following solution can be implemented:

```css
:host {
    display: flex;
    flex-direction: column;
    align-items: center;
}

:host .button-label {
    margin-top: 5px; /* Adjust as needed */
}
```

This CSS code utilizes Flexbox to arrange the image and label in a column layout, ensuring that the label appears directly beneath the image. Adjust the `margin-top` value to control the spacing between the image and the label.

Make sure to apply the class `.button-label` to the label element within your button for this styling to take effect.

# File Extensions in the File Widget

## Problem Description
Users want to know if it is possible to use multiple file extensions in the File Widget, such as allowing both PNG and JPEG formats.

## Solution
To allow multiple file extensions in the File Widget, you can use a regular expression format. For example, you can specify the extensions as follows:

```
(png|jpg)
```

This expression will enable the selection of either PNG or JPEG files. It is also noted that using `||` works similarly, indicating a choice between the two formats.

In future versions, it is expected that the File Widget will support passing an array for specifying multiple extensions, which will provide a more consistent approach. 

[Attachment: filename.ext]

# Reference for Conditions and Mathematical Expressions in Open Stage Control

**Problem Description:**
Users may seek guidance on the mathematical expressions and conditions specific to Open Stage Control (OSC) and whether they are derived from other languages like JavaScript or CSS.

**Solution:**
Open Stage Control utilizes the Math.js library for mathematical expressions. For detailed syntax and usage, refer to the following resources:

- [Math.js Reference](http://mathjs.org/docs/expressions/syntax.html)
- [Open Stage Control's Math.js Implementation Reference](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/#formulas)

# Integration of Ontime with Open Stage Control

## Problem Description
When configuring Ontime to communicate with Open Stage Control via OSC (Open Sound Control), users may encounter issues with the OSC message routing, specifically regarding the source port from which messages are sent. There is confusion about why the `/ontime/update` message is sent from a randomized port instead of a fixed one.

## Solution
1. **OSC Configuration in Ontime**:
   - Set the OSC settings in Ontime as follows:
     - **Listen Port**: `8888` (for receiving OSC messages)
     - **Target Port**: `9999` (for sending OSC messages to Open Stage Control)
     - **Target Address**: `127.0.0.1:9999` (assuming both applications are running on the same host)

2. **Message Format**:
   - Ensure that every OSC message sent to Ontime starts with the prefix `/ontime/`, followed by the specific command. For example:
     - To start the next action, use: `/ontime/start-next`.

3. **Randomized Port Issue**:
   - The messages from Ontime are sent from a randomized port, which is a design choice that may not be optimal. It is recommended that software should ideally send messages from its receiving port to simplify communication.

4. **Testing**:
   - After configuring the settings, launch the OSC server and test the communication by sending commands to ensure they are processed correctly.

5. **Session File**:
   - For reference, a session JSON file is available: [Attachment: cWqAYlapDhcgOPhk2bGJDcgP49l.json].

By following these configurations and guidelines, users should be able to successfully integrate Ontime with Open Stage Control.

# Issue with Activating Read or Write Automation in Cubase

When attempting to activate read or write automation in Cubase using Open Stage Control, the buttons briefly change color but do not remain activated. This issue occurs on Windows 10 with both Cubase 10.5 and 11.

## Problem Description
- The read button in Cubase turns green briefly and then returns to grey.
- The write button exhibits similar behavior, turning red briefly before returning to grey.
- The buttons in Open Stage Control also show inconsistent behavior, where the read button changes color when the write button is pressed, but neither remains activated.

## Solution
To resolve this issue, follow these steps:

1. **Remove the Content of Open Stage Control's Send Option**: 
   - Ensure that you are not routing OSC's output to its input, as this can create conflicts.

2. **Configure loopMIDI Ports**:
   - Create two separate MIDI ports in loopMIDI:
     - One named `oscToCubase`
     - One named `cubaseToOsc`
   - This separation helps avoid feedback loops.

3. **Set Open Stage Control's MIDI Options**:
   - In Open Stage Control, set the MIDI option to:
     ```
     OSC:cubaseToOsc,oscToCubase
     ```
   - Ensure to copy and paste this exactly as shown.

By following these steps, you should be able to successfully activate read and write automation in Cubase without issues.

[Attachment: json file reference missing]

# Cubase Channel EQ Control with Multixy & EQ Widget

## Problem Description
A user is attempting to create an EQ control interface in Open Stage Control that mimics the Cubase channel strip EQ. They aim to implement a 4-band EQ with a graphical representation that updates based on the settings of a selected track in Cubase. The user has made progress in recreating the visual layout but seeks guidance on linking the EQ curve with the positions of the Multi XY points.

## Solution
To link the EQ curve with the position of the Multi XY points, you can use scripting within Open Stage Control. Here’s a general approach:

1. **Create the Multi XY Widget**: Set up your Multi XY widget to represent the EQ bands. Ensure that each point corresponds to a specific frequency band.

2. **Use the EQ Widget**: Place an EQ widget behind the Multi XY widget, ensuring it is the same size and that the pips are set to false for a clean overlay.

3. **Linking the Points**:
   - Use the `onChange` event of the Multi XY widget to update the EQ curve dynamically. 
   - Write a script that reads the positions of the Multi XY points and adjusts the EQ curve accordingly.

4. **Example Script**:
   ```javascript
   function updateEQ() {
       const xyValues = multiXYWidget.value; // Get the current XY values
       // Logic to update the EQ curve based on xyValues
       // This will depend on how you have set up your EQ widget
   }
   
   multiXYWidget.onChange = updateEQ; // Call updateEQ whenever the Multi XY changes
   ```

5. **Testing**: After implementing the script, test the interaction to ensure that moving the Multi XY points updates the EQ curve as intended.

This method allows for a dynamic and responsive EQ control that reflects the adjustments made on the touch surface.

[Attachment: Screenshot 2022-04-21 at 20.24.26]

# Setting Widget Ranges and Steps in Open Stage Control

**Problem Description:**
Users may encounter issues when trying to set the maximum value of a fader widget based on a range widget's value. Specifically, the fader may reset to 0 and display null when the range widget's value changes. Additionally, setting the number of steps for the fader using the expression `#{@{range_emsStepsEvents}[1]-1}` may result in an error.

**Solution:**
1. To avoid the fader resetting to undefined when changing the range widget, ensure that you are using a version of Open Stage Control that addresses initialization errors. As of version 1.25.5, these issues should be resolved.
   
2. For setting the number of steps for the fader, use the following expression:
   ```javascript
   #{Math.round(@{range_emsStepsEvents}[1]-1)}
   ```
   This will correctly calculate the steps based on the range widget's value. Note that rounding will be applied automatically in future updates.

3. If you experience persistent issues, consider restarting your computer, as this may resolve unexpected behavior.

For further reference, please see the attached files:
- [Attachment: g2kPqvUyB8WcCA6ZfgVAjAc5rXg.json]
- [Attachment: 21xr3cMCSPmGD9ScbBT2gPuOt7k.json]

# How to Change CC Value of Fader Through Another Widget Like Dropdown or Menu

## Problem Description
A user needs to control a MIDI CC value (specifically CC value 11 for expression) using a fader in Open Stage Control. The user wants to change the CC value through another widget, such as a dropdown or menu, without entering edit mode each time.

## Solution
To achieve this, you can use advanced syntax to link the fader's `preArgs` property to the value of another widget, like a dropdown. Here’s how to set it up:

1. Create a dropdown widget with values set to the desired CC values (e.g., `[1, 2, 3, 4, 5]`).
2. Set the fader's `preArgs` property to:
   ```
   [1, @{dropdown_id}]
   ```
   Replace `dropdown_id` with the actual ID of your dropdown widget.

This configuration allows you to change the fader's CC value dynamically using the dropdown. Note that while the fader will change its CC value, it will not automatically update its displayed value based on the selected CC. Implementing value recall may require additional scripting.

For further information on storing and recalling fader values, refer to the article on the best way to store fader values (store & recall).

[Attachment: filename.ext]

# Identifying Messages from Multiple Users

**Problem Description:**
In a scenario where multiple users interact with the same interface in Open Stage Control, it is necessary to differentiate OSC messages from each user. The goal is to set up a unified interface for several musicians while ensuring that each musician's interactions are routed to their respective instruments or sounds.

**Solution:**
To achieve user-specific OSC routing, you can implement the following method:

1. **User Profile Selection:**
   - Create a widget (such as a switch or dropdown) that allows users to select their profile.

2. **Advanced Syntax for OSC Properties:**
   - Use advanced syntaxes in the control widgets to modify the OSC properties based on the selected profile. For example, in a fader's address, you can use the following JavaScript code:

   ```javascript
   JS{
   if (@{profile_switch} == 'jack') {
     return '/monitor/1'
   } else if (@{profile_switch} == 'john') {
     return '/monitor/2'
   }
   }
   ```

3. **Preventing Profile Value Sharing:**
   - Set the switch's `bypass` property to `true` to ensure that the profile value is not shared between clients.

4. **Manual Routing (Optional):**
   - For more advanced use cases, you can disable cross-client synchronization by using the `clientSync` option. This allows for manual routing through a custom module, though this approach is more complex.

By following these steps, you can effectively manage OSC messages from multiple users while maintaining a single interface.

# Targeting Fader or Pad Input Text via CSS

## Problem Description
Users may experience fuzzy text from input values on faders and XY-pads in Open Stage Control. Attempts to target the input text using standard CSS selectors like `.input` or `>.input` may not yield results.

## Solution
To effectively target the input text when it is not focused, use the following CSS selector:

```css
.input canvas
```

This selector allows you to modify the appearance of the input text, including addressing any blurriness issues. For further information on the blurriness problem, refer to the discussion [here](https://github.com/jean-emmanuel/open-stage-control/issues/420).

![image.png](attachment reference missing)

# Escape Comma in VAR{} on Default Value

**Problem:**
When using a range VAR with a default value, the comma is not being escaped, which results in the default value not being applied correctly. The example provided is:
```javascript
VAR{"range", { "min": 1, "max": 36 }}
```
The user is seeking a method to escape the comma or a workaround for this issue.

**Solution:**
The default value in VAR only supports basic types. To initialize it properly, you can use the `setVar` function from the `onCreate` event. Alternatively, you can use the following syntax:
```javascript
#{VAR{range} || {min: 1, max: 36}}
```

# Velocity Sensitivity on Drum Pads

## Problem Description
Users are experiencing issues with velocity sensitivity on drum pads created in Open Stage Control. Specifically, the velocity does not seem to vary based on touch pressure when using an iPad, while it works correctly on other devices.

## Solution
To implement velocity sensitivity on drum pads, use a canvas widget instead of a button widget. Configure the canvas with the following properties:

```javascript
const props = {
    "colorWidget": "limegreen", 
    "colorFill": 'rgba(99,121,142,0.5)',
    "css": "border-radius:10px; transform: scaleX(-1);",
    "alphaFillOff": 0.3,
    "alphaFillOn": 1,
    "lineWidth": 0,
    "address": "/note",
    "preArgs": [1, @{Pitch} + preArgs[$]],
    "target": "midi:cubase",
    "valueLength": 1
}

props.onTouch = `
// compute value based on touch infos
if (event.type === 'start') {
  locals.touched = 1
  locals.velocity = event.force || (100/127) // velocity 100 if no touch force is provided 
} else if (event.type === 'stop') {
  locals.touched = 0
} else {
  return
}
set(this, locals.touched * locals.velocity * 127)
`

props.onDraw = `
// fill the canvas depending on velocity
ctx.rect(0,0,width, height)
ctx.fillStyle = cssVars.colorWidget
ctx.globalAlpha = value / 127
ctx.fill()
`

props.onValue = `
// make sure incoming value is a number
set(this, parseFloat(value) || 0, {sync: false, send: false})
`
return props
```

If you encounter issues where the velocity is always reported as 100 or zero, add the following line to the `onTouch` function to debug:

```javascript
console.log('force: ' + event.force)
```

If this logs zero on an iPad, it may indicate a problem with the Touch Force API, which is generally supported on iOS. Ensure you are checking the console on the iPad itself, as client consoles are independent.

If the canvas works correctly on other devices (e.g., Android), the issue may be specific to iOS. 

[Attachment: Drums Pads.json]  
[Attachment: pBM0uRvAQ5b1rSjZsgUJSEpKigF.json]  
[Attachment: Drums Pads-Canvas.json]  
[Attachment: ukdy1b5l86QH0d4kJZk9Yf2wIY7.json]

# Randomize Feature in Open Stage Control

## Problem Description
Users may want to implement a 'randomize' feature within Open Stage Control (OSC) that allows a button to randomly select one option from a predefined group of choices each time it is pressed. The goal is to have a button that, when activated, randomly selects one of several options from a dropdown menu.

## Solution
To create a random selection feature, use the following JavaScript code in the button's `onValue` script:

```javascript
var i = Math.floor(Math.random() * 4); // Generates a random integer from 0 to 3
var choices = ["A", "B", "C", "D"]; // Define your options
var choice = choices[i]; // Select a random choice
set('menu_id', choice); // Set the dropdown menu's value to the random choice
```

### Important Notes:
- Replace `'menu_id'` with the actual ID of your dropdown menu.
- Ensure that the random value matches one of the dropdown menu's options; otherwise, no selection will occur.
- Set the button's mode to **momentary** to ensure the script runs only while the button is pressed.

### Example Files
- [Attachment: 66C42mXrnnzl3qs5L3943sAbxkl.json]
- [Attachment: eqX8YTUiaeZXM5YHtosndpOGAG7.json]

# Toggle Strange Behavior

## Problem Description
When setting both the 'on' and 'off' values of a toggle to the same value, the toggle remains in the 'on' state. This behavior is also observed with push buttons, even when both values are set to 'null'. 

## Solution
This behavior is currently not supported in Open Stage Control, as the application relies on value comparison to determine the state of a widget. However, there are two confirmed workarounds:

1. **Use a Push Button with LED**: 
   - Implement a push button configured with `norelease: true` and set both the 'on' and 'off' values to the same command (e.g., `record`). Use an LED widget to visually indicate the state.

2. **Use a Toggle with a Script Widget**: 
   - Create a toggle button that utilizes a script widget to manage the state. The script can be designed to send the same command for both 'on' and 'off' states. 

Both methods allow for monitoring the state effectively while working around the limitation of toggles having the same 'on' and 'off' values.

For further reference, you may adapt the example provided in the community forum: "Two or more osc address on a toggle button".

[Attachment: filename.ext]

# CSS Colors Coding in the CSS Field

**Problem Description:**
When using a JavaScript block (JS{}) within a CSS field in Open Stage Control, the editor's syntax highlighting for CSS colors becomes inconsistent. This can lead to confusion for users, especially beginners, who rely on color coding to identify syntax errors.

**Solution:**
To improve the readability of your code and minimize confusion caused by the syntax highlighting, you can wrap the JavaScript code in a CSS comment block. This will prevent the editor from attempting to highlight the JavaScript as CSS, allowing for clearer visualization of the actual CSS code.

Here’s how to implement this:

```css
/*
JS{
  var css = ''
  var allKeyNames = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]
  var k = (VAR{keyNoteNumber} || 0) + 1
  var scale = VAR{scaleJSON} || [0,2,4,5,7,9,11]
  var l = scale.length-1
  css += ".key:nth-child(" + (k) + ") inner {background-color: #cc0000}\n"
  
  for( let i=1; i<=l; i++ ) {
    var outside = (scale[i] + k)
    if (outside > 12) {
      outside = outside -12
    }
    css += '.key:nth-child(' + (outside) + ') inner {background-color: orange}\n'
  }
  css += ".key > inner { border: 1px solid #111}"
  locals.css = css
}
*/
#{locals.css}
```

This approach will help maintain clarity in your CSS field while using JavaScript code.

# Values Being Lost While Waiting for Fragment to Load

When receiving multiple OSC messages, the first message determines which fragment to load, followed by numerous values for the fragment's widgets. However, by the time the fragment loads, the values have already been sent, resulting in the loaded fragment widgets not being updated. 

## Solution

1. **Add Delay**: Introduce a delay after the message that loads the fragment to ensure it is fully loaded before the values arrive.
   
2. **Preload Fragments**: Use a custom module to preload all fragments when the session opens. This can be done with a callback bound to `app.on('sessionOpened', callback)`, where you loop over the fragment file names and send them to a fragment widget. After preloading, you can empty the fragment, as the files will remain in memory.

3. **Fragment Ready Message**: Implement a script within the fragment that sends a message upon creation to indicate to the other software that it is ready to receive values.

Additionally, it was noted that an incorrect address may have caused initial issues. After correcting the address, the fragment widgets began loading and updating values correctly. An alternative solution involved creating a "database" using a matrix of variables with OSC listeners, allowing for querying using link IDs, although this approach was deemed unnecessary after resolving the address issue.

# Multiple MIDI Targets for One Widget

**Problem Description:**
It is possible to set multiple MIDI targets for a single widget in Open Stage Control. However, users may encounter issues when trying to use a global MIDI target variable within the widget properties, resulting in MIDI input/output not functioning as expected.

**Solution:**
To set multiple MIDI targets for a widget, use the following syntax:

```json
[
  "midi:a",
  "midi:b"
]
```

When defining the widget properties, if you want to use a global variable for MIDI targets, ensure that you remove the quotes around the variable reference. For example, instead of:

```json
"target": "@{midi_target}"
```

Use:

```json
"target": @{midi_target}
```

This adjustment circumvents a known bug in the property resolution. 

Additionally, if you are using a custom module to define your MIDI targets, ensure that you correctly set the global MIDI targets in the `sessionOpened` event, as shown below:

```javascript
app.on('sessionOpened', () => {
    receive('/SET', 'midi_target', globalMIDItarget);
    console.log('Global midi target set as ' + globalMIDItarget);
});
```

By following these guidelines, you should be able to configure multiple MIDI targets effectively. 

[Attachment: filename.ext] (attachment reference missing)

# Sending Different MIDI Note Messages Using a Dropdown Widget

## Problem Description
Users want to assign different MIDI note messages to each item in a Dropdown widget in Open Stage Control. Specifically, they want to send different `preArgs` values for each dropdown selection to save screen space.

## Solution
To achieve this, you can configure the `preArgs` field of the Dropdown widget to send MIDI note messages based on the selected value. Here’s how to set it up:

1. **Configure the Dropdown Widget**:
   - Set the `preArgs` to the MIDI channel (e.g., `1` for channel 1).
   - Define the `values` in the Dropdown widget as pairs of `[note_number, velocity]`. For example:
     ```json
     {
       "Value 1": [121, 1],
       "Value 2": [122, 1],
       "Value 3": [123, 1],
       "Value 4": [124, 1]
     }
     ```

2. **Using a Script Widget (if needed)**:
   - If you require more complex behavior, such as sending multiple MIDI messages or adding delays, consider using a Script widget. You can utilize the `send` function to send MIDI messages based on the selected value.

3. **Example Script**:
   - Here’s a sample script that can be used in conjunction with the Dropdown:
     ```javascript
     if (this.value === "Value 1") {
       send([121, 1]); // Send MIDI note for Value 1
     } else if (this.value === "Value 2") {
       send([122, 1]); // Send MIDI note for Value 2
     }
     // Add more conditions as needed for other values
     ```

By following these steps, you can effectively send different MIDI note messages based on the selected item in the Dropdown widget.

[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
(attachment reference missing)

# Widgets Don't Interact Until Editor/Inspector Are Enabled

**Problem Description:**
Widgets such as buttons, faders, and knobs do not interact unless the Editor/Inspector is enabled. This behavior is not desired as it should not be visible to the end user.

**Solution:**
1. Ensure you are using the latest version of Open Stage Control.
2. Check if a custom theme file is being used that may affect widget interaction.
3. Verify that the `interaction` property is not set to false on the root widget or any other container.
4. Confirm that touch events are not being bypassed in the root container's `onTouch` script or any other container's script.

If the issue persists after these checks, further investigation may be needed.

# Switching Multiple Toggles Simultaneously

## Problem Description
Users may want to control multiple toggle switches at once, such as activating specific presets that turn on or off a combination of toggles. For example, a user may wish to create a preset where toggles 1, 4, and 8 are on, while another preset activates toggles 2, 5, and 9.

## Solution
To achieve this functionality, you can utilize the `set` function within a script to control multiple widgets simultaneously. Here’s an example of how to implement this:

```javascript
// Setting multiple widgets from a single script
set("toggle_1", 1); // Activate toggle 1
set("toggle_4", 1); // Activate toggle 4
set("toggle_8", 1); // Activate toggle 8

// For another preset
set("toggle_2", 1); // Activate toggle 2
set("toggle_5", 1); // Activate toggle 5
set("toggle_9", 1); // Activate toggle 9
```

You can also incorporate conditional logic based on the toggle's value in its script property:

```javascript
if (value === 1) {
  // Actions when the toggle is ON
  set("solo_push_1", 127);
  set("solo_push_2", 127);
} else {
  // Actions when the toggle is OFF
  set("solo_push_1", 1);
  set("solo_push_2", 1);
}
```

This method allows for flexible control of multiple toggles based on user-defined presets.

# Dynamically Creating Widgets in Open Stage Control

## Problem Description
Users may need to dynamically create or modify widgets in Open Stage Control through custom modules. This includes creating widgets at runtime or editing existing widget properties such as HTML.

## Solution
To dynamically create widgets, you can utilize the `receive` function to modify the `widgets` property of a container widget. Here are the steps:

1. **Creating Widgets Dynamically**:
   To initiate widgets, create an empty container widget in your session and populate its `widgets` property from your custom module. Use the following code structure:
   ```javascript
   receive('/EDIT', 'container_id', {
       widgets: [
           {
               type: 'fader',
               colorWidget: 'red',
               range: {min: 0, max: 100},
               // omitted properties will use defaults
           },
           // Additional widgets can be added here
       ]
   });
   ```

2. **Editing HTML Property**:
   If you need to edit the HTML property of a widget dynamically, link the HTML property to a variable in your custom module that changes based on your application logic.

3. **Handling Application Launch**:
   To add widgets when the application launches, use the `app` object to listen for the `sessionOpened` event:
   ```javascript
   app.on('sessionOpened', (data, client) => {
       receive('/EDIT', id, widget_data, {clientId: client.id});
   });
   ```

4. **Advanced Example**:
   For a more complex implementation, refer to the example provided in the following GitHub link, which builds generic plugin interfaces based on information from a DAW: 
   [Attachment: ardour-plugins-module.js].

By following these methods, you can effectively manage dynamic widget creation and modification in Open Stage Control.

# Sending MIDI CC with Dropdown or Menu

## Problem Description
Users may encounter issues when trying to send different MIDI CC messages to their DAW using a dropdown or menu configuration in Open Stage Control.

## Solution
To resolve this issue, ensure that the configuration is set correctly. Specifically, replace "dual mixer" with "1" in your settings. This adjustment should enable the dropdown or menu to send the desired MIDI CC messages successfully.

[Attachment: Captura de pantalla 2023-11-13 224846]

# Translating MIDI Velocity Messages to Widget Parameters in Open Stage Control

## Problem Description
When creating a virtual replica of a Novation Launchpad, there is a need to translate incoming MIDI velocity messages into corresponding widget parameters, specifically for LED behavior. The challenge lies in correctly formatting the JavaScript function to adjust the widget's color based on the velocity values received from MIDI messages. An error occurs due to improper JSON syntax when embedding the JavaScript function in the properties object.

## Solution
To resolve the JSON syntax error, ensure that double quotes within the JavaScript code are properly escaped with a backslash. Here’s how to correctly format the JavaScript function and embed it in the JSON properties:

1. Define the JavaScript function to map velocity values to colors:
   ```javascript
   JS{{
   var velocityReceived = OSC{/note};
   var colors = {
       12: "#000000",
       13: "#5f0000",
       14: "#af0000",
       15: "#ff0000",
       29: "#ffdf00",
       46: "#808000",
       63: "#ffffaf",
       28: "#005f00",
       44: "#00af00",
       60: "#00ff87"
   };
   return colors[velocityReceived] || "#000000";
   }}
   ```

2. Embed the function in the JSON properties object, ensuring proper escaping:
   ```json
   {
       "type": "button",
       "top": 40,
       "left": 10,
       "id": "1-1",
       "visible": true,
       "interaction": true,
       "width": 80,
       "height": 50,
       "expand": "false",
       "colorText": "auto",
       "colorWidget": "JS{{\nvar velocityReceived = OSC{/note};\nvar colors = { 12: \"#000000\", 13: \"#5f0000\", 14: \"#af0000\", 15: \"#ff0000\", 29: \"#ffdf00\", 46: \"#808000\", 63: \"#ffffaf\", 28: \"#005f00\", 44: \"#00af00\", 60: \"#00ff87\" };\nreturn colors[velocityReceived] || \"#000000\";\n}}"
   }
   ```

By ensuring that all double quotes in the JavaScript code are escaped, the JSON syntax will be valid, and the function should work as intended without errors.

# Delay the Second Send Function

## Problem Description
A user is trying to delay the execution of a `send()` function in Open Stage Control using `setTimeout()`. The user encounters issues with the MIDI messages not being sent as expected when using the delay.

## Solution
To successfully delay the `send()` function, ensure that the widget's target is defined. The correct usage of `setTimeout()` is as follows:

```javascript
setTimeout(function() { 
    send('/note', 2, 85, 127); 
}, 1000);
```

Alternatively, you can define a separate function for the delayed action:

```javascript
function actNP() {
    send('/note', 2, 85, 127);
}

setTimeout(actNP, 50);
```

Make sure that the MIDI target is correctly set up in your configuration. If you continue to experience issues, check the server's console for debug messages to diagnose the problem.

**Attachments:**
- [Attachment: timeout_send.json]
- [Attachment: timeout - not working.json]

[Attachment: atlk8gV3RzwslyX7fyb6zY2TD78.json]

[Attachment: i7gFwtPpvknbo8xg5c6QwwNt4Lw.json]

# Limiting OSC Flow on Encoder

## Problem Description
When using an encoder, the OSC receiver receives multiple identical values during each update, leading to excessive data flow. The goal is to send the OSC message only when the integer value changes.

## Solution
To limit the OSC message flow, implement the following code:

1. **Initialization**: Store the last sent value in a local variable.
2. **Value Update**: Compare the current value with the last sent value before sending the OSC message.

Here is the refined code:

```javascript
// onCreate
locals.lastSentValue = null;

// onValue
var min = 0,
    max = 30,
    index = locals.index || 0; // load index

// increment index
index = Math.min(max, Math.max(min, index + value));

// save index
locals.index = index;
index = Math.round(index);

if (index !== locals.lastSentValue) {
  send('/OSC_Name', index);
  locals.lastSentValue = index;
}
```

This implementation ensures that the OSC message is only sent when the rounded integer value changes, effectively reducing unnecessary data flow. 

[Attachment: Capture d’écran 2025-03-13 à 21.09.51]

# Matrix of Buttons Not Updating on OSC Message

When using a matrix object with buttons in Open Stage Control, users may encounter an issue where only the first button updates despite sending an array of color values via OSC messages.

## Problem Description
The matrix does not update correctly when receiving OSC messages for button colors. The configuration for the matrix includes properties for labels and color widgets, but only the first button in the matrix reflects the changes.

## Solution
To ensure that the matrix updates correctly, modify the `props` configuration as follows:

```json
{
  "label": "#{OSC{/deck_a_labels, []}[$]}",
  "mode": "tap",
  "colorWidget": "#{OSC{/deck_a_colors, []}[$]}",
  "_labels": "OSC{/deck_a_labels, []}",
  "_colors": "OSC{/deck_a_colors, []}"
}
```

This adjustment includes default values for the OSC listeners to prevent errors and forces the update by ensuring that the properties are evaluated correctly.

For scenarios involving variable widgets, ensure that the `_colors` value does not depend on `$` and instead returns the complete content of the variable. For example:

```json
{
  "colorWidget": "#{@{clr}[$]}",
  "mode": "tap",
  "_colors": "@{clr}"
}
```

This approach should resolve the issue of the matrix not updating correctly. Note that there may be additional updates in future releases that address these limitations.

# Issue with OSC Float Type Value Precision

## Problem Description
A user encountered an issue with Sonic Pi 3.2 when receiving float values sent via Open Sound Control (OSC). The sender transmits a float with one decimal, but Sonic Pi retains the entire float number, raising the question of whether this is a bug and if OSC can indeed send a float with one decimal.

## Solution
The issue arises from the limited precision of float values. OSC does support sending floats with one decimal, but due to precision limitations, artifacts may occur. To achieve greater precision, consider using doubles (64-bit floating point numbers, typetag “d”). Alternatively, rounding on the receiving side can also be an effective solution.

# Make a Panel Scroll Programmatically

## Problem Description
Users are seeking a way to programmatically control the scroll position of a panel in Open Stage Control, particularly in relation to a fader value. This functionality would enable features like a playhead that follows a timeline, allowing for more precise navigation within a session.

## Solution
Currently, Open Stage Control does not support automatic scrolling of panels based on fader values. However, there is a scripting method available to control scroll positions. You can refer to the documentation for more details on this feature: [Open Stage Control Documentation - Scripting](https://openstagecontrol.ammd.net/docs/widgets/scripting/#getscrollid).

For further implementation ideas, consider using SVG for visual representation, although it may require additional workarounds to enable interactivity. 

[Attachment: filename.ext]

# Client Lost Values When Reloading the Page on a Slow Connection

When reloading the page on a slow network connection, the faders in Open Stage Control revert to 0 instead of restoring their previous values. This issue occurs specifically when using Bluetooth network tethering, which can be slower than a dedicated Wi-Fi connection.

## Solution

To address this issue, you can implement a session management solution that refreshes the states of your controls upon reconnection. The following JavaScript code can be used to send a signal to your application when a session is opened:

```javascript
app.on('sessionOpened', (data, client) => {
    send('localhost', 18080, '/client_connected');
});
```

This code should be placed in a custom JavaScript file, which you can then reference in the server options under `custom-module`. 

For more details on setting up a custom module, refer to the Open Stage Control documentation regarding `module.exports` and the appropriate structure for your JavaScript code.

[Attachment: filename.ext]

# Multiple Clients on One JSON with Different States

**Problem Description**  
Users want to load the same JSON configuration in multiple browser windows or tabs while maintaining different states for each instance. This is particularly useful for controlling two instances of the same synthesizer with distinct parameters.

**Solution**  
Currently, the only way to achieve this is by running two separate servers. However, you can also set the `bypass` property of the root to `true`. This will prevent synchronization between tabs, allowing each tab to control a different synthesizer, provided that the widgets in each tab have distinct targets or addresses. 

For example, you can configure your JSON as follows:

```json
{
  "root": {
    "bypass": true,
    // other configurations
  }
}
```

This setup allows you to manage different states in separate tabs effectively.

# Disabling Connection to Server Notification

**Problem Description:**
Users may experience persistent notifications stating, "The Connection to the Server has been interrupted..." and "The Connection to the Server has been restored..." on their touchscreen devices. These notifications can be disruptive, especially if the connection drops and restores quickly.

**Solution:**
To permanently hide the connection status notifications, you can use a theme file with the following CSS code:

```css
.notifications .server-connected {
  display: none !important;
}
```

This code will prevent the connection notifications from appearing, allowing for uninterrupted use of the touchscreen interface.

# MIDI Signals for Open Stage Control Buttons

## Problem Description
Users often inquire about the types of MIDI signals that Open Stage Control buttons can send, particularly in relation to avoiding interference with modulation, vibrato, and other controls. There is a need for clarity on how to effectively utilize MIDI CCs, Note messages, and other signal types within various Digital Audio Workstations (DAWs).

## Solution
To effectively manage MIDI signals in Open Stage Control, consider the following approaches:

1. **Use of MIDI CCs and Note Messages**:
   - Open Stage Control supports sending MIDI Control Change (CC) messages and Note messages across all 16 MIDI channels.
   - By using both CCs and Note messages, you can significantly increase the number of controls available. For instance, CCs provide 2048 controls, while Notes can double that capacity.

2. **Setting Up MIDI Devices in Your DAW**:
   - Create two separate MIDI devices in Open Stage Control:
     - One for MIDI CCs, Notes, faders, etc.
     - Another for DAW control messages.
   - In your DAW (e.g., Logic, Cubase), configure the MIDI input settings to select the appropriate devices for control surfaces and track inputs.

3. **Logic Pro Configuration**:
   - In Logic Pro, navigate to the "MIDI Input" tab in settings to select which devices are used for your tracks.
   - Use the "Control Surfaces" menu to assign and manage control messages from Open Stage Control.

4. **IAC Driver Setup**:
   - Ensure that the IAC Driver is configured correctly in your MIDI device list. You can set both devices to `0,0` for the IAC Driver OSC or assign different identifiers as needed.

By following these guidelines, you can optimize the use of MIDI signals in Open Stage Control and ensure that your setup does not interfere with other MIDI functions.

For further details on setting up MIDI devices, refer to the attached documentation. 

[Attachment: filename.ext]

# Non UI Triggered Scripts and 'send()' Command

## Problem Description
The 'send()' command in Open Stage Control does not work when triggered by scripts that are not initiated by user interaction, such as those responding to incoming OSC messages. This limitation raises the need for a workaround to send OSC messages programmatically.

## Solution
To send OSC messages from a script triggered by an incoming OSC message, you need to create a custom module. An example for this use case is available in the documentation. This limitation is in place to prevent feedback loops in the OSC messaging system. 

For further details, refer to the documentation on creating custom modules.

# SOLVED: How to Get Color from Another Widget in Multixy Widgets PointsAttr "colorFill"

**Problem Description:**
In a multixy widget, the user attempted to set the `colorFill` attribute to read the `widgetColor` of a button named "eq_on_1" using the syntax:
```json
"colorFill": "#{@{eq_on_1} ? '@{eq_on_1.colorWidget}':'grey'}"
```
However, the computed value returned was `{ "colorFill": "__VARS.pink" }`, which included the prefix "__VARS", preventing the point from turning pink.

**Solution:**
The correct syntax to reference the widget color without the "__VARS" prefix is:
```json
"colorFill": "#{@{eq_on_1} ? @{eq_on_1.colorWidget} : 'grey'}"
```
In this case, `@{}` is interpreted as a JavaScript variable within the `#{}` or `JS{}` blocks, allowing the actual value to be used instead of a variable name.

Alternatively, the user found success by creating a CSS variable:
```css
"var(--color-eqOn1)"
```
This method also effectively resolved the issue.

[Attachment: testeqPink.json]  
[Attachment: lsy4O0JAg5dDXdYxNl33WpqKCl4.json]

# Dynamic Switch List Using OSC Listener

## Problem Description
The user is attempting to create a dynamic list of switch values based on an incoming OSC message, using a variable `song_count`. However, the current implementation does not correctly evaluate the OSC listener command within a JavaScript block, resulting in the switch value displaying as text instead of the intended dynamic values.

## Solution
The issue arises because OSC blocks cannot be dynamically constructed within JavaScript blocks, as OSC blocks are evaluated before JavaScript blocks. Therefore, the user should define the list of switch values manually if dynamic generation is not feasible.

Here is the confirmed solution for defining the switch values manually:

```javascript
var values = {}
values[OSC{/SongName0,Song 1}] = 0 
values[OSC{/SongName1,Song 2}] = 1
values[OSC{/SongName2,Song 3}] = 2
values[OSC{/SongName3,Song 4}] = 3
values[OSC{/SongName4,Song 5}] = 4
return values
```

If you require a dynamic approach, consider alternative methods outside of the OSC block for managing the list.

# Moving Implementation to Raspberry Pi/Node from Windows 10 Error

When migrating an Open Stage Control implementation from Windows 10 to a Raspberry Pi 5 running Node (v 1.27.1), users may encounter a MIDI event parsing error when sending specific messages. The error message may appear as follows:

```
ValueError: MidiOutAlsa::sendMessage: event parsing error!
```

This issue arises when sending messages to the target `midi:oscToDaw`, particularly for the address `/program`, while other messages, such as `/note`, are sent successfully.

## Solution

1. **Check rtmidi Version**: Ensure that the version of rtmidi installed is at least 1.4.9. You can check the version by running the following command in the terminal:
   ```bash
   python3 -c "import rtmidi; print(rtmidi.__version__)"
   ```

2. **Update rtmidi**: If the version is lower than 1.4.9, you will need to upgrade it. The default package manager may not have the latest version available for Raspberry Pi. Consider installing rtmidi via pip instead:
   ```bash
   pip install python-rtmidi --upgrade
   ```

3. **Verify ALSA Version**: Additionally, check the ALSA version to ensure compatibility:
   ```bash
   cat /proc/asound/version
   ```

Following these steps should resolve the MIDI event parsing error and allow for successful communication with the target. If further issues arise, additional configuration adjustments may be necessary based on the specific setup and environment.

[Attachment: filename.ext]

# Displaying Notes from an External Keyboard in Open Stage Control

To display the keys played on an external keyboard, such as an Oxygen keyboard, you need to configure a script widget to properly handle MIDI note messages.

## Problem Description
The keyboard widget in Open Stage Control does not automatically display keys pressed on an external keyboard unless specific conditions are met. The user seeks to understand how to display these keys and what event is sent by the keyboard widget when a key is pressed.

## Solution
1. **Script Widget Configuration**: Use a script widget with the following settings:
   - **Address**: `/note`
   - **preArgs**: `1`
   - **Target**: `midi:oxygen`
   - **onValue**: 
     ```javascript
     if (value.length != 2) return;
     var note = value[0],
         vel = value[1];
     set('keyboard_1/' + note, vel > 0 ? 1 : 0);
     ```

2. **Correct Value Passing**: Ensure that the `set()` function passes `1` instead of `127`. The internal configuration of the note buttons requires this value to properly reflect the key press.

3. **Example Implementation**: If you need a working example, refer to the provided attachment which contains a sample configuration:
   - [Attachment: keyboard_test.json]

4. **Using `send` Function**: Note that the `send` function is not suitable for setting a widget's value. It is primarily used to send messages to other software.

5. **Accessing Widget Properties**: To retrieve the start property value of a keyboard widget, use the `getProp()` function.

6. **Editor Text Size**: To increase the text size in the editor, modify the `.ace_editor` class in your theme file.

By following these steps, you should be able to successfully display the keys played on your external keyboard within Open Stage Control.

[Attachment: 3qIxHyJfZmYIGBdZI6ICiQiKoUV.json]

[Attachment: 9f1Vxay6ZXUA8lcPmscW0zPZqbb.json]

[Attachment: yN2Y9wKWyit98gUj0fbnW6BNZk7.json]

# Configuring XY Pads for MIDI Control Change Messages

## Problem Description
Users may encounter difficulties in configuring an XY pad to send separate MIDI Control Change (CC) messages for the X and Y axes. Specifically, the challenge is to set X to CC#1 and Y to CC#11 using the pre arguments tab.

## Solution
To configure the XY pad to send different CC messages for each axis, use the following pre arguments:

```javascript
{
  x: { cc: 1 },
  y: { cc: 11 }
}
```

This setup allows the XY pad to correctly send CC#1 for the X axis and CC#11 for the Y axis.

# Integrating Custom GUI with Open Stage Control

## Problem Description
Users are exploring ways to integrate custom JavaScript code (e.g., using P5.js) to create a specific GUI with Open Stage Control (OSC). The main considerations include whether to use a custom module, a canvas module, or a separate application/window, and how these options affect the ability to send and receive OSC messages. Additionally, questions arise regarding the use of NPM libraries and the implications of running the client and server on the same device.

## Solution
1. **Custom and Canvas Modules**:
   - Both the custom and canvas modules can transmit OSC messages. They can also receive messages from other widgets, allowing for control over them.
   - Importing NPM libraries is only possible on the server side within a custom module.

2. **Separate Application/Window**:
   - You can run multiple sessions with a single server instance and a single custom module, which simplifies the setup.
   - If you choose to create a separate GUI in another window with its own Node.js installation, you will need to install an OSC library in that separate installation to handle OSC messages.

3. **Client and Server on the Same Device**:
   - The location of the client and server (same device or not) does not change the integration options or capabilities.

4. **Using a Frame Container**:
   - It is possible to load an HTML page with dedicated JavaScript for the GUI in a frame container. However, the embedded page will not have access to the client scripting context and cannot communicate with the server without additional setup.

By utilizing a custom module, you can effectively integrate third-party NPM libraries and manage OSC communications efficiently.

# Clone vs Common ID in Open Stage Control

**Problem Description:**
A user is trying to implement two multixy widgets in Open Stage Control: a small one for display purposes and a larger one for control, which opens when the small widget is touched. The user is considering using a common ID for both widgets and is unsure whether to use a clone instead.

**Solution:**
Using a clone is recommended as it automatically copies all properties of the original widget, except those that are overridden. This approach simplifies modifications, allowing changes to be made only to the original widget, such as adjusting the range. However, there is no definitive better option; it is advisable to try both methods to determine which works best for your specific use case.

# Grouping nth-child Pseudo-Classes in Open Stage Control

## Problem Description
The user is seeking a method to group multiple `nth-child` pseudo-classes into a single class (theme) in Open Stage Control. The intention is to apply different background colors to specific child elements while maintaining a clean and organized CSS structure.

## Solution
It is important to note that `:nth-child()` is a pseudo-class and cannot be directly grouped into a single class. The `class` attribute in Open Stage Control is intended for adding a class to a widget, not for grouping pseudo-classes.

To achieve the desired styling, you will need to define each `nth-child` pseudo-class separately in the CSS. Here is an example of how to do this:

```css
.value:nth-child(1) {
  background-color: red;
}

.value:nth-child(2) {
  background-color: pink;
}

.value:nth-child(3) {
  background-color: purple;
}
```

If you want to apply these styles to a widget, you will need to include each `nth-child` declaration individually in the widget's CSS settings. There is currently no method to encapsulate these pseudo-classes into a single theme or class within Open Stage Control.

# Control the Virtual Panel with a Physical MIDI Controller

**Problem:**
A user wants to control a virtual panel created in Open Stage Control using a MIDI controller (BCF2000) to send OSC messages to multiple Resolume instances.

**Solution:**
To achieve this, you will need to write a custom module that translates MIDI messages into actions that update the interface and send OSC messages to the other software. Simply sending MIDI messages will only update the widget values without triggering any outgoing messages.

# How to Use Modals in Open Stage Control

## Problem Description
Users may find it challenging to understand how to implement modals in Open Stage Control, particularly in terms of inserting child components and displaying options.

## Solution
To create a modal that allows users to select from multiple options, follow these steps:

1. **Create a Modal**: Use the modal component as a container for your content.
2. **Add a Switch**: Manually add a switch component within the modal to control its visibility.
3. **Insert Child Components**: Populate the modal with child components (e.g., buttons, text fields) that allow users to make selections.

For a practical example, refer to the attached configuration file: [Attachment: y5E7gPvPkJEWSxlb3cysDqaeVYk.json]. 

For further details on properties and usage, consult the Open Stage Control documentation.

# Reading Widget Properties from a Custom Module

**Problem:**
It is not possible to directly access a widget's properties or values from within a custom module in Open Stage Control. Users may want to perform checks on widget values before executing actions.

**Solution:**
To read a widget's property or value, use the remote control commands `/GET` or `/EDIT/GET`. Note that these commands will return only raw properties and not dynamically computed values. This limitation is currently acknowledged and may be addressed in future updates.

# Change Part of Text Color or Weight in Button Label

To highlight specific words in a button label by changing their color or weight (e.g., making them bold or italic), you can utilize the HTML property available in Open Stage Control.

## Solution

1. **Use an HTML Widget**: 
   - Create an HTML widget to serve as the frontend for your button.
   - Enter your desired text in the HTML field of the widget. You can format the text using HTML tags (e.g., `<span style="color:red; font-weight:bold;">BUTTON</span>`).

2. **Button Configuration**:
   - Create a button and set the `label` property to `false`.
   - Reference the HTML widget in the button by typing `@{html_1}` in the appropriate field.

This method allows for greater flexibility in styling the text displayed on your button. 

[Attachment: filename.ext]

# Issue with SVG in CSS Background URL

## Problem Description
Some SVG images are not appearing on buttons after upgrading to version 0.49.10 of Open Stage Control. While a few SVGs load correctly, the majority do not, and there are no apparent differences between the SVG files that work and those that do not.

## Solution
The issue is related to the use of hexadecimal color codes in SVG files. Recent versions of Chromium have a problem where the `#` character in hexadecimal color codes breaks SVG declarations. To resolve this, use `rgb()` color statements or plain color names instead of hexadecimal codes in your SVG files.

For example, instead of using:
```xml
<rect class="cls-1" fill="#fff" ... />
```
Use:
```xml
<rect class="cls-1" fill="rgb(255, 255, 255)" ... />
```

This change should allow your SVGs to load correctly in Open Stage Control. 

For more information on this issue, refer to the discussion on [Stack Overflow](https://stackover). 

[Attachment: filename.ext] (attachment reference missing)

# Scripts Not Working

When attempting to execute scripts in Open Stage Control, users may encounter issues where scripts do not function as expected, even for simple commands. This can lead to confusion, especially when some parts of the script seem to work while others do not.

## Solution

To resolve issues with scripts, particularly when trying to change widget properties such as `visible`, it is important to use the correct syntax. The `set()` function changes the value of a widget but does not modify its properties directly. Instead, you can change properties via scripting by following the guidance provided in the forum discussion.

For example, to change the visibility of a widget, refer to the following resource for proper syntax: [Attachment: Syntax issues updating "visible" properties of panel - #2 by jean-emmanuel]. 

By applying these corrections, users should find that their scripts operate as intended.

# Benefit from Multi-Core CPU in Open Stage Control

## Problem Description
Users may wonder if Open Stage Control (OSC) benefits from multi-core CPUs, specifically whether a machine with more cores (e.g., 6-core) provides significantly better responsiveness compared to a machine with fewer cores (e.g., 2-core), assuming similar core types and operating frequencies.

## Solution
The performance of OSC is primarily influenced by single-core performance rather than the total number of cores. While OSC's rendering engine is multi-process, the client side handles the heaviest workload. 

Testing has shown that the difference in responsiveness between a 2-core and an 8-core machine is closely related to single-core performance. For example, an 8-core machine may run OSC only about 40% faster than a 2-core machine, which aligns with the difference in single-core performance, including turbo boost benefits. Therefore, for most users, focusing on single-core performance is more critical than the total number of cores.

# Custom Pips Inside XY Widget

## Problem Description
Users may want to customize the pip labels for each axis in the XY widget of Open Stage Control. For example, specific labels and their corresponding values for the X and Y axes are desired.

## Solution
Custom pip labels can be set using the same syntax as the fader's `range` property. Here’s an example of how to configure the pip labels:

For the X axis:
```json
{
  "0%": {"Beat Repeat Off": 0},
  "34%": {"Grid 1/4": 34},
  "51%": {"Grid 1/8": 51},
  "71%": {"Grid 1/16": 71},
  "87%": {"Grid 1/32": 87},
  "100%": {"???": 100}
}
```

For the Y axis:
```json
{
  "0%": {"Interval 2 bar": 25},
  "33%": {"Interval 1 bar": 33},
  "57%": {"Interval 1/2": 57},
  "68%": {"Interval 1/4": 68},
  "83%": {"Interval 1/8": 83},
  "100%": {"???": 100}
}
```

Additionally, the `stepsX` and `stepsY` properties will be added in a future version to facilitate this customization, similar to the fader's `steps` feature.

# Default Fader Range Issue

**Problem Description:**
A user reported that the default fader range in Open Stage Control was not setting as expected. Instead of the desired range from 0 to 7, the fader defaulted to a range of 0 to 1 upon starting the session.

**Solution:**
To resolve the issue, ensure that all clients are closed before reloading the session. This allows the fader's default value to apply correctly. If you encounter issues with text widgets not receiving initial values, consider using the `get` command to set their values based on the fader's range.

For initializing text widgets with values from the fader, use the following `onCreate` script:

```javascript
setTimeout(()=>{
  setVar('text_0','quantity', get(this)[0])
  setVar('text_1','quantity', get(this)[1])
})
```

Alternatively, you can utilize the `@{}` syntax in the text widgets' value properties to avoid scripting.

[Attachment: Range.json.zip]  
[Attachment: lJM30zdDyXvJG2cZw6MEcR1eTVt.zip]

# Input Widget Behavior: Enter Key Requirement

**Problem Description:**
The input widget in Open Stage Control requires users to press the Enter key to save text input. This behavior can lead to user frustration, as many users expect text to remain in the input field when they click away without pressing Enter.

**Solution:**
The issue with the input widget requiring the Enter key has been addressed in the sources. A fix is implemented, and the next release will include this improvement, enhancing user experience by allowing text to remain in the input field without needing to press Enter.

[Attachment: filename.ext]

# 1 Reference - 2 Different Text Icons

**Problem Description:**
Users have reported an issue where icons from Font Awesome display incorrectly when used in button labels within Open Stage Control, while they appear correctly in the HTML section.

**Solution:**
Reinstalling Open Stage Control can resolve the issue, as it may fix any corrupted files that were affecting icon rendering. Users have confirmed that using the correct syntax, such as `^expand`, in the button label should display the appropriate icon.

[Attachment: Screen Shot 2022-04-20 at 4.34.10 PM]

# How to Write Menus in Open Stage Control

When creating menus in Open Stage Control, you may encounter issues when using text labels instead of numerical values.

## Problem
Using a menu syntax like `[premier, second, third]` does not function as expected, while numerical values like `[1, 2, 3]` work correctly.

## Solution
To create a menu with text labels, use the following syntax:

1. For a simple list of text values:
   ```json
   ["one", "two", "three"]
   ```

2. If you want to display different text labels than the internal values, use a key-value pair format:
   ```json
   {
     "One": 1,
     "Two !!": 2,
     "Three": 3
   }
   ``` 

This will allow you to display user-friendly names while maintaining the internal numerical values.

# Modal Window Settings

## Problem Description
Users are seeking ways to customize modal windows in Open Stage Control, specifically regarding:
1. Closing the modal window regardless of where the user clicks.
2. Adjusting the intensity of the dark overlay effect outside the modal panel.
3. Making the pop-up panel larger than the container of the original modal button.

## Solution
1. **Closing Modal Windows**: Currently, modal windows can only be closed by clicking outside the pop-up panel or within the original modal button's container. If a feature is added to allow closing the modal regardless of the click location, it may resolve this issue.

2. **Adjusting Overlay Intensity**: You can customize the overlay effect by using CSS. The relevant CSS class is `.popup:before`. Here’s an example of how to adjust the opacity and background color:
   ```css
   .popup:before {
     opacity: 0.2; /* Adjust opacity as needed */
     background: red; /* Change color as desired */
   }
   ```

3. **Pop-Up Panel Size**: Currently, the size of the pop-up panel cannot exceed the size of the container that holds the original modal button, except for tabs. However, there may be potential for this behavior to become optional in future updates.

For further customization, you can use the widget’s CSS property to modify UI elements, although comprehensive documentation on this is limited. 

[Attachment: image1.png]  
[Attachment: image2.png]  
(attachment reference missing)

# Horizontal Scrolling Text Gets Clipped

When implementing a tool to display scrolling text that exceeds the width of a widget, users may encounter an issue where the text gets clipped on the right side. This occurs because only the rendered portion of the text is translated, causing any non-rendered text to be hidden.

## Solution

To resolve the clipping issue, adjust the CSS of the label as follows:

```css
overflow: visible;
width: auto;
```

This configuration allows the text to be fully visible and scrollable without clipping. Note that you may need to tweak the translation boundaries for optimal performance.

Additionally, for those interested in performance comparisons, a CSS version may provide smoother and sharper text rendering, while a Canvas version offers better responsiveness by calculating the exact width of the text.

[Attachment: horizontal_scroll.json]  
[Attachment: scroll.json]  
[Attachment: r5v9fuANc35trAYxXIZy4czM6M1.json]

[Attachment: fUI8aGgW7ZyZ6RLeteehc9AMJjJ.json]

# Video or Animated Image Performance Issue

## Problem Description
Displaying small animated images (such as GIFs or APNGs) on a dashboard in Open Stage Control leads to high CPU usage (approximately 15% or more) when using the Electron application. Attempts to use different formats (animated GIFs, APNGs, and MP4 videos) yield similar results, with Electron performing worse than Chrome.

## Solution
For better performance, it is recommended to run the Open Stage Control application in Chrome instead of Electron, as CPU usage is lower in the browser. Additionally, note that while animated GIFs and APNGs work inside a frame in the browser, videos do not appear in the browser but function correctly in Electron.

Future updates to the Electron GUI are expected to improve performance and unify the experience across platforms. 

[Attachment: filename.ext] (attachment reference missing)

# Image on Off Button in Open Stage Control

## Problem Description
Users may want to display different images on a toggle button based on its state (e.g., "On" or "Off"). The challenge lies in correctly implementing the background image change using JavaScript within Open Stage Control.

## Solution
To achieve the desired functionality, you can use a conditional statement to set the background image based on the button's state. The following code snippet demonstrates how to implement this:

```javascript
#{
  @{this} == 127 ? "background-image: url(/A.png)" : "background-image: url(/B.png)"
}
```

For a more organized approach, you can separate the CSS properties as follows:

```css
background-repeat: no-repeat;
background-position: center;
background-size: contain;
#{
  @{this} == 127 ? "background-image: url(/A.png)" : "background-image: url(/B.png)"
}
```

Ensure that your JavaScript code is valid by checking for errors in the browser's console. Use quotation marks around the CSS property values to avoid syntax errors. 

For further reference on JavaScript errors, consult the [Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Not_defined). 

This approach allows for a clear and functional implementation of dynamic background images based on button states.

# Opening Pages in a Browser

## Problem Description
Users want to know how to create hyperlinks or clickable links in Open Stage Control that open a webpage in a web browser. Additionally, there are inquiries about opening URLs without launching a new tab.

## Solution
To create clickable links that open a webpage, you can use the following methods:

1. **HTML Property**: Use the HTML property to create a hyperlink.
   ```html
   <a href="https://openstagecontrol.ammd.net/">Open Stage Control</a>
   ```

2. **Script Property of a Button**: Use the script property of a button to execute a URL opening command.
   ```javascript
   // executed when button is clicked
   openUrl("https://openstagecontrol.ammd.net/");
   ```

Regarding the question of opening a URL without launching a new tab, the standard methods do not support this. However, it may be possible to achieve this using a frame widget, though this requires further exploration.

[Attachment: filename.ext] (attachment reference missing)

# FontAwesome Icons "Brands" Not Working

When attempting to use FontAwesome "Brands" icons, a blank box appears instead of the expected icon. This issue typically arises from incorrect file linking or missing font files.

## Solution

1. **Ensure Font Files are Present**: Verify that the corresponding font files (e.g., `fa-brands-400.woff`) are located in the correct directory.

2. **Check CSS File References**: Confirm that the `brands.css` file correctly points to the font files. The `@font-face` declaration in `brands.css` should look like this:
   ```css
   @font-face {
       font-family: 'Font Awesome 5 Brands';
       font-style: normal;
       font-weight: normal;
       font-display: auto;
       src: url("./fa-brands-400.eot");
       src: url("./fa-brands-400.eot?#iefix") format("embedded-opentype"),
            url("./fa-brands-400.woff2") format("woff2"),
            url("./fa-brands-400.woff") format("woff"),
            url("./fa-brands-400.ttf") format("truetype"),
            url("./fa-brands-400.svg#fontawesome") format("svg");
   }
   ```

3. **Link CSS Files in HTML**: Ensure that both `index.html` files (in `app/client` and `app/launcher`) include the correct links to the CSS files. For example:
   ```html
   <link rel="stylesheet" type="text/css" href="../assets/fonts/brands.css"/>
   ```

4. **Preload Font Files**: It is recommended to preload the font files in your HTML to improve loading performance:
   ```html
   <link rel="preload" href="../assets/fonts/fa-brands-400.woff" as="font"/>
   ```

By following these steps, the FontAwesome "Brands" icons should display correctly. If issues persist, double-check the paths and file names for any discrepancies.

[Attachment: Brands.css]
[Attachment: Brands.min.css]
[Attachment: Client Index Html]

# Changing Knob Output in Open Stage Control

## Problem Description
Users may need to customize the output message of a knob to include a fixed value along with the knob's value. For example, the desired output format is:
```
/osc:192.168.1.201:7777/knobs [fixed_value, knob_value]
```
An example output would be:
```
/osc:192.168.1.201:7777/knobs [53, 41]
```

## Solution
To achieve this, utilize the `preArgs` property of the knob. You can set this property to include a fixed value directly or multiple values in the form of a JavaScript array, such as:
```javascript
[fixed_value, knob_value]
```
For example, if you want to send a fixed value of 53 along with the knob's value, you would configure `preArgs` as follows:
```javascript
[53, value_of_knob]
```
Alternatively, the `id` property can also be used for similar configurations. 

This method allows for flexible output formatting based on your requirements.

# Large Project Optimization

## Problem Description
The project has become large and complex, with many similar or duplicate widgets, particularly in a panel with 16 tabs containing identical faders, each assigned to unique MIDI destinations. The user seeks to optimize performance by dynamically changing MIDI destinations, reusing widgets, and controlling widget visibility without unnecessary duplication.

## Solution
1. **Dynamic MIDI Destinations**: Instead of creating multiple identical faders, implement a single set of faders and dynamically change their MIDI destinations using scripting or custom modules. This can be achieved by modifying the fader properties based on user interaction or state changes.

2. **Widget Visibility Control**: To manage widget visibility, utilize a switch selector or a custom module. For example, you can use the following in the widget's visible property:
   ```javascript
   VAR{visible,true}
   ```
   In the custom module, use:
   ```javascript
   receive("/SCRIPT", `setVar("widget_id", "var_id", value)`)
   ```
   Ensure that the variable names and values are correctly spelled and referenced.

3. **Simplified Visibility without Custom Module**: If preferred, visibility can also be controlled directly in the visibility parameters without a custom module. For example:
   ```javascript
   #{@{button_arpSyncMode} == 127 ? "true" : "false"}
   ```

4. **Increment/Decrement Value Concept**: Explore the concept of incrementing and decrementing values to manage the state of your faders and other widgets efficiently. A shared patch may provide further insights into this approach. 

   [Attachment: 7OUgXX3iJIt44FMCeR66Aq8lCrZ.json]

# Fully Transparent Background for Open Stage Control

**Problem Description:**
Users may want to set a fully transparent background for their Open Stage Control (OSC) layout to allow for proper compositing with other media in a media server environment. The default settings do not provide direct control over the base background transparency, and existing CSS variable adjustments can inadvertently affect other UI elements.

**Solution:**
To achieve a fully transparent background, you need to modify the theme file loaded with the server's theme option. Use the following CSS code to target the necessary elements:

```css
html,
body,
osc-workspace,
osc-panel-container#main,
osc-panel-container#main osc-panel-container.center,
osc-panel-inner#osc-container,
.root-container {
  background-color: transparent !important;
}
```

This code ensures that the background is transparent without affecting the usability of the editor panels. Adjust the `colorBg` property on container widgets as needed for further customization.

# OSC Listener Custom Module for SysEx Data

## Problem Description
The user attempted to use OSC listeners in a custom module to show and hide elements based on SysEx data. The initial implementation did not function as expected.

## Solution
To properly handle SysEx data in the custom module, the `args` array must be accessed correctly. The `args` array contains objects with a `value` property that holds the SysEx string. The correct implementation is as follows:

```javascript
module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        if (host === 'midi' && address === '/sysex') {
            var value = args[0].value;

            // Exclude specific SysEx messages
            if (value.includes('f0 00 00 66 05 00 10')) return;

            if (value.includes('77 77 30 30 30 31')) {
                receive('/track1/visible', 1);
            } else {
                receive('/track1/visible', 0);
            }
        }

        return {address, args, host, port};
    },
}
```

This implementation ensures that the correct SysEx messages are processed to show or hide the specified track.

# One Push Button Sends a Sequence of Values

## Problem Description
The goal is to create a push button in Open Stage Control that sends a sequence of MIDI values in order when pressed. For example, sending multiple MIDI messages such as:
- Channel 16, Controller 114, Value 127
- Channel 16, Controller 115, Value 0
- Channel 16, Controller 115, Value 3
- Channel 16, Controller 115, Value 7

## Solution
To achieve this, you need to implement a custom module since timing functions like `setTimeout` cannot be used directly in widget formulas. Below is a reliable method to create a custom module that handles the sequence of MIDI messages.

1. **Create a Custom Module**: Use the following code as a template for your custom module:

```javascript
module.exports = {
    oscOutFilter: function(data) {
        var {address, args, host, port} = data;

        // Assuming the push button's address is /control_sequence_1
        // and value is 1 (with no preArgs)
        if (address == '/control_sequence_1' && args[0].value == 1) {
            setTimeout(() => {
                send('192.168.254.20', 8000, '/push_01', 16, 114, 127);
                setTimeout(() => {
                    send('192.168.254.20', 8000, '/push_01', 16, 115, 0);
                    setTimeout(() => {
                        send('192.168.254.20', 8000, '/push_01', 16, 115, 3);
                        setTimeout(() => {
                            send('192.168.254.20', 8000, '/push_01', 16, 115, 7);
                        }, 100);
                    }, 100);
                }, 100);
            }, 100);
        }
    }
}
```

2. **Configure the Push Button**: Ensure your push button is set up to trigger the custom module. The button should have an address that matches the one checked in the module (e.g., `/control_sequence_1`).

3. **Testing**: After implementing the custom module and configuring the button, test the button to ensure it sends the sequence of values as intended.

This method allows for sending a sequence of MIDI messages with specified delays between each message. Adjust the addresses and values as necessary for your specific use case. 

[Attachment: image.png]

[Attachment: 4ecFSHGmDVINx6jeZDhsMzSuNaz.js]

[Attachment: 9lxKjZ9xGyEu3h1DXt2akCh6lzK.js]

[Attachment: ldMWYekSGJQGE5vSo4sUkwyrCvn.js]

# Custom Module Debugging

## Problem Description
When using a custom module to manage faders for quick controls in Cubase, the faders send data correctly but do not update when Cubase is playing, despite receiving the correct OSC messages. The issue arises from the way incoming messages are handled in the custom module.

## Solution
The problem is caused by empty return statements that bypass the incoming messages. To resolve this, ensure that the incoming messages are processed correctly without returning prematurely. Refer to the documentation examples for guidance on handling incoming messages properly.

### Additional Resources
- [Attachment: tP0EBmR0n3s0bTSypXOcw5zQwRv.js]
- [Attachment: g8hXB2YQaRTVEqNMK6TuuNtXX8s.json]
- [Attachment: uvsAUE3zC60SkpYdjiaqqynftv0.js]

# Sending Control Change (CC) Messages from External Input

**Problem Description:**

The user is attempting to send Control Change (CC) messages via Open Stage Control based on external input. Specifically, they want to send CC messages to OSC when receiving specific values on CC 116. However, the expected output messages are not being sent as intended.

**Solution:**

To successfully send CC messages in response to external input, you need to implement the following:

1. **Use a Custom Module**: The `send()` function in the script widget does not allow sending messages directly in response to incoming messages. Instead, you should create a custom module to handle this functionality.

2. **Script Example**:
   - Monitor the incoming CC messages.
   - Use conditional statements to determine the value received and send the corresponding CC messages.

Here’s a basic outline of how your script should look:

```javascript
// Example script for handling incoming CC messages
const ccValue = args[2]; // Assuming args[2] contains the value from CC 116

if (args[1] === 116) { // Check if the incoming CC is 116
    if (ccValue === 1) {
        send('/control', [1, 8, 56, 127]); // Send CC 8, 56, 127
    } else if (ccValue === 2) {
        send('/control', [1, 8, 57, 127]); // Send CC 8, 57, 127
    }
}
```

3. **Testing**: Utilize console logging to verify that the conditions are met and that the correct values are being processed.

By following these steps, you should be able to send the desired CC messages in response to external input correctly. 

(attachment reference missing)

# Custom Class CSS for colorWidget

## Problem Description
A user wants to create a custom CSS class for a subset of button widgets in their Open Stage Control template. They aim to set specific styles for the `colorWidget` property without affecting other buttons globally. The user successfully modified the label but struggled to apply styles for the border and infill.

## Solution
To achieve the desired styling, use CSS variables for the `colorWidget` property. Here is the correct implementation:

```css
.wizardGreenInstBtn.label {
    color: #2dcf7a;
    word-wrap: break-word;
    justify-content: flex-end;
    font-size: 150%;
    padding-left: 50px; /* Corrected padding */
}

.wizardGreenInstBtn.button-container {
    border-radius: 3px;
    --color-widget: #8cff8c; /* Use CSS variable */
}
```

This approach allows you to define a specific class for your buttons while maintaining control over their appearance without affecting other buttons in your template.

# How to Increase the Resolution of an XY Pad

**Problem:**
An XY pad is currently configured to send OSC values between 0 and 1 with a resolution of 3 decimal places (e.g., 0.011, 0.123). The goal is to increase the resolution to 4 decimal places (e.g., 0.0001, 0.1023).

**Solution:**
To increase the decimal resolution of the XY pad:

1. Set the `decimals` property of the widget (found under the "osc" settings) to 4.
2. Adjust the `sensitivity` property (found under the "xy" settings) between 0 and 1 to enhance the perceived resolution, keeping in mind that the actual resolution is limited by the number of pixels available for pointer movement. 

This configuration will allow for more precise value transmission from the XY pad.

# Matrix Push Buttons Control Panel Visibility

**Problem Description:**
When using a matrix of 12 push buttons to control the visibility of 12 panels, the panels blink due to the buttons being set to push mode.

**Solution:**
To resolve the blinking issue, remove the push properties from the buttons and implement a script to control the panel visibility. Use the following script:

```javascript
props.script = "if (value) set('matrix_sampler_drumrack_01/*', 0)";
```

This will ensure that the panel visibility functions correctly without the blinking effect.

# Addressing Sends in Ableton through LiveOSC2

When using the LiveOSC2 remote script for controlling faders in Ableton, sending values to track sends requires a specific syntax that may not be immediately clear.

## Problem Description
The challenge arises when trying to address sends, which require two preArgs as per LiveOSC2 instructions: `/live/track/send (int track_id, int send_id, [float value])`. Attempts to use various combinations for preArgs, such as `0,0`, `[0,0]`, or `(0,0)`, have not yielded successful results.

## Solution
The correct syntax for preArgs is `[0, 0]`, but it is essential to ensure that the data types are specified correctly. LiveOSC2 may be strict about the types of values sent. You need to define the types in `typeTags` as follows:

```json
{
  "typeTags": "iif"
}
```

This indicates that the first two values are integers (for `track_id` and `send_id`), and the last value is a float (for the send value). 

If issues persist, consider checking the LiveOSC2 documentation or raising the question on their GitHub page for further assistance. 

[Attachment: filename.ext]

# Issue with Input Focus on iPad

**Problem Description:**
Users have reported issues with the `setFocus` function not working on iPads while it functions correctly on Mac. This problem may be related to iOS-specific limitations.

**Solution:**
The `setFocus` function should work on iOS in the next version of Open Stage Control. For now, it is confirmed that `setFocus` only works on the built-in client and may not function as expected on iPads. 

Additionally, ensure that the code is correctly implemented. For example, the line `set(this,'on',0);` may contain errors that do not impact functionality but should be reviewed for correctness.

[Attachment: filename.ext] (attachment reference missing)

# Formatting Text in a Menu Widget

## Problem Description
Users need to format text in a menu widget to create a new line at a specific character (hyphen) so that the first part of the string appears as a title and the remaining text is wrapped below it. The challenge involves correctly implementing line breaks within the string.

## Solution
To achieve the desired formatting, replace the hyphen in the string with HTML line break tags. Here’s how to implement it:

1. Modify the code that builds the menu items as follows:

   ```javascript
   const scaleList = Object.values(musicalVariable.scales).map(scale => `${scale.scaleName} <br/><br/> ${scale.scaleCharacter}`);
   ```

2. This change will ensure that the text is formatted correctly, with the title on one line and the description on the next.

Using `<br/>` for line breaks is effective in this context, allowing for proper text wrapping in the menu widget.

**Note:** Ensure that any HTML tags used for formatting are supported by the widget.

# Calling OSC from HTML in Open Stage Control

## Problem Description
Users may want to implement OSC calls within an HTML widget in Open Stage Control. However, there are concerns about performance and the feasibility of using HTML versus widgets for dynamic content creation.

## Solution
As of version 1.13.2, it is recommended to use the canvas widget instead of the HTML widget for making OSC calls. The canvas widget supports the necessary API, allowing users to add extra HTML and determine which element is interacted with using the `touch` property and the element's `name` attribute.

### Example
Here is a minimal example of how to implement this:
[Attachment: canvas_html.json] 

This approach is a step towards creating a more consistent method for custom controls within Open Stage Control.

[Attachment: 7FinajBTUfdzEl9xaelfxEoIY8E.json]

# Connecting X-Touch Compact with MA3

**Problem Description:**
Users have reported difficulties in connecting the X-Touch Compact with MA3 through Open Stage Control. While Open Stage Control receives input from the X-Touch (e.g., fader movements and button presses), changes are not reflected in MA3.

**Solution:**
To establish a successful connection between Open Stage Control and MA3, follow these configuration steps:

1. **Port Configuration:**
   - Set the `port` option to **9004**.
   - Leave the `osc-port` option empty. This will automatically use the same value as the `port`.

   This configuration avoids confusion between the web app server and OSC communication.

2. **Testing Alternative Ports:**
   - If issues persist, consider testing with alternative ports such as **8004** and **8005** to see if they resolve the communication problem.

By following these steps, users should be able to successfully map their X-Touch Compact to MA3 with feedback and button lights functioning correctly. 

[Attachment: filename.ext] (attachment reference missing)

# Resizing Knobs in a Matrix

## Problem Description
Users may want to resize knobs within a matrix in Open Stage Control while maintaining the overall size of the matrix.

## Solution
To resize knobs inside a matrix without altering the matrix size, you can adjust the padding values. This allows for customization of the knob size while keeping the matrix dimensions intact. 

For implementation, enter a value in the padding settings of the matrix. 

This method is straightforward and effective for achieving the desired knob size.

# Sending MIDI Messages Continuously with Button Press

**Problem:**
Users may encounter issues when attempting to send MIDI messages continuously while a button is pressed in Open Stage Control. An attempt to use a `while` loop can lead to application crashes due to infinite loops.

**Solution:**
To achieve continuous MIDI message sending while a button is pressed, use the `setInterval` function instead of a `while` loop. Here’s how to implement it:

```javascript
if (value == 127) {
  setInterval(() => {
    send('/control', 1, 1, 127);
  }, 500); // Sends every 0.5 seconds
} else {
  clearInterval();
}
```

This code checks if the button is pressed (value equals 127). If it is, it starts sending MIDI messages at a specified interval (500 milliseconds in this case). When the button is released, the interval is cleared, stopping the message sending.

For testing purposes, you can replace the `send` function with a `console.log` statement to verify that the function is being called repeatedly:

```javascript
if (value == 127) {
  setInterval(() => {
    console.log('hello'); // Replace with MIDI send function
  }, 500);
} else {
  clearInterval();
}
```

For a practical example, refer to the attached session file that demonstrates the use of `setInterval` for sending messages continuously while a button is pressed.

[Attachment: rvbjKCctcnLbyImlOttcOZxkF1E.json]

# Combining Widgets into a Single Button in Open Stage Control

## Problem Description
The goal is to consolidate the functionality of one button, one fader, and one variable widget into a single button in Open Stage Control. The user is experiencing difficulty in integrating the variable widget into the button's script and is seeking advice on how to achieve this.

## Solution
To achieve the desired functionality, you can modify the button's script to manage the fader and variable widget directly within the button's logic. Below is a refined version of the button's script that incorporates the necessary elements:

### Button Script
```javascript
var fad = 'fader_9';
var compteur = 'variable_compteur_4';

if (value == 1 && get(fad) != 500) {
    set(fad, 0);
    locals.Up = setInterval(function() { set(fad, get(fad) + 1); }, 10);
} else if (value == 1 && get(fad) == 500) {
    locals.Down = setInterval(() => { set(fad, get(fad) - 1); }, 10);
} else if (value === 0) {
    clearInterval(locals.Up);
    clearInterval(locals.Down);
}

// Toggle Button Logic
var button = 'button_9';
var FADER = get('this');

if ((FADER === 0 || FADER == 500) && (get(compteur) !== 0 && get(compteur) < 66)) {
    set(button, 0);
    set(button, 1);
}

if (FADER === 0 && get(compteur) == 66) {
    set(compteur, 0);
    set(button, 0);
}

// Update Button Text
if (locals.valeurprecedente !== undefined) {
    if (locals.valeurprecedente > value) {
        setVar(button, 'text', 'Expire');
    } else if (locals.valeurprecedente < value) {
        setVar(button, 'text', 'Inspire');
    }
}

locals.valeurprecedente = value;
```

### Variable Widget Value
Set the variable widget value to:
```
#{@{this}+@{button_9}}
```

### Additional Notes
- Ensure that the intervals are cleared properly to avoid any unintended behavior.
- If the button needs to be reset to 0 to continue the loop, this may be due to how the state is being managed within the script. Review the logic to ensure that the button state aligns with the intended flow of the application.

For further assistance, refer to the attached files:
- [Attachment: cohérence.json]
- [Attachment: Zen_Frog.json]

[Attachment: jXWAXZdRFaza3hBIpS31LN0Qk60.json]

[Attachment: oAbYz5TVJJpZ1zNE199BRhs1w0N.json]

[Attachment: 82oJB4NGIg5XXvatQglYYLKGwJg.json]

# Text Alignment in a Switch Widget

When attempting to set the text alignment to the left in a switch widget (vertical list), the following CSS properties may not yield the desired result:

```css
.switch {
  text-transform: capitalize;
  text-align: left; /* This may not work as expected */
}
```

While `text-transform` functions correctly, `text-align` does not apply as intended.

## Solution

To properly align the text to the left, use the following CSS:

```css
.value {
  justify-content: flex-start;
}
```

This will ensure that the text within the switch widget is aligned to the left.

# Customizing Button Values in Open Stage Control

**Problem Description:**
A user wants to customize the values sent by a button in Open Stage Control, which by default sends values of 1 and 0. The user is looking for a simpler way to change these values to other specific numbers.

**Solution:**
To customize the on/off values of a button in Open Stage Control, follow these steps:

1. Select the button you wish to modify.
2. Navigate to the button's **On/Off settings** tab.
3. Change the default values (1 and 0) to your desired values (e.g., 127 and 0).

This adjustment allows you to send any values you prefer without the need for scripting.

# Linked Image in Extra CSS Using Theme File

When attempting to link an image in an extra CSS class within a theme file, users may encounter issues where the image displays correctly in the session but not when defined in the theme file.

## Problem Description
The following CSS was used in the theme file:
```css
.my_image_class { 
    background-image: url("images/my_image_class.png");
}
```
However, this resulted in an error related to the image not being found. 

## Solution
This issue is due to a bug where relative file URLs are not properly resolved in themes. This has been fixed in version 1.11.0.

### Additional Information
- Images can be located in the session directory or the theme directory. The order in which file paths are resolved is as follows:
  1. Session path
  2. Theme path
  3. Absolute path (or remote-root if the server's option is set)

### Example of Working CSS
To ensure images are found, place the images directory within the themes folder. Here is an example of a working CSS class:
```css
.rstBtn.button-container {
    border-radius: 3px;
    --color-widget: #dfebf5;
    color: #f0e91a;
    background: url(/Images/rest.png) no-repeat;
    background-position: top center;
}
```
For absolute paths, ensure that the `data:image` prefix is not included before the path.

# Hiding Points on a Multi XY Widget

## Problem Description
Users want to hide individual points on a multi XY widget in Open Stage Control, either through CSS or by using OSC messages. There is a need for a reliable method to dynamically show or hide these points.

## Solution
1. **CSS Targeting**: Individual pads can be targeted using the `.pad-X` selector, where `X` is the index of the pad. For example:
   ```css
   .pad-0 {
     --alpha-fill-on: 0.2; /* Adjusts visibility */
   }
   .pad-1 {
     --alpha-fill-on: 0.8; /* Adjusts visibility */
   }
   ```
   To hide a point, set its `colorStroke` alpha to `0`. However, note that hidden points remain active.

2. **Full Value Message**: To update a single point in the multi XY widget, send a full value message with one argument per coordinate. Replace unchanged values with empty strings:
   ```
   /multixy x1 y1 x2 y2
   /multixy "" "" x2 y2
   ```

3. **Future Updates**: Per-point customization (visibility, color, label, size, etc.) is expected to be available in the next version of Open Stage Control, which will provide better control over individual points.

For further details, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/widgets-reference/#multixy).

# Sending MIDI Control Changes with Open Stage Control

## Problem Description
The user is attempting to create a script in Open Stage Control to control playback in Foobar using OSC. The goal is to send two MIDI Control Change (CC) messages when a button is pressed: one to advance the playlist and another to stop playback after a short delay. The initial attempt resulted in an error, and the user sought assistance in correcting the script.

## Solution
To achieve the desired functionality, the following configuration can be used:

```json
{
  "widgets": [{
    "name": "myButton",
    "type": "button",
    "x": 100,
    "y": 100,
    "width": 100,
    "height": 50,
    "label": "Next",
    "ontouchstart": "/send_midi",
    "ontouchend": "/send_midi_23"
  }],
  "pages": [{
    "name": "main",
    "widgets": ["myButton"]
  }],
  "controls": [{
    "name": "send_midi",
    "args": {
      "port": "oscMIDI",
      "type": "cc",
      "channel": 15,
      "control": 27,
      "value": 127
    },
    "schedule": {
      "delay": 0
    }
  },
  {
    "name": "send_midi_23",
    "args": {
      "port": "oscMIDI",
      "type": "cc",
      "channel": 15,
      "control": 23,
      "value": 127
    },
    "schedule": {
      "delay": 0.1
    }
  }]
}
```

### Key Points:
- The button labeled "Next" sends a CC#27 message when pressed and a CC#23 message after a 100ms delay.
- Ensure that the `value` for the MIDI messages is set to 127, which is typically the maximum value for MIDI control changes.
- Adjust the `delay` in the `schedule` of the second control to ensure proper timing between messages.

This configuration should allow you to scroll through your playlist in Foobar without immediate playback until the play button is pressed.

# Override CSS Script for Button Widget

## Problem Description
The user seeks to access `args[0]` of a button widget locally within the CSS field to change the button's appearance based on a value from a switch widget (`chordInversion`). The challenge is to indicate when the button is pressed while maintaining the CSS overrides that apply to all buttons.

## Solution
To achieve the desired functionality, you can modify the CSS script as follows:

1. Use the value of the button itself to determine its pressed state.
2. Adjust the CSS based on both the button's pressed state and the `chordInversion` value.

Here’s a refined version of the JavaScript code:

```javascript
var css = "";
var chordInversion = OSC{/inversionVal/value, , false}; // Fetch the inversion value
var btnPress = @{this.value}; // Get the button's pressed state

if (btnPress > 0) {
  // Additional styling to simulate the button being pressed
  css += "inner {box-shadow: inset 0 3px 5px rgba(0,0,0,0.2); transform: translateY(2px);}";
} else if (chordInversion === 1) {
  css += "inner {background: linear-gradient(to bottom, #ffa07a 0%, #ff6735 17%, #ff4500 33%, #ff4500 59%, #ff4500 68%, #3d1a00 100%); color: black; font-size: 18px;}";
} else if (chordInversion === 2) {
  css += "inner {background: linear-gradient(to bottom, #b4ddb4 0%, #83c783 17%, #52b152 33%, #008a00 67%, #005700 83%, #002400 100%); color: black; font-size: 18px;}";
} else if (chordInversion === 3) {
  css += "inner {background: linear-gradient(to bottom, #d0e4f7 0%, #73b1e7 12%, #0a77d5 33%, #00509e 66%, #002349 87%, #002349 87%); color: black; font-size: 18px;}";
}

return css;
```

This script will allow each button to change its color based on the `chordInversion` value while also providing visual feedback when pressed. Adjust the `btnPress` logic as needed to fit your specific requirements.

# Switch Grid Text Wrapping Basics

## Problem Description
When using a switch grid (4x), the label text can force wrap, causing the height of the switch buttons to change. This raises the question of how to maintain a fixed height for the buttons while adding text labels to switch grids.

## Solution
To fix the height of the switch grid buttons and prevent them from changing height due to wrapped text, apply the following CSS property:

```css
inner {
  grid-auto-rows: 25%;
}
```

This will set the height of the cells to a fixed percentage, ensuring consistency across the switch grid.

# Overflow for Long Content in HTML Property

When using HTML properties in Open Stage Control, users may encounter issues with long paragraphs not adjusting correctly in height and horizontal scrolling not functioning.

## Problem Description
- Long text does not wrap properly even when there is sufficient vertical space.
- The horizontal scrolling bar fails to appear or function as expected.

## Solution
To resolve these issues, follow these steps:

1. **Adjust CSS for Text Wrapping**: The default behavior may be affected by global CSS settings. Specifically, check for the `white-space: nowrap;` property in the app's CSS. Removing or modifying this property will allow text to wrap correctly.

2. **Enable Pointer Events**: If the horizontal scrolling bar is not working, ensure that pointer events are enabled for the HTML element. Add the following CSS rule:
   ```css
   .html {
       pointer-events: auto;
   }
   ```

By implementing these changes, long text should display correctly, and horizontal scrolling should function as intended. 

[Attachment: image]

# Initializing a Dropdown in Open Stage Control

## Problem Description
When loading a session in Open Stage Control, a dropdown's value defaults to "undefined". Attempts to use the `VAR{variableName,default}` syntax with non-numeric default values have been unsuccessful. The goal is to initialize the dropdown with a specific value upon loading the session.

## Solution
The default value for the `VAR{}` syntax is limited to simple values (not objects). To initialize the dropdown correctly, use the following syntax:

```javascript
#{
VAR{Q} || {"1/1":80}
}
```

This approach ensures that if `VAR{Q}` is undefined, it will default to `{"1/1":80}`. Adjust the default object as needed for your specific dropdown values.

# From Cubase to Open Stage Control: Troubleshooting MIDI Communication

**Problem Description:**
The user is unable to receive MIDI data from Cubase in Open Stage Control. Although the MIDI ports in the Generic Remote are configured correctly, and Bome MIDI Translator receives data from Cubase, Open Stage Control does not consistently send or receive MIDI messages, particularly from unselected tracks in Cubase.

**Solution:**
1. **Enable Debugging:**
   - Activate the debug option in Open Stage Control to monitor incoming OSC messages. This will help identify if messages are being received correctly.

2. **Check Custom Module:**
   - If using a custom module, it may be filtering incoming messages incorrectly. Test the setup with and without the custom module to determine if it is causing issues.

3. **Modify Widget Properties:**
   - For widgets that need to receive MIDI information, ensure that their `preArgs` property is correctly configured. This is essential for changing what the widget receives based on user interaction (e.g., selecting "pan" from a dropdown).

4. **Adjust Return Statement in Custom Module:**
   - In the `oscInFilter` function of the custom module, ensure that the return statement is properly set to allow incoming messages to be processed. For example:
     ```javascript
     return {address, args, host, port}
     ```
   - This will enable the relevant MIDI messages to reach the widgets.

5. **Use Dedicated Controls:**
   - For optimal performance, use dedicated controls (e.g., a separate fader for volume and a knob for pan) for the selected track instead of a single fader with a dropdown. This setup tends to work better with MIDI communication.

By following these steps, the user should be able to establish a reliable connection between Cubase and Open Stage Control. 

[Attachment: réglages]

# Matrix Changing Props

## Problem Description
The user is attempting to use a switch to dynamically change properties of a matrix in Open Stage Control, specifically `props.on`, `props.off`, and `props.preArgs`. The goal is to have different values for these properties based on the switch's state. However, the initial implementation is not functioning as expected, leading to issues with MIDI messages and property values.

## Solution
To resolve the issue, the following syntax adjustments and logic corrections are recommended:

1. **Remove unnecessary `#{}` blocks**: Since you are already in a JavaScript context, you can directly use JavaScript expressions without the need for string interpolation.

2. **Define the switch variable**:
   ```javascript
   var switch_vst = @{switch_VST};
   ```

3. **Set properties based on the switch state**:
   ```javascript
   props.on = switch_vst == 2 ? 127 : [37 + $, 127];
   props.off = switch_vst == 2 ? 0 : [28 + $, 127];
   props.address = "/control";
   props.preArgs = switch_vst == 2 ? [10, 60 + $] : [10, @_{this}]; // Ensure to use the underscore for the button's value
   props.target = "midi:OSC";
   ```

4. **Consider using a script for complex logic**: If the properties need to perform more complex actions, using a `props.script` can be beneficial. For example:
   ```javascript
   props.script = "if(get('switch_VST1')==1) { if(value) { send('/control', 10, " + (28 + $) + ", 127); } else { send('/control', 10, " + (37 + $) + ", 127); } } else if(get('switch_VST1')==2) { set('Lib_*', 0, {sync: false}); send('/control', 10, " + (60 + $) + ", 127); }";
   ```

5. **Backticks for readability**: If you want to use backticks for better readability in `props.script`, ensure that the syntax is correctly formatted. However, if it doesn't work, you may need to stick to concatenation.

By following these adjustments, the matrix should function correctly based on the switch's state, allowing for the desired MIDI control behavior.

# CSS Styling for Open Stage Control Buttons

## Problem Description
When creating an external CSS stylesheet for buttons in Open Stage Control, users may encounter issues with setting a border color different from the background color, as well as confusion regarding the behavior of background colors in button states. Additionally, there may be questions about CSS variable syntax and maintaining button sizes when resizing panels.

## Solution
To effectively style buttons in Open Stage Control, consider the following guidelines:

1. **Using CSS Custom Properties**: Instead of traditional CSS properties, utilize CSS custom properties (variables) for better control over button styling. Here’s an example of how to define button styles:

   ```css
   .btn {
       --color-fill: blue;       /* Background color */
       --color-stroke: red;      /* Border color */
       --line-width: 10px;       /* Border thickness */
       border-radius: 3px;       /* Rounded corners */
   }
   ```

   Note that the `--` prefix is used for custom properties, which enhances readability and allows for easier maintenance.

2. **Understanding Button States**: The `background-color` property will typically only affect the "off" state of the button. Ensure you are defining the correct properties for different button states if needed.

3. **Maintaining Button Sizes**: If you want to resize a panel without affecting the size of the buttons, avoid using percentage values for button dimensions. Instead, set fixed dimensions or use other units that do not scale with the panel.

4. **Displaying Fader Names**: To show fader names above or below the actual fader, check the widget properties in the Open Stage Control interface. If this option is not readily available, consider exploring the documentation or community forums for custom solutions.

For further details, refer to the [Attachment: widgets.scss].

# Retrieving Expression Maps from Subfolders

**Problem:**
The user needs to retrieve all expression map files from a main folder and its subfolders using the `glob` module in JavaScript. The initial attempt only retrieves files from the main folder.

**Solution:**
To include expression map files from both the main folder and its subfolders, use the following code:

```javascript
const toutesmesMaps = glob.sync(path.join(__dirname, '../Maps/**/*.expressionmap'));
```

Alternatively, to search all directories recursively, you can use:

```javascript
const toutesmesMaps = glob.sync(path.join(__dirname, '../**/*.expressionmap'));
```

This approach effectively gathers all expression map files from the specified directory and its subdirectories.

# How to Set the Visibility of a Panel from Script

To control the visibility of a panel using a button in Open Stage Control, you can utilize custom variables.

## Problem Description
Users may want to toggle the visibility of a panel through a button, but may not find a direct method like `setProp` in the documentation.

## Solution
You can achieve this by using the custom variable syntax. Here’s how to do it:

1. In the panel's `visible` property, define a custom variable:
   ```javascript
   VAR{show, true}
   ```
   This creates a custom variable named `show` with a default value of `true`.

2. In the button's script, you can change the value of this variable to toggle the panel's visibility:
   ```javascript
   setVar('panel_id', 'show', value === getProp(this, 'on'))
   ```
   Replace `'panel_id'` with the actual ID of your panel.

### Note
- There is no `setProp` function available for directly setting properties. Instead, custom variables can be used across any properties, and you can name them as needed.

### Example
For a practical illustration, refer to the attached JSON file:
[Attachment: button-to-show-hide-a-panel.json]

[Attachment: 6Frwxe0837LnGdKxphJOlbZTodj_1.json]

# More Efficiently Scripting Multiple Variables for the Same Widget

## Problem Description
When scripting for Open Stage Control, there is a need to set multiple variables for the same widget. The initial approach involves repetitive calls to the `setVar` function, which can be inefficient, especially when dealing with multiple widgets.

## Solution
A more efficient method is to use an object to store the variable settings and iterate over it. Here’s an example of how to implement this:

```javascript
var settings = {
  Par: 3,
  Col: '#f388da',
  Hidden: 0,
  BgCol: '#9e9e9e38'
}
for (var key in settings) {
  setVar('ParaPanel_1', key, settings[key])
}
```

This approach allows for cleaner and more maintainable code when setting multiple variables for the same widget.

# Sending a Specific MIDI Command from a Button Based on Switch Value

## Problem Description
A user is attempting to send a MIDI command from a button based on the value selected in a switch within a modal widget. Despite writing a custom module, the button does not send the expected MIDI commands when pressed.

## Solution
To resolve this issue, ensure the following:

1. **Button Configuration**:
   - Verify that the button is correctly configured to send messages with the addresses `/transpose up` or `/transpose down`. If the button does not send these messages, the custom module will not receive them.

2. **MIDI Device Declaration**:
   - Ensure that the MIDI device labeled `oscIn` is properly declared in the server setup. This is crucial for the MIDI commands to be transmitted successfully.

3. **Debugging**:
   - Utilize the `console.log` function within the custom module to help debug and confirm that messages are being sent and received as expected.
   - Enable the server's debug option to gain insights into the communication flow.

By confirming these aspects, the button should function as intended, sending the appropriate MIDI commands based on the switch value selected.

[Attachment: filename.ext]

# Solved: Firewall Issue on Mac OS 15.2 with Open Stage Control

## Problem Description
After upgrading to Mac OS 15.2, users encountered issues with Open Stage Control (OSC) not connecting through WiFi or Ethernet on iPads, while connections worked fine when the app was opened directly on the computer. Disabling the firewall allowed connections, but users sought a solution that would enable OSC to function without turning off the firewall.

## Solution
To resolve the firewall issues while keeping it enabled, follow these steps:

1. **Uninstall Open Stage Control**:
   - Drag the application to the trash and delete it.
   - Remove any associated subfolders.

2. **Uninstall Node.js**:
   Execute the following commands in the terminal to remove Node.js completely:
   ```bash
   sudo rm -rf /usr/local/bin/node
   sudo rm -rf /usr/local/lib/node_modules
   sudo rm -rf /usr/local/include/node
   sudo rm -rf /usr/local/bin/npm
   sudo rm -rf ~/.node-gyp
   rm -rf ~/.npm
   rm -rf ~/.nvm
   ```

3. **Verify Uninstall**:
   Check that Node.js and npm are uninstalled:
   ```bash
   node -v
   npm -v
   ```

4. **Reinstall Open Stage Control**:
   Download and install the latest version of Open Stage Control.

5. **Allow Open Stage Control Through Firewall**:
   - Go to **System Preferences** > **Security & Privacy** > **Firewall**.
   - Click on **Firewall Options** and ensure that Open Stage Control and the OSC helper are allowed through the firewall. If prompted, accept any security prompts.

6. **Test Connections**:
   After completing the above steps, test the connections again with the firewall enabled.

By following these steps, users should be able to use Open Stage Control with the firewall active, ensuring both security and functionality.

[Attachment: image1.png]  
[Attachment: image2.png]  
(attachment reference missing)

# Issue with Undefined Global Methods in Open Stage Control v1.25

When using Open Stage Control version 1.25, users may encounter an issue where global methods defined in a widget's `onCreate` function are sometimes reported as undefined when referenced from another widget's `onValue` function. 

## Problem Description
For example, if a method is defined as follows:

```javascript
globals.helloWorld = function(){
    console.log("hello");
}
```

Referencing this method from another widget can lead to an error stating that `globals.helloWorld` is undefined. This issue seems to occur even when the widget defining the global method is positioned at the top of the session tree.

## Solution
To resolve this issue, ensure that the widget defining the global methods is positioned before any widgets that reference these methods in the session tree. If the problem persists, consider the following:

- **Script Length**: If splitting method definitions across multiple widgets resolves the issue, it may indicate a problem with the length or complexity of the script.
- **Testing**: If you experience inconsistent behavior, try consolidating your method definitions back into a single widget to see if the issue reoccurs.

A dedicated script property may be added in future updates to ensure that global methods are initialized before any other widgets, as the current `onCreate` function only runs after the widget's children have been created. 

If the issue continues, providing a session file that demonstrates the problem may help in diagnosing the issue further. 

(attachment reference missing)

# Spring Mode On Fader

## Problem Description
Users may want to implement a fader that springs back to a default value over a specified duration without using a canvas widget. Specifically, there is a need to set the fader to return to a center value, such as 8192, rather than the minimum value.

## Solution
To achieve a spring-back effect on a fader, you can use the following script in the fader's `onTouch` property:

### For Returning to a Default Value
```javascript
if (event.type == "stop") {
  const range = getProp(this, "range");
  const min = range.min;
  const max = range.max;
  const interval = 1000 / (max - min);
  const speed = 3; // Adjust speed for faster/slower movement
  setInterval(() => {
    set(this, get(this) - speed, {script: false});
    if (get(this) <= min) clearInterval();
  }, interval);
}
```

### For Returning to a Center Value (e.g., 8192)
```javascript
if (event.type == "stop") {
  const range = getProp(this, "range");
  const min = range.min;
  const max = range.max;
  const interval = Math.floor(1000 / (max - min));
  const speed = 100; // Adjust speed for faster/slower movement
  const origin = getProp(this, "origin");
  setInterval(() => {
    if (get(this) > origin) {
      set(this, get(this) - speed, {script: false});
      if (get(this) <= origin) clearInterval();
    } else {
      set(this, get(this) + speed, {script: false});
      if (get(this) >= origin) clearInterval();
    }
  }, interval);
}
```

### Additional Configuration
- Ensure that the fader's `origin` property is set to the desired center value (e.g., 8192).
- Disable the "spring" option for the fader to allow the script to function correctly.
- If you encounter errors when moving the fader, check the OSC settings and ensure that `preArgs` is set to 1, which corresponds to the correct channel.

This approach allows for a smooth transition back to the specified value, enhancing the user experience with the fader.

# How to Load Multiple Themes (.css Files) in Open Stage Control

## Problem Description
Users may want to organize their CSS styles into multiple files for better management and navigation. However, there is confusion about how to properly load multiple CSS files as themes in Open Stage Control, as attempts to load more than one file often result in errors or only one file being recognized.

## Solution
To load multiple CSS theme files in Open Stage Control, you can use one of the following methods:

1. **Directly in the Theme Options:**
   - You can specify multiple theme files in the server's `theme` options, separated by spaces. If the path contains spaces, wrap it in quotes. For example:
     ```
     path/to/a.css "path/to/my file.css"
     ```

2. **Using the `@import` Rule:**
   - You can also use the CSS `@import` rule to include additional CSS files within a primary CSS file. This method requires that the `@import` statements be placed before any other rules in the primary file. For example:
     ```css
     @import url(colors.css);
     @import url(2.css);
     ```

### Important Notes:
- The main CSS file specified in the theme options will be reloaded if modified, and it will also reload the files it imports.
- All files specified in the theme option are automatically reloaded upon modification, except for `@import`ed files, which require the main file to be reloaded to reflect changes.
- Ensure that all CSS files are located in the same directory for proper loading.

### Example Structure:
- `main.css`
  ```css
  @import url(colors.css);
  @import url(2.css);
  ```
- `colors.css`
  ```css
  :root {
      --orange: #ed8514;
      --olive: olive;
      --blue: #354247;
      --dark: #333;
      --light: #eee;
      --color-background: var(--dark);
  }
  ```
- `2.css`
  ```css
  .myButton {
      color: var(--light);
      background-color: var(--blue);
      border: 2px solid var(--orange);
      font-size: 20rem;
  }
  ```

By following these methods, you can effectively manage multiple CSS themes in your Open Stage Control projects.

[Attachment: 64Vk4WfjAgly9fxj260PJm3lNLe.css]  
[Attachment: 3Izm192ioXiuKNUfefjsUlVJSd6.css]  
[Attachment: 1oOV0K4fU9xJu9kpSTnCWeTMfs9.css]  
[Attachment: AjXNaZjk5QFnVNT8Dtv8wj8i1QP.json]

# Performance Lag and Connection Loss on iPads

**Problem Description:**
Users experience significant lag and connection loss when changing widget properties (such as colors and visibility) via OSC on older iPads (iOS 9.3.5). While other controls like faders and buttons respond instantly, operations involving CSS updates lead to delays and sometimes a "lost connection to server" message. Testing on newer devices shows improved performance, indicating potential compatibility issues with older hardware and software.

**Solution:**
1. **Upgrade Device:** Test with a more recent device. Older iPads, particularly those running iOS 9.3, may struggle with CPU-intensive tasks, affecting OSC communication.
   
2. **Use Native Color Tab:** For changing widget colors, utilize the native color tab instead of CSS updates. This method has shown to provide instant responses even on older devices.

3. **Monitor Server Console:** Check for any errors logged in the server's console during operations to identify potential issues.

4. **Consider Device Performance:** Acknowledge that older devices like the iPad v3 have significantly lower processing power compared to newer models, which may contribute to the lag experienced during CSS updates.

Further testing on newer devices is recommended to confirm performance improvements.

# Sending Different CCs Based on Knob Movement

**Problem Description:**
A user wants to configure a single knob in Open Stage Control to send one Control Change (CC) message when turned clockwise and another CC message when turned counterclockwise.

**Solution:**
To achieve this functionality, you can use the script property of the knob. Here is a sample script that compares the previous value of the knob to the current value and sends different CC messages based on the direction of the turn:

```javascript
// if the knob was moved before (we need something to compare)
if (locals.previousValue !== undefined) {
  // compare old value to current value
  if (locals.previousValue > value) {
    send('/control', 1, 50, 127) // channel 1, cc 50, val 127 for clockwise
  } else if (locals.previousValue < value) {
    send('/control', 1, 51, 127) // channel 1, cc 51, val 127 for counterclockwise
  }
}
// update old value
locals.previousValue = value
```

This script checks if the knob's value has changed and sends the appropriate CC message based on whether the value has increased or decreased. 

For a more straightforward implementation, consider using an encoder instead of a knob, as shown below:

```javascript
if (value == -1) {
    send('/control', 1, 50, 127) // channel 1, cc 50, val 127 for clockwise
} else if (value == 1) {
    send('/control', 1, 51, 127) // channel 1, cc 51, val 127 for counterclockwise
}
```

This method simplifies the detection of direction based on the encoder's value changes.

# Matrix Object Configuration for Horizontal Faders

**Problem Description:**
Users may want to configure a matrix object in Open Stage Control to display its children as a single column of horizontal faders. 

**Solution:**
To achieve this configuration, follow these steps:

1. Set the matrix layout to `vertical` and justify to `start`.
2. In the matrix properties, use the following configuration:
   ```json
   {
     "design": "compact",
     "horizontal": "true",
     "lineWidth": 0
   }
   ```

This setup will allow you to display multiple horizontal faders in a single column within the matrix object.

# Understanding /EDIT/MERGE in Open Stage Control

## Problem Description
When using the `/EDIT/MERGE` command to update the CSS of a widget, it appears to replace the entire CSS string rather than merging properties. This raises questions about the correct usage of this command.

## Solution
The `/EDIT/MERGE` command is designed to merge object properties, not strings. Therefore, if you want to conditionally set CSS styles, it is recommended to use OSC listeners instead. Here’s an example of how to implement this:

```javascript
{
  OSC{/button_test/display, 1} ? "display:none;" : ""
}
```

For more information on using OSC listeners, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/#osc-listeners-osc).

Additionally, if you are dynamically creating buttons based on articulation types, consider leaving the button container empty in your session and generating buttons on the fly from your custom module. Below is an example of how to do this:

```javascript
// Mapping between the DAW's track identifiers and the articulation's labels
var tracks = {
  0: ['label_1'],
  1: ['label_1', 'label_2']
};

// Articulations details that will be used to create buttons
var articulations = {
  'label_1': {
    address: '/address_1',
    color: 'red',
    // etc
  },
  'label_2': {
    address: '/address_2',
    color: 'blue',
    // etc
  }
};

// This part would go in the oscInFilter function
var n = 0; // This should be retrieved from OSC data

// Retrieve articulations that should be displayed
var available_articulations = tracks[n];

// Create button objects
var buttons = [];
for (var i in available_articulations) {
  var label = available_articulations[i];
  buttons.push({
    type: 'toggle',
    label: label,
    address: articulations[label].address,
    color: articulations[label].color,
    // etc
  });
}

// Replace the container's children with our list of buttons
receive('/EDIT', 'button_container_id', {widgets: buttons});
```

Note that the `color` property in the button definition is not the same as the CSS color property; it defines the widget’s custom accent color. Ensure to use valid CSS color codes where necessary. 

By following these guidelines, you can effectively manage widget properties and dynamically create UI elements in Open Stage Control.

# Sending Parameter Values to the Destination Without Opening the Web UI

**Problem Description:**
When running Open Stage Control in a headless mode on a mini PC, the user wants to load a state at boot to initialize instrument parameters for MIDI instruments. Despite using the `--state` argument, the widget values are not sent to the specified OSC port unless the web UI is opened. Attempts to send `/STATE/SEND` to the server did not yield results.

**Solution:**
Sessions and widgets in Open Stage Control only exist when a client is connected. Remote control commands, such as `/STATE/SEND`, are executed by clients, not the server. The `--state` argument does load the state, but it only takes effect once a client connects.

To achieve the desired functionality without opening the UI, consider the following options:
- Use a custom module to send messages at initialization, although this requires some JavaScript knowledge.
- Alternatively, read the `.json` configuration file to find OSC sender paths and widget values from the `.state` file, then send these directly to Pure Data via OSC.

For multiple clients connecting to the same server, they will sync automatically, and the state file will only be applied the first time a client connects. 

[Attachment: filename.ext] (attachment reference missing)

# Virtual Launchpad for Ableton Live

## Problem Description
A Virtual Launchpad has been developed for use with Ableton Live, allowing users to control session mode seamlessly. The initial version required improvements, particularly in layout and functionality.

## Solution
**Refined Version by jean-emmanuel:**
- Implemented a grid layout compatible with any screen size.
- Adjusted global border radius in the tab's CSS.
- Applied CSS techniques to ensure circular buttons maintain their shape.
- Removed borders from buttons for a cleaner look.
- Added more icons for enhanced functionality.
- Set the first button's mode to 'tap'.

**Attachments:**
- [Attachment: kjwGNtPw7OvRSZh4HzHrYXCdsqC.json]
- [Attachment: iRRrmeOKgx2KDHsFHzuRTFpBYNx.json]

**Additional Notes:**
- Zoltan contributed a custom script for Ableton Live that eliminates the need for ClyphX Pro, providing a more cost-effective solution for users.
- The script allows control over basic MMC functions (Play, Stop, Record, Loop, etc.) and manages 8 tracks, including volume and arm recording.

For further collaboration and updates, refer to the GitHub repository: [freddieventura/virtual-launchpad](https://github.com/freddieventura/virtual-launchpad).

# oscInFilter and receive() Behavior

**Problem Description:**
When using a custom module with a `receive()` function, messages received do not trigger the `oscInFilter()` or `oscOutFilter()`. The expectation was that incoming OSC messages would be caught by `oscInFilter()` and outgoing messages by `oscOutFilter()`. However, this is not the case, as `receive()` does not activate the filters, while `send()` does trigger `oscInFilter()` when targeting localhost.

**Solution:**
The behavior observed is intentional; the `send()` and `receive()` functions do not interact with the custom module's filters. To relay WebSocket messages as OSC incoming messages, you can manually process the data and format it correctly for `oscInFilter()`. Here’s a suggested implementation:

```javascript
function websocketIncoming(wsdata) {
  // Process data manually
  // Ensure it's formatted properly for oscInFilter:
  //     address = string
  //     args = array of {value, type} objects
  var oscdata = module.exports.oscInFilter({address: wsdata.address, args: wsdata.args});
  
  // If return value is defined, trigger receive event
  if (oscdata) receive(oscdata.address, ...oscdata.args);
}
```

This approach allows you to translate WebSocket messages into OSC messages effectively.

# Multiple Canvas Performance on Mobile Safari

**Problem Description:**
When using multiple canvas elements in Open Stage Control on mobile Safari (specifically on iPad 12.9" M1), performance issues arise. With around 34 canvases, touch events become noticeably delayed compared to setups with fewer canvases. The issue persists even when the canvases contain minimal code, indicating a potential inherent limitation with mobile webkit. The performance degradation is particularly pronounced when JavaScript variables are used in CSS animations.

**Solution:**
To improve performance when using multiple canvases, consider the following strategies:

1. **Avoid JavaScript in CSS:** Using JavaScript variables (e.g., `VAR{}`) in CSS animations can significantly impact performance. Instead, use static values for CSS properties whenever possible. For example, replace:
   ```css
   animation: #{VAR{'isEnabled'} ? 'pulse2 0.8s ease-in-out infinite' : ''};
   ```
   with:
   ```css
   animation: pulse2 0.8s ease-in-out infinite;
   ```

2. **Minimize Canvas Count:** Reducing the number of canvas elements can alleviate performance issues. If possible, consolidate functionality into fewer canvases.

3. **Remove Unnecessary Elements:** Identify and remove any SVG elements or other widgets that may be contributing to the performance degradation. Elements such as `resampleIcon`, `moveIcon`, `copyIcon`, and others should be evaluated for necessity.

4. **Test Performance Changes:** Continuously test the performance impact of changes by removing or altering elements and observing the responsiveness of the canvases.

By implementing these strategies, you should see an improvement in the responsiveness of canvas elements on mobile Safari.

[Attachment: performance.json]  
[Attachment: fvNnkO6as2yymm62T9BtzZ6nH0W_1.json]

[Attachment: 3XvsENUhlpZmhOHS4HfVKATbMy9_1.zip]

# Injecting Widget Value into Address

**Problem:**
How to dynamically inject the value of a widget into a specified address in Open Stage Control. For example, transforming the address "/TrackList/0/RecordEnable" to include the widget value, resulting in "/TrackList/55/RecordEnable" when the widget's value is 55.

**Solution:**
The most straightforward method is to utilize the widget's `script` property to send the message. Use the following code:

```javascript
send('/TrackList/' + value + '/RecordEnable')
```

Alternatively, you can set the `address` property to:

```
/TrackList/@{this}/RecordEnable
```

However, this method is less efficient.

# Clones and Variables Overrides

## Problem Description
In an interface using Open Stage Control, there is a need to create multiple panels for different clients. The goal is to clone a panel and set unique override values for each clone to ensure they function independently.

## Solution
To achieve this, follow these steps:

1. In the template widget (the one you intend to clone), ensure that all widget IDs depend on a variable defined in the parent’s `variables` property.
2. When creating clones, override this variable in the clones’ `props` property to make each clone's descendants unique.
3. This allows you to edit the clones and their children using their unique IDs.

Note that while the clones' descendants will have unique IDs, the clones themselves will not. You will need to override the `id` property of the clones as well.

Be aware that modifications made to cloned widgets using `/EDIT` are not logged by the editor (no undo functionality) and may be reset by changes made to the original widget.

For a practical demonstration, refer to the attached session file: [Attachment: clone_overrides.json].

[Attachment: 8ZlfMwNBSYcFda0SzKBmQexocti.json]

# MIDI Panic Button

## Problem Description
Users may need to assign a MIDI Panic button to stop stuck notes in their Digital Audio Workstation (DAW).

## Solution
To create a MIDI Panic button in Open Stage Control, follow these steps:

1. **Create a Button Widget**:
   - Set the button mode to "push" (Inspector > Button > Mode).

2. **Add the Following Script**:
   - In the Inspector, navigate to Scripting > onValue and input the following code:
   ```javascript
   if (value === 1) {
       for (var ch = 0; ch <= 16; ch++) {
           for (var note = 0; note <= 127; note++) {
               send('midi:SKiano-D', '/note', ch, note, 0);
           }
       }
   }
   ```
   - Replace `"SKiano-D"` with the name of the MIDI port connected to your DAW (e.g., Cubase 12).
   - Ensure that the selected MIDI port is enabled in the 'All MIDI Inputs' column (go to Studio > Studio Setup... > MIDI Port Setup).

3. **Alternative Method**:
   - You can also use the "All Note Off" control change command:
   ```javascript
   for (var ch = 0; ch <= 16; ch++) {
       send('midi:SKiano-D', '/control', ch, 123, 0);
   }
   ```

4. **Using Generic Remote or MIDI Remote**:
   - Associate the output of a button widget in Open Stage Control to the MIDI > Reset command in Cubase. Refer to the appropriate guide for detailed instructions (attachment reference missing).

This method should effectively release stuck notes across various DAWs, provided the track is set to receive notes from the specified MIDI port.

# Updating Fader Volume with AbletonOSC

## Problem Description
When using AbletonOSC to set the volume of a track in Open Stage Control, the fader does not update automatically when the volume is changed in Ableton Live. The OSC address for setting the volume is `/live/track/set/volume`, and for getting the volume, it is `/live/track/get/volume`. While a text widget updates correctly, the fader does not respond to the incoming OSC messages.

## Solution
To enable the fader to update correctly when the volume is changed in Ableton Live, you can implement a custom module to translate the OSC messages. Here are two reliable methods:

### Method 1: Custom Module for Address Translation
Use the following custom module to modify the incoming OSC address:

```javascript
module.exports = {
    oscInFilter: (data) => {
        if (data.address === '/live/track/get/volume') {
            data.address = '/live/track/set/volume';
        }
        return data;
    }
}
```

### Method 2: Fader Configuration
Alternatively, configure the fader's address and value property as follows:

1. Set the fader's address to `/live/track/get/volume`.
2. Use the `onValue` script to send the value to `/live/track/set/volume`.

Or, you can set the fader's address to `/live/track/set/volume` and its value property to:

```javascript
OSC{/live/track/get/volume, 0, false}
```

### Additional Notes
- Ensure that Ableton Live is sending feedback messages. If it does not, you may need to send the `/live/track/get/volume` request at regular intervals.
- If you want to filter out specific OSC messages (like `/live/song/beat`) from appearing in the console logs, you can modify the custom module to block these messages by returning an empty response.

For further reference, see the attached configuration file: [Attachment: abletonOSC-meets-OpenStageControl.json].

[Attachment: 5M13m85t1s9CHgZ0biJe0B0ltB0.json]

# Troubleshooting MIDI Input Color Function

## Problem Description
A function `globals.apcMiniLed` is designed to determine the colors of widgets based on MIDI input velocity. However, when the function is called in the widget's CSS, it results in an error: `TypeError: Cannot read properties of undefined (reading '0')`. This error occurs when the input value is undefined, and there are issues with the CSS animation state not being applied correctly.

## Solution
1. **Default Value**: Ensure that the input for `OSC{/note}` has a default value to prevent it from being undefined. This can be done by initializing it properly in the script.

2. **Correct Animation State**: The animation state should be correctly referenced. Ensure that you are using the correct class for targeting the widget. Use the class `active` instead of `on`.

3. **CSS Syntax**: Verify that there is a semicolon after the `@{resetCss}` statement to avoid breaking the CSS.

4. **Debugging**: Use the browser's inspector tool to check the rendered CSS and ensure that the function is being parsed correctly. This can help identify if the JavaScript code is functioning as expected.

5. **Testing in Script Property**: If the function works in the script property but not in the CSS, consider refactoring the approach to ensure compatibility.

By following these steps, you should be able to resolve the issues with the MIDI input color function and its application in the widget's CSS.

[Attachment: i20iMwmI8tg0TVZLWKMqPY8wyuK.json]

[Attachment: oxJkb2ofWwkaFI4TR4He890bGWw.json]

# Example of Z-Layer Use to Display/Hide Widgets in Version 1.x

## Problem Description
This document presents an example of using z-index for displaying and hiding widgets in Open Stage Control. The example utilizes scripting and value widgets to share data, noting that value widgets are not visible in the layout and can only be accessed via the tree view.

## Solution
Refer to the attached example file for implementation details:

- **Example File**: [Attachment: iwo9NKarpwP7lONxyvQ78n5cQ1h.json]

# How to Set Canvas Size to Specific Dimensions on Android Tablet

## Problem Description
To create a control surface specifically for an Android tablet, users may want to set the canvas size to match the tablet's screen resolution. However, when using a resolution larger than the PC screen size (e.g., 2048 x 1536 on the tablet vs. 1920 x 1080 on the PC), the canvas appears oversized and goes off-screen.

## Solution
1. **Set Root Geometry**: 
   - Click on the "root" element in your control surface.
   - In the geometry settings, set the width and height to match the tablet's viewport size, which is typically 1024 x 768 for most Android tablets, despite the actual screen resolution being higher.

2. **Responsive Design**: 
   - To ensure the control surface adapts to different screen sizes, set the width and height to 100%. This will make the layout responsive.

3. **Zooming in the Editor**: 
   - If you need to adjust the view in the editor, you can zoom in using the mouse scroll wheel while holding the `Ctrl` key.

4. **Note on Fixed Layout**: 
   - Be aware that a fixed layout size will not adapt if the device orientation changes. To handle this, consider making your widgets responsive.

5. **CSS for Background Color**: 
   - To remove transparency around a fader, you can either add custom CSS to set the background or wrap the fader in a panel with a specified background color using the `colorBg` property.

For further details, refer to the following resources:
- [CSS Tips - Open Stage Control](https://openstagecontrol.ammd.net)
- [Attachment: hue.json]

[Attachment: nIJubi7EZ2gh563RFJqNeYUOmnh.json]

# Getting Color Feedback from Ableton Live

To create a custom clip launcher that reflects the colors of clips in Ableton Live, you need to implement a solution that allows you to retrieve color feedback from Ableton.

## Solution

1. **Use a Python MIDI Remote Script with OSC Support**:
   - **Clyphx Pro**: This is a paid option that allows you to create simplified scripts for various actions in Ableton Live, including retrieving visual feedback on track and clip colors. It is designed to work well with Open Stage Control.
     - More information: [Beta OSC Output from ClyphX Pro | nativeKONTROL Forum](https://nativekontrol.com)
   - **AbletonOSC**: This is a free MIDI remote script that provides an OSC interface for controlling Ableton Live 11. Basic knowledge of Python is required.
     - More information: [GitHub - ideoforms/AbletonOSC](https://github.com/ideoforms/AbletonOSC)

2. **Accessing Clip Colors**:
   To get the color of clips, you can use the following Python syntax within your script:
   ```python
   self.song.tracks[track_number].clip_slots[clip_number].clip.color
   ```
   Here, `track_number` and `clip_number` can be specified to refer to particular tracks and clips.

3. **Resources for Development**:
   - **Live Object Model (LOM)**: [LOM - The Live Object Model - Max 8 Documentation](https://docs.cycling74.com/max8/vignettes/liveobjectmodel)
   - **Live 11 API Documentation**: [Live 11 API Documentation](https://structure-void.com/PythonLiveAPI_documentation/Live11.0.xml)

By utilizing these tools and resources, you can successfully implement color feedback from Ableton Live into your custom clip launcher.

[Attachment: Live11.0.xml]

# Circular Menu: Displaying Key Instead of Value

**Problem Description**  
When using a circular menu in Open Stage Control, there is a need to display a key (e.g., "Mode Expert") instead of the corresponding value (e.g., "expert") when sending data.

**Solution**  
To display the key in the circular menu, set the widget's "label" property to `%key`. This configuration allows the key to be shown instead of the value.

Refer to the documentation for further details on the "label" property. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]

# Bash Script to Launch Open Stage Control

## Problem Description
Users may encounter issues when attempting to stack server settings in a bash script for launching Open Stage Control (O-S-C). Specifically, errors can arise from incorrect command formatting, such as not using a backslash to continue commands on new lines. Additionally, users may want to run the script in the background to allow the terminal to be closed without terminating the process.

## Solution
To properly format a bash script for launching O-S-C, ensure that each command line that continues onto the next line ends with a backslash (`\`). Below is a correctly formatted example:

```bash
#!/bin/bash

node /Applications/O-S-C/open-stage-control-1.13.2-node \
--port 8080 \
--midi mtc list sysex "Network Session 1:Network Session 1,Network Session 1" "Network Session 2:Network Session 2,Network Session 2" SessionKiano:SessionKiano,SessionKiano SKiano-A:SKiano-A,SKiano-A SKiano-B:SKiano-B,SKiano-B SKiano-C:SKiano-C,SKiano-C UMA25S:UMA25S,UMA25S path=/usr/local/bin/python3 \
--no-gui true \
--remote-root '/Users/alin/Documents/MyAll/DW/03 - Mahler/OSC remote-root' \
--custom-module '/Users/alin/Documents/MyAll/DW/03 - Mahler/OSC remote-root/Custom module/CustomModule1.js' \
--osc-port 7001 \
--debug true
```

To run the script in the background, consider using `tmux` or appending `&` at the end of the command to allow the terminal to be closed without stopping the O-S-C process. 

For example:
```bash
./your_script.sh &
```

This will execute the script in the background, enabling you to close the terminal without affecting the running instance of O-S-C. 

[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]  
[Attachment: image]

# Spring/Snap Speed Configuration in Open Stage Control

## Problem Description
Users have requested a feature to control the speed of the snap and spring effects in Open Stage Control, allowing these effects to occur over a specified duration rather than instantly. This feature is particularly important for live use cases where gesture precision is critical.

## Solution
Currently, Open Stage Control does not support timing-related features for snap and spring effects directly. However, it may be possible to achieve the desired functionality using the canvas widget. A test configuration file named `snap_time_fader.json` has been created to demonstrate this approach.

For further implementation, refer to the provided attachment for a practical example:
- [Attachment: 4iVxpFK3Qw48i60ctUivh2eypo7.json]

# Modal Title Bar Height Customization

## Problem Description
Users may want to change the height and position of the modal title bar in Open Stage Control, or remove it entirely. Additionally, there may be a desire to adjust the position and height of the main OSC navigation bar.

## Solution
To customize the modal title bar and main navigation bar, you can use the following CSS snippets:

### Modal Title Bar Customization
- **Change Position (to bottom)**:
  ```css
  .popup-wrapper {
    flex-direction: column-reverse;
  }
  ```
- **Change Height**:
  ```css
  .popup-title {
    height: 40rem;
  }
  ```
- **Hide Title Bar**:
  ```css
  .popup-title {
    display: none;
  }
  ```

### Main Navigation Bar Customization
- **Change Position (to bottom)**:
  ```css
  .panel {
    flex-direction: column-reverse;
  }
  ```
- **Change Height**:
  ```css
  .panel {
    --nav-height: 20rem;
  }
  ```

Using the web inspector (F12) can help identify elements that can be customized further.

# Set HTML from JS Script

**Problem Description:**
Users may encounter difficulties when attempting to change the HTML of a toggle button using JavaScript within Open Stage Control. An example of the issue includes receiving a console error indicating a `TypeError` when trying to set the display property of an undefined element.

**Solution:**
Widget scripts in Open Stage Control cannot access the DOM directly. Instead, you should utilize the built-in functions provided by Open Stage Control for manipulating widget properties. Refer to the official documentation for a list of available functions and their usage. 

For example, to change the HTML content of a widget, you can use:
```javascript
document.querySelector("#WIFiJSb93n > .html").innerText = "New Content";
```
This approach ensures that you are modifying the widget's content correctly without encountering DOM access issues.

# Debounce Fader OSC Output

**Problem:**  
Users may want to debounce OSC outputs on faders, ensuring that OSC messages are only sent when the user releases the fader.

**Solution:**  
To achieve this, set the fader's `bypass` property to `true` and use the `onTouch` event with the following code:

```javascript
if (event.type == 'stop') {
  send('/address', value);
}
```

This configuration will ensure that OSC messages are sent only when the fader is released.

# Creating Realistic Controls Using Stacked PNGs in Open Stage Control

## Problem Description
Users may encounter issues when trying to create visually appealing sliders and knobs in Open Stage Control using stacked PNG images. Common problems include image jumping or not displaying correctly when adjusting values.

## Solution
To create realistic controls using stacked PNGs, follow these steps:

1. **Prepare Your PNG Files**: Ensure you have a PNG file where each value of the control corresponds to a unique image frame, stacked vertically. You can create these using tools like [WebKnobMan](https://www.g200kg.com/en/webknobman/index.html) or download existing images from community resources.

2. **CSS Configuration**:
   - For a **knob**, use the following CSS:
     ```css
     background: url("controls/Timb_ExpoBloo96128.png") no-repeat 0 #{-@{this.steps}*@{this.value}*@{this.height}}px;
     background-size: auto #{@{this.height}*(@{this.steps}+1)}px;
     ```
   - For a **button**, use this CSS:
     ```css
     background: url("controls/Timb_2018_BUTTONEXIT64-02.png") no-repeat 0 #{-@{this.value}*@{this.height}}px;
     background-size: auto #{@{this.height}*2}px;
     ```

3. **Adjust Control Settings**:
   - Set the **decimals** field to 5 or higher.
   - Set the **steps** field to the number of frames in the image (commonly 128 or 129).

4. **Hide Original Design**: Set the `lineWidth` and both `alphaFill` properties to 0 to hide the original design.

5. **Troubleshooting**:
   - If the image appears to jump, ensure the **steps** parameter is correctly set.
   - Confirm that the **decimals** field is set to 5 or higher.

By following these steps, you can create visually appealing controls that function smoothly in Open Stage Control. 

[Attachment: jCUp5ZXEvtnOXOvhshxoRzQ52oZ_1.json]  
[Attachment: fzIHNhPcAkVfh9CPj3whg5sdfP_1.json]

# Exposing Custom Module to Open Stage Control and Other OSC Apps

**Problem Description:**
Users want to expose a custom module to both Open Stage Control and other OSC applications. The challenge lies in efficiently managing the communication without creating unnecessary traffic or duplicating code, particularly when using `oscInFilter` and `oscOutFilter`.

**Solution:**
To effectively expose your custom module, you can declare functions within the module and call them from either `oscInFilter` or `oscOutFilter`. This approach allows you to filter incoming and outgoing messages while maintaining a single point of definition for your functions. 

This method ensures that the custom module can communicate with both Open Stage Control and external OSC applications without redundancy.

# Time Tracking and Stopwatch Functionality in Open Stage Control

## Problem Description
Users want to monitor the time spent on projects in a format such as "months:days:hours:minutes:seconds" or "days:hours:minutes:seconds." Additionally, they seek functionality to pause and resume the timer using a button, allowing for breaks during project work.

## Solution
To implement a stopwatch with pause and resume functionality in Open Stage Control, follow these steps:

1. **Use the provided templates**: Several JSON files have been shared that include implementations of a stopwatch with pause functionality. You can start with the following:
   - [Attachment: ajfLZfVHNf0ptgbsMklyi3UeRvT.json]
   - [Attachment: yyioJU9j2o5frZCQoaXN1da2Zua.json]
   - [Attachment: qmcFZzXVXnLre1trnqy4kBO9V6H.json]

2. **Modify the stopwatch**:
   - Ensure that the stopwatch has a "start/pause" button that allows you to start the timer and pause it when needed.
   - Implement a reset button to clear the timer when required.

3. **Remove time/date display**: To remove the time/date from the display, adjust the settings in the JSON file to hide or eliminate those elements.

4. **Documentation**: It is recommended to include comments in the script to explain the functionality for better understanding by other users.

By using the provided templates and making the necessary adjustments, you can create a functional timer that meets your project tracking needs.

# XY Widget Spring Issue

When enabling the spring function on an XY widget with both the range set to {-100, 100} and the default set to [0,0], the X axis returns to 0, but the Y axis does not.

## Solution

To resolve this issue, use scripts on the faders instead of relying on the XY widget's value property to synchronize them. Implement the following scripts:

- **Fader X script:**
  ```javascript
  set("xy_1", [value, ""])
  ```

- **Fader Y script:**
  ```javascript
  set("xy_1", ["", value])
  ```

This approach ensures that both axes function correctly. 

[Attachment: XY_Spring.json]  
[Attachment: wOOQkRBJisas97bx6hh886GJo7X.json]

# ReferenceError: nativeRequire is not defined

## Problem Description
When attempting to run shell and AppleScript code in Open Stage Control, an error occurs: `ReferenceError: nativeRequire is not defined`. This error arises when trying to use `nativeRequire` in a widget script instead of the appropriate context.

## Solution
The `nativeRequire` function can only be used within custom module files, not in widget scripts. To resolve this issue, ensure that any code utilizing `nativeRequire` is placed in the custom module file rather than in the widget script.

For example, instead of using:
```javascript
const { exec } = nativeRequire('child_process');
```
in a widget script, move this code to the custom module file where `nativeRequire` is allowed.

# Resetting the Script Widget Value for Re-execution

**Problem Description:**
Users may encounter difficulties when trying to set the value of a script widget in Open Stage Control so that it can accept the same value again after execution. This issue arises because value changes triggered by property updates are ignored if the new value is the same as the current value.

**Solution:**
To successfully reset the script widget value and allow it to accept the same value again, follow these guidelines:

1. **Avoid Using /EDIT**: Do not use the `/EDIT` command to set a widget’s value, as property changes with the same value will be ignored.
   
2. **Use Direct Value Sending**: Instead, send the value directly to the widget’s address. This method will effectively update the widget's value state, even if the value is the same as before.

By implementing these steps, the script widget will be able to process the same incoming value multiple times without issues.

# Different Tabs in Different Screens

When using Open Stage Control with multiple devices, switching tabs on one device causes the other devices to switch to the same tab. 

## Solution

To prevent tab synchronization across devices, bypass the container that holds the tabs. Specifically, bypass the panel used as a background for the tabs. This adjustment allows each device to maintain its own tab selection independently. 

[Attachment: filename.ext]

# Image Absolute Path Issues in Open Stage Control

When attempting to load images into an image widget using absolute paths on Windows, users may encounter difficulties due to the way file paths are resolved.

## Problem Description
Users have reported issues with using absolute paths for images in Open Stage Control. Specifically, when using paths like `C:\path\to\image.jpg`, the images do not display correctly, and the application may attempt to resolve the path incorrectly, leading to URLs like `http://192.68.etc.etc:8080/C:image.jpg`. 

## Solution
1. **Absolute Path Format**: On Windows, an absolute path should be formatted as `C:\path\to\image.jpg`. However, ensure that you are using the correct syntax for the application to recognize it.

2. **Relative Paths**: Currently, only absolute file paths or URLs (e.g., `http://...`) are supported. Relative paths are not applicable.

3. **Recent Fixes**: 
   - A bug affecting absolute path detection was identified and fixed in version **v0.49.4**. Ensure you are using this version or later for improved functionality.
   - In version **v0.45.5**, it was established that absolute path requests are now only allowed for images, enhancing security while maintaining compatibility.

For any persistent issues, consider checking the version of Open Stage Control you are using and updating if necessary. 

[Attachment: filename.ext]

# Compatibility of Custom Module from Version 0.49 to 1.0.3

**Problem Description:**
A user inquired whether a custom module developed for Open Stage Control version 0.49 would function correctly in version 1.0.3, and if there were any specific considerations to keep in mind.

**Solution:**
The custom module from version 0.49 should work without any modifications in version 1.0.3, as there have been minimal changes to the custom module functionality between these versions. 

For reference, the custom module file is available here:
[Attachment: mK5OY3wq8isjU3RgizRhGj4v7QD.js]

# Open a Tab in a Container with a Button and Switch Tabs

## Problem Description
Users want to display a specific tab within a container using a button, even when the button and the tab are not located in the same area of the interface. Additionally, there is a question about switching root tabs at the bottom of the screen.

## Solution
To show a tab in a container using a button, utilize the button's script property with the following code:

```javascript
var tab_index = 1
set("container_id", tab_index)
```

For switching root tabs at the lower edge of the screen, apply the following CSS:

```css
inner {
  flex-direction: column-reverse;
}
inner > .navigation .tablink:before {
  bottom: auto;
  top: 0;
}
```

This will allow you to effectively manage tab visibility and navigation within Open Stage Control. 

For further details, refer to the documentation on [Scripting - Open Stage Control]. 

[Attachment: filename.ext] (attachment reference missing)

# STATE/SET State Remote OSC Command

**Problem Description:**
Users may want to remotely set the state of a widget in Open Stage Control without triggering the sending of its values. Specifically, there is a need to set a widget's state using the `/STATE/SET` command while preventing the execution of any outbound OSC messages.

**Solution:**
To set a widget's value without sending a message, you should send the same message that the widget would normally send, ensuring that the address and preArgs match. The `/STATE/SET` command is designed to trigger message sending, but it is possible to configure the widget to avoid executing the `send()` function when it receives a message.

1. **Set the Widget's Address:**
   Ensure that the OSC address of the widget matches the incoming message you want to receive (e.g., `/oscfunctionstate`).

2. **Use the OnValue Script:**
   In the widget's `onValue` script, any code will execute, except for the `send()` function, which will be skipped when the widget receives a message. This allows you to handle incoming messages without sending outbound messages.

3. **Bypass Property:**
   Consider setting the Bypass property of the switch to true if you want to prevent any interaction from sending messages.

This configuration allows you to manage the widget's state effectively while controlling the flow of OSC messages. 

[Attachment: filename.ext]

# Sending Different OSC Messages for X and Y Axes from XY or MultiXY Widgets

**Problem Description**  
It is necessary to send different OSC messages for the X and Y values of XY or MultiXY widgets, as separating them on the receiver's side can be challenging.

**Solution**  
To achieve this, you can use a script to send the X and Y values to different OSC addresses. For example, in the case of a MultiXY widget, you can implement the following code:

```javascript
send('/x1', value[0]);
send('/y1', value[1]);
send('/x2', value[2]);
send('/y2', value[3]);
// etc.
```

This method allows you to send the X and Y values to separate addresses, facilitating easier handling on the receiving end.

# Sending Multiple OSC Commands from a Toggle Button

**Problem Description:**
Users may want to send multiple OSC commands from a single toggle button, such as `/exec/2/1` and `/exec/3/1`. However, a single widget cannot have multiple OSC addresses directly.

**Solution:**
To send multiple OSC commands from a toggle button, you can use one of the following methods:

### Solution 1: Using a Script Widget
1. Create a script widget.
2. Set its `value` property to `@{toggle_id}`.
3. Set its `target` property (if not using the server's send option).
4. Set its `script` property as follows:

   ```javascript
   JS{{
   send(false, "/exec/2/1", value)
   send(false, "/exec/3/1", value)
   }}
   ```

   This script will execute when the toggle's value changes. For more details, refer to the [script widget documentation](https://openstagecontrol.ammd.net/docs/widgets-reference/#script).

### Solution 2: Using a Custom Module
A custom module can filter outgoing and incoming OSC messages. Here is a minimal custom module that routes messages from address `/toggle_1` to `/exec/2/1` and `/exec/3/1`:

```javascript
module.exports = {
  oscOutFilter: function(data) {
    var {address, args, host, port} = data;

    if (address == '/toggle_1') {
      // Intercept messages from toggle_1 and send some messages
      send(host, port, '/exec/2/1', ...args);
      send(host, port, '/exec/3/1', ...args);
      return; // Bypass original OSC message
    }

    return data;
  }
}
```

Ensure that at least one target is set for the widget or a global default target (using the server's send option) to ensure messages are sent and filtered correctly. For more information, see the [custom module documentation](https://openstagecontrol.ammd.net/docs/custom-module/). 

These methods will allow you to effectively send multiple OSC commands from a single toggle button.

# Changing a Master Switch Value Based on Multiple Sub Switch States

## Problem Description
The goal is to configure a "master" on/off switch that reflects the state of five "sub" on/off switches. The master switch should remain in the "on" position if any sub switch is on, and only change to "off" when all sub switches are off. Additionally, the master switch should not send an OSC message when its state changes due to a sub switch; it should only send a message when switched directly.

## Solution
To achieve this functionality, follow these steps:

1. **Set Up Links**: Ensure you have the master switch linked to the sub switches using `linkid`. The master switch should have the `master` property, while the sub switches should have the `slave` property.

2. **Use Set Options**: Instead of using a switch check script, utilize the extra options in the `set` function to manage unwanted messages and synchronization. This will prevent the master switch from sending OSC messages when its state is changed by the sub switches.

3. **Example Configuration**: 
   - Use the provided `switch_master.json` as a reference for setting up your switches.
   - Make sure to check for case sensitivity in your configurations (e.g., ensure `switchLink` is correctly capitalized).

4. **Testing**: After implementing the changes, test the configuration to ensure that the master switch behaves as expected in relation to the sub switches.

For reference, here are the relevant files:
- [Attachment: hNWXUDruHdiWTp5tFRAut7Ee6Js.json]
- [Attachment: pEljI3HNCCPPwf7M0tCZIX7Zgyv.json]
- [Attachment: xFazYKeLp8TQXt1ZiqbHHQf56GW.json]

# Button Color Interaction On / Off

**Problem Description:**
Users may want to change the color of buttons based on their state (On/Off) and also apply different colors to rows in a matrix button setup. Initial attempts may involve using CSS or complex conditional statements.

**Solution:**
1. **Changing Button Color Based on State:**
   To change the button color based on its state, you can use the following code in the `colorWidget` property:
   ```javascript
   @{
   @this == 1 ? "blue" : "white"
   }
   ```
   This effectively sets the button color to blue when it is active and white when it is inactive.

2. **Using CSS for Label Color:**
   To change the label color of a toggle button, use the following CSS:
   ```css
   /* CSS: toggle button */
   :host.on label {
   color: red;
   }
   ```

3. **Setting Row Colors in a Matrix Button:**
   For a matrix button where each row has a different color, a more elegant solution is:
   ```javascript
   var row = parseInt($ / numberOfCulumns);
   props.colorWidget = colors[row];
   ```
   This code calculates the row index based on the button's position and assigns the corresponding color from the `colors` array.

By implementing these solutions, you can effectively manage button colors based on their state and layout in a matrix configuration.

# Using a Button for Toggle Functionality in Open Stage Control

## Problem Description
A user wanted to replicate the functionality of a slider using a button to control the opening and closing of groups in Ableton via MIDI mapping. The challenge was that a standard button only triggered the "on" value, preventing it from toggling the state.

## Solution
To achieve the desired toggle behavior with a button, set the button's "mode" to "toggle". This configuration allows the button to send both "on" and "off" values, enabling it to open and close channels as needed.

Additionally, the user confirmed that using a switch also resolved the issue effectively.

# Retrieve Values of Widgets from a Custom Module

**Problem Description:**
In a custom module, users may want to retrieve the values of certain widgets, such as faders, to send these values as OSC messages. However, there is confusion regarding how to access widget values directly from the custom module.

**Solution:**
The custom module does not have direct access to widget objects and cannot retrieve their values as initially expected. Instead, it filters incoming and outgoing messages and allows the execution of scripts based on these messages.

To achieve the desired functionality, follow these steps:

1. Use the `oscOutFilter` function within the custom module to store widget values.
2. When needed, utilize the `send` function to send custom messages with the stored values.
3. Familiarize yourself with the advanced property syntax to understand how the script widget operates.

A practical example is provided in the attached session, where a script widget listens for updates from a push button (with the property value set to `@{push_1}`) and executes a script that retrieves the values of faders to set the input's value.

For reference, see the attached example file: [Attachment: sDd5SdTz2I3d0DPgUsRGztGr163.json].

# Bank Change on a Boss ES5

To change to a preset in the next bank on a Boss ES5, you need to send a bank select message and a program change message simultaneously.

## Solution

You can achieve this by using scripting in Open Stage Control. Here’s how to set it up:

1. Use a button widget.
2. In the button's script property, add the following code:

   ```javascript
   // Assuming "target" property is set
   send('/control', 1, 1, 127) // Sends bank select for bank 1
   send('/program', 1, 1) // Sends program change for preset 0
   ```

This script will send the necessary messages to change to the desired preset in the next bank.

# Sending Keyboard Commands or Keystrokes with Open Stage Control

## Problem Description
Users have inquired about the possibility of sending keyboard commands or keystrokes from Open Stage Control (OSC) to a desktop running the OSC server. The goal is to trigger pre-programmed keyboard shortcuts, such as `Alt+Ctrl+T`, from a device like an iPad.

## Solution
Open Stage Control does not support sending keyboard commands or keystrokes directly. OSC is designed to send and receive OSC/MIDI messages only. To achieve the desired functionality, third-party software is required to translate OSC or MIDI messages into keystroke events.

### Recommended Third-Party Solutions
1. **Bome MIDI Translator**: This software translates MIDI signals to keystrokes.
   - [Bome MIDI Translator Classic](https://www.bome.com/products/mtclassic)
   - [Bome MIDI Translator](https://www.bome.com/products/miditranslator)

2. **OSC to Keyboard and Mouse**: A GitHub project that translates OSC messages to keystrokes.
   - [GitHub - enricllagostera/osc-to-keyboard-and-mouse](https://github.com/enricllagostera/osc-to-keyboard-and-mouse)

3. **MIDI Hotkey**: Converts signals from MIDI devices to keystrokes.
   - [MIDI Hotkey Portable](https://www.softpedia.com/get/System/System-Miscellaneous/MIDI-Hotkey-Portable.shtml)

4. **AutoHotkey**: A scripting language for Windows that can be used to create scripts for keyboard shortcuts (note: not tested).

Users are encouraged to explore these options to find a solution that best fits their needs.

# How to Change Button Variables via Script

## Problem Description
Users may need to change the "on" value of button elements in a custom module within Open Stage Control.

## Solution
There are two reliable methods to change button variables:

1. **Using Remote Control Messages**:
   You can edit the session directly by sending a remote control message. For example:
   ```javascript
   receive('/EDIT', 'button_id', {on: 42});
   ```

2. **Using an OSC Listener**:
   Alternatively, you can set up an OSC listener in the button's property. For example:
   ```javascript
   OSC{foo, 40}
   ```
   Then, feed it from the custom module using:
   ```javascript
   receive('/button_address/foo', 42);
   ```

### Considerations
- The first method modifies the session, and changes may be saved.
- The second method only alters the state of the properties without changing the session itself.

This allows you to choose the method that best fits your needs.

# Changing Fader Value in Open Stage Control

## Problem Description
A user seeks to send MIDI control messages based on the value of a fader in Open Stage Control. The goal is to ensure that as the fader's range increases or decreases, the corresponding value sent via MIDI updates accordingly.

## Solution
To achieve this, use the following script for the fader:

```javascript
let x = value; // Use 'value' directly for the fader
x = Math.round(x * 127); // Scale the value to the desired range
send("midi:my_device", "/control", 1, 33, x); // Send the MIDI message
```

This script directly accesses the fader's value as a plain number, rather than an array.

# Set or Update Widget Properties from Custom Module

## Problem Description
Users may want to set or update a widget's properties in Open Stage Control from a Custom Module, particularly in response to incoming messages from third-party resources. For example, changing a button's color based on specific conditions.

## Solution
You can achieve this by using OSC messages in conjunction with a Custom Module. Below is an example demonstrating how to change a button's color based on incoming OSC data.

### Example Code
1. Set the `colorWidget` property of a button:
   ```javascript
   // btn_1 is the OSC address and its default value is "lime"
   OSC{/btn_1, lime}
   ```

2. Implement the `oscInFilter` function in your Custom Module:
   ```javascript
   oscInFilter: function (data) {
       const { address, args, host, port } = data;
       // Check for the CC 1 messages coming from the MIDI port "oscMIDI"
       if (port == "oscMIDI" && address === "/control" && args[0].value === 1) {
           // If CC1 values are greater than 64, set the button's color to red
           if (args[2].value > 64) {
               receive("/btn_1", "red");
           } else {
               // Otherwise, set it back to lime
               receive("/btn_1", "lime");
           }
       }
   }
   ```

This setup allows you to dynamically update the widget's properties based on incoming OSC messages.

# How to Send PJLink Commands with OSC

**Problem Description:**
Users may want to send PJLink commands to a projector using Open Stage Control (OSC) in response to MIDI messages from software like Ableton Live. The goal is to create a button in OSC that sends a PJLink command, including an IP address, password, and specific commands.

**Solution:**
Open Stage Control does not natively support PJLink commands, as it primarily works with OSC and MIDI protocols. However, you can create a custom solution by using a Node.js library within a custom module. This can be achieved by utilizing the `nativeRequire` function in Open Stage Control.

1. **Create a Custom Module:**
   - Use the `nativeRequire` function to include a Node.js library that can handle PJLink commands.

2. **Button Configuration:**
   - In the button's `value_script` section, implement the Node.js code to send the PJLink command to the projector.

3. **Example PJLink Command:**
   - The command format may look like this: `%1AVMT 31`. Ensure you include the static IP address and password in your implementation.

By following these steps, you can effectively send PJLink commands from Open Stage Control. If you develop a working solution, consider sharing it with the community for further assistance and collaboration.

# Properties Update and Client Desynchronization

## Problem Description
1. How to update a widget property using both OSC and VAR functions.
2. Issues with client desynchronization when using multiple devices (e.g., iPads) that send and receive the same OSC messages, despite enabling the "desyncCanvas = 1" option.
3. Inquiry about ways to support the project financially.

## Solution
1. To update a widget property with both OSC and VAR functions, use the VAR function to set the property and create a script widget that acts as an OSC receiver. This script should call `setVar()` to update the variable when an OSC message is received.

2. For client desynchronization, enable the bypass property to prevent synchronization of actions that do not involve OSC messages. Note that this requires scripting to send messages when necessary. This allows each client to operate independently.

3. To support the project, you can contribute via the Patreon page [here](attachment reference missing).

### Example Usage
- To set a button label using VAR:
  ```javascript
  VAR{button_label, "Default label"}
  ```
- In the Scripting/OnValue field of the button:
  ```javascript
  if(value) { setVar('this', 'button_label', "ON") } else { setVar('this', 'button_label', "OFF") }
  ```
- For receiving OSC messages, create a script widget (visible only in the project tree), set its address property to the appropriate OSC address, and use its `onValue` script to call `setVar()` when it receives a message.

These methods will help you manage widget properties and client synchronization effectively.

# Sending Color to a Button

## Problem Description
The user is attempting to change the background color of a button in Open Stage Control based on string arguments received from a Digital Audio Workstation (DAW). The button's address is `/loop/0/01/rec`, and the received arguments include: `cleared`, `play`, `rec`, `willPlay`, and `willRec`. The initial attempt to implement this using CSS and OSC listener syntax was unsuccessful.

## Solution
To achieve the desired functionality, the following JavaScript snippet can be used within the button's CSS section:

```javascript
JS{{
var buttonState = OSC{/loop/0/01/rec};
var colors = {
    "cleared": "#222222",
    "play": "#00FF00",
    "rec": "#FF0000",
    "willPlay": "#004400",
    "willRec": "#440000"
};

return "background-color:" + (colors[buttonState] || "auto") + ';'
}}
```

### Important Notes:
- The `colorBg` property has been removed from non-container widgets in version 1.5.0. Instead, use the `colorWidget` property or apply the background color directly through CSS as shown above.
- Ensure that the OSC listener syntax is used correctly, as it differs from the inheritance syntax.

# Group of Separate Buttons Acting as a Switch

**Problem Description:**
The requirement is to have multiple buttons (e.g., 7 buttons) where activating one button deactivates the others, effectively creating a switch-like behavior. The limitation of the current switch system is that it does not allow for buttons to be placed in different areas of the interface.

**Solution:**
To achieve this functionality, you can use a script widget along with the `linkId` property. Below is a basic example that can be adapted to your specific needs.

1. **Use the Script Widget:**
   - Implement a script that manages the state of the buttons. 

2. **Example Script:**
   - You can refer to the provided example in the attachment for a working implementation: [Attachment: xZ6SQ2cayym0c25Zd9fvxUIue9e.json].

3. **Note on Version Compatibility:**
   - If you are using version 1, be aware that the script widget has undergone changes. Specifically, you need to remove the `JS{{ }}` syntax from the `script` property.

4. **Customization:**
   - For custom button IDs (e.g., `@{parent.id}1`, `@{parent.id}2`, etc.), you may need to modify the script to accommodate your specific button identifiers.

By following these steps, you can create a group of buttons that function as a switch, allowing for a more flexible layout in your interface.

# Push Button to Not Send on Release

**Problem Description:**
When using a push button in Open Stage Control to toggle a folder state in Cubase, the button sends its message twice: once on press and again on release. The goal is to configure the button to only send the message on press.

**Solution:**
To resolve this issue, change the mode property of the button to "Tap." This setting ensures that the button only sends a message when it is pressed, preventing it from sending a message on release.

For more details on widget properties, refer to the Open Stage Control documentation: [Widget Properties Reference](https://openstagecontrol.ammd.net/docs/widgets/properties-reference/#basics).

# OSC Listener for MIDI SysEx Messages

## Problem Description
Users may encounter difficulties in setting up Open Stage Control to listen for MIDI SysEx messages. While normal MIDI events can be configured easily, SysEx messages do not have assigned channels or values, making them trickier to handle. The goal is to listen for incoming SysEx messages and process them accordingly.

## Solution
To successfully listen for SysEx messages in Open Stage Control, ensure the following steps are taken:

1. **MIDI Configuration**: Add the `sysex` parameter to the server's MIDI configuration. This is crucial, as incoming SysEx messages will be ignored if this parameter is not included.

2. **Widget Setup**:
   - **Button Widget**: Configure a button to send SysEx messages. For example:
     ```json
     {
       "id": "buttonA",
       "target": "midi:virtual-launchcontrolxl",
       "script": "send(\"/sysex\", \"f0 00 20 29 02 11 77 00 f7\")"
     }
     ```
   - **Text Widget**: Set up a text widget to listen for SysEx messages:
     ```json
     {
       "id": "text1",
       "value": "OSC{/sysex , noidea}",
       "address": "auto",
       "target": "midi:virtual-launchcontrolxl"
     }
     ```

3. **Custom Module**: For more complex parsing of SysEx messages, consider using a custom module. This allows you to extract relevant data from the SysEx messages and dispatch it to the appropriate widgets.

By following these steps, you should be able to successfully listen for and process MIDI SysEx messages in Open Stage Control. 

[Attachment: missing]

# Syntax Issues Updating "Visible" Properties of Panel

When attempting to update the visibility of panels in Open Stage Control using a menu button, users may encounter syntax issues with the `getProp` and `updateProp` functions.

## Problem Description
The user was trying to set the visibility of panels based on a menu selection but faced challenges with the syntax of their code. The initial approach involved using `getProp` to obtain the visibility state and `updateProp` to change it, which led to confusion.

## Solution
Instead of using `updateProp`, the following method is recommended:

1. Set the panel's `visible` property to `VAR{show, true}`. This creates an internal variable named "show" with a default value of `true`.
2. Use `getVar("panel_id", "show")` to retrieve the current state of the variable.
3. Use `setVar("panel_id", "show", false_or_true)` to change the state of the variable. The panel will automatically update its properties that are associated with the `VAR{}` block.

This approach allows for more reliable control over panel visibility.

# Disabling a Button from OSC Message

To disable a button in Open Stage Control using an OSC command, you can utilize the `bypass` property of the widget.

## Solution

1. **Set Up the Button**: Ensure your button widget has the `bypass` property enabled. This allows it to be controlled via OSC messages.

2. **Send OSC Messages**: Use OSC messages to change the `bypass` state of the button. For example:
   - To disable the button, send an OSC message with the value `1`.
   - To enable the button, send an OSC message with the value `0`.

3. **Example OSC Message**:
   ```
   /your/button/path/bypass 1  // Disables the button
   /your/button/path/bypass 0  // Enables the button
   ```

This method allows you to control the button's state based on the data received from your external software, such as Millumin.

For further details, refer to the documentation on changing widget properties with OSC messages. 

[Attachment: filename.ext]

# Solved: Cannot Read Properties Error in Open Stage Control

**Problem Description:**
Users may encounter a "Cannot read properties" error message when using the matrix widget in Open Stage Control, particularly if the quantity property is set to a non-numeric value or a number below zero. This issue may arise after updates to the software.

**Solution:**
To resolve this issue, ensure that the quantity property of the matrix widget is set correctly. Replace any instance of `VAR{keys}` in the quantity property with `VAR{keys, 0}`. Additionally, if using a variable that may not be a number, you can safeguard against errors by using the following expression:

```javascript
#{ parseInt(@{whatever}) || 0 }
```

This will ensure that the quantity is always a valid number, preventing the error from occurring. 

For further assistance, consider uploading a minimal session that reproduces the error for more targeted support.

[Attachment: osc-export.zip]  
[Attachment: r74vi80DDLfTnEYfDvhtA5PmZOK.zip]

# Strange Behavior of MIDI Button with Ableton Live Remote Scripts

**Problem Description:**
When using Open Stage Control with Ableton Live and a Remote Script, a button widget configured as a toggle sends the values 127, 1, and 0 upon each press. This results in the mute button of the selected channel not changing its state; it only flickers once and then reverts back to its previous state. In contrast, other applications like Midi Designer function correctly, sending only 127 or 1 depending on the button's state.

**Solution:**
1. Ensure that the button's properties for on/off/preArgs are correctly configured.
2. Enable the server's debug option to capture detailed messages from the console, which will provide insights from the OSC's perspective.
3. Avoid specifying the "path" option in the server's MIDI configuration unless necessary, as this can interfere with the built-in MIDI binary.
4. On macOS and Linux, create MIDI virtual ports directly from Open Stage Control by using "OSC:virtual" instead of "OSC:1,1" to eliminate potential routing errors.

By following these steps, the button should function correctly in conjunction with Ableton Live. 

[Attachment: Screenshot 2021-04-01 at 13.47.42.jpg]

# Sending MIDI Messages with OSC Button Widget

## Problem Description
The user sought to configure a button widget in Open Stage Control to send different MIDI messages when the button is pressed (ON) and released (OFF). Specifically, they wanted to send a `/note` message with different parameters for each state.

## Solution
To achieve this functionality, you can set the `preArgs` property of the button widget as follows:

```javascript
preArgs: [1, JS{{ return @{this} == @{this.on} ? 1 : 2 }}]
```

This configuration will send a MIDI message with the first argument set to `1` when the button is pressed and `2` when it is released.

### Alternative Method
Another effective method to send multiple messages with a single widget involves using a toggle button. Here’s an example script:

```javascript
// When the toggle button is on (127)
if (value === 127) {
    send('midi:SessionKiano', '/note', 4, 0, 127);
} else {
    // When the toggle button is off (1)
    send('midi:SessionKiano', '/note', 5, 0, 127);
}
```

This script sends a `/note` message on channel 4 with specific parameters when the button is ON, and a different message on channel 5 when it is OFF. 

By using these configurations, you can effectively manage MIDI messages for different states of a button in Open Stage Control.

# httpGet to Local Network

**Problem Description:**
Users may encounter limitations when using the `httpGet` function in Open Stage Control to send GET requests to devices on a local network, such as Z-Camera E2 cameras. The requests may only succeed when targeting the loopback interface, preventing access to other local IP addresses.

**Solution:**
To enable `httpGet` requests to work with local network IP addresses, ensure that the configuration allows for requests beyond the loopback interface. While security concerns initially limited this functionality, it may be possible to adjust settings to permit local network access.

Consider the following approaches:
- Modify the configuration to specify the target IP address of the HTTP server, allowing requests to be sent to the desired local device.
- Ensure that the Open Stage Control instance is properly set up to communicate over the local network.

For detailed guidance, refer to the documentation for the specific device you are trying to control, such as the Z-Camera E2 protocol documentation [here](https://github.com/imaginevision/Z-Camera-Doc/blob/master/E2/protocol/http.md).

(attachment reference missing)

# How to Prevent Broken Image Link Icon from Displaying

When an image is missing or a link is broken, a 'broken image link' icon may appear. To prevent this from happening, you can use the following solutions.

## Solution

1. **Using a Div with Background Image**: Instead of using an `<img>` tag, you can create a `<div>` that uses a background image. This method avoids the default fallback image for broken links.
   ```html
   <div style="width:20rem; height: 20rem; background-image: url(@{path}image.png); background-size: contain"></div>
   ```

2. **Dynamic Button Handling**: If you are dealing with dynamic buttons that may or may not contain images, you can control the visibility of the image using CSS opacity. Define a CSS class that sets the opacity based on whether an image is present:
   ```css
   .imageStyle {
       opacity: 0; /* Fully transparent */
   }
   ```
   If an image is available, adjust the opacity accordingly:
   ```css
   .imageStyle {
       opacity: 0.7; /* Example opacity for visible image */
   }
   ```
   You can retrieve the opacity value dynamically from a matrix, ensuring that if there is no image, the opacity remains at 0.

3. **Conditional Statements in HTML**: You can use advanced syntaxes to include conditional statements in your HTML. For example:
   ```html
   <div class="#{@{widget_id} ? 'a' : 'b'}">
   JS{
   var html = ""
   // write to variable html
   return html
   }
   </div>
   ```

By implementing these methods, you can effectively manage the display of images and prevent broken image link icons from appearing. 

[Attachment: filename.ext]

# Centering Elements in Grid Templates on iOS Devices

## Problem Description
When using a grid template with `align-items` for a patch in Open Stage Control, the XY pad does not display correctly on iOS devices, despite functioning well on computers. The CSS properties used include `grid-area`, `display: flex`, and `align-items: center`. The issue may be related to CSS compatibility on iOS, particularly with the `aspect-ratio` property and potential conflicts with `display: flex`.

## Solution
1. **CSS Compatibility**: Ensure that the CSS properties used are compatible with the iOS version. The `aspect-ratio` property is not supported on iOS versions below 15. If you are using iOS 16.6, this should not be an issue, but conflicts with `display: flex` may still arise.

2. **Use Flex Layouts**: Consider switching to flex layouts instead of grid layouts for easier management of element positioning. 

3. **Media Queries**: Implement `@media` rules to define fixed widths and heights for different screen sizes, rather than relying on a single rule that fits all. This approach can help address centering issues and ensure responsiveness.

   Example of a media query:
   ```css
   :host {
     --xy-size: 400px; /* Default startup size */
   }
   ```

4. **Testing**: After making adjustments, test the layout on various devices to ensure proper display and functionality.

For further assistance, refer to the attached session files which demonstrate the suggested changes:
- [Attachment: mainSquared.json]
- [Attachment: 1w4vbpOGRRFs8858jdrGQGFqK5w.json]
- [Attachment: fCjvUasaB3gOd5P1pY538SjLdDf.json]
- [Attachment: AjR44hAai0ywbJU2ZkLYnIj9hmK.json]

[Attachment: tOWI4RR7bcSgzF4U9QtNb27hDkV.json]

[Attachment: lpGYVjZNjGKvJq2wwwAbD4Dolem.json]

# Trigger a Custom Module Function from a Widget

**Problem Description**  
A user created a custom module that loads file content from a directory. They want to add a widget (button) that allows for rescanning and reloading the content, but are unsure how to call the function in the custom module from the widget.

**Solution**  
To trigger a function in a custom module from a widget, you need to send an OSC message using the widget. The custom module can then catch this message using the `oscOutFilter` function. Widgets and custom modules communicate exclusively through OSC messages, as they do not share context directly. 

For further details, refer to the discussion in [solved] Basic Filesystem operations - #6 by jean-emmanuel.

# Opacity Issue in Open Stage Control v1.26.0

## Problem Description
An opacity-related issue was introduced in Open Stage Control v1.26.0, affecting the rendering of modal popups with CSS properties set to `opacity: 0.8`. This issue causes the modal to behave differently when covering a matrix widget compared to version v1.25.7.

## Solution
To resolve the opacity issue, you can target the popup element directly in your CSS. Use the following code:

```css
.popup {
  opacity: 0.8;
}
```

Alternatively, if you want to affect the button, use:

```css
.toggle {
  opacity: 0.8;
}
```

This adjustment will ensure consistent rendering of the modal popup across versions. 

[Attachment: lJB09iymb2t7RQqfbAVma3HMk9c.json]

# Reading and Writing JSON Files in Custom Modules

## Problem Description
Users may want to read and write JSON files within a custom module in Open Stage Control. The goal is to specify a JSON file path as a parameter during module initialization, load its content into a variable, and later export this variable as a JSON file upon receiving a specific OSC command.

## Solution
As of version 0.47.0, Open Stage Control supports reading and writing JSON files in custom modules using the following functions:

- `loadJSON`: Use this function to read a JSON file and set its content to a variable.
- `saveJSON`: Use this function to export a variable as a JSON file.

This functionality allows for the desired interaction with JSON files directly within custom modules.

# Changing MIDI CC Values with a Toggle Button

**Problem:**
You have a matrix of 8 knobs that initially send MIDI CC values from 16 to 23. You want to change these MIDI CC values to 70 to 77 when a button is toggled. 

**Solution:**
To achieve this, use the following syntax in the `preArgs` property of your knobs:

```json
"preArgs": "[1,#{@{button_id} ? 70 + $ : 16 + $}]"
```

Replace `button_id` with the actual ID of your toggle button. This expression checks the state of the button and adjusts the MIDI CC values accordingly.

# On Click Events with Item Banks of a Switcher Widget

**Problem Description:**
It is desired to trigger 'onclick' events for each bank within a switcher widget in Open Stage Control. The goal is to send unique text commands (e.g., “set Input 1 Level -6.0”) to an external OSC listener when a bank is selected.

**Solution:**
To achieve this functionality, use a script widget that sends commands when the switcher's value changes. Configure the script as follows:

1. Set the script’s value to `@{switcher_id}`.
2. Define the script property with the following JavaScript code:

```javascript
JS{{
var selected = value._selected;
if (selected == "A") send("127.0.0.1:5555", "/some/address", "some_value");
// Add additional conditions for other banks as needed
}}
```

This setup allows each bank in the switcher to act like a push button, sending the appropriate OSC commands upon selection.

# Check if Users are Active

## Problem Description
When building an interactive piece using Open Stage Control (OSC), there is a need to implement an authentication system that allows only three audience members to interact at a time. The challenge arises when users mistakenly select the wrong option from a dropdown menu, which results in "phantom users" being stored in PureData (Pd). This leads to unintended interactions during the performance. The user seeks a solution to store only the last selected values from the authentication dropdown and has attempted to use the `/GET` message without success.

## Solution
To manage active users and filter out inactive clients, you can create a custom module in Open Stage Control. Below is a suggested implementation:

```javascript
// Keep track of connected clients
var clients = {}

app.on('open', (data, client) => {
    if (!clients[client.id]) clients[client.id] = {
        active: false, // inactive by default
        some_stat: 0 // keep track of client's activity
    }
})

app.on('close', (data, client) => {
    // Optionally remove clients on close; consider that 'close' may occur on browser reload
    if (clients[client.id]) delete clients[client.id]
})

module.exports = {
    oscOutFilter: function(data) {
        var {address, args, host, port, clientId} = data

        // Determine if the client is active based on outgoing messages
        if (some_conditions_are_met) {
            clients[clientId].active = true
        }

        if (!clients[clientId].active) return // Silence inactive clients

        return {address, args, host, port}
    }
}
```

### Regarding the `/GET` Message
The `/GET` command requires the first argument to be an `ip:port` string. Ensure you are sending the correct format when using this command, as it may not work due to asynchronous client behavior.

For further assistance, refer to the Open Stage Control documentation or community resources. 

[Attachment: filename.ext] (attachment reference missing)

# Problème de nombre de colonnes dans un menu

Lors de l'utilisation d'un menu avec une grille, il peut y avoir un problème où le nombre de colonnes ne se fixe pas correctement.

## Solution

Pour résoudre ce problème, supprimez le widget concerné, puis utilisez `Ctrl + Z` pour forcer la mise à jour de la valeur numérique. Cela devrait permettre d'appliquer correctement le nombre de colonnes.

![image](attachment) [Attachment: image.png]

# Script Widget send() Function

## Problem Description
The `send()` function within a script widget does not operate as expected when triggered by changes in an input widget that retrieves its value via OSC. The script executes correctly, but the `send()` function fails to send messages, likely due to restrictions on triggering it without user interaction or specific conditions.

## Solution
To successfully send a message after receiving one, implement the functionality in a custom module rather than within the script widget. The limitations of the script widget prevent the `send()` function from executing under certain circumstances. For more details, refer to the issue linked in the discussion.

[Attachment: filename.ext]

# MIDI Timecode Logic in Open Stage Control

## Problem Description
Users may encounter challenges when implementing MIDI Timecode (MTC) logic in Open Stage Control, particularly in parsing quarter frame messages and displaying timecode in the hh:mm:ss:ff format. Issues may arise with playback synchronization and the proper handling of incoming MTC messages.

## Solution
To effectively implement MTC in Open Stage Control, follow these steps:

1. **Use a Custom Module for Parsing**: It is recommended to parse the incoming SysEx MTC messages within a custom module. This allows for better handling of the data and facilitates the transmission of formatted values to widgets using the `receive()` function.

2. **Utilize Built-in Implementations**: The latest versions of Open Stage Control (v1.7.2 and later) include built-in support for sending and receiving MTC messages. Incoming quarter frames are automatically consolidated into full frames, simplifying the process.

3. **Debugging Playback Issues**: If playback synchronization issues occur, consider providing debug traces to identify any inconsistencies. Observations from different DAWs (like Cubase and Reaper) can help pinpoint the source of the problem.

For further details on MTC implementation, refer to the official documentation: [MTC Timecode Documentation](https://openstagecontrol.ammd.net/docs/midi/midi-messages/#mtc-timecode).

### Attachments
- [Attachment: MTC.js]
- [Attachment: 9PkfVhqOspE0YEKM68Tj9zRUttc.json]
- [Attachment: 1FbZMQJ4BIdNSZQEFtX7ntUsfEQ.json]

# Dropdown OSC Message Re-trigger on Value/Key Re-selection

## Problem Description
When using a dropdown widget to dynamically fill patch file names and send OSC messages, selecting the same item from the dropdown does not trigger a new OSC message. This behavior prevents the user from re-sending the OSC message without resetting the widget's value, which would remove the patch name from the dropdown label.

## Solution
Currently, the dropdown widget does not submit its value when the same item is selected. A confirmed workaround is to use a menu widget instead of a dropdown widget. However, this may not be suitable for all use cases, especially when dealing with a large number of items, such as tens of SuperCollider patch file names.

For users who require the dropdown functionality, consider implementing a custom solution using the `onTouch` script to manually trigger the OSC message when the same item is re-selected. 

[Attachment: filename.ext] (attachment reference missing)

# Global CSS Properties in Open Stage Control

## Problem Description
Users may seek a comprehensive list of global CSS properties shared by widgets in Open Stage Control, specifically the names of properties like `--custom-color` or `--color-accent`, rather than their current values. Additionally, there may be issues when attempting to change the background color of the modal object using CSS variables.

## Solution
1. **List of Global CSS Properties**:
   - Shared CSS variables are defined [here](link to shared css variables).
   - Widget-specific CSS variables are defined [here](link to widget specific css variables).

2. **Changing Modal Background Color**:
   - To change the background color for the modal object, use the following CSS code:
     ```css
     :host {
       --color-raised: orange;
     }
     ```
   - This will affect the modal's toggle and all its children. Utilize the inspector tool to identify which CSS variables are in use.

3. **Known Issue**:
   - There is a bug in the modal widget that prevents CSS updates if the property was previously empty and the modal was opened at least once. This issue has been resolved in the latest version in git. 

[Attachment: filename.ext]

# Console.log Color Customization

## Problem Description
Users want to customize the color of `console.log` output in Open Stage Control to enhance visibility, particularly for debugging purposes.

## Solution
To set a `console.log` output to display in red, you can use the following method:

1. **Native Method**: Refer to the "native way" for making console log outputs colorful as described in this resource: [Make Console Log Output Colorful and Stylish](http://voidcanvas.com/make-console-log-output-colorful-and-stylish-in-browser-node/).

2. **Using NPM Packages**: 
   - The `colorette` package is recommended for coloring console outputs. It works effectively with Open Stage Control.
   - Note that `chalk` may not function properly with `console.log` in this context.
   - Be aware that running Open Stage Control from a bash script may cause encoding issues with `colorette`.

For more reliable results, consider using `colorette` for your color customization needs. 

[Attachment: filename.ext] (attachment reference missing)

# Increment Adding +2 Instead of +1

**Problem Description:**  
A user reported that a button in their Open Stage Control setup was incrementing by 2 instead of the intended 1 when pressed.

**Solution:**  
The issue was caused by the server's send option being set to `127.0.0.1:8080`, which caused the widgets to trigger themselves. To resolve this, ensure that the server send option is configured correctly to avoid self-triggering of widgets. After correcting this setting, the increment function worked as expected, adding 1 with each button press.

[Attachment: Increment issue.json]  
[Attachment: eT6zRw1FBnnzz6dMHeRSX3JTUpL.json]

# Auto Responsive to Screen Size

## Problem Description
Users may encounter issues with making containers or elements auto-size to fit different screen sizes, particularly on devices like the iPad. Templates may expand beyond the screen dimensions, leading to unwanted scroll bars.

## Solution
To achieve responsive sizing for your interface, consider the following methods:

1. **Use Percentage Values**: Set the `width`, `height`, `top`, and `left` properties using percentage values. This allows elements to adapt based on the screen size.

2. **CSS Media Queries**: Implement CSS media queries to adjust styles based on the device's characteristics.

3. **Strip Widgets as Containers**: Utilize strip widgets as containers, which can help in organizing your layout effectively. Refer to the documentation for more details on [strip widgets](https://openstagecontrol.ammd.net/docs/widgets-reference/#strip).

4. **Height Configuration**: Ensure that vertical strips within a horizontal strip are also set to `100%` height. This maintains the intended layout without overflow.

For further guidance on responsive sizing, consult the [CSS tips documentation](https://openstagecontrol.ammd.net/docs/css-tips/#responsive-sizing).

If you continue to experience issues with height settings, ensure that all nested containers are configured correctly to inherit the desired dimensions.

[Attachment: qox6gayMxEa9A1UeYcPEKLsHmws.json]

# Change Stroke Width of Widgets

**Problem Description:**
Users may want to change the stroke width of widgets in Open Stage Control, but there is no direct option available for this configuration.

**Solution:**
A temporary solution involves using CSS to modify the stroke width. However, this method may not be compatible with all widgets. The following CSS can be applied:

```css
inner:before {
  border-width: 2rem;
}
```

A clean implementation for changing stroke width is planned for a future release.

# How to Get Device Orientation in Open Stage Control

## Problem Description
Users need a method to detect device orientation changes (portrait or landscape mode) in Open Stage Control, particularly for iOS devices where screen dimensions remain constant during orientation changes.

## Solution
As of version 1.14.4, Open Stage Control provides a global variable `globals.screen.orientation` to access the current orientation. However, there is no automatic trigger for changes in orientation. To monitor orientation changes, you can use the following script in the `onCreate` property of a widget:

```javascript
locals.orientation = globals.screen.orientation;
setInterval(() => {
  // Check orientation every 1 second
  if (locals.orientation != globals.screen.orientation) {
    // If it changed, save the new value
    locals.orientation = globals.screen.orientation;
    // Perform an action
    console.log('Orientation changed!');
  }
}, 1000);
```

This script will log a message to the console whenever the orientation changes. Adjust the action within the `if` statement as needed for your application.

# Touch Multiple Buttons Simultaneously

**Problem Description:**
Users have reported difficulties with multi-touch functionality on touch screens when using Open Stage Control (OSC). Specifically, some users are unable to press and hold multiple buttons simultaneously, particularly on Mac devices.

**Solution:**
Open Stage Control supports multi-touch out of the box. If you are experiencing issues, consider the following steps:

1. **Browser Compatibility:** Ensure you are using a recent version of Chromium or Chrome. The built-in OSC client should also be tested.
2. **Disable Conflicting Software:** If you are using Espresso Flow or similar software, try disabling it to see if it is interfering with multi-touch events.
3. **Test on Different Devices:** Multi-touch functionality has been confirmed to work on iPad devices using Safari and Chrome. If possible, test OSC on an iPad or other devices.
4. **Windows Compatibility:** Users have reported success with multi-touch on Windows 11 using Chrome, especially after initiating interaction through a specific button.

Note: Multi-touch support on Mac may be limited, as indicated by discussions in community threads. 

For further assistance, consider checking community forums for updates or additional troubleshooting tips. 

[Attachment: OSC/PILOT for Mac - #47 by MUGSHOT - OSC/PILOT General Discussion - OSC/PILOT]

# XY Pad Note Triggering in Open Stage Control

## Problem Description
The user wants to configure an XY pad to trigger a note that sustains until released, allowing control over a synth through finger movements.

## Solution
To achieve this functionality, you can use the following code snippets in the `onValue` and `onTouch` events of the XY pad:

### onValue Event
This event will handle the note triggering based on the XY pad's position:
```javascript
let channel = 1;
let note = Math.round(value[0]);
let velocity = Math.round(value[1]);

send("midi:virtual_midi", "/note", channel, note, velocity);
// Optionally, you can send a note off message when needed
// send("midi:virtual_midi", "/note_off", channel, note, 0);
```

### onTouch Event
This event will manage the note's start and release based on touch interactions:
```javascript
let channel = 1;
let note = Math.round(value[0]);
let velocity = Math.round(value[1]);

if (event.type === "start") {
    send("midi:virtual_midi", "/note", channel, note, velocity);
} else if (event.type === "end") {
    send("midi:virtual_midi", "/note_off", channel, note, 0);
}
```

By implementing these snippets, you can effectively trigger and sustain notes using the XY pad in Open Stage Control.

# Set Button Matrix Name from Variable

**Problem:**
The user wants to dynamically set the names of buttons in a matrix based on values calculated in a variable. They inquired whether it is possible to use the `set()` function to achieve this.

**Solution:**
The `set()` function is limited to setting a widget's value and cannot directly modify a button's label. Instead, you should use a custom variable in the matrix's properties to expose the button's label. This can be done using the `setVar` function.

Here’s how to implement it:

1. Define the matrix properties to include a label that can be modified:
   ```javascript
   // matrix.props
   var props = {}
   props.label = 'VAR_{name}' || 'default_label' 
   // Use underscored VAR_ to scope it to the child
   ```

2. Use `setVar` to update the label from anywhere in your code:
   ```javascript
   // anywhere.onValue
   setVar('matrix_01/1', 'name', 'hello there')
   ```

This approach allows you to dynamically set the button labels based on variable values.

# Using Theme and Custom Module with Switch Widget

## Problem Description
A user is seeking best practices for minimizing code and styling within the Canvas of Open Stage Control. Specifically, they want to implement a Switch widget with multiple values that sends different CC messages based on the selected value. Additionally, they are interested in applying styles and images to the Switch widget through a theme file.

## Solution
1. **Switch Widget Configuration**:
   - If the Switch widget is solely used for sending CC messages, a custom module may not be necessary. The basic functionality can be achieved without it.

2. **Styling and Theming**:
   - To apply styles and images to the Switch widget, consider using reusable classes in your theme file. This approach allows you to maintain consistency across multiple widgets.
   - Alternatively, you can use the `IMPORT{filename}` syntax within your CSS or other properties to structure your styles in external files, enhancing organization and readability.

3. **Code Optimization**:
   - Instead of using `calc` for centering the Switch widget, utilize a Horizontal layout in the panel with appropriate padding for a simpler solution.
   - For background images associated with different switch values, encapsulate them within a `JS{}` block. This reduces code repetition and improves clarity.

For further reference, see the attached example files:
- [Attachment: moCyuGqoq0R7ujw2jZWTuzPMYlH.json]
- [Attachment: 2nRsbjksA3F8DXt3qqtOjyyulqh.json]

# Button Turns into Fader

**Problem Description**  
Users want to control a fader for metronome volume using a button that morphs into a fader when pressed. The goal is to have a small button that expands into a larger fader for precise control while minimizing screen space usage.

**Solution**  
It is not possible to morph a button directly into a fader. However, there are workarounds using CSS and scripting to achieve a similar effect.

1. **Fader Zoom Workaround**:  
   Use the following JSON configuration to create a small fader that expands when touched:
   - **File**: [Attachment: 7qk7PKSOa5zzpELx1UxNnQP6vD0.json]  
   (Requires Open Stage Control v1.9.0)

2. **Alternative Fader Zoom Configuration**:  
   If the first solution does not work on touch devices, consider this configuration:
   - This setup includes:
     - A small fader
     - A larger fader whose visibility is controlled by a variable widget
     - A variable widget updated by the small fader's scripting
   - **File**: [Attachment: 2QfaPcq3YhnADy4317qU57nInpa.json]

3. **No Extra Widgets Solution**:  
   Another approach without using extra widgets involves CSS and scripting:
   - **CSS**:
     ```css
     transform: scale(VAR{scaleFactorX}, VAR{scaleFactorY});
     z-index: VAR{zIndex};
     ```
   - **Script**:
     ```javascript
     if (touch !== undefined) {
       if (touch === 1) {
         setVar("this", "scaleFactorX", 3);
         setVar("this", "scaleFactorY", 8);
         setVar("this", "zIndex", 1000);
       } else {
         setVar("this", "scaleFactorX", 1);
         setVar("this", "scaleFactorY", 1);
         setVar("this", "zIndex", 1);
       }
     }
     ```
   - **File**: [Attachment: 4prhVXDrgNI9MImYLWZdic5hPiN.json]  

These solutions allow for a more interactive experience while controlling the fader without occupying too much screen space.

# Client Sync Issue

When multiple clients connect to a session in Open Stage Control, synchronization issues may arise, leading to inconsistent widget values across devices. Specifically, one client may receive different send addresses or random values for controls compared to another client.

## Solution

To prevent unwanted synchronization between clients, set the `bypass` property to `true` on the widgets in your configuration modal. This will ensure that the widget values are only used locally and not sent to other clients.

Additionally, it has been noted that synchronization issues were resolved in versions 1.7.2 and 1.7.3, suggesting that upgrading to these versions may also eliminate the problem.

For reference, the session file associated with the issue is available as follows:
[Attachment: jcrAEz5YOJ3ghQCcGaKvyRP1l2N.json]

# Sending Two MIDI Messages with Range

**Problem Description:**
Users want to use the Range widget in Open Stage Control to send different MIDI CC values from slider-knobs.

**Solution:**
To achieve this, you can use scripting to send multiple MIDI messages. The following code example demonstrates how to send two MIDI CC messages on the same channel:

```javascript
send('/control', 1, 1, value[0])
send('/control', 1, 2, value[1])
```

This code sends CC messages 1 and 2 on channel 1, assuming the widget has a MIDI target set.

Additionally, if you want to set the Range parameters using a button, you can use the following script:

```javascript
if (value == 1) {
    set("range", [0], 12);
    set("range", [1], 60);
}
```

This script sets the range parameters for the Range widget when the button is pressed.

# Conditional OSC Message Handling in Open Stage Control

## Problem Description
When using the Ableton Live API to retrieve device names from a selected track, missing devices do not return a "null" or "empty" message. Instead, they return the syntax of the API call itself (e.g., `song.view.selected_track.devices[3].class_display_name`). This inconsistency complicates the development of a control interface, as it does not provide a clear indication of missing devices.

## Solution
To address this issue, you can create a custom module in Open Stage Control to handle OSC messages. The module can replace OSC messages that contain specific characters (like ".", "_", or "[]") with a designated message, such as "Missing device". 

Here’s a basic outline of how to implement this:

1. **Create a Custom Module**: Write a JavaScript module that filters OSC messages.
2. **Implement the `oscInFilter` Function**: This function will check incoming OSC messages and modify them as necessary.

Example code snippet:
```javascript
module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        // Check if the selected track has changed
        if (address === '/SELECTED_TRACK_CHANGED') {
            // Clear device names before receiving new ones
            receive('/devname0', '');
            receive('/devname1', '');
            receive('/devname2', '');
            receive('/devname3', '');
        }

        // Additional logic to handle device names
        // Replace messages for missing devices
        if (address.startsWith('song.view.selected_track.devices')) {
            // Logic to determine if a device is missing and replace it
            // Example: if device index is out of bounds, send "Missing device"
        }
    }
};
```

3. **Load the Module**: After configuring the module correctly, load it into the server’s custom-module field in Open Stage Control.

4. **Testing**: Ensure that when the selected track changes, any missing device messages are replaced with "Missing device".

For further examples and detailed guidance, refer to community resources that discuss OSC message filtering and custom module development. 

[Attachment: WhatsApp Image 2021-02-03 at 14.23.49]
[Attachment: WhatsApp Image 2021-02-03 at 14.24.16]

# Using Open Stage Control for DJ Applications

## Problem Description
Users are exploring the capabilities of Open Stage Control (OSC) for creating custom software solutions for DJ applications. There are discussions about limitations in OSC and the need for additional features, such as waveform viewers.

## Solution
A custom experimental software has been developed to test ideas and identify potential performance issues using OSC. The software utilizes OSC subscription for session management, similar to X32/M32 family mixing consoles. Below are code snippets shared as part of the project:

### JavaScript Code (mizar.js)
```javascript
function start() {
    var target = settings.read("send")[0];
    var host = target.split(':')[0], port = target.split(':')[1];

    send(host, port, "/mremote");
    
    setInterval(function() {
        send(host, port, "/mremote");
    }, 9000);
}
```

### JSON Configuration (mizar.json)
```json
{
  "session": {
    "type": "root",
    "id": "root",
    "interaction": true,
    "colorBg": "auto",
    "colorText": "auto",
    "colorWidget": "auto",
    "alphaFillOn": "auto",
    "padding": 0
  }
}
```

For further details, refer to the complete code available at the following link: [Attachment: gist.github.com/Show-vars/18d3a8cb0b16a0856b83a7cbeaf0b284].

# Matrix: Sending Both Triggered Button and Previous Triggered Button Values

**Problem Description:**
When triggering a button in a matrix, the goal is to send MIDI CC values for both the currently triggered button and the previously triggered button. The initial attempt used local variables, but it was unclear how to properly manage shared state between buttons.

**Solution:**
To achieve the desired functionality, utilize custom variables stored in the matrix widget itself instead of local variables. The following code snippet demonstrates the correct implementation:

```javascript
props.onValue = `
var lastIndex = getVar('parent', 'Index');
if (lastIndex !== undefined) {
  send('/control', 10, 69 + getIndex('this'), 127); // Current button's CC
  send('/control', 10, (69 + lastIndex), 127); // Previous button's CC
}
// Update index
setVar('parent', 'Index', getIndex('this'));
`
```

### Key Points:
- Use `getVar` and `setVar` to manage shared state between buttons.
- Replace string concatenation with `getIndex('this')` for clarity and correctness.
- The `props.script` property is deprecated; use `props.onValue` instead.

This approach ensures that both the current and previous button values are sent correctly when a button is triggered.

# Controlling Scroll Wheel Values in Open Stage Control

## Problem Description
Users may want to control the value of the scroll wheel when using the numeric input property in Open Stage Control, desiring non-integer values.

## Solution
As of the next release, it will be possible to specify a number in the numeric property for scroll wheel input. Note that the mouse wheel will only affect an input when it is focused. 

For further details, please refer to the changelog for the latest features.

# Display Value in the Middle of a Knob

**Problem Description:**
Users may want to display the value of a knob in the center of the knob interface. This can be achieved using HTML or CSS, but using HTML may reduce the size of the knob.

**Solution:**
To display the value in the middle of the knob, you can utilize CSS. A sample configuration file is provided for reference.

- Use the following configuration: [Attachment: yYwAUgqL5TeTZH9wAh9D1q93NlX.json] 

This approach allows for customization of the knob's appearance while maintaining the desired functionality.

# Unlinking Panels on Separate Mobile Devices in Open Stage Control

**Problem Description:**
When using two separate mobile devices to control different mixer sessions in Open Stage Control, moving the fader panel on one device causes the corresponding panel on the other device to move simultaneously. This issue arises from shared synchronization settings that were carried over from a template session.

**Solution:**
To unlink the panels on the two devices, set the scrolling container's `bypass` property to `true`. This adjustment will prevent the panels from synchronizing their movements across devices. 

For further details on client synchronization logic, refer to the official documentation.

# Listen to Velocity of CC

## Problem Description
The user is trying to receive velocity values through a Control Change (CC) pathway for VU metering in Open Stage Control. They want to assign these velocity values to a fader, but are only receiving the CC value instead of the velocity.

## Solution
To configure a fader to react to incoming CC values, use the following settings:

```json
{
  "address": "/control",
  "preArgs": [CHANNEL_N, CC_N],
  "target": "midi:port_name",
  "range": {"min": 0, "max": 127}
}
```

This setup will allow the fader to respond to values received on the specified MIDI port (`port_name`) for the given CC number (`CC_N`) on the specified channel (`CHANNEL_N`). 

**Note:** Control Change messages do not include velocity information; they consist of a channel number, a control change number, and a value. Therefore, if you are looking for velocity data, it may not be available through standard CC messages. 

[Attachment: Screenshot (248)]

# MIDI, Sysex, LED, LCD Screen Questions

## Problem Description
A user is seeking assistance with the following tasks in Open Stage Control:
1. Turning on a LED widget based on specific MIDI CC values.
2. Replicating a 55x2 character LCD display using Sysex messages.
3. Finding resources to improve programming skills specific to OSC.

## Solution

1. **Turning on a LED Widget with MIDI CC Values**:
   To control a LED widget based on MIDI CC values, you can use a script widget. Set the following properties:
   - **Address**: `/control`
   - **preArgs**: `[1, 10]` (where 1 is the channel and 10 is the CC number)
   - **Target**: Set according to your MIDI configuration.

   In the script, you can define actions based on the incoming MIDI value:
   ```javascript
   if (value < 15) {
       // do something
   } else if (value < 35) {
       // do something else
   }
   ```

2. **Replicating a 55x2 Character LCD Display**:
   To replicate the LCD display, process the Sysex messages using a script widget:
   - **Address**: `/sysex`
   - **preArgs**: Leave empty, as there is no channel information.

   Ensure that Sysex is enabled in the server's MIDI configuration by adding the `sysex` keyword.

3. **Improving Programming Skills for OSC**:
   There are no formal crash courses available for OSC programming. However, it is recommended to explore the documentation for examples, which are gradually being added. Familiarizing yourself with JavaScript will be beneficial as it is the primary language used for scripting in Open Stage Control.

For further assistance, consider referring to community resources or forums for additional examples and guidance. 

[Attachment: Logic control hardware manual.pdf]

[Attachment: pcn0qD5YujwBqu861FyZos3shkn.json]

# Endless Encoder Configuration in Open Stage Control

## Problem Description
Users may want to configure a knob in Open Stage Control to function as an endless encoder, allowing it to increment indefinitely with each full rotation. Additionally, some users may wish to implement a reset button to return the knob to its default value.

## Solution
To create an endless encoder effect with a knob:

1. Set the **angle** property of the knob to a value above 360 (e.g., `angle: 3600`).
2. Define the **range** property as follows:
   ```json
   range: {min: 0, max: 10}
   ```

To add a reset button that returns the knob to its default value:

1. Create a button with the following properties:
   - Set **mode** to `tap`.
   - Use the **script** property to execute the following command:
   ```javascript
   set("knob_id", 0)
   ```
   Replace `knob_id` with the actual ID of your knob.

For further details on scripting, refer to the [Scripting - Open Stage Control](openstagecontrol.ammd.net) documentation.

# Fader Meter Color Change Based on Value

## Problem Description
Users want to change the color of a fader meter based on its value, with specific ranges assigned to different colors. For example:
- 0 to 0.9: Green
- 0.9 to 0.95: Yellow
- 0.95 to 1: Red

However, users have encountered issues where the meter does not change color as expected, often defaulting to a single color regardless of the input value.

## Solution
To achieve the desired color change for the fader meter based on its input value, follow these steps:

1. **Custom Fader and Meter**: Built-in meters are not easily customizable. It is recommended to create a custom fader and meter strip instead of using the built-in options.

2. **JavaScript for Color Change**: Use the following JavaScript code to set the color property based on the value received:
   ```javascript
   var val = @{this}

   if (val < 0.9) {
     return "lime"; // brighter than "green"
   } else if (val < 0.95) {
     return "yellow";
   } else {
     return "red";
   }
   ```

3. **Ensure Unique Properties**: When creating multiple strips, ensure that all properties that need to be unique (such as `id` and `address`) are correctly set. Use `@{parent.variables.n}` for unique identification.

4. **Debugging JavaScript**: If the color does not change as expected, check for errors in your JavaScript code. Open the developer tools (F12) to identify any syntax issues. For example, ensure that there are no missing semicolons or brackets.

5. **Example Reference**: For a better understanding of how to structure your layout, refer to the `ardour.json` example session, which demonstrates a similar setup with separate widgets for faders and meters.

By following these guidelines, you should be able to successfully implement a color-changing fader meter based on its input value.

[Attachment: redesign_v9.json]  
[Attachment: redesign_v10.json]  
[Attachment: 5q5rH1yV8VEVQWFehAioyh1gAs4.json]  
[Attachment: 5q5rH1yV8VEVQWFehAioyh1gAs4_1.json]  
[Attachment: ilSpT4SC2uXjnjwr7CRBaa8oYN9.json]  
[Attachment: yetJjWgkHZVZzRk92UGrvbeFf6C.json]

# OSC Receive IP & Port Configuration

## Problem Description
Users may have difficulty configuring the IP address and port for OSC (Open Sound Control) in Open Stage Control. Specifically, they may not know how to set these parameters in the server configuration for receiving feedback from external sources, such as VSTs.

## Solution
Open Stage Control listens on port **8080** by default. This is configured using the `osc-port` option, which is typically the same as the `port` option. The IP address corresponds to the computer running the server, which is displayed in the console upon server startup. If both the OSC server and the client are on the same machine, you can use the **localhost** address (127.0.0.1).

When receiving messages, ensure that the incoming OSC address matches the expected format. For example, if the incoming message is structured as follows:

```json
{
  "address": "/source/1/xyz",
  "args": [6.849312782287598, -36.986305236816406, -1.369863748550415]
}
```

You can unpack the values using either a custom module or a script widget with the following commands:

```javascript
set("xy_1", [value[0], value[1]]);
set("fader_z", value[2]);
```

If you encounter issues with the spring property of an XY pad, ensure that the pad contains `VAR{spring}` for the command `setVar("xy_1", "spring", true)` to work correctly. To toggle the spring property based on a button press, use the following conditional logic:

```javascript
if (value == 1) {
    setVar("xy_1", "spring", true);
} else {
    setVar("xy_1", "spring", false);
}
```

Note that `value` should be used for comparisons instead of `this`. 

For further configuration details, refer to the attached documentation or resources. 

[Attachment: filename.ext]

# Sending MIDI CC Messages at Regular Intervals

**Problem Description:**
The user wants to send MIDI Control Change (CC) messages every 0.1 seconds to overwrite previously recorded CC values for articulation switches in their DAW (Cubase). Attempts to use a "while" loop resulted in network issues, prompting a need for a more efficient solution.

**Solution:**
Instead of using a "while" loop, which can cause performance issues, consider the following approaches:

1. **Use `setTimeout`:** 
   To send messages at regular intervals without blocking the main thread, utilize `setTimeout`. Here is a basic example:

   ```javascript
   function sendCCMessage() {
       // Your code to send the CC message
       // Example: sendMIDI(ccValue);
       setTimeout(sendCCMessage, 100); // 100 ms = 0.1 seconds
   }
   sendCCMessage(); // Start sending messages
   ```

2. **Project Logical Editor (PLE) in Cubase:**
   If you want to clear the CC lane from the cursor position, you can create a command in the Project Logical Editor (PLE). This allows you to send a CC message once and manage the CC lane effectively.

3. **Expression Maps:**
   While expression maps are useful for managing articulations, they may not work seamlessly with OSC for switching articulations. Consider using them in conjunction with other methods for optimal results.

These methods should help you manage your MIDI messages more efficiently without overwhelming your network or system resources.

# Multiplies Fader Value

**Problem Description:**
A user is attempting to create a note selection using two faders: one for note selection (0 to 11) and another for octave selection (0 to 9). The goal is to multiply the values of these faders to send a MIDI value between 0 and 127. Initial attempts to formulate the expression were incorrect.

**Solution:**
To achieve the desired MIDI value, use the following formula in a JavaScript block or the value property of an input widget:

```javascript
JS{{
var val = @{fader_note} + @{fader_octave} * 12
return Math.min(127, Math.max(0, val))
}}
```

This script calculates the value based on the fader inputs and ensures that the output is constrained between 0 and 127. 

**Additional Note:**
Indicator widgets cannot send values for MIDI communication. Instead, use an input widget to send the calculated value. 

[Attachment: v9GKv9vqDErv9Nsp83K9nP4ZMku.json]

# Implementing Different Press States on a Switch

## Problem Description
Users may want to implement different actions for various press states on a switch in Open Stage Control, such as long press, release, and double tap. There is a need for a solution that allows for touch state detection on switches.

## Solution
While direct touch state events on switches are not supported, a workaround can be achieved using JavaScript. Below is a sample script that handles different press states:

```javascript
JS{
  const p = {}
  const buttonsNum = 4
  const colors = Array(buttonsNum).fill("auto")
  const colorOn = "Yellow"
  colors[@{btnIdx}] = colorOn
  p.colorWidget = colors[$]
  p.label = OSC{/switch_drums}[$]
  p.mode = "push"
  p.onValue = `
    set("btnIdx", getIndex())
    if(value){
      set('tap_counter', get('tap_counter') + 1)
      console.log(get('tap_counter'))
      if(get('tap_counter') == 2){
        console.log("double tap")
      }
      setTimeout(function(){
        set('tap_counter', 0)
        setTimeout(function(){
          var newVal = get('drum_select_matrix/' + getIndex())
          if(newVal){
            console.log("long press")
          }
        }, 500)
      }, 500)
    }
  `
  return p
}
```

### Notes:
- The `buttonsNum` variable is set to 4 for the example but can be replaced with `@{this.quantity}` to dynamically match the number of buttons.
- Ensure to handle the OSC address correctly when setting labels, as shown in the script.

This approach allows for the detection of double taps and long presses on switches, providing the desired functionality.

[Attachment: xXYLuena2IyglydBDxrGsCmxKGt.json]

# Switch Widget: Hide Labels

**Problem Description:**
Users may want to hide labels on the switch widget in Open Stage Control for a cleaner interface.

**Solution:**
To hide labels on the switch widget, you can use one of the following methods:

1. Add the following CSS rule:
   ```css
   font-size: 0;
   ```

2. Alternatively, set the properties `colorText` and `colorTextOn` to `transparent`. 

These methods effectively hide the labels while maintaining the functionality of the switch widget.

# Controlling Reaper's Virtual MIDI Keyboard with Open Stage Control

## Problem Description
Users are experiencing issues when trying to control Reaper's virtual MIDI keyboard using Open Stage Control. The keyboard widget is set up to send MIDI messages, but recorded events in Reaper show incorrect pitch values and velocities.

## Solution
To properly configure the keyboard widget to send correct MIDI messages to Reaper, follow these steps:

1. **Create a Keyboard Widget**: Add a keyboard widget to your Open Stage Control interface.

2. **Set `typeTags`**: Set the `typeTags` field to `i` (integer) or `f` (float).

3. **Enable Bypass**: Set the `bypass` property to `true` to prevent default messages from being sent.

4. **Use the `onValue` Script**: Add the following script to the `onValue` field of the keyboard widget:

   ```javascript
   var ch = 0,
       note = id.split('/').pop(), // get note from key button's id
       vel = get(id) ? 100 : 0, // convert single key value (0 or 1) to velocity
       address = `/vkb_midi/${ch}/note/` + note;

   send(address, vel); // assumes target is set
   ```

5. **Note Off Messages**: To ensure that note off messages are sent when keys are released, modify the `onValue` script as follows:

   ```javascript
   var ch = 0,
       note = id.split('/').pop(), // get note from key button's id
       vel = get(this).reduce((total, item) => total + item, 0) ? 100 : 0,
       address = `/vkb_midi/${ch}/note/` + note;

   send(address, vel); // assumes target is set
   ```

This setup ensures that MIDI messages are correctly formatted and sent to Reaper, allowing for proper note and velocity handling. Note that the "@" in the address does not affect the message in Open Stage Control and is sent as is.

[Attachment: filename.ext] (attachment reference missing)

# Child Widgets of Cloned Panels Invisible if Original Parent is Invisible

## Problem Description
When a panel is created and populated with widgets, cloning this panel results in the child widgets also being cloned. However, if the original panel is hidden, the child widgets in the cloned panel become invisible.

## Solution
To resolve this issue, you can override the `visible` property of the cloned widget to ensure it remains visible even when the original panel is hidden. 

For future enhancements, it is suggested that a 'make children unique' option be added to cloned widgets. This would allow for the same set of parameters to be used without matching values, simplifying the process of managing clones.

For further clarification or to provide feedback on this feature, consider uploading a minimal session file to illustrate the issue. 

[Attachment: filename.ext] (attachment reference missing)

# Issue with Sending Messages from Script Widget in Open Stage Control v1.10.3

**Problem Description:**
The `scripting` property in the `script` widget is not sending messages as expected. While the console log command executes successfully, the send command does not produce any output or error.

```javascript
console.log("hi, people!"); // prints the message successfully
send('midi:SessionKiano', '/note', 1, 75, 1); // fails to send any message out
```

**Solution:**
The inability to send messages is due to the requirement that the event triggering the script's execution must be initiated by user interaction. If the script is executed without such an interaction, the send function will have no effect. Ensure that the script is triggered by a user action to successfully send messages.

[Attachment: filename.ext]

# Filter Incoming OSC to a Specific Origin IP

To restrict the updating of a widget via OSC to a specific IP address, you need to implement a custom solution. By default, widgets cannot differentiate identical OSC messages from different origins.

## Solution

1. **Use a Custom Module**: Implement the `oscInFilter` function within a custom module. This will allow you to filter incoming OSC messages based on their origin IP address.
   
2. **Alter Messages**: Modify the OSC messages by changing either the address or the arguments. This way, you can route them to different widgets based on their source.

This approach will enable you to display values from different computers separately, even if the OSC messages have identical addresses. 

For further details, refer to the discussion on creating a widget that reacts only to a specific UDP OSC input port. 

[Attachment: filename.ext]

# ERROR MIDI Invalid Address

The issue arises when untriggered buttons in a matrix generate the error message: `(ERROR, MIDI) invalid address (/matrix_insp/button_index)`. This occurs because the widget sends a default OSC message regardless of the custom `onValue` script.

## Solution

To resolve this issue, add the following line to your matrix properties:

```javascript
props.bypass = true;
```

This will prevent the default OSC message from being sent, eliminating the error.

# Centering a Grid Element in Open Stage Control

**Problem Description**  
A user is trying to center a circular LED element within a grid layout container in Open Stage Control but is unsure how to target the correct element in the CSS.

**Solution**  
To center the LED element within its container, you can use the following CSS code:

```css
:host {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

inner {
  max-height: 30px;
  width: 30px;
  border-radius: 50%;
  background-color: red;
}
```

This code sets the container to use flexbox, aligning items both vertically and horizontally in the center. The `inner` class styles the LED element to be round and red, ensuring it is displayed correctly within the grid. 

[Attachment: led-center.json]  
[Attachment: gB6VlZyfdxv8cOaVZasqRh4DSL5.json]  
(attachment reference missing)

# Empty Launcher on Linux/RPI5/Node.js

## Problem Description
When attempting to run Open Stage Control (O-S-C) on a Raspberry Pi 5 using Node.js, the launcher appears empty after opening `index.htm`, and clicking the run button does not initiate any process.

## Solution
To run Open Stage Control with Node.js, do not use the launcher interface. Instead, execute the application directly from the command line. Follow these steps:

1. **Run Open Stage Control with Node.js:**
   - Open a terminal and navigate to the O-S-C directory.
   - Use the command:
     ```bash
     node path/to/open-stage-control-node
     ```
   - Replace `path/to/open-stage-control-node` with the actual path to the O-S-C Node.js file.

2. **Folder Renaming:**
   - You can rename the O-S-C folder to avoid typing the version number, as long as the internal folder structure remains intact.

3. **Recommended App Placement:**
   - Place applications in `~/.local/lib/`.
   - Create a launcher in `~/.local/bin/` for easy access:
     ```bash
     # Create executable file
     echo -e "#!/bin/node\nrequire('~/.local/lib/open-stage-control-node')" > ~/.local/bin/open-stage-control
     # Make it executable
     chmod +x ~/.local/bin/open-stage-control
     ```
   - This allows you to run Open Stage Control from anywhere in the terminal using the command `open-stage-control`.

4. **Node Version Features:**
   - The Node version includes an editor but lacks a built-in client and MIDI support. You must access the client interface via a compatible browser using the URL provided in the console when the server starts.

5. **Fullscreen Mode:**
   - To achieve a fullscreen experience in a browser, use the F11 key or the `--kiosk` mode in Chromium (if available).

For further details on MIDI configuration, refer to the documentation on [MIDI configuration - Open Stage Control](https://example.com). 

[Attachment: caption]

# Accessing Key from Menu Widget Value in Open Stage Control

## Problem Description
In a menu widget, there is a need to access the key associated with a specific value. For example, given a menu entry like `"C":0`, the goal is to retrieve the key `"C"` when the value `0` is accessed using `get(this)`.

## Solution
To retrieve the key from the menu widget's values based on the current value, you can use the following JavaScript code:

```javascript
var values = getProp(this, 'values'),
    val = value,
    key; // not assigned -> implicit "= undefined"

// Loop over keys in values
for (var k in values) {
  // If the value associated with that key matches the current value
  if (values[k] === val) {
     // Store the key and exit loop
     key = k;
     break;
  }
}
```

This code snippet iterates through the keys in the `values` object, checks if the value matches the current value, and retrieves the corresponding key.

# Controlling Ardour

## Problem Description
Users may want to implement custom volume control scenarios in Ardour, such as muting and unmuting channels based on specific actions. This includes the need for a single button to toggle between muting an effects channel and adjusting a vocal channel's volume.

## Solution
To achieve the desired functionality in Ardour using Open Stage Control, follow these steps:

1. **Create a Container for Custom Buttons**: Add a container in the `main_panel` to hold your custom buttons.

2. **Use a Toggle Button Widget**: Implement a button widget in toggle mode. Use the `onValue` script to send messages that control the mute states of the channels. Here is an example script:

   ```javascript
   if (value === 1) { // assuming on property is set to 1
     send('/strip/mute', 1, 1) // mute strip 1
     send('/strip/mute', 2, 0) // unmute strip 2
   } else {
     send('/strip/mute', 1, 0) // unmute strip 1
     send('/strip/mute', 2, 1) // mute strip 2
   }
   ```

   Ensure that the vocal and speech channels are in the current strip bank (positions 1 and 2).

3. **Alternative Method - Mixer Scenes**: If you are managing a large number of tracks, consider creating two mixer scenes in Ardour's mixer panel. You can recall these scenes based on the button state:

   ```javascript
   if (value === 1) {
     send('/access_action', 'Mixer/recall-mixer-scene-1')
   } else {
     send('/access_action', 'Mixer/recall-mixer-scene-2')
   }
   ```

### Additional Resources
- [The Ardour Manual - Controlling Ardour with OSC](https://ardour.org/manual/)
- [The Ardour Manual - List of Menu Actions](https://ardour.org/manual/)
- [Scripting - Open Stage Control](https://openstagecontrol.ammd.net/) 

This setup allows for flexible control of audio channels in Ardour based on user-defined actions.

# Disabling Prepend Args Requirement for OSC Input

## Problem Description
When using Open Stage Control, there is a need to send data with different prepend arguments for OSC output while avoiding the requirement for the same prepend arguments on OSC input. This situation arises when multiple devices receive the same data set but require different prepend arguments for outgoing messages.

## Solution
To achieve the desired functionality, you can use the following methods:

1. **Script Property**: Utilize the script property to send OSC messages and leave the `preArgs` property empty. This allows you to bypass the prepend argument requirement for input.

2. **OSC Listener**: Implement an OSC listener in the value property with the following syntax:
   ```
   OSC{@{this.address}, DEFAULT_VALUE, false}
   ```
   The third argument (`false`) allows you to ignore the widget's `preArgs`.

These methods will enable you to send OSC messages without the need for matching prepend arguments on input.

### Note
If you require further clarification or examples, consider sharing a session file for better understanding. 

[Attachment: gHfyRikyQd5eTtebKHy9Xcd06VB.json]  
[Attachment: gCKLb13mvoPJDwexOT5VjiJQCib.js]

# Make Push Button Update Value in Multiple Switches

**Problem:**  
The user wants to know if it is possible to push a button and have the values of multiple switches updated simultaneously.

**Solution:**  
You can achieve this by using the script property in Open Stage Control. Here is an example of how to set the values of multiple switches when the button is pressed:

```javascript
set("switch_1", 1)
set("switch_2", 2)
```

For more details, refer to the [Open Stage Control scripting documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/).  
**Note:** This solution is confirmed to work in version 1.0 only.

# Dynamic Track Names and Volume Control in Open Stage Control with REAPER

## Problem Description
Users may encounter difficulties displaying the selected track name and controlling the volume fader in Open Stage Control when integrated with REAPER. Specifically, there are challenges in using the correct OSC commands and patterns to achieve these functionalities.

## Solution
To display the track name and control the volume fader in Open Stage Control, ensure the following configurations:

1. **Track Name Display**:
   - Use the following OSC command to display the track name:
     ```
     TRACK_NAME s/1/trackname@ ---> /1/trackname1
     ```

2. **Volume Control**:
   - Use this command for controlling the volume fader:
     ```
     TRACK_VOLUME n/1/volume@ ---> /1/volume1
     ```

3. **Correct Patterns**:
   - Ensure you are using the correct address patterns. The following should work:
     - For track name: 
       ```
       /track/select
       ```
     - For the label, use:
       ```
       OSC{/track/name, ---}
       ```

4. **Template Reference**:
   - It may be beneficial to refer to the "ReaperControl OSC-Template" for additional guidance, especially if you are using the default pattern configuration.

By implementing these configurations, you should be able to successfully display the track name and control the volume from Open Stage Control. 

[Attachment: filename.ext]

# Get Timestamp from OSC Bundle in Custom Module

**Problem Description**  
In SuperCollider, OSC bundles can be sent with a timestamp. However, unpacking this timestamp in a custom module within Open Stage Control is currently not supported. Additionally, there is a need to synchronize events across multiple clients based on the received future timestamp, particularly for applications like a visual metronome.

**Solution**  
While direct unpacking of the OSC bundle timestamp is not possible, you can implement a custom module to achieve latency compensation for synchronized message reception across clients. Below is a sample implementation:

```javascript
// Latency compensation for OSC clients
// Use receiveSync() instead of receive()
// to send synchronized messages to all clients

// Keep track of connected clients
// Use global object to maintain the list
global.clients = global.clients || {}
var clients = global.clients

app.on('open', (data, client) => {
    if (!clients[client.id]) clients[client.id] = {
        latencies: [],
        latency: 0,
    }
})

app.on('close', (data, client) => {
    delete clients[client.id]
})

function pingClients() {
    // Ping clients and make them include their id and ping date in the reply
    var date = Date.now()
    for (let id in clients) {
        receive('/SCRIPT', `send('custom-module:null', '/pong', "${id}", ${date})`)
    }
}

function handleClientPong(id, date) {
    // Client's ping response to measure their latency
    if (clients[id]) {
        // Accumulate latency measures
        // Keep 5 latest values
        if (clients[id].latencies.unshift((Date.now() - date) / 2) > 5) clients[id].latencies.pop()

        if (clients[id].latencies.length < 2)
            clients[id].latency = clients[id].latencies[0]
        else
            clients[id].latency = filterLatencies(clients[id].latencies)
    }
}

function filterLatencies(arr) {
    // Compute median
    var sorted = arr.slice().sort((a, b) => a - b)
    var median
    if (sorted.length % 2 === 0)
        // Even
        median = (sorted[arr.length / 2 - 1] + sorted[arr.length / 2]) / 2
    else
        // Odd
        median = sorted[(arr.length - 1) / 2]

    // Compute variance (average of the squared differences from the mean)
    // Implementation continues...
}
```

This approach involves pinging clients to estimate their latency and adjusting message delays based on the worst client latency. Note that this is a preliminary solution and may require further refinement to handle connectivity issues and device lags effectively. 

For more details, see the attached file [Attachment: filename.ext].

[Attachment: stat.js]

# Visualize a Timer Countdown in a Text Widget

## Problem Description
Users are attempting to visualize a countdown timer from the OnTime Timer application within a text widget in Open Stage Control. Although OSC commands can be sent and received, the text widget does not display any feedback from the timer.

## Solution
To display the timer count in a text widget, you can implement a custom module to process the OSC messages received from OnTime Timer. The following code snippet can be used to extract the timestamp from the OSC address and send it to the desired widget:

```javascript
module.exports = {
    oscInFilter: (data) => {
        if (data.address.startsWith('/ontime/update/')) {
            // Extract data after the third slash
            var timestamp = data.address.split('/')[3];

            // Convert it to a number
            timestamp = parseInt(timestamp);

            // Transmit it to a widget
            receive('/widget/address', timestamp);
            
            // Empty return = bypass original message 
            return;
        }
        
        return data;
    }
}
```

Make sure to replace `'/widget/address'` with the actual address of the text widget you want to update. This approach allows you to receive the timestamp from the OSC message and display it accordingly in the text widget. 

For further assistance, consider reviewing the OnTime Timer documentation to understand the OSC message structure better. 

[Attachment: filename.ext] (attachment reference missing)

# Make a Widget Listen to Multiple Addresses

**Problem Description:**
It is not possible for a single widget in Open Stage Control to listen to multiple addresses simultaneously, such as `/channel_pressure` and `/program`.

**Solution:**
You can achieve the desired functionality by creating two script widgets that listen to the different addresses and pass the values to a single widget using scripting. Here’s a sample function that demonstrates this approach:

```javascript
function mcuToOsc(host, port, address, args) {
    if (host !== 'midi' || port !== MIDI_DEVICE_NAME) return;

    const inArgs = args.map(x => x.value);
    const [channel, value] = inArgs;
    const normalizedValue = value / 127;

    if (address === '/channel_pressure') {
        if (channel >= 1 && channel <= 8) {
            receive('osc', 'localhost', '/vu_meter', channel, normalizedValue);
        } else if (channel >= 9 && channel <= 16) {
            receive('osc', 'localhost', '/dyn_meter', channel - 8, 1 - normalizedValue);
        }
    }

    if (address === '/program') {
        if (channel >= 1 && channel <= 8) {
            receive('osc', 'localhost', '/vu_meter', channel + 8, 1 - normalizedValue);
        } else if (channel >= 9 && channel <= 16) {
            receive('osc', 'localhost', '/dyn_meter', channel, 1 - normalizedValue);
        }
    }
}
```

To debug the custom module, you can add `console.log()` statements to identify where the code may not be functioning as expected. Additionally, you can skip the first two arguments of the `receive()` function for simplicity. 

This method allows you to use one widget address set to `/dyn_meter` and another set to `/vu_meter`.

# Keyboard Response Issue in Open Stage Control

## Problem Description
When using the keyboard feature in Open Stage Control (OSC) connected to VCV Rack, two messages are sent for each key press:
1. A message indicating the key is pressed.
2. A message indicating the key is released.

This results in VCV Rack receiving two triggers for a single key press, causing unintended behavior.

## Solution
In the next release of Open Stage Control, the `toggles` property for keyboards will be replaced with a `mode` property. This new property will function similarly to the button's `mode` property, allowing users to bypass the release message by setting it to "tap". This change will help prevent the double trigger issue.

For immediate workarounds, consider managing the triggers directly within VCV Rack, although this may not be the most elegant solution. 

[Attachment: filename.ext]

# Dynamically Updating Text Widget in Open Stage Control

## Problem Description
Users may want to dynamically update a text widget in Open Stage Control to display track names from Ableton Live using OSC. While the text widget updates when a track is renamed, it does not automatically refresh when a project is loaded. Users seek methods to update the widget at set intervals or through a button press.

## Solution
To periodically update a text widget, you can use the following script in the `onCreate` property of a widget:

```javascript
setInterval(function(){
  send('127.0.0.1:5555', '/address')
}, 1000); // every 1 second
```

If the periodic update causes the widget text to flash, consider creating a button that sends the request on demand. 

To use a switch value in the send function for a mixer setup, you can implement the following script in the button's `onValue` property:

```javascript
var val = get('this');
send('127.0.0.1:9001', '/live/track/name', val + 0);
send('127.0.0.1:9001', '/live/track/name', val + 1);
send('127.0.0.1:9001', '/live/track/name', val + 2);
send('127.0.0.1:9001', '/live/track/name', val + 3);
send('127.0.0.1:9001', '/live/track/name', val + 4);
send('127.0.0.1:9001', '/live/track/name', val + 5);
send('127.0.0.1:9001', '/live/track/mute', val + 0);
send('127.0.0.1:9001', '/live/track/mute', val + 1);
send('127.0.0.1:9001', '/live/track/mute', val + 2);
send('127.0.0.1:9001', '/live/track/mute', val + 3);
send('127.0.0.1:9001', '/live/track/mute', val + 4);
send('127.0.0.1:9001', '/live/track/mute', val + 5);
```

For a more efficient approach, you can use a loop:

```javascript
var val = get('this'),
    target = '127.0.0.1:9001';

for (var i = 0; i < 6; i++) {
  send(target, '/live/track/name', val + i);
  send(target, '/live/track/mute', val + i);
}
```

This will streamline the process of sending OSC messages for multiple tracks.

# Ramp Increment Depending on Incoming Value

## Problem Description
The user is attempting to implement a ramping mechanism for a joystick input using a switch statement in a script widget. They encounter a syntax error due to mixing up `if/else` and `switch` syntaxes. The goal is to adjust the increments for an x-axis value based on the joystick's incoming value, but the current implementation is not functioning as expected.

## Solution
To resolve the syntax error and achieve the desired functionality, follow these guidelines:

1. **Correct Syntax Usage**: Ensure that you are using the correct syntax for `switch` statements. The `case` statements should not contain conditions directly. Instead, use `if` statements within each case if conditional logic is required.

2. **Using `set()` and `get()`**: When manipulating arrays or widget properties, retrieve the current value, modify it, and then set it back. For example:
   ```javascript
   var v = get("xy_1");
   v[0] += increment; // Increment the x value
   set("xy_1", v);
   ```

3. **Implementing Ramping Logic**: Use an `if` statement to manage the ramping logic within a `setInterval`. Here’s an example:
   ```javascript
   var v = get("xy_1"),
       increment_1 = 0.001,
       increment_5 = 0.009,
       timeBetweenIncrements = 2; // ms

   if (value) {
       setInterval(() => {
           if (value < 0.2) {
               v[0] += increment_5;
           } else if (value >= 0.2 && value < 0.45) {
               v[0] += increment_1;
           } else if (value > 0.55 && value < 0.8) {
               v[0] -= increment_1;
           } else if (value >= 0.8) {
               v[0] -= increment_5;
           }
           set("xy_1", v); // Update the widget with the new value
       }, timeBetweenIncrements);
   }
   ```

4. **Managing Intervals**: Remember to call `clearInterval()` when you no longer need the interval to prevent it from running indefinitely.

By following these steps, you should be able to successfully implement the ramping functionality for your joystick input.

# Sending OSC Messages in Open Stage Control

## Problem Description
The `send` function does not work in the `onValue` property because it is not triggered by a user interaction with the OSC interface. This limitation means that if the event triggering the script is not initiated by a user, the `send` function will have no effect.

## Solution
To successfully use the `send` function, ensure that it is called in response to a user interaction. The function's syntax is as follows:

```javascript
send(target, address, ...args)
```

- **target** (optional): A string in the format `"ip:port"` or `"midi:device_name"`. If omitted, the widget's target will be used.
- **address**: The OSC address, which must start with a `/`.
- **args**: This can be a value or an object in the format `{type: "OSC_TYPE_LETTER", value: VALUE}`.

### Examples
Here are examples of how to use the `send` function:

```javascript
send('127.0.0.1:4444', '/address', {type: 'i', value: 1}); // Sends 1 as an integer
send('127.0.0.1:4444', '/address', {type: 'f', value: 1}); // Sends 1 as a float
```

### Additional Notes
- The `...args` notation refers to the JavaScript spread syntax, allowing multiple arguments to be passed to the function. It can be interpreted as `send(target, address, arg1, arg2, arg3, etc)`.
- For OSC users, it is important to understand this syntax, as it may not be immediately obvious.

For further details on scripting in Open Stage Control, refer to the official documentation: [Scripting - Open Stage Control](https://openstagecontrol.ammd.net).

[Attachment: image1.png]
[Attachment: image2.png]

# Custom Widgets in Open Stage Control

## Problem Description
Users are interested in the ability to create and register custom widgets in Open Stage Control, specifically for extending the Widget class and drawing custom Canvas or Pad widgets.

## Solution
Open Stage Control will introduce a feature in an upcoming release that allows for the creation of custom widgets through a mechanism called "fragments." This feature enables users to export a widget as a separate file, which can then be loaded by a new widget type called "fragment." The fragment can override properties as needed, similar to the clone widget but replicating a fragment file instead.

For practical implementation, users can create a component consisting of multiple widgets within a container. Refer to the `clones_and_variables` example for guidance on this pattern, as it demonstrates how to structure components using external files for widgets.

[Attachment: clones_and_variables.example]

# Menu Behavior Configuration in Open Stage Control

## Problem Description
Users have questions regarding the behavior of menu widgets in Open Stage Control, specifically about displaying default text, syncing button actions with menu selections, and changing colors based on selections.

## Solution
1. **Default Item/Text on Load**:
   To display a default item or text in the menu widget when loading the template, use the `default` property of the menu widget.

2. **Syncing Button Actions with Menu Selections**:
   To ensure that a button press updates the menu widget, utilize the button's `script` property with the following code:
   ```javascript
   set("menu_id", value);
   ```
   Replace `menu_id` with the actual ID of your menu and `value` with the desired value.

3. **Changing Widget Color Based on Menu Selection**:
   You can change the widget's color based on the selected menu item using the following script in the color properties:
   ```javascript
   JS{{
   var val = @{this};
   if (val == 1) return "blue";
   else if (val == 2) return "red";
   // Add more conditions as needed
   }}
   ```

4. **Setting Background Color**:
   If you want to change the background color based on the selected menu item, ensure that the script is valid CSS. You can use the following example:
   ```css
   :host {
     background: JS{{return @{this} == 1 ? "red" : "blue"}};
   }
   ```

5. **Multiple Variables for Color Changes**:
   To handle multiple colors, you can declare local variables in a script block and use them in the CSS:
   ```javascript
   JS{{
   if (@{this} == 1) locals.color = "red";
   if (@{this} == 2) locals.color = "blue";
   // Add more conditions as needed
   }}
   :host {
     background: #{locals.color};
   }
   ```

By following these guidelines, you can effectively manage the behavior and appearance of menu widgets in Open Stage Control. 

References:
- Advanced syntaxes - Open Stage Control
- Scripting - Open Stage Control

# Programmatically Drawing into Canvas in Open Stage Control

## Problem Description
Users have encountered issues when programmatically drawing on a canvas in Open Stage Control. Specifically, the `ctx.moveTo()` function may not execute consistently, particularly when drawing messages are sent via OSC. This inconsistency may arise from new messages overriding old values before they can be processed in the `onDraw` script. Additionally, there are concerns about the drawing queue growing indefinitely, consuming memory, as all drawing functions stored in the queue are redrawn at every frame.

## Solution
To address these issues, follow these steps:

1. **Queue Drawing Instructions**: Use a simple array stored in `locals` to queue drawing instructions. This allows for asynchronous execution of drawing commands without immediate overwriting.

   Example:
   ```javascript
   locals.queue.push([value[0], value[1], value[2]]);
   ```

2. **Clear the Queue**: Ensure that the queue is cleared at the end of the `onDraw` script. Log the length of the queue after clearing to verify it is functioning as expected.

   Example:
   ```javascript
   locals.queue = [];
   ```

3. **Use `ctx.beginPath()`**: Call `ctx.beginPath()` for each pair of coordinates in the queue to prevent repeated drawing instructions. This is particularly important when using transparent colors.

   Example:
   ```javascript
   for (let i = 0; i < locals.queue.length; i += 2) {
       ctx.beginPath();
       ctx.moveTo(locals.queue[i][1], locals.queue[i][2]);
       ctx.lineTo(locals.queue[i + 1][1], locals.queue[i + 1][2]);
       ctx.stroke();
   }
   ```

By implementing these strategies, users can effectively manage drawing instructions and prevent memory issues related to an ever-growing queue.

[Attachment: DrawingCanvas.json]  
[Attachment: b4SMkugydeEeuGIAPwv6x6ftGZe.json]  
[Attachment: DrawingCanvas(queue-issue).json]  
[Attachment: nCcqSpHVHtjMmnpYTqu9iL1KxgO.json]

[Attachment: ytpLWgNn2OUrFeoHB2lwZUyg9OP.json]

# Scripting - Getting Results from the send() Function

**Problem Description:**
The `send()` function in Open Stage Control does not return values when querying information from an external source, such as Ableton via OSC. This raises questions about how to retrieve the state of a metronome using the OSC protocol.

**Solution:**
The `send()` function does not return a value because the OSC protocol operates asynchronously, meaning there is no synchronous reply. When `send()` is called, Open Stage Control cannot detect any reply message.

To work around this limitation, follow these steps:

1. **Use the Correct OSC Port:**
   Ensure that you are using the correct OSC port for sending messages. For AbletonOSC, the default port is 11001.

2. **Update Widget Value:**
   The results of the `send()` function are automatically added to the widget's value. To keep the widget updated with the state of the metronome, you can set an interval to periodically send a query:
   ```javascript
   setInterval(() => {
     send('localhost:11001', '/live/song/get/metronome');
   }, 1000);
   ```

3. **Set Initial Widget Value:**
   To ensure the widget reflects the correct state initially, you may need to set the widget's value to include another OSC query, such as:
   ```
   OSC{/live/song/get/tempo}
   ```

By implementing these steps, you can effectively manage the state of the metronome in your Open Stage Control setup.

[Attachment: image]  
[Attachment: image]  
[Attachment: image]

# Change Tabs with Switch Widget Instead of Buttons

**Problem:**
The user wants to change tabs within a container using a switch widget instead of buttons. They attempted to implement this using a script widget but did not achieve the desired results.

**Solution:**
To achieve tab switching with a switch widget, utilize the `onValue` property of the switch directly. Here’s an example script:

```javascript
if (value === 0) {
  set('panel_main', 0);
} else if (value === 1) {
  set('panel_main', 1);
}
```

This script checks the value of the switch and sets the corresponding tab in the `panel_main`.

# Optimize Visualizer Widget Refresh Rate Performance

**Problem Description:**
The visualizer widget in Open Stage Control is CPU-intensive, causing performance issues on devices like the Galaxy Tab S2 when multiple visualizers are updating simultaneously. Disabling transparency and experimenting with browser flags did not yield significant improvements. The performance is better on Firefox, but custom CSS for colors is not supported.

**Solution:**
1. **Reduce Canvas Update Framerate:**
   Append `?framerate=30` to the app's URL to lower the canvas update rate, which can help improve performance.

2. **Enable GPU Rendering:**
   In Chrome, enable the "Override software rendering list" option in `chrome://flags` to potentially improve performance on devices with blacklisted GPUs.

3. **Limit OSC Messages:**
   Reducing the number of OSC messages received to around 60 per second can maintain visual fidelity while improving performance.

4. **Canvas Rendering in Hidden Tabs:**
   Currently, canvases in hidden tabs are not drawn, but data processing continues. Future updates may improve this behavior.

5. **CSS Optimization:**
   While attempts to remove transparency using CSS may not significantly impact performance, the next version of Open Stage Control will allow for better control over canvas rendering.

These strategies should help optimize the performance of the visualizer widget on devices with limited resources. 

[Attachment: filename.ext]

# Unable to Make setScroll Work

The issue arises when attempting to change a panel's scroll position using a script. Although the position values appear to be updated, the widget itself does not reflect these changes.

## Solution

To resolve this issue, ensure that the `setScroll` function is being called correctly with normalized values between 0 and 1. Here’s a refined example of how to implement the scroll functionality:

1. **Script Example**:
   Modify the button's `onValue` script as follows:

   ```javascript
   set('scrollvar', get('scrollvar') + 100);
   if (get('scrollvar') > 290) {
       set('scrollvar', 0);
   }
   setScroll("panel_1", 0, get('scrollvar') / 290); // Normalize the value
   console.log(getScroll("panel_1"));
   ```

2. **Normalization**:
   Ensure that the third parameter of `setScroll` is normalized between 0 and 1. In this case, if the maximum scroll value is 290, divide `scrollvar` by 290.

By following this approach, the scroll position should update correctly in the panel. 

(attachment reference missing)

# Dropdown Label %key Not Displaying When OSC Sync'd

When using a dropdown in Open Stage Control that sends values to a widget in Gig Performer (GP), the dropdown label (%key) may not display correctly when receiving OSC data from GP. This issue occurs because the dropdown clears its label upon receiving OSC feedback from GP, making it difficult to see the current selection.

## Solution

1. **Use Scripting to Send OSC Messages**: Instead of relying on OSC parameters, implement a script to send OSC messages. This can be done in the `onValue` event:
   ```javascript
   send('/oscmessage ', ...)
   ```

2. **Filter Out Feedback Messages**: If you prefer to maintain the OSC connection, you can filter out feedback messages using a custom module. Here’s an example of how to do this:
   ```javascript
   module.exports = {
     oscInFilter: (data) => {
       if (data.address === '/dropdown_address') return;
       return data;
     }
   }
   ```

3. **Adjust OSC Message Sending**: As a workaround, modify the connection so that GP sends OSC messages only when changing patches, rather than continuously. This can prevent the dropdown from clearing its label.

By implementing these solutions, you should be able to maintain the dropdown label visibility while synchronizing with GP patches.

[Attachment: ecP4icm352WgT7eFFmQXhnSGckK.json]

# Make Everything Default to Lowercase

**Problem Description:**
Users may want to set all text in Open Stage Control to display in lowercase. However, the appropriate CSS `text-transform` property to achieve this is not immediately clear.

**Solution:**
To make all text lowercase, add the following CSS rule to the root's CSS:

```css
* {
  text-transform: lowercase;
}
```

This will affect all text except for the side panel. To apply lowercase styling to the side panel as well, you will need to create a theme file.

For per-widget customization, such as changing the title of the main tab to lowercase, use more specific CSS selectors. For example, to target only the first level of tabs, add this to the root's CSS:

```css
.panel > .navigation {
  text-transform: lowercase;
}
```

For further information on CSS syntax, refer to extensive online documentation. Specific tricks related to Open Stage Control can be found [here](attachment reference missing).

# Best Practices for Initialization in Open Stage Control

## Problem Description
When initializing an Open Stage Control (OSC) application, there are multiple methods to call before the app starts, such as setting up custom WebSockets, creating global variables, and reading files synchronously. The current implementation splits these calls between `app.on("open", ...)` and `init()`, leading to slow initialization times (approximately 9 seconds). This delay can cause errors like "Could not setup HTTP server, maybe try a different port?" and inconsistent startup behavior.

## Solution
To improve the initialization process and avoid long synchronous operations:

1. **Use Asynchronous Operations**: Instead of performing synchronous file reads and other blocking operations, switch to asynchronous methods. This allows the app to initialize properly without waiting for all operations to complete, thus preventing timeout errors.

2. **Initialization Flow**: Consider using the `init()` method for one-time setup tasks, but ensure that any lengthy operations are handled asynchronously. This will help maintain a responsive application startup.

3. **Error Logging**: It is advisable to enhance error logging for better debugging. You can modify the error handling in the HTTP server setup to include logging for any errors encountered. For example, add `httpCheck(false, error)` to the error handling function in `server.js` at line 188 to capture and log errors effectively.

By implementing these changes, you should see improved performance and reliability during the application startup process.

# Text Area with Horizontal Scroll Instead of Word Wrap

**Problem:**
The user wants to create text areas in Open Stage Control that allow for horizontal scrolling instead of word wrapping, enabling basic text editing while maintaining line breaks.

**Solution:**
To achieve horizontal scrolling in text areas, add the following CSS to the widget:

```css
textarea {
  white-space: pre;
}
```

Alternatively, to apply this style to all textarea widgets, include it in a theme file:

```css
.textarea-container textarea {
  white-space: pre;
}
```

This will ensure that text areas do not wrap text and allow for horizontal scrolling.

# Convert Input Widget to ASCII for MIDI Transmission

**Problem:**
An input widget in Open Stage Control is not sending ASCII codes over MIDI correctly when the input consists solely of digits. The issue arises because the input is interpreted as a number rather than a string.

**Solution:**
To ensure that the input is treated as a string, convert the input value to a string using the `String()` function. Update the code as follows:

```javascript
// Define Variable
var textInput = String(get("this", value));
console.log(textInput);

// Convert Text to ASCII Code
for (let i = 0; i < textInput.length; i++) {
  console.log(textInput.charCodeAt(i));
  send('midi:MAESTRO', '/control', 5, 1, textInput.charCodeAt(i));
}
```

This change allows the input to be processed correctly, regardless of whether it contains characters, digits, or a combination of both.

[Attachment: lDhvtDc9EaWwmi6KlsN88Keid1Z.json]

# How to Add Custom Images to Menu Items in Open Stage Control

To add custom images to menu options in Open Stage Control, you can use CSS to define your own icons.

## Problem Description
Users may want to add custom images (such as sawtooth, pulse, and triangle icons) to menu items but find it challenging to locate these icons in the available resources.

## Solution
1. **Set the Item's Label**: Use the following format to set the label for your menu item:
   ```
   ^sawtooth
   ```

2. **Add Custom CSS**: Include the following CSS in your widget's CSS or in the root's CSS if you plan to use it multiple times:
   ```css
   .fa-sawtooth {
       width: 20rem;
       height: 20rem;
       background: url(/* image icon path or base64-encoded image*/);
   }
   ```

3. **Image Preparation**:
   - Download the desired icon as an SVG file.
   - Convert the SVG to a 20px by 20px SVG using an online tool like [Vectr](https://vectr.com/).
   - Convert the SVG to a base64-encoded image using an online converter such as [Base64 Image](https://www.base64-image.de/).
   - Paste the base64 code into the CSS as shown above.

4. **Example Values**: If you want to use multiple icons in a menu, structure your values like this:
   ```json
   {
       "^sawtooth": 1,
       "^wave-square": 0.5,
       "^triangle": 0
   }
   ```

5. **Single Image Usage**: If you need a single resizable image, you can paste the entire base64 code directly into the image's 'value' field.

By following these steps, you can effectively add custom images to your menu items in Open Stage Control. 

For a practical example, you can refer to the attached template:
[Attachment: 9Jseu3OmerY8gpHxDI2wKlpdSjO.json]

# Making Text Selectable in a Text Widget

## Problem Description
Users may want to make the text within a text widget selectable for easier copying. Standard CSS methods have not yielded successful results, and there is a request for a potential future option in the inspector or a simpler JavaScript solution for copying text to the clipboard.

## Solution
To make the text in a text widget selectable, apply the following CSS:

```css
:host, inner {
  pointer-events: auto !important;
}
label {
  user-select: text;
}
```

This CSS will enable text selection within the text widget.

# Using a Custom Font in Open Stage Control

**Problem Description:**
Users may encounter issues when attempting to load custom fonts in Open Stage Control, particularly with fonts in TTF format. Common errors include a 404 status indicating the resource was not found or a message stating that loading local resources is not allowed.

**Solution:**
To successfully use a custom font in Open Stage Control, follow these steps:

1. **Update Open Stage Control**: Ensure you are using version 0.47.1 or later, as earlier versions may not support font extensions in the allowed file type whitelist.

2. **Define the Font in CSS**:
   In your `theme.css`, define the font using the `@font-face` rule. Ensure the path to the font file is correct:
   ```css
   @font-face {
     font-family: 'Avenir-Medium';
     font-style: normal;
     src: url('Avenir-Medium.ttf'); /* Use a relative path */
   }
   * {
     font-family: 'Avenir-Medium', sans-serif;
   }
   ```

3. **File Path Considerations**:
   - Use relative paths for the font file, relative to the session's location.
   - Avoid using absolute paths that point to local file directories, as they may not be allowed.

By following these guidelines, you should be able to load and use custom fonts without encountering errors.

[Attachment: filename.ext] (attachment reference missing)

# Issue with Multiple IPs Sending Incorrect Values

When sending OSC messages to multiple IPs, users may experience issues where both machines receive duplicated packets, resulting in incorrect values being sent. This problem is particularly noticeable when saving and loading snapshots in Unreal Engine, where previous values are sent alongside the current ones.

## Problem Description
- When a single IP is used, OSC messages function correctly.
- Adding a second IP causes both machines to receive duplicated commands, with one of the commands containing incorrect values.
- The issue manifests as previous values being sent again, especially during snapshot operations.
- The problem persists even when using made-up IPs, indicating that the issue is not tied to specific Unreal instances.

## Solution
1. **Debugging**: Enable the server's debug option in Open Stage Control to monitor what is being sent and received. This can help identify if the issue is related to the OSC message handling.
   
2. **Custom Module Review**: If a custom module is in use, check the `oscOutFilter` function. It may be called multiple times per widget message due to multiple targets in the send field. If custom logic is affecting the values, consider modifying the module to send to one IP and dispatch to the other within the custom module.

3. **Potential Sync Issues**: Investigate if there is any synchronization or interaction issue between the two Unreal Engine instances that could be causing the incorrect values to be sent.

4. **Simplification**: As a temporary measure, consider using only one IP in the send field and dispatching to additional IPs programmatically within the custom module to avoid the issue altogether.

By following these steps, users can troubleshoot and potentially resolve the issue of incorrect values being sent to multiple IPs in their OSC project.

# OSC Listeners in Open Stage Control

## Problem Description
Users often seek examples and clarification on how to utilize OSC listeners within Open Stage Control, specifically regarding their functionality and application in controlling widget properties through OSC messages.

## Solution
### Example of OSC Listener Usage
An OSC listener can be used to modify a widget's property directly via OSC messages. For instance, a button with the following configuration:

```json
OSC{color, auto}
```

in the `colorWidget` property can be controlled by sending an OSC message to the address `/bouton_1/color`, assuming the button's address is `/bouton_1`.

### Updated Features
As of version 1.0.0.beta8, a new "variable" widget in the "scripts" category allows for receiving values and using them in properties (with `@{}`) or scripts (with `get()`). This method may provide greater flexibility compared to the OSC{} syntax.

### Additional Notes
- OSC listeners can also be used to update fader values, but it is often more efficient to send messages directly to the widget's address to change its value.
- For practical examples, refer to the attached files which illustrate the usage of OSC listeners and variable widgets.

[Attachment: dnVSjbluwIp3iOFqpYOiJEgMWLP.json]  
[Attachment: 6Czxah6NqesNvlsHxvTyJpMOCZa.json]

# Adding a Legend Tag to Frame and Panel Widgets

## Problem Description
Users may want to create a legend tag within a frame or panel widget in Open Stage Control, similar to the "personalia" example provided in the W3Schools documentation.

## Solution
While there is no built-in support for legend tags in Open Stage Control, you can achieve a similar effect using a combination of HTML and CSS. Follow these steps:

1. **Add the label in HTML** within your frame or panel widget.
2. **Apply the following CSS** to style the legend:

   ```css
   :host {
       /* Mimics parent's padding to add space around the frame */
       --widget-spacing: 5rem; 
   }
   .html {
       position: absolute;
       line-height: 10rem;
       padding: 0 4rem;
       top: 0;
       left: 10rem;
       z-index: 10;
       background: var(--color-background);
   }
   ```

This CSS will position the label appropriately and create a visual effect similar to a legend tag.

# Split MIDI Devices Configuration

**Problem Description:**
The user wants to configure two MIDI devices such that:
- Device 1 retains its original input but uses the output of Device 2.
- Device 2 retains its original output but uses the input of Device 1.

**Solution:**
To achieve this configuration, you can manipulate the MIDI port settings at the server level or use a custom module for more dynamic control.

1. **Static Configuration:**
   - If you want to swap the outputs at a static level, you can adjust the MIDI port configuration directly in the server settings.

2. **Dynamic Configuration with Custom Module:**
   - For dynamic port settings, you will need to create a custom module. This allows you to filter and redirect MIDI data based on specific conditions.
   - The custom module can be programmed to change the output port based on the input received from the other device.

**Advantages of Using a Custom Module:**
- Greater flexibility in handling MIDI messages.
- Ability to implement complex logic for MIDI data routing.
- Potential performance improvements depending on how the module is implemented.

For further assistance on creating a custom module, refer to the Open Stage Control documentation for examples and guidelines. 

[Attachment: filename.ext] (attachment reference missing)

# Reading Switch Values as Variables in CSS Script

**Problem Description:**
A user inquired about using switch values as variables in a CSS script for conditional checks. The user provided a code snippet and wanted to know if they could replace hardcoded values with variable references to make the code more dynamic.

**Solution:**
To use switch values as variables in your CSS script, you can replace hardcoded values with references to the corresponding variable. For example, instead of using a specific number like `57`, you can reference a variable such as `LevelC`. 

Here’s how you can modify the code:

```css
:host {
  border-radius: 15px;
  font-size: 130%;
  line-height: 1.2;
  transition: filter 0.15s ease-in-out;
  filter: #{@{this} == 0? 'brightness(100%) saturate(100%)' : 'brightness(90%) saturate(125%)'};
}
value:nth-child(1) {
  --color-fill: #{globals.color.blue};
  border-radius: 5px;
  font-size: #{@{this} == @{this.values}.LevelC ? '200%' : '100%'};
  transition: color 0.3s ease-in-out, font-size 0.3s ease-in-out;
}
value:nth-child(2) {
  --color-fill: #{globals.color.blue};
  border-radius: 5px;
  font-size: #{@{this} == @{this.values}.LevelC ? '200%' : '100%'};
  transition: color 0.3s ease-in-out, font-size 0.3s ease-in-out;
}
value:nth-child(3) {
  --color-fill: #{globals.color.blue};
  border-radius: 5px;
  font-size: #{@{this} == @{this.values}.LevelC ? '200%' : '100%'};
  transition: color 0.3s ease-in-out, font-size 0.3s ease-in-out;
}
```

This approach allows for greater flexibility, as you can easily change the value of `LevelC` without modifying the CSS logic directly.

# Tracking Gesture Outside the Widget

## Problem Description
The user inquired about the ability to track touch gestures outside of a widget in Open Stage Control. They highlighted several use cases where this feature would enhance functionality, including maintaining touch interactions without reverting to default states, enabling continuous value adjustments for knobs, and allowing menu selections outside of the visible range.

## Solution
The default behavior in Open Stage Control allows for tracking touch gestures outside of a widget, unless the widget's ancestor has the `traversing` property set to `true`. 

For further exploration of this functionality, an experiment with the canvas widget was shared, which may provide additional insights into implementing such features. 

[Attachment: yhVgcauvl1xvTy47f6tHuuCSIXn.json]

# Control Widget Size Inside a Panel Grid Row

**Problem Description:**
Users may encounter issues with widget sizes in a grid layout within Open Stage Control. Specifically, widgets such as knobs and encoders may stretch to fill their entire grid area, resulting in them being too close together. Additionally, buttons may lose their circular shape and appear oval due to sizing constraints. Users may seek a method to control the size and position of widgets within a specific panel grid area or row.

**Solution:**
To adjust the size and position of widgets within a panel grid, you can use the following CSS properties in the `controllers` panel:

```css
.button-container,
.encoder-container,
.knob-container {
  margin: 5rem;
}
.button-container {
  width: auto!important;
  aspect-ratio: 1 / 1;
}
```

This CSS will help create appropriate spacing and maintain the correct aspect ratio for buttons, ensuring they remain round and centered. Adjust the `margin` value as needed to achieve the desired layout. 

For more complex layouts, consider using horizontal panels stacked inside parent panels for better control over widget arrangement.

# Changing Individual Pad Sizes in Multixy

## Problem Description
Users have encountered issues when trying to change the size of individual pads in a multixy control using CSS variables. The variables `--pointSize` and `--point-size` have been used, but the expected changes do not take effect.

## Solution
To correctly set the size of individual pads, use the following CSS syntax:

```css
.pad-0 {
    --point-size: 10rem !important;
}
.pad-1 {
    --point-size: 20rem !important;
}
.pad-2 {
    --point-size: 30rem !important;
}
```

Note that the correct variable to use is `--point-size`, which will be properly implemented in the next version of Open Stage Control. The previous variable `--pointSize` was not functioning as intended.

For dynamic changes, you can utilize OSC messages to modify the CSS variable values. An example of setting colors dynamically is as follows:

```css
.pad-0 {
    --color-fill: @{myColorsArray.value.0};
}
.pad-1 {
    --color-fill: @{myColorsArray.value.1};
}
```

This approach should also work for dynamically changing `--point-size`. 

[Attachment: missing]

# How to Change a Widget's Value with Another Widget

To change the "On" value of a button widget using other button widgets in Open Stage Control, you can utilize OSC messages or scripts.

## Solution

1. **Using Variable Assignment:**
   - In the first button's `on` property, set the value using:
     ```
     VAR{on, 1}
     ```
   - In the second button's `onValue`, use the following script:
     ```javascript
     // (value is the button's current value when the script is executed)
     setVar('button_1_id', 'on', value)
     ```

2. **Using Conditionals:**
   - You can also implement conditional logic to determine the value:
     ```javascript
     var x;
     if (value === 1) {
       x = 'foo';
     } else {
       x = 'bar';
     }
     setVar('button_1_id', 'on', x);
     ```

3. **Alternative Approach:**
   - Consider using a menu widget if you want to set the button's "On" value, as only one value can be set at a time. A proposed menu configuration is available in the attached file:
     [Attachment: rpjLF9HaktOF1PAJJlCekAB7kiL.json]

# Maintaining Color Changes in Menu Items

**Problem Description:**
When a button is pressed to change a variable value linked to a menu, the color changes of the menu's children are lost. The goal is to retain these color changes after the button press.

**Solution:**
To maintain the color changes in the menu items, use the following CSS and JavaScript:

### CSS
```css
h1 {
    background: url(Images/Fractale_2.png);         
    background-size: 100%;                          
    color: transparent;                           
    -moz-background-clip: text;
    -webkit-background-clip: text;
    text-transform: uppercase;                   
    font-size: 200%;                                 
    line-height: 180%;                            
    margin: 20rem -10rem;                         
    position: relative;
}
```

### JavaScript
```javascript
var couleurs = ["blue", "green", "red", "orange"];
var index = (@{this}-1); 
locals.couleurs = couleurs[index];
var css = ':host{color:#{locals.couleurs};}';
for (var i = 0; i < couleurs.length; i++) {
    css += ".item:nth-child(" + (i + 1) + "){color:" + couleurs[i] + ";}\n";
}
return css;
```

This setup ensures that the colors of the menu items are preserved even after the variable linked to the menu is changed. 

[Attachment: Images/Fractale_2.png]

[Attachment: dVtYpiGp69vsnlkkVsPxk52SQhB.json]

# Multiple Toggle Buttons - Disable Toggle Function for Active Button

**Problem Description:**
A user wants to create a group of toggle buttons (btnA, btnB, btnC, btnD, btnE) where only one button can be toggled at a time. Additionally, the active button should remain toggled even if clicked again, preventing it from deactivating.

**Solution:**
To achieve the desired functionality, implement the following JavaScript snippet in the script element:

```javascript
if (value == 0) {
  set(id, getProp(id, 'on'));
  return;
}
for (var i = 1; i < 16; i++) {
  var wid = 'color_button_' + i;
  if (wid != id) set(wid, 0);
}
```

This code ensures that when a button is clicked, it remains active, and all other buttons in the group are deactivated.

For additional control over user interaction, you can apply the following CSS to the button container:

```css
:host.on {
  pointer-events: none;
}
```

This CSS will disable user interaction on the active buttons within the container. Note that user interaction is not disabled while the editor is enabled.

For debugging, you can log variable values to the console using:

```javascript
console.log("the value is: ", value);
```

Make sure to apply the CSS correctly, as it will not work if set directly on the buttons.

# Synchronizing a Large and Small Matrix in Open Stage Control

## Problem Description
A user has a panel with a button that is cloned by a large matrix named `button_track_matrix`, which consists of 16 columns and 5 rows. Additionally, there is a smaller matrix called `button_mixer_matrix`, which has 16 columns but only 1 row. The objective is to synchronize the `button_mixer_matrix` to reflect the row of the selected button within the `button_track_matrix`.

## Solution
To achieve synchronization between the two matrices, you can use the following approach:

1. **Set Up the Large Matrix**: Ensure that the `button_track_matrix` is configured to send the selected row information when a button is pressed.

2. **Use a Script to Update the Small Matrix**: Implement a script in the `button_track_matrix` that updates the `button_mixer_matrix` based on the selected row. Here is an example script that can be used:

   ```javascript
   var selectedRow = getProp('parent', 'variables').n; // Get the selected row index
   setVar("button_mixer_matrix", "value", selectedRow); // Update the small matrix with the selected row
   ```

3. **Trigger the Script on Button Press**: Ensure that the script is triggered whenever a button in the `button_track_matrix` is pressed. This can be done by setting the `onValue` property of the buttons to execute the script.

By following these steps, the `button_mixer_matrix` will update to reflect the row of the selected button in the `button_track_matrix`. 

For further details or specific configurations, please refer to the attached panel configuration files. 

[Attachment: panel_configuration.json]

[Attachment: d45ZtUJBmT40UEWiy7JTuaELwdE.json]

# Matrix Props Exception using $

**Problem Description:**

When attempting to set the OSC address in a button matrix using the syntax `"#{$}"`, an error occurs in the browser console indicating that `$` is not defined. The error message includes references to various functions and indicates a failure in resolving the property.

**Solution:**

This issue may arise from a corrupted internal state of the application. A confirmed solution is to restart the Open Stage Control application. This action can resolve the problem and allow the intended syntax to work correctly.

If you encounter similar issues, ensure that you are using the correct syntax and consider restarting the application to refresh its internal state.

# Querying Widget Sizes in Open Stage Control

**Problem Description**  
Users may encounter difficulties in obtaining the actual width and height of widgets in Open Stage Control. When using `getProp(XX, "width")`, the returned value may be "auto" instead of the computed size. This can hinder tasks such as dynamically positioning child elements based on the parent's dimensions.

**Solution**  
Currently, there is no direct method to retrieve the computed sizes of widgets. However, a workaround is to use percentage-based positioning for child elements. This allows you to define the child's position relative to the parent's dimensions without needing to know the exact sizes.

If you need to animate the position of a child widget, consider using a variable for the left/top properties, such as `VAR{anim_x,0}`. While you may not be able to dynamically query the sizes, you can hard-code the child widget's width or set it manually if you know the parent's dimensions. Additionally, using canvas widgets may provide a more reliable way to manage sizes, as they inherently know their dimensions.

For further reference, see the attached example:  
[Attachment: screensave.json]

[Attachment: 6oyOr8SoEvIH7iLGh1xrdW1OAFf.json]

# MIDI Port Not Detected

When attempting to use MIDI ports, some users experience issues where the ports are not detected correctly, resulting in errors such as:

```
(ERROR) ..midi: invalid options: USC Midi, Port
```

## Solution

The correct syntax for specifying the MIDI port is as follows:

```
"UCX Midi Port 1:0,1" sysex
```

However, there is a known bug that prevents names containing multiple spaces from being parsed correctly. To avoid this issue, consider using a shorter identifier in the "device_name" part (before the colon), which does not need to match the actual device name. 

For example, you could use:

```
"UCX:0,1" sysex
```

This should allow you to successfully connect to the MIDI port.

# Displaying Integer Values in Hexadecimal Format

## Problem Description
Users want to display an integer value in hexadecimal format within a widget in Open Stage Control. For example, when receiving the integer value `128`, the desired display format is `128 / 0x80`. There are questions regarding the use of OSC and preArgs in this context.

## Solution
To display an integer value in hexadecimal format, you can use the following JavaScript code within the widget:

```javascript
JS{{
var intValue = OSC{int, 0}
var hex = intValue.toString(16)
return '0x' + (hex.length < 2 ? '0' + hex : hex)
}}
```

### Key Points:
- This code converts the integer value received via OSC to hexadecimal format.
- If you need to display the hexadecimal representation of `127` as `0x7F`, you should decrement `intValue` by `1` before conversion.
- The code can be triggered by sending OSC messages to the widget, and it will also respond to changes in the value of another widget if referenced (e.g., `@{widget1}`).

### Additional Notes:
- The `padStart` method can be used to ensure two-digit hexadecimal values, but it is not supported on iOS 9.3. Instead, use the conditional check for padding as shown in the code above.
- For dynamic updates, consider using a clone matrix if you need to work with multiple faders or labels.

For further details or examples, please refer to the relevant documentation or community discussions. 

[Attachment: image.png]

# Storing and Retrieving Track Parameters in Open Stage Control

## Problem Description
The user needs to manage 6 tracks (instruments), each with 4 parameters that need to be memorized. The goal is to set parameters for each track and retrieve them when selecting the corresponding track.

## Solution
To achieve this, you can use a single matrix along with `stateGet` and `stateSet` functions to store and retrieve the state of the parameters for each track. Here’s a simple example to get started:

1. **Create a single matrix** to hold the parameters for all tracks.
2. **Use scripting** with `onCreate` and `onValue` to manage the state of the parameters.

You can refer to the provided example file for implementation details:

[Attachment: sgdFH8xvrAPmqi8VFLKKgaHYjGV.json]

# Matrix of Clones Not Redrawn After /EDIT

When using Open Stage Control, there may be instances where a matrix of clones does not refresh its display after sending an /EDIT command. Specifically, the colors of the loops may not update to reflect changes in their properties, such as the "queued" state.

## Solution

To force a redraw of the matrix after an /EDIT command, you can use the following workaround:

Send an additional command to trigger a refresh:

```
/EDIT/MERGE '/1/loops_list_loops' '{}'
```

This command will prompt the matrix to redraw and update the visual states accordingly. 

[Attachment: zS36EYus99xdKZjnMHHQXnMN2gb.json]

# Receiving MIDI SysEx Messages in Open Stage Control

## Problem Description
Users may encounter difficulties receiving and processing MIDI SysEx messages from devices, such as the DSI Evolver Synth, in Open Stage Control. The challenge lies in configuring the MIDI settings to properly handle these messages.

## Solution
To successfully receive SysEx messages in Open Stage Control, follow these steps:

1. **MIDI Configuration**: Ensure that you have specified `"sysex"` in the server's MIDI configuration. Without this setting, SysEx messages will be ignored.

2. **Custom Module**: Implement a custom module to handle incoming SysEx messages. Below is an example of how to create a module that processes these messages:

   ```javascript
   module.exports = {
       oscInFilter: (data) => {
           var {host, port, address, args} = data;

           if (host === 'midi' && address == '/sysex') {
               // Retrieve the hexadecimal string value
               var value = args[0].value;

               // Convert the string to an array of integers
               var ints = value.split(" ").map(x => parseInt(x, 16));

               console.log(`Received sysex from midi:${port}: ${value} (as integers:${ints})`);

               // Example condition to check for a specific SysEx message
               if (value.includes('f0 00 00 66 14 12')) {
                   // Perform an action, such as sending the last value before "f7" to a widget:
                   // receive('/widget_address', ints[ints.length - 2]);
               }

               // Bypass the original message if not needed
               return;
           }

           // Pass the original message by default
           return data;
       }
   }
   ```

By following these steps, you will be able to receive and process SysEx messages from your MIDI device effectively.

# Updating Multiple RGB LEDs Simultaneously with One OSC Command

## Problem Description
To efficiently update the state of multiple RGB LEDs within a matrix (64 buttons), it is necessary to send a single OSC message that can update all LEDs simultaneously, rather than sending individual OSC messages for each LED.

## Solution
You can achieve this by creating a script widget that listens for a specific OSC address (e.g., `/rgbled/set_all`) and processes the incoming values to update the LEDs. Here’s how to implement it:

1. **Create a Script Widget**:
   Use the following JavaScript code in the script property of the widget:

   ```javascript
   // "value" contains the values received on the script's osc address
   // Loop over these values and dispatch them
   for (var i = 0; i < value.length; i += 3) {
       set("rgbled_" + (i / 3), [value[i], value[i + 1], value[i + 2]]);
   }
   ```

   In this code, `value` is expected to be a one-dimensional array containing RGB values. The loop processes the array in groups of three, corresponding to the RGB values for each LED.

2. **Ensure Proper Widget IDs**:
   Make sure the widget IDs are set correctly in the matrix properties. For example, you can set the IDs using the following configuration:

   ```json
   {
       "id": JS{{return 'rgbled_' + $}}
   }
   ```

By following these steps, you can efficiently update all RGB LEDs in your matrix with a single OSC command.

# Keeping a Modal Open When Interacting with Other Modules

## Problem Description
Users may want to keep a modal module open even when interacting with other modules in Open Stage Control. 

## Solution
It is not possible to keep a modal open while interacting with other modules. As a workaround, consider replacing the modal with a panel and using z-layering to control the visibility of the widget. This approach has been successfully implemented by other users.

# Switching Between Modal Screens with One Tap

## Problem Description
Users want to switch between two modal popups with a single tap on a button. When one modal is displayed, tapping the button to switch modals closes the current modal but requires a second tap to open the new one. 

## Solution
To achieve the desired functionality of closing one modal and opening another with a single tap, you can use a custom script in Open Stage Control. Here’s a basic outline of how to implement this:

1. Use the `OSCOUTFILTER` to detect when a modal is closed.
2. When the modal with a specific name (e.g., "modal 1") is closed, trigger the opening of the other modal (e.g., "modal 2").

Here is an example script:

```javascript
if (address === '/modal1' && args[1].value === 0) {  // 0 indicates the modal is closed
    receive('/modal2', 1);  // Open modal 2
}
```

You would need to implement similar logic for switching back to "modal 1" when "modal 2" is closed.

Additionally, if you prefer not to use modals, an alternative solution is to use tabs instead. This allows for seamless switching between different views without the need for multiple taps. 

For further customization, you can control the interaction state of the modals using properties to enable or disable interactions as needed.

**Note:** If you require a script to toggle modal interactions on and off, you can set the property to true or false (0/1) as needed.

[Attachment: custom_module_example.js]

# Push Button Widget Color Configuration

## Problem Description
Users have reported that the color section of push button widgets does not change the button or button text color as expected. Instead, the only way to modify the button's appearance is through the CSS section using properties like `color: green;` or `.label { color: green; }`.

## Solution
The color property in the push button widget defines the "accent" color, which is utilized differently depending on the widget type. For push buttons, the accent color is applied only when the button is activated by an OSC feedback message. For more precise control over colors, it is recommended to use CSS. 

For example:
```css
.button {
    color: green; /* Changes button text color */
}
.label {
    color: green; /* Changes label text color */
}
```

# Using Widget ID Number as a Variable in OSC Command

## Problem Description
There is a need to use the number following a widget's ID as a variable in the OSC command. For instance, if the widget ID is `button_1`, the desired OSC command format is `/source/obj/x 1 {value}`. Additionally, there is a requirement to pass the value as an int32, as the current module does not recognize values passed with a decimal point.

## Solution
To achieve this, use the `preArgs` property instead of the `address`, which should only contain the OSC address. You will need to implement some JavaScript to extract the number from the widget ID using advanced syntaxes. The following code snippet can be used, assuming the number is always after an underscore:

```javascript
#{ @{this.id}.split('_').pop() }
```

To ensure the value is recognized as an int32, set the `typeTags` to `i`.

# Second CSS Field for Personalized CSS Modifications

## Problem Description
When modifying the CSS of multiple widgets in Open Stage Control, applying a single CSS rule to selected widgets can overwrite any personalized CSS settings, such as icons, images, or specific styles. This limitation requires users to edit each widget individually to preserve their unique styles, which can be time-consuming.

## Solution
To avoid overwriting personalized CSS data while still applying changes to multiple widgets, consider the following approaches:

1. **Higher-Level CSS Rules**: Write CSS rules at a higher level in the session hierarchy. For example, you can apply a rule to all button widgets using:
   ```css
   .button-container {
     background: red;
   }
   ```

2. **Using Themes**: Create a theme to manage common styles without duplicating code across widgets. This helps maintain consistency and reduces the need for repetitive edits.

3. **Extra CSS Classes**: Add additional CSS classes to your widgets to apply specific styles without affecting the personalized settings.

4. **Overriding Theme Styles**: If you need to customize a widget's style while using a theme, you can use the `!important` suffix to ensure your custom styles take precedence. For example:
   ```css
   background-size: 10% !important;
   ```

By utilizing these methods, you can efficiently manage CSS for multiple widgets without losing personalized settings.

# Automation Bitwig -> OSC: Throttling Issues

**Problem Description:**
When using a custom JavaScript module to trigger a 'tap' button in Open Stage Control from Bitwig automation, the trigger either fails to activate or activates multiple times. The automation setup involves sending a message when a specific condition is met.

**Solution:**
To ensure the trigger activates reliably once, consider the following approaches:
1. Specify a client ID in the `receive` function to direct the message to a specific client, which can help prevent multiple messages being sent.
2. Alternatively, use the `send` function to directly send the message from the module, ensuring that only one message is dispatched.

These methods can help mitigate the issue of multiple triggers when sending OSC messages.

# Copying Widgets Between Projects

**Problem Description:**
Users have reported challenges when attempting to copy and paste widgets between different projects in Open Stage Control. Specifically, the inability to open two projects simultaneously due to port and IP conflicts has been a significant barrier. Users have sought workarounds, including using different versions of the software, which is not ideal.

**Solution:**
It is possible to open two projects at the same time using a single server. To do this, follow these steps:

1. Open a browser window and connect to the server's URL.
2. Load a different project in the new browser window.

This method allows for copy-pasting widgets between the two clients, as the widget clipboard is managed by the server and shared across all clients, regardless of the session.

Additionally, if you encounter issues with the copy/paste functionality not appearing in the contextual menu, ensure that you are pasting into a selected widget that can accept child elements. Fragments can also be used to modularize your session and create reusable components saved in individual files. 

For further details on fragments, refer to the documentation on [Fragments - Open Stage Control](https://openstagecontrol.ammd.net/docs/fragments.html). 

[Attachment: Capture d’écran vidéo de 11-02-2022 21:04:18.webm]

# Issue with Fullscreen Display and Touch Activation

## Problem Description
When using Open Stage Control in a browser on MacOS with a Touch-Base touch monitor driver, the browser extension from Touch-Base blocks mouse interactions. Users can open the menu with touch but cannot check the fullscreen option using touch, creating a barrier to activating fullscreen mode.

## Solution
To resolve the issue in Chrome:
1. Disable the option "Always display the toolbar in fullscreen mode." 
2. Use the top green button in MacOS to maximize the window. 

This allows the window to grow without needing to use the F11/fullscreen command in Open Stage Control or the fullscreen option on the server. 

Note: The issue persists with the Touch-Base extension enabled, as it prevents proper touch input recognition by the browser. 

[Attachment: filename.ext] (attachment reference missing)

# XY Point Color Customization

## Problem Description
Users want to customize the color of points in XY widgets and inquire about changing the shape of the points (e.g., from square to circle).

## Solution
It is not possible to change the color of the points in XY widgets independently from the widget's overall color. Additionally, the appearance of the points cannot be modified to different shapes. 

For further customization, users can inspect the CSS classes associated with the widget using development tools (F12) to explore the CSS properties, but these will not allow for the specific changes requested. 

[Attachment: missing]

# Inheritance Syntax: Label Returning "Auto" Instead of the Real Value

When using the inheritance syntax in Open Stage Control, if the label is set to 'auto', the label property returns "auto" instead of the actual name of the button (e.g., button_1).

## Solution

The label property will indeed return "auto". To retrieve the actual ID of the button instead, you can test the property and use the ID when necessary.

# Handling MIDI Ports with Spaces in Names

When creating MIDI ports on Mac, the names may include spaces (e.g., "IAC name"). This can cause issues when configuring the MIDI properties in the server settings.

## Solution

To include spaces in the MIDI port names, enclose each device declaration in quotes. For example:

```
"port_name:IAC name, IAC name" "port_name2:IAC name2, IAC name2"
```

Ensure that each device declaration with spaces is quoted individually, rather than quoting the entire MIDI configuration string.

# How and When Are Widget Values Persisted in Open Stage Control?

When dynamically creating complex widgets in Open Stage Control, there are considerations regarding the timing of value assignment and the persistence of those values.

## Problem Description
In a scenario where widgets are created dynamically (e.g., cloning a template widget for song data), questions arise about whether values can be sent to newly created widget addresses (like `/30/title`) while Open Stage Control is still rendering those widgets. Additionally, concerns about performance issues when using certain variable structures and the impact of modifying shared variables on widget redraws have been raised.

## Solution
1. **Immediate Value Assignment**: You can send values to newly created widget addresses immediately after triggering the widget creation. Open Stage Control processes incoming messages sequentially, so the OSC listener will be ready to receive these values.

2. **Using /EDIT for Dynamic Variables**: Modifying dynamic variables using the `/EDIT` command does not inherently trigger heavy redraws. However, if a variable is referenced by multiple widgets, changing a part of that variable (e.g., `{"30": "title"}`) can lead to redraws of all widgets that depend on that variable for non-dynamic properties.

3. **Widget Redraw Behavior**: Widgets will only be redrawn if they use the modified variable to define a non-dynamic property. If the value returned by an expression like `@{/@{song_nb}/title}` changes due to the modification, then those widgets will be recalculated.

By following these guidelines, you can effectively manage widget values and their persistence in Open Stage Control without incurring unnecessary performance issues.

# Performance Issues with Large Matrix in Open Stage Control

## Problem Description
When using a large matrix with nearly a thousand buttons in Open Stage Control, performance can significantly degrade. The matrix includes buttons that act as folders, toggling the visibility of other buttons. The configuration involves complex properties for labels, colors, visibility, HTML content, CSS, modes, double-tap actions, and MIDI commands, which can lead to slow responsiveness.

## Solution
To improve performance with large matrices in Open Stage Control, consider the following strategies:

1. **Simplify Logic**: Reduce the complexity of the conditional logic used in properties. Instead of using extensive conditional statements for each button, try to group similar buttons and apply shared properties where possible.

2. **Use Arrays or Objects**: Instead of individual properties for each button, utilize arrays or objects to store common attributes. This can help streamline the code and reduce redundancy.

3. **Limit Visibility Checks**: Minimize the number of visibility checks performed. Only check visibility for buttons that are currently relevant based on user interaction.

4. **Optimize Event Handling**: Ensure that event handling (like double-tap actions) is efficient. Avoid executing heavy computations or multiple commands in response to a single event.

5. **Test Performance**: Regularly test the performance of your matrix as you make changes. Use profiling tools to identify bottlenecks in your configuration.

By implementing these strategies, you can enhance the responsiveness and overall performance of your large matrix in Open Stage Control.

# Understanding the Spread Syntax in JavaScript

## Problem Description
A user inquired about the three dots operator (`...`) in JavaScript, commonly referred to as the spread syntax, and its functionality within the context of Open Stage Control.

## Solution
The three dots operator is known as the **spread syntax** in JavaScript. It allows an iterable (like an array) to be expanded in places where zero or more arguments are expected. 

### Example Usage
In the provided example, the spread syntax is used to send multiple arguments to the `send` function:

```javascript
function controlSequence(host, port, address, preArgs, sequence) {
    var i = 0;
    var timer = setInterval(() => {
        send(host, port, '/note', ...preArgs, sequence[i]);
        i += 1;
        if (i == sequence.length) clearInterval(timer);
    }, 50); // set here the time interval
}
```

In this case, `...preArgs` spreads the elements of the `preArgs` array as individual arguments to the `send` function.

For more detailed information, refer to the [MDN documentation on Spread Syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax).

# How to Get the Client OSC Port

To retrieve the OSC port in Open Stage Control, you can use the following method in a custom module.

## Solution

Use the following code snippet to read the OSC port and send it to a variable widget:

```javascript
var oscPort = settings.read('osc-port') || settings.read('port') || 8080;
app.on('sessionOpened', () => {
  receive('/variable_widget_address', oscPort);
});
```

This code checks for the 'osc-port' setting first, then falls back to 'port', and defaults to 8080 if neither is set.

# Restoring the 'Show Values' Option for Switches in Open Stage Control

## Problem Description
Users migrating from version 0 to version 1 of Open Stage Control have noted the absence of the 'show value' option for switches, which was previously available. This feature was useful for displaying values directly in the switch widget while also allowing for editing.

## Solution
While the 'show value' option is not available in version 1, users can achieve similar functionality by utilizing the object syntax to display desired labels. For example:

```json
{
  "label a": "value a",
  "label b": "value b"
}
```

For structured data storage and display, consider using a single switch widget with values set as follows:

```json
{
  "[1,2,3]": [1, 2, 3],
  "[2,3,4]": [2, 3, 4]
}
```

If you need to store complex structured data (e.g., key/value pairs), it may be beneficial to use global variables or restructure the data into separate widgets for each attribute, such as `/song1/pos` and `/song1/name`. This approach can enhance organization and clarity in your dashboard.

For further customization, consider using scripts or custom modules to handle data in a more elegant manner. 

[Attachment: filename.ext]

# Populating OSC MIDI Ports Automatically

**Problem Description:**
Users may wonder if they need to manually re-query the MIDI "pool" each time to obtain input and output port indices when using Open Stage Control (OSC) with virtual MIDI software like LoopMIDI.

**Solution:**
Instead of using port indices, it is recommended to use port names for selecting MIDI ports in OSC. This method is more reliable and can be implemented as follows:

- For input and output, you can specify either port numbers or strings (the names of the ports).
- Use the `list` action to retrieve available MIDI ports.
- If a string is provided, OSC will select the first port whose name contains the specified string, with case-insensitive comparison.

This approach allows for automatic population of MIDI ports at runtime without the need for manual re-querying.

# Transfer Template from V0 to V1-beta 5 CSS Theme Problems

When upgrading from Open Stage Control version 0 to version 1-beta 5, users may encounter issues with CSS classes not functioning as expected. Specifically, some styles may not apply correctly due to changes in syntax or selector behavior.

## Problem Description
A CSS class that previously worked in version 0 is not functioning in version 1-beta 5. The user noted that removing the period (.) before the class name allows the styles to apply, which is unexpected behavior since the period is typically required for class selectors.

## Solution
To resolve this issue, it is recommended to adjust the CSS selectors as follows:

1. **Change Class Selectors to Element Selectors**: If a class selector (e.g., `.label`) is not working, try using the corresponding HTML element selector (e.g., `label`) instead. This change may be necessary due to updates in how CSS is processed in the new version.

   Example:
   ```css
   :host {
     background: linear-gradient(-45deg, #fefcea 0%, #f1da36 100%) top left / cover no-repeat;
     background-color: white;     
     border-radius: 10px;
     width: 50vw;
     height: 50vw;
   }

   label {
     align-items: flex-end;
     padding-bottom: 0em;
     font-size: 75%;
     color: black;
   }

   label:after {
     content: "";
     width: 100%;
     height: 100%;
     left: 0;
     right: 0;
     position: absolute;
     background: url('data:image/svg+xml;utf8;base64,...') no-repeat center 15% / 35%;
   }
   ```

2. **Review Other CSS Rules**: Ensure that other CSS rules are also reviewed and updated as necessary to align with the new version's requirements.

If issues persist after these adjustments, further investigation into specific CSS properties and their compatibility with the new version may be necessary. 

[Attachment: filename.ext] (attachment reference missing)

# EQ Widget Example

**Problem Description:**
Users may struggle to understand how to properly utilize the EQ Widget in Open Stage Control, particularly when trying to display frequency on a graph using a fader for a lowpass filter cutoff.

**Solution:**
To configure the EQ Widget correctly, use the following JSON format for the value input:

```json
[
  { "type": "peak", "gain": "@{fader_id}", "q": 1.5, "freq": 1500 }
]
```

This setup will allow the EQ graph to display the frequency accurately. Adjust the `gain`, `q`, and `freq` parameters as needed for your specific application. 

[Attachment: filename.ext] (attachment reference missing)

# macOS Mojave - OSC Server Editor - Ctrl+Click Does Not Right-Click

**Problem Description:**

In the OSC Server Editor on macOS Mojave, using Ctrl+Click does not open the drop-down menu. However, right-clicking with two fingers on the trackpad or using the right button on a USB mouse works correctly.

**Solution:**

Currently, Ctrl+Click does not function as a right-click in the OSC Server Editor. It is recommended to use the trackpad's two-finger click or the right mouse button for accessing the drop-down menu. This issue is acknowledged, and while it may be improved in future updates, no immediate fix is available.

[Attachment: screenshot.png]

# Error: Maximum Call Stack Size Exceeded When Cloning a Panel

When attempting to clone a panel that contains a large number of objects, users may encounter the following error message:

```
(ERROR, CLIENT) Uncaught RangeError: Maximum call stack size exceeded at has.call (src/client/events/event-emitter.js:25:16)
```

## Solution

This error typically occurs due to circular cloning, where a clone duplicates its parent. To avoid this issue, follow these guidelines:

1. **Clone Original Panels**: Always clone the original panel instead of cloning an already cloned panel.
2. **Placement of Clones**: Ensure that the cloned panel is placed outside of the original panel's container. Do not place it inside the panel being cloned.

If you encounter this error, check your cloning process to ensure it adheres to these guidelines. 

In future versions of Open Stage Control, this error will be handled more gracefully, providing an explanatory message in the console.

[Attachment: q6YSp2VPogG2U0I1pcADVp2Esm0.json]  
[Attachment: 2zIBRJKhU7QnmU0v1YiyV2gCLx5.json]

# Editing a Nested Dictionary Value in Open Stage Control

## Problem Description
Users may encounter difficulties when trying to update a nested dictionary value using the `/EDIT` command in Open Stage Control. Specifically, there is uncertainty about how to clear and then update the 'dict' property of a switch with nested values.

## Solution
Currently, it is not possible to directly `/EDIT` a subset of a value. However, a workaround can be applied:

1. To clear the 'dict' property, send the following command:
   ```json
   {"values":{"1":{"dict":null}}}
   ```
2. After clearing, you can update the 'dict' property with new values by sending:
   ```json
   {"values":{"1":{"dict":{"y":"x"}}}}
   ```

Note that this method may not always work consistently. Ensure that the messages are delivered in the correct order to avoid issues. 

For further reference, see the related issue on GitHub: [Issue #556](https://github.com/jean-emmanuel/open-stage-control/issues/556).

# Modularizing Custom Module Code in Open Stage Control

## Problem Description
Managing a large custom module in Open Stage Control can become cumbersome, especially when adding new features. Users may seek to modularize their code by creating a structured directory and separating functions into distinct files for better organization and maintainability.

## Solution
To effectively modularize your custom module, follow these steps:

1. **Create a Directory Structure**:
   Organize your module into a directory with sub-modules. An example structure is as follows:
   ```
   my_custom_module/
   ├── index.js
   ├── chordUtils.js
   ├── noteUtils.js
   └── oscHandlers.js
   ```

2. **Move Related Functions to Separate Files**:
   - **chordUtils.js**: Place functions related to chord operations here.
   - **noteUtils.js**: Store functions for note conversion.
   - **oscHandlers.js**: Include functions that handle OSC messages.

3. **Export Functions from Each Module**:
   In your main module file (e.g., `index.js`), export the necessary methods:
   ```javascript
   module.exports = {
     init: () => _init(),
     unload: () => _unload(),
     oscInFilter: (data) => _oscInFilter(data),
     oscOutFilter: (data) => _oscOutFilter(data),
   };
   ```

4. **Import Functions in Your Main Module**:
   At the top of your main module file, import the functions from their respective files:
   ```javascript
   const { _init } = require("./oscFilters/init.js");
   const { _oscInFilter } = require("./oscFilters/oscInFilter.js");
   const { _oscOutFilter } = require("./oscFilters/oscOutFilter.js");
   const { _unload } = require("./oscFilters/unload.js");
   ```

5. **Manage Global Variables**:
   If you have global variables, consider placing them in a separate file (e.g., `globalVariables.js`) and importing them similarly:
   ```javascript
   const { deleteGlobals, setGlobals } = require("./utils/globals.js");
   ```

6. **Initialize Globals**:
   In your globals file, define and initialize global variables:
   ```javascript
   const setGlobals = async () => {
     global.clients = global.clients || [];
     global.cubase = {
       timecode: {
         primary: "",
         secondary: "",
       },
       mixerChannels: {},
       storedMixerChannels: {},
       storedTotalChannels: 0,
       matrixQuantity: 0,
       emptyChannelCount: 0,
       mixerPanelScrollPosition: [0, 0],
     };
   };

   module.exports = {
     setGlobals
   };
   ```

7. **Access Configurations and Functions**:
   Use helper functions to access configurations and functions:
   ```javascript
   const getConfig = (path, defaultValue = undefined) => {
     return path.split('.').reduce((acc, part) => acc && acc[part], config) || defaultValue;
   };

   const getFunction = (path, defaultValue = undefined) => {
     return path.split('.').reduce((acc, part) => acc && acc[part], functions) || defaultValue;
   };
   ```

By following these steps, you can modularize your custom module in Open Stage Control, making it more manageable and easier to maintain. 

[Attachment: filename.ext]

# Dynamically Triggering /note

## Problem Description
When attempting to trigger notes using the `/note` address in Open Stage Control, issues arise when trying to send messages from a widget that was not directly interacted with by the user. This behavior resembles restrictions in web technologies, where certain actions require user interaction to initiate.

## Solution
Widgets in Open Stage Control will not send messages unless the action is initiated by user interaction. To work around this limitation, implement a custom module that can send messages in response to incoming signals. This approach reduces latency and jitter since it bypasses the server/client connection.

Note that Open Stage Control is not designed for timing-critical applications, so it may not be ideal for building an accurate sequencer.

# Reaper Normalized Floating Point VU Meter OSC Data to dB Function

## Problem Description
A user is attempting to create an input widget in Open Stage Control to display the VU meter value from Reaper. They have found a function on the Reaper forum that translates floating point values to a logarithmic dB scale using the formula `math.exp(Value * 0.115129254)`, but they are unsure where to implement this function in Open Stage Control.

## Solution
To achieve this, you can use a custom module in Open Stage Control. Here is an example of how to implement the function in plain JavaScript:

```javascript
function convertToDB(value) {
    return Math.exp(value * 0.115129254);
}
```

You can then call this function within your widget to convert the VU meter values from Reaper to dB. Ensure that you have a basic understanding of JavaScript to modify the function as needed for your specific application.

# Change ID Names of Multiple Widgets

**Problem Description:**
Users need a method to select multiple widgets in the Project Tree of Open Stage Control and change a portion of their ID names by adding a prefix while retaining the remaining part of the ID name. For example, changing IDs from "OM1_fader" and "OM1_switch" to "OM2_fader" and "OM2_switch" without making all IDs identical.

**Solution:**
The most effective approach is to edit the session JSON file directly using a code editor. Follow these steps:

1. Save your current session as a JSON file.
2. Open the JSON file in a text editor such as Sublime Text, WebStorm, vi, or Visual Studio Code.
3. Use the search and replace function to modify the prefix:
   - Search for the current prefix (e.g., "OM1_").
   - Replace it with the new prefix (e.g., "OM2_").
4. Save the changes to the JSON file.
5. Load the modified JSON file back into Open Stage Control.

This method allows for bulk changes without the need to edit each widget individually in the Project Tree.

Additionally, for future projects, consider using a variable for widget IDs. This allows for easier management of ID names by changing the variable's value to update multiple IDs simultaneously.

[Attachment: fmAXtunQocFolrxcSeEcg1m5q4H.json]

# Reading Menu from JSON File and Writing to Menu Button

## Problem Description
The objective is to read a menu from a JSON file and write that data to a menu button in Open Stage Control. The user wants both Menu_A and Menu_B to have initial entries based on the JSON file.

## Solution
To achieve this, follow these steps:

1. Move the `onValue` script from `variable_setScale` to `variable_harpScale`. This ensures that the script executes when the `harpScale.json` file is loaded.
2. At the end of the script, call `set()` to define the initial value for the menu button.

This approach allows both Menu_A and Menu_B to have entries from the start based on the JSON data.

For further reference, the initial session file is available as [Attachment: MenuFromJSONfile.zip]. A revised version of the session can be found in [Attachment: MenuFromJSONfile_v2.zip].

[Attachment: oQdTjbVyOOKRy0PSJwDvjdDpgz.zip]

[Attachment: k4CrCUS3exnNlj8HTpZlOqFbdNT.zip]

# Trigger / Send Values of All Child Widgets of a Given Fragment from Parent

**Problem:**
The need to send all values of the widgets contained in a specific fragment of a tabbed panel when the tab becomes active.

**Solution:**
Use the following script to achieve this:

```javascript
stateSet(stateGet('fragment_id'))
```

This command retrieves the state of the specified fragment and sets it, effectively sending the values of all child widgets within that fragment.

# Intercepting and Altering Messages from Matrix

## Problem Description
A user is attempting to catch messages sent from a matrix of custom sliders, which are formatted as `/matrix.id/n_child.id child1.value`. The goal is to reformat these messages to a simpler structure: `/matrix.id child1.value child2.value ...`. Additionally, there is a need to detect value changes in child sliders from the parent matrix.

## Solution
To achieve this, the following methods can be used:

1. **Using the `onValue` Property**:
   - The `onValue` property of the matrix can be utilized to send messages when a value changes. The syntax is as follows:
     ```javascript
     send('ip:port', '/address', ...value)
     ```
   - Note that this method only works with the matrix's direct children and not with regular panel widgets.

2. **Override the `onValue` for Widgets in a Fragment**:
   - If the sliders are in a fragment within a panel, you can override the `onValue` property using the `props` property. Here’s an example of how to implement this:
     ```javascript
     JS{
     var props = {}; // overrides for matrix elements
     props.props = {}; // overrides for fragment content
     props.props.onValue = `
     console.log('slider ' + id + ' changed: ' + value)
     `;
     return props;
     }
     ```
   - This allows the parent matrix to detect changes in the child sliders within the fragment.

By following these steps, you can effectively intercept and alter messages sent from the matrix.

# Usage of Fragments to Pass Properties

## Problem Description
Users are seeking guidance on how to effectively use fragments in Open Stage Control to share code across multiple instances while passing different parameters. Specifically, there are questions regarding the correct format for the `props` parameter when loading a fragment, and issues arise when properties do not seem to update as expected.

## Solution
To use fragments and pass properties correctly:

1. **Fragment Setup**:
   - Ensure that the fragment file is saved with the fragment mode enabled for updates.
   - The fragment should contain one panel under the root widget that encompasses all child widgets.

2. **Passing Properties**:
   - When using a matrix to load a fragment, the properties should be structured as follows:
     ```json
     {
       "file": "fragmentSample.json",
       "props": { "variables": { "fragment_id": "test" } }
     }
     ```
   - For a single fragment, the correct format to pass properties is:
     ```json
     {
       "variables": { "fragment_id": "test" }
     }
     ```

3. **Overriding Properties**:
   - Any property can be overridden, but this only affects the fragment's top-level widget. For example:
     ```json
     {
       "id": "foo",
       "colorWidget": "red",
       "variables": {"a": 1, "b": 2}
     }
     ```
   - Overriding the `variables` property allows nested widgets in the fragment to utilize these variables using the syntax `@{parent.variables.a}`.

4. **Saving Fragments**:
   - It is important to save the fragment using the Save command for changes to take effect. Using the Export option from the Session menu may not apply the updates correctly.

For further reference, the following attachments contain examples of the discussed configurations:
- [Attachment: 2yaYd2wXAbpV1zJJdo2ggmDl5Rj.json]
- [Attachment: 7KA3b51Flgk1AsgC1UD3xnEnl3b.json]
- [Attachment: 7yMVmd4ckBqP7AIYdKSqQ2Kg29a.json]
- [Attachment: n3Baa2DF9qrDSGgOTjKH8ZLsvss.json]
- [Attachment: 3qSXWKAc4S7XC8XBXOisEV0QecW.json]
- [Attachment: zNHfjytm2FBN9l9uXYlOSofXD2s.json]

# Scripting MIDI Control Changes Based on Dropdown Selection

## Problem Description
You need to configure a setup where nine buttons send MIDI Control Changes (CCs) based on the selected value of a dropdown. Each dropdown value corresponds to a different MIDI channel and a range of CC numbers.

## Solution
To achieve this efficiently, follow these steps:

1. Set each button's properties:
   - **on**: Set to its rank (1 to 9).
   - **mode**: Set to `tap`.
   - **linkId**: Assign a common identifier (e.g., `some_id`).

2. Create a script widget with the same `linkId` to receive the button values. Use the following script:

   ```javascript
   var dropdownMap = {
     1: {ch: 7, cc: 9},
     5: {ch: 2, cc: 55},
     // Add additional mappings as needed
   };
   var data = dropdownMap[get('dropdown_id')];
   if (data) {
     send('midi:port', '/control', data.ch, data.cc + value - 1, 127);
   }
   ```

This script maps the dropdown values to specific MIDI channels and CC numbers, allowing for a streamlined and efficient configuration.

# Issue with stateGet Triggering Value Change

**Problem Description:**
The `stateGet` function appears to trigger a value change for widgets, similar to `stateSet`. This behavior occurs when the state is stored in the `onCreate` method and includes child widgets. Specifically, retrieving the state of a panel from its `onCreate` method results in value changes for all child widgets, likely due to load timing issues.

**Solution:**
This issue has been resolved in version 1.25.5 of Open Stage Control. Users experiencing this behavior should upgrade to this version or later to avoid the unintended triggering of value changes by `stateGet`.

[Attachment: test.json]  
[Attachment: stategettest.json]  
[Attachment: xWzV4DP3nXIKfkJq9AnYlyFjjqa.json]

[Attachment: uDHP1SC9HgTr5U1omwRfpLBZUsZ.json]

# How to Retrieve Data from a Shell Program in Open Stage Control

To execute a shell program, capture its output, extract a floating-point value, and send this value via OSC in Open Stage Control, follow the steps below.

## Problem Description
On Windows 11, executing a shell command to read a value from a UNI-T Multimeter on COM1 may yield unexpected floating-point results. For example, the command may return values like `5.059999942779541` instead of the expected `5.06`.

## Solution
Use the following custom script in Open Stage Control to execute the shell command and handle the output correctly:

```javascript
const execSync = nativeRequire('child_process').execSync;

module.exports = {
    oscInFilter: function(data) {
        const { address, args, host, port } = data;

        if (address === '/read') {
            const str = execSync(__dirname + '\\sigrok-cli.exe -d uni-t-ut61e-ser:conn=\\\\.\\COM1 -O analog --samples 1');
            const result = str.toString();
            const words = result.split(' ');
            const value = parseFloat(words[1]);
            send(host, port, '/reading', { type: "f", value: value });
            return; // bypass original message
        }
        return { address, args, host, port };
    },
};
```

### Notes
- The floating-point precision issue is a known characteristic of how floating-point numbers are represented in programming, and it does not indicate an error in the script.
- Ensure that the `sigrok-cli.exe` is correctly located in the specified directory.

### Attachments
- [Attachment: 6jlNwygkBuzt3ggRCtL3h0YFx8K.js]
- [Attachment: 8rv5qWusCEaRqwlbER6Cr0gMBBK.json]

# How to Use the XY Pad in Open Stage Control

## Problem Description
Users may encounter issues when configuring the XY pad to send MIDI messages, particularly when trying to output values for both axes. The error arises because the XY pad outputs two values, but the `/control` command expects only three arguments (channel, control number, and value).

## Solution
To properly configure the XY pad, follow these steps:

1. **Use the Widget's Scripting Property**:
   - In the latest versions, replace the old "script" property with the "onValue" property found under the "scripting" tab.
   - Implement the following code in the "onTouch" or "onValue" section:
     ```javascript
     var x = value[0];
     var y = value[1];
     send('midi:MIDIMIDI1', '/control', 9, 5, x);
     send('midi:MIDIMIDI1', '/control', 9, SOME_OTHER_CC, y);
     ```

2. **Adjust Widget Properties**:
   - Ensure that the `target` property of the widget is empty to prevent default messages from being sent.
   - The `preArgs` property is not necessary when using the `send()` command and can be left empty.

3. **MIDI Mapping in DAWs**:
   - If you experience issues with MIDI mapping (e.g., both X and Y values being sent on the same CC), disable one line of the send command temporarily to map each axis separately.

By following these steps, you should be able to successfully configure the XY pad to send distinct MIDI messages for both axes.

[Attachment: image]  
[Attachment: image]  
[Attachment: Screen Shot 2022-05-02 at 11.38.28 PM]

# Buttons in Different Tabs

**Problem Description:**
A user wants to trigger different behaviors for a set of physical buttons based on the selected tab in Open Stage Control. Specifically, they need to link 24 physical buttons to virtual buttons in different tabs, where each tab selection would correspond to a different OSC address.

**Solution:**
To achieve this, reference the value of the tab's parent in the OSC address of the buttons. For example, if you have a panel named `panel_1` containing `tab1` and `tab2`, `panel_1` will have a value of 0 when `tab1` is selected and 1 when `tab2` is selected. You can access this value using `@{panel_1}`.

In the address field of your button, append this reference to your base address. For instance:

```
/my/button/address/@{panel_1}
```

This setup allows the OSC address to change based on the currently selected tab, enabling different behaviors for your physical buttons.

# Loading a Session with an OSC Message

## Problem Description
Users have inquired about the ability to load a session in Open Stage Control using an OSC message that specifies the path to a .json file. This feature would facilitate automatic session loading when integrating with other software like Max or Ableton Live. Additionally, there are issues with saving sessions after loading them via OSC, particularly regarding path restrictions related to the `remote-root` setting.

## Solution
Currently, Open Stage Control does not support loading a session directly via an OSC message. However, this feature has been acknowledged for potential future implementation as a remote control command.

### Saving Sessions
To save a session after it has been loaded using OSC, ensure that the `remote-root` option is correctly set. The error message "could not save, path outside of remote-root" indicates that the file path you are trying to save to is outside the designated `remote-root` folder. 

- **Setting Remote Root**: Define your `remote-root` to a folder where you have permission to save files, such as your Dropbox folder.
- **Saving on macOS**: Use the full path format without the `~/` shortcut, for example:
  ```
  /Users/mathieuchamagne/Dropbox/OpenStageControl/mes-exemples/O-S-C_Max_examples.json
  ```
- **Saving on Windows**: Ensure you are using the correct path format that adheres to Windows conventions. UNIX-style paths may not work.

### Additional Notes
- For external drives on macOS, the full path typically starts with `/Volumes/`.
- If you encounter issues saving on Windows, verify that the path adheres to Windows file path standards.

For further assistance, please refer to the attached images for error messages and path examples. [Attachment: image1.png] [Attachment: image2.png]

# Different Button Background When On/Off

**Problem Description:**
Users may want to set different backgrounds for buttons in Open Stage Control to visually indicate their state (on/off). This functionality was available in version 0 but needs to be confirmed for current versions.

**Solution:**
To achieve different backgrounds for button states, you can use the following CSS code:

```css
:host {
    background-color: default;
    color: white;
    text-transform: none;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAAK0DAACtAwGwAEtUAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1zbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAzLTEzVDEzOjAwOjIzKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wMy0xM1QxMzoyNjoxMyswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wMy0xM1QxMzoyNjoxMyswMjowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MTZmNGU1Ny0yZDdlLTRiMWUtOGVmMC03MDZhZDY2NzljZTIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3NmZiODFiMi04YWRhLTBhNDAtOGUzOS1jMjBkYjE3NWJlYTQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplMjZhODVkMy1kNDJlLTQ2ZmMtYWY5My01OGMyNDY3NmU2NjciPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmUyNmE4NWQzLWQ0MmUtNDZmYy1hZjkzLTU4YzI0Njc2ZTY2NyIgc3RFdnQ6d2hlbj0iMjAyMC0wMy0xM1QxMzowMDoyMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MTZmNGU1Ny0yZDdlLTRiMWUtOGVmMC03MDZhZDY2NzljZTIiIHN0RXZ0OndoZW49IjIwMjAtMDMtMTNUMTM6MjY6MTMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5rj+OHAAADLElEQVR42u3agQmAMBAEQV/Sf8tnCSryJMGZEk5YPmAlOQB2cJoAECwAwQIEC0CwAAQLECyANQ0TwCN+WOxXLiwQK09CAMECECxAsAAEC0CwAMECECwAwQIEC0CwAMECECwAwQIEC0CwAAQLECwAwQIQLECwAAQLQLAAwQIQLADBAgQLQLAABAsQLADBAhAsQLAABAtAsADBAhAsAMECBAtAsADBAhAsAMECBAtAsAAECxAsAMECECxAsAAEC0CwAMECECwAwQIEC0CwAAQLECwAwQIQLECwAAQLQLAAwQIQLADBAgQLQLAABAsQLADBAhAsQLAABAtAsADBAhAsAMECBAtgjmECuFUmcGEBCBYgWACCBSBYgGABzOC3hn3EBO3K/svu78ISK+zvSQggWIBgAQgWgGABggUgWACCBQgWgGABCBYgWACCBSBYgGABCBaAYAGCBSBYAIIFCBaAYAEIFiBYAIIFIFiAYAEIFoBgAYIFIFiAYAEIFoBgAYIFIFgAggUIFoBgAQgWIFgAggUgWIBgAQgWgGABggUgWACCBQgWgGABCBYgWACCBSBYgGABCBaAYAGCBSBYgGABCBaAYAGCBSBYAIIFCBaAYAEIFiBYAIIFIFiAYAEIFoBgAYIFIFgAggUIFoBgAQgWIFgAggUgWIBgATQaJthCmcD+uLAAwQIQLECwAAQLQLCA/3nzW0PM1a7sb3/7f7+wfKy57G9/PAkBwQIQLECwAAQLQLAAwQIQLADBAgQLQLAABAsQLADBAhAsQLAABAtAsADBAhAsAMECBAtAsAAECxAsAMECECxAsAAEC0CwAMECECxAsAAEC0CwAMECECwAwQIEC0CwAAQLECwAwQIQLECwAAQLQLAAwQIQLADBAgQLQLAABAsQLADBAhAsQLAABAtAsADBAhAsQLAABAtAsADBAhAsAMECBAtAsAAECxAsAMECECxAsAAEC0CwAMECECwAwQIEC0CwAAQLECwAwQIQLGA/lcQKgAsLQLAAwQIQLADBAgQLQLAABAsQLADBAhAsQLAABAtAsADBAhAsgBsXvigUWGljmWQAAAAASUVORK5CYII=');
    background-position: center center; 
    background-size: 95%; 
}

.on {
    background-color: orange;
    background-position: center center; 
    background-size: 95%; 
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlwSFlzAACtAwAArQMBsABLVAAAAd1QTFRFR3BMOz9FPD5FOz5FOz9FOz9FOz9FOz9FNjo/Oz9FREdLOz9FOz9FOkBEOz9FOz9FOz9FOz9FP0FGOz9FOz9FOz9FOj9FOz...');
}
```

This code defines the default and active states for the button, allowing you to customize the appearance based on its state. Adjust the `background-color` and `background-image` properties as needed.

[Attachment: tmIeqX9cqdDbXi8rLxyLvLmUolN.json]

# Reuse Script in Multiple Widgets

**Problem Description:**
The user wants to close a parent modal based on the value of a toggle widget when pressing buttons inside the modal. They are looking for a way to avoid repeating the script for each button.

**Solution:**
To avoid repeating the script in each button widget, follow these steps:

1. Place a script widget inside the modal.
2. In the script widget, use the following code in the `onValue` section:
   ```javascript
   if(get("closemodal") === 1) {
       set("parent", 0);
   }
   ```
3. Set the `linkId` of the script widget to `<< closeLink`.
4. For all other widgets that should close the modal when interacted with, set their `linkId` to `>> closeLink`.

This approach allows the script to be reused without duplication across multiple widgets.

# Displaying Vertical Text in Switches

**Problem:**
Users want to display text vertically in switches using Open Stage Control. Attempts to use HTML code within the widget only affected the text directly specified in the HTML, without impacting the labels defined in the switch's values.

**Solution:**
To display vertical text in switches, apply the following CSS property:

```css
value {
  writing-mode: vertical-rl;
  transform: rotate(180deg); /* Use this to adjust the text direction if needed */
}
```

This will allow the text to be displayed vertically, and the `transform` property can be used to modify the orientation if left-to-right direction is desired. 

[Attachment: image.png]

# Calculations using VAR{} values

When attempting to perform arithmetic operations with `VAR{}` values in Open Stage Control, it can be challenging as these variables may behave like strings rather than numbers. This can lead to unexpected results when trying to add or manipulate them directly.

## Problem
The issue arises when trying to add two `VAR{}` values that are intended to be integers. Instead of performing numerical addition, the operation treats the values as strings, resulting in concatenation rather than arithmetic addition.

## Solution
To ensure that `VAR{}` values are treated as numbers during calculations, you can use the JavaScript `Number()` function to convert them. The corrected approach for adding two `VAR{}` values is as follows:

```javascript
var calc = Number(VAR{"custom_variable1"}) + Number(VAR{"custom_variable2"});
```

This conversion ensures that the values are treated as numbers, allowing for proper arithmetic operations.

# Integrating LiveOSC2 with Open Stage Control

## Problem Description
Users want to merge the functionality of LiveOSC2 with Open Stage Control (O-S-C) to enhance their Ableton Live experience. LiveOSC2 is recognized as a Control Surface in Ableton 10, but there are challenges in configuring the ports and ensuring communication between LiveOSC2 and O-S-C.

## Solution
To successfully integrate LiveOSC2 with O-S-C, follow these steps:

1. **Port Configuration**:
   - LiveOSC2 uses the following default ports:
     - `remotehost = '127.0.0.1'`
     - `remoteport = 9000`
     - `localhost = '127.0.0.1'`
     - `localport = 9001`
   - O-S-C listens on port 8080 by default. You need to change either LiveOSC2's `remoteport` to 8080 or configure O-S-C to use port 9000 to ensure they match.

2. **Communication Setup**:
   - Ensure that O-S-C widgets that need to communicate with LiveOSC2 send messages to `127.0.0.1:9001`. This can be done by setting the widget's `target` property or using the server's "send" option.

3. **Data Type Configuration**:
   - LiveOSC2 may require specific argument types (e.g., float vs. int). Configure O-S-C widgets to send integers when necessary by setting `typeTags` to `i`.

4. **Example Implementations**:
   - To control the master volume:
     ```json
     {
       "address": "/live/master/volume",
       "preArgs": [1],
       "target": "127.0.0.1:9001"
     }
     ```
   - To create a LED feedback when the fader is moved:
     ```json
     {
       "address": "/live/master/volume",
       "preArgs": [0]
     }
     ```
   - To play a clip:
     ```json
     {
       "address": "/live/clip/play",
       "preArgs": [0, 0],
       "target": "127.0.0.1:9001"
     }
     ```
   - To stop a clip:
     ```json
     {
       "address": "/live/clip/stop",
       "preArgs": [0, 0],
       "target": "127.0.0.1:9001"
     }
     ```

5. **Dynamic Feedback**:
   - If you want to implement dynamic feedback from LiveOSC2, ensure that the relevant listeners in the LiveOsc.py file are correctly configured to send updates to O-S-C.

By following these guidelines, users can effectively merge LiveOSC2 with Open Stage Control, enhancing their control over Ableton Live.

[Attachment: OSCAPI.txt]

# Sending Polyphonic Aftertouch via Coordinates on Button or Keyboard Widget

**Problem Description:**
The user is interested in sending polyphonic aftertouch using coordinates on a button or keyboard widget in Open Stage Control. They envision a setup similar to the Buchla Easel keys, where sliding a finger on a key or button could generate polyphonic aftertouch for expressive control. The user seeks to understand if this behavior can be achieved while omitting aftertouch on the keys.

**Solution:**
You can achieve this functionality using the canvas widget in Open Stage Control. The canvas allows for more complex interactions, including sending polyphonic aftertouch based on finger position.

To implement this:
1. Utilize the canvas widget to create a pressure plate response.
2. Use the `ontouch` script to handle touch events. Specifically, you can use the `start` event to send a MIDI 'on' note when the canvas is first touched, and the `stop` event to send an 'off' note when releasing the canvas.
3. Ensure that the MIDI note is only triggered on the initial touch and release, rather than on every movement across the canvas.

For further exploration, refer to the example JSON provided in the canvas topic for guidance on setup.

[Attachment: example.json]

# Creating a Keyboard Widget for OSC and MIDI Sound Generation

## Problem Description
Users want to create a keyboard widget in Open Stage Control that not only sends OSC signals but also generates MIDI sounds, allowing students to hear their own instrument playbacks independently from the main output.

## Solution
Open Stage Control does not natively generate audio. However, you can achieve audio feedback for each student by using a combination of OSC to MIDI conversion and virtual MIDI ports. Here are the steps to set this up:

1. **Set Up Virtual MIDI Ports**: Create virtual MIDI ports on the server that can receive OSC messages.
   
2. **Configure OSC to MIDI Conversion**: Use a tool that can convert OSC messages to MIDI messages. This can be done using software that supports MIDI over network protocols.

3. **Client Configuration**: Each student should have a client application configured to send OSC messages to the server. Each keyboard widget should be set to send the note played as an OSC message.

4. **Audio Feedback**: Connect the virtual MIDI ports to a software instrument (VSTi) on each student’s machine. This will allow them to hear the sounds generated by their actions on the keyboard.

5. **Optional Local OSC Server**: Alternatively, you can run an OSC server on each student's machine, allowing them to connect directly to a VSTi via virtual MIDI ports.

By following these steps, students will be able to hear their own sounds while playing, providing the necessary audio feedback for their performance.

For further customization, you may explore creating custom modules in Open Stage Control, but this requires editing the app's source code and building it, which may be complex for beginners.

[Attachment: filename.ext] (attachment reference missing)

# Cloning a Modal and Overriding Variables in Child Widgets

## Problem Description
Users may encounter difficulties when attempting to clone a modal in Open Stage Control and override specific variables in the child widgets of the modal. 

## Solution
To successfully clone a modal and override variables, ensure the `props` property of the clone widget is correctly formatted. Use the following structure:

```json
{
  "id": "different_than_target",
  "props": {
    "variables": {
      "puzzelnaam": "NAME2",
      "puzzelId": "ID2Name"
    }
  }
}
```

### Common Errors to Avoid:
- Ensure there is a comma after `"IDNAME"`.
- Verify that there is a closing quote after `"ID2Name"`.
- Include the `id` property to prevent the cloned modal from syncing with the original.
- Avoid using the `widgetId` property, as it is unnecessary for modal widgets.

For further reference, see the attached files: 
- [Attachment: modal_clone_example.json]
- [Attachment: glMwwQrsHfIUel9Gv49bNHVd93e.json]

# Adjusting the Width of the Input Widget's Text Area

**Problem:**  
Users may want to change the width of the text area inside the input widget in Open Stage Control.

**Solution:**  
To modify the width of the text area within the input widget, you can use the `padding` property or adjust the CSS directly. For example, you can set a maximum width using the following CSS rule:

```css
input {
    max-width: 30rem;
}
```

# Translate OSC Message for QLAB Compatibility

**Problem Description:**
A user needs to translate OSC messages from a three-way switch to a format that QLAB can process. The switch outputs an OSC address with appended values (1, 2, or 3), but QLAB does not recognize these appended values. A custom module is required to translate these messages into specific cues.

**Solution:**
To achieve the desired translation, you can create a custom module that filters OSC messages and sends the appropriate cues to QLAB. Below is a sample code snippet to implement this:

```javascript
module.exports = {
  oscOutFilter: function(data) {
    var {address, args, host, port} = data;

    if (address == '/cue/Switch/start') {
      // Construct the address using the switch's value and send a message with no value
      send(host, port, '/cue/Switch' + args[0].value + '/start');

      // Bypass the original message
      return;
    }

    return data;
  }
}
```

This code checks if the OSC address matches `/cue/Switch/start` and sends a new OSC message to QLAB based on the switch's value.

# Remote Setting of Range Slider

## Problem Description
Users are experiencing difficulties when attempting to set both values of a range slider remotely using the command `receive('/SET', "range_matrix/0_val_rslider", 1, 1200)`. The command only sets the first value, and there are questions about the behavior of similar commands for canvas values as well.

## Solution
To set both values of a range slider, ensure you are using the correct command format. The `/SET` command is designed to simulate user interaction, which means it should ideally update both values with a single message. However, if you encounter issues, you can send messages that match the widget's address and preArgs directly, similar to how the widget would send its own messages during interaction.

If you are facing circular update issues (where one input erases the value of another), this is a known problem with the range slider's design. In such cases, consider the following:

1. **Avoid Circular Updates**: Ensure that the range slider does not trigger updates that conflict with each other.
2. **Simplify Scripting**: Remove any advanced syntaxes (e.g., `@{}` calls) from scripting properties, as they may lead to unexpected behaviors. Use simple identifiers where possible.
3. **Fragment Considerations**: If your slider is within a fragment, advanced syntax usage is acceptable, but be cautious of how values are resolved within the fragment's scope.

For further assistance, you may refer to the attached session files for specific configurations:
- [Attachment: seeds_and_ledgers_gui.json]
- [Attachment: env.json]
- [Attachment: dur_probs_panel.json]
- [Attachment: slider.json]
- [Attachment: range_slider.json]
- [Attachment: custom_module.js]
- [Attachment: 9GIyZeVRSuyj3P7lwCt4f2s48dB.json]
- [Attachment: siu074wD6vr6CoGTT1Pd2rbPEVg.json]
- [Attachment: fQvLZlhGlevOYK5EYYwOmdwoptq.json]
- [Attachment: 5SDeP8yEkXqBe9hU44kXzK2FSvB.json]
- [Attachment: mJS2ZJr06lrnFEMQzvJ7Yo8NWrC.json]
- [Attachment: jZ71wSIzIn44GinD5RIrg2XQfJe.js]

# De-selecting Switch in Open Stage Control

## Problem Description
Users may encounter difficulty in resetting a switch to its default unselected state without altering the label/value mapping. Specifically, sending a value from a custom module may not update the switch widget as expected.

## Solution
To reset a switch to its unselected state, use the `set()` function in your script with the parameter `sync: false`. This method effectively updates the widget without interfering with the existing label/value mapping.

Example code:
```javascript
set("/switch_real_value", -1, {sync: false});
```

This approach ensures that the switch reflects the desired state accurately.

# How to Set Up an XY Pad in Open Stage Control

## Problem Description
Users may encounter an error when attempting to set up an XY pad to control parameters in Ableton. The error message is: `TypeError: midi_message() takes from 2 to 4 positional arguments but 5 were given`. This indicates an issue with the way MIDI messages are being sent from the XY pad.

## Solution
To successfully configure an XY pad to send MIDI Control Change (CC) messages, use the following code in the `onValue` property of the XY pad:

```javascript
send('midi:device_name', '/control', 1, 1, value[0])
send('midi:device_name', '/control', 1, 11, value[1])
```

This code will send CC messages on channel 1, where:
- `value[0]` corresponds to the X-axis,
- `value[1]` corresponds to the Y-axis.

Make sure to replace `device_name` with the actual name of your MIDI device. This approach is straightforward and effective for controlling two parameters simultaneously in Ableton.

# Advanced Property Syntax for Widgets

## Problem Description
A user is attempting to change the color of a LED widget using its own value with the syntax `color: @{this.value}`. However, the LED's value is resolved to a number, which prevents the color from being set correctly.

## Solution
To effectively change the color of a LED widget based on its value, consider the following approaches:

1. **Use an Input Widget**: Create an input widget that holds the desired color value. You can then retrieve this value using the syntax `@{input_id}`.

2. **Use OSC Listener Syntax**: Alternatively, you can utilize the OSC listener syntax to manage the color changes.

These methods allow for greater flexibility in controlling the LED's color without conflicting with its intensity settings.

# FA Button Icon Vertical Alignment

**Problem:**  
Users may encounter difficulty aligning the icon of a button to the upper part of the button when using Open Stage Control. The syntax used for the label, such as `^play.2xl`, does not yield the desired vertical positioning.

**Solution:**  
To achieve the desired vertical alignment of the button icon, you can use custom CSS. Add the following CSS code in the CSS field:

```css
label {
  display: block;
  padding-top: 20rem; /* Adjust the value as needed */
}
```

Alternatively, if you require the icon to be positioned with padding at the bottom instead, you can use:

```css
label {
  display: block;
  padding-bottom: 20rem; /* Adjust the value as needed */
}
```

Adjust the padding values according to your specific layout requirements.

# Setting the Values Property of a Switch Widget

## Problem Description
When attempting to update the `values` property of a switch widget using a script, the expected changes do not occur. The goal is to modify the `values` of `Switch2` based on the selection of `Switch1`, which represents a main category.

## Solution
The issue arises from confusing the widget's value with its `values` property. The `set()` function can only be used to change the widget's value, not its `values` property. 

To achieve the desired functionality, consider the following approaches:

1. **Using OSC**: If you need to send the entire object via OSC when the main category changes, continue using OSC for updates.

2. **Using a Variable Widget**: Instead of directly modifying `Switch2`'s `values`, create a variable widget to hold the selected value from `Switch1`. You can change this variable using `set()`, and retrieve it using the `@{}` syntax.

This approach allows for dynamic updates without directly modifying the `values` property of `Switch2`.

# Setting Widget Properties in Open Stage Control

## Problem Description
Users may want to change properties of widgets, such as labels or visibility, from scripts in Open Stage Control. The `set()` function only sets a widget's value, while `getProp()` retrieves properties, but there is confusion about how to modify properties directly. The suggestion of a `setProp()` function has been made, but it is not implemented.

## Solution
As of version 1.9.4, you can modify widget properties using the `VAR{}` syntax. Here’s how to do it:

1. Define a property using the `VAR{}` syntax in the widget's properties. For example:
   ```javascript
   VAR{foo, 1}
   ```
   Here, "foo" is the name of the property, and "1" is the default value.

2. To change the value of this property from a script, use the `setVar()` function:
   ```javascript
   setVar('widget_id', 'foo', 2)
   ```

3. To manage visibility and interaction, you can set properties like this:
   - In the widget:
     ```javascript
     VAR{visible, true}
     VAR{interaction, true}
     ```
   - In a script:
     ```javascript
     setVar('fader_1', 'visible', false)
     setVar('fader_1', 'interaction', false)
     ```

4. To retrieve the current value of a property, use:
   ```javascript
   console.log(getVar('fader_1', 'visible'))
   ```

**Important Notes:**
- Do not use `@{}` in scripts; instead, use `get()` or `getProp()`.
- Ensure there are no quotes in the `VAR{}` syntax as it does not follow standard JavaScript conventions.

For further reference, see the attached files for examples and additional context. 

[Attachment: filename.ext]

# Using "split" Function Inside a Widget

## Problem Description
When attempting to use the `split` function in a widget's `colorFill` field, the following code breaks:
```javascript
var myVariable = myVariable.split(".")[0]
```
The user is unable to determine the cause of the issue.

## Solution
The issue arises when the variable being split is not a string. To ensure the `split` function works correctly, convert the variable to a string before using it. The corrected code for the `colorFill` property is as follows:

```javascript
JS{{
var qlab_num = @{cueNumber.value}
var gp_num = @{gp_song_index.value}

var qlab_split = String(qlab_num).split(".")[0] // Convert to string

if (String(gp_num) === qlab_split) { // Convert both variables to string for comparison
   return "green"
} else {
   return "yellow"
}
}}
```

This ensures that both `qlab_num` and `gp_num` are treated as strings, allowing for accurate comparisons and preventing errors.

# Set Multiple Widgets' Prop to the Value of a Global Variable

**Problem:**
The goal is to disable the interaction property for multiple widgets based on the value of a global variable without manually adding each widget to a script.

**Solution:**
To achieve this, follow these steps:

1. Create a variable widget named `setInteraction`.
2. For each widget you want to control, set the interaction property to `@{setInteraction}` instead of using direct values (1 or 0).
3. Changing the value of `setInteraction` will simultaneously update the interaction property for all linked widgets.

This method allows for efficient control of multiple widgets through a single global variable.

# Triggering Scripts to Send MIDI / OSC from Bitwig

**Problem Description:**
When a button with a script is triggered via mouse interaction, it successfully changes color, sends MIDI, and sends an OSC message. However, when the button is activated via OSC from Bitwig, it only changes color and does not send MIDI or OSC messages. 

**Solution:**
The `send()` function does not execute when the event triggering the script is not a user interaction. To enable OSC to send replies to incoming messages, you need to create a custom module. For more details, refer to the Scripting section in the Open Stage Control documentation and review the provided examples. 

[Attachment: Loom video demo]

# Execute Script When Pressing the Already Selected Button of a Switch

**Problem Description:**
When tapping the last selected item on a switch in Open Stage Control, the associated script does not re-execute. Users are looking for a way to change this behavior.

**Solution:**
To enable the re-execution of the script when the already selected button is pressed, you can use the `set('this', 0)` command at the end of your script. Additionally, modify the `onValue` property of the switch to include logic that allows for re-triggering. Here’s an example of how to implement this:

```javascript
// Example onValue property for the switch
var channel = 16;
var velocity = 127;
var note = value;
var cc = 110;

send('midi:Logic', '/note', channel, note, 127);
send('midi:Logic', '/note', channel, note, 0);
send('midi:Logic', '/control', channel, cc, value);

// Enable multiple taps
setTimeout(reset, 1000);
function reset() {
  set("this", -1, {send: false});
}
```

In this setup:
- The `setTimeout` function is used to reset the switch state after a short delay, allowing it to be activated again.
- Setting the value to `-1` ensures that the first switch does not start out active.

This approach effectively allows the switch to be re-triggered even when the same button is pressed consecutively.

# How to Hide Tabs in Open Stage Control

**Problem Description:**
Users may want to hide tabs in Open Stage Control, but previous methods that worked in beta versions may not function in the current version.

**Solution:**
To effectively hide tabs, use the following CSS code:

```css
inner > .navigation {
  display: none;
}
```

This code will successfully hide the navigation tabs in the current version of Open Stage Control.

# Toggle Color Issue

When attempting to change a toggle's background color based on its on/off state, the following code does not work:

```css
:host {
–color-raised: blue;
}
.value.on {
–color-raised: red;
}
```

Additionally, this alternative approach also fails:

```css
.value {
–color-raised: blue;
}
.value.on {
–color-raised: red;
}
```

## Solution

The issue arises from using a long dash character (–) instead of two dashes (--). Furthermore, the selector `.value.on` does not target the correct element. The correct implementation is as follows:

```css
:host {
  --color-raised: blue;
}
:host.on {
  --color-raised: red;
}
``` 

Ensure that the dashes are correctly formatted to avoid issues with color changes.

# Sending a Floating Decimal Number via OSC

When attempting to send a floating decimal number (e.g., 0.5) to a lighting console, you may encounter issues if the console only accepts integer values (0 or 1).

## Problem Description
You need to send the value 0.5 to a lighting console using OSC, but it appears that the console only accepts integer values.

## Solution
You can send the floating point number directly as you have done in your code. Ensure that the console is capable of receiving decimal values. To verify what Open Stage Control is sending, enable the server's debug option.

Here is a sample code snippet for sending the value:

```javascript
if (address == '/warmupdinner') {
    send('10.10.50.234', '8000', '/exec/7/26', 1); // dinner ambra
    send('10.10.50.234', '8000', '/exec/7/81', 1); // no fx
    send('10.10.50.234', '8000', '/exec/7/91', 0.5); // luce bianca
    send('10.10.50.234', '8000', '/feedback/pb+exec');
    return; // bypass original osc message
}
```

Make sure to confirm whether the lighting console can accept decimal values.

# Embedding SVG Shapes in Widget CSS

## Problem Description
Users may encounter issues when attempting to embed SVG shapes directly into a widget's CSS background using data URLs. Specifically, certain characters in SVG code, such as "#", may not render correctly, leading to a failure in displaying the intended graphic.

## Solution
To successfully embed an SVG shape in Open Stage Control, follow these guidelines:

1. **Avoid Special Characters**: Ensure that your SVG code does not include characters that may cause rendering issues in CSS backgrounds.

2. **Use External SVG Files**: Instead of embedding SVG code directly in the CSS, save the SVG as an external file and reference it in your CSS. For example:
   ```css
   :host {
       background-image: url('filename.svg');
       background-repeat: no-repeat;
       background-position: 50% 40%;
       background-size: 22%;
       background-color: #111111;
   }
   ```

3. **Explicit Definition**: When defining SVG shapes, ensure that they are explicitly defined without using `<use>` tags, as this may lead to rendering issues.

By following these steps, you can effectively embed SVG shapes in your widget's CSS without encountering rendering problems. 

[Attachment: filename.ext]

# Receiving OSC Array from Reaktor

**Problem Description:**
Users are experiencing difficulties in sending an OSC array from NI Reaktor to an Open Stage Control (OSC) matrix object. The goal is to have the matrix sliders respond to incoming array values from Reaktor, where each value in the array corresponds to a specific slider.

**Solution:**
To achieve this, you can use a script widget in Open Stage Control to receive the OSC array and dispatch the values to the matrix sliders. Follow these steps:

1. Ensure that your OSC properties are set so that the script widget receives messages in the format `/myArray v1 v2 v3 ...`.

2. In the `onValue` property of the script widget, implement the following code:

   ```javascript
   if (Array.isArray(value)) {
     for (var i in value) {
       set('matrix_1/' + i, value[i]);
     }
   }
   ```

This script checks if the incoming value is an array and iterates through it, setting each corresponding matrix slider to the respective value from the array. This method effectively maps the values from the OSC array to the individual sliders in the matrix. 

By using this approach, you can efficiently control multiple sliders without needing to set each one individually.

# Knob Display Value and MIDI Send Issue

When using a knob to display sync time divisions (e.g., '1/32', '1/16'), the value changes from 0 to 127 can cause incorrect display of the time division.

## Problem
The main issue arises because:
- The array `division` contains only 10 elements (indices 0 to 9), while the value can range from 0 to 127.
- The value may not be an integer, which is required for array indexing.

## Solution
To correctly map the value to the `division` array, use the following code:

```javascript
var division = ["8/1", "4/1", "2/1", "1/1", "1/2", "1/4", "1/8", "1/16", "1/32", "1/64"];
set("speedsync_mon_1", division[Math.round(value / 127 * 9)]);
```

### Important Notes:
- Ensure that `Math` is capitalized when using the `Math.round` function.
- If you want to send a different value from the range, you may need to call `send()` to update the text widget accordingly.

If you encounter issues with the `Math.round` function, you may try removing it, as it has been reported to work in some cases. 

[Attachment: Button_Sync.json]  
[Attachment: 3mPULT1o9QPKQOLad8eMo3If2gy.json]

# Reusing a Function in Open Stage Control

## Problem Description
Users may encounter difficulties when trying to reuse a function in Open Stage Control, particularly when defining functions within the `onTouch` script of a canvas. A common example is a Euclidean distance function that is repeatedly defined, leading to inefficiencies.

## Solution
To efficiently reuse a function, you can declare it in the `onCreate` method. Here are the steps:

1. **Declare the Function in `onCreate`:**
   - For local usage within a specific widget, use:
     ```javascript
     locals.eucDistance = function(p1, p2) {
       var a = p1[0] - p2[0];
       var b = p1[1] - (1 - p2[1]);
       return Math.sqrt(a * a + b * b);
     }
     ```
   - For usage across multiple widgets, declare it globally in the root's `onCreate`:
     ```javascript
     globals.eucDistance = function(p1, p2) {
       var a = p1[0] - p2[0];
       var b = p1[1] - (1 - p2[1]);
       return Math.sqrt(a * a + b * b);
     }
     ```
   - Note that functions declared in the root's `onCreate` execute after their children have been parsed. To avoid errors when using these functions in other `onCreate` scripts, consider declaring the global function in a script widget instead.

2. **Using the Function:**
   - In your `onTouch` script, you can call the function as follows:
     ```javascript
     var d = locals.eucDistance(p1, p2); // for local function
     // or
     var d = globals.eucDistance(p1, p2); // for global function
     ```

3. **Variable Scope:**
   - The `globals` object is shared across all scripts and is independent of the widget structure. If you need widget-scoped variables, use `setVar()` and `getVar()`:
     ```javascript
     // Define in some onCreate script
     setVar(this, 'foo', function() {
       // do something
     });

     // Call somewhere else
     getVar('widget_id', 'foo')(); // 'widget_id' is the id of the widget that called setVar
     ```

By following these guidelines, you can effectively reuse functions in Open Stage Control without redefining them multiple times. 

[Attachment: functions-globals-locals.json]  
[Attachment: 5a3tZ3HWLwkRrZSqr6eHJ38Xb34.json]

# Sending Various CC on Different MIDI Channels with a Unique Switch

**Problem Description:**
The user wants to configure a switch to send different Control Change (CC) messages on multiple MIDI channels. Specifically, the user aims to send:
- Value 1 → CC25 on channel 1
- Value 2 → CC75 on channel 4
- Value 3 → CC122 on channel 16

The user is uncertain whether this can be accomplished through the editor's menus or if a script is required.

**Solution:**
To achieve this functionality, refer to the guidance provided in the response to a related question about sending CC messages based on value changes. This method will help configure the switch to send different CC messages across multiple MIDI channels effectively.

For detailed instructions, see the following reference:
- Knob: how to send a CC when its value increases, and another CC when its value decreases? - #3 by jean-emmanuel

(attachment reference missing)

# Setting Button Labels via OSC in Open Stage Control

**Problem Description:**
Users may encounter difficulties in updating button labels through OSC messages. While sending string messages to button IDs, the labels do not update as expected. This issue often arises due to incorrect configuration of the button settings, particularly when the button is set to send MIDI CC messages.

**Solution:**
To successfully update button labels via OSC, follow these steps:

1. **Set the Label Property:**
   - In the button's properties, set the `label` property to use the advanced OSC syntax:
     ```plaintext
     OSC{example}
     ```
   - This allows the button to receive label updates via OSC messages sent to the corresponding address.

2. **Adjust the OSC Message Address:**
   - Ensure that the OSC message is sent to the correct address. For example, if your button ID is `button_1`, the message should be sent to:
     ```plaintext
     /control/example some_string
     ```
   - If you have multiple buttons, create unique addresses for each button's label, such as:
     ```plaintext
     /control/label_button_1
     /control/label_button_2
     ...
     /control/label_button_32
     ```

3. **Consider preArgs:**
   - If your widget has `preArgs`, you may need to include them in your OSC message to ensure proper functionality. For example:
     ```plaintext
     OSC{example, "default label", false}
     ```
   - This allows you to ignore the widget's `preArgs` when sending the OSC message.

By following these guidelines, you should be able to successfully update button labels in Open Stage Control using OSC messages. 

**Note:** If you encounter further issues, consider testing with a new project to isolate any configuration problems. 

[Attachment: image]

# Get scrollHeight to Adjust Textarea Size

## Problem Description
Users are seeking a method to automatically resize a textarea based on its content, specifically by utilizing the `scrollHeight` property. The goal is to achieve an expanding textarea that adjusts its height dynamically as the user types.

## Solution
The `scrollHeight` attribute is not directly accessible in Open Stage Control. Instead, you can calculate the height of the textarea based on the number of lines and the line height. Use the following code snippet in the `onValue` event without a timer:

```javascript
setVar("this", "height", (get("this").split(/\r|\r\n|\n/).length * getVar("this", "line-height") * getVar("this", "font-size")));
```

Ensure that you define `line-height` and `font-size` as custom variables, as they are necessary for the calculation. This approach will allow the textarea to resize appropriately as content is added.

# Storing Matrix Event Type in a Variable Object

## Problem Description
The goal is to store the `event.type` from a matrix object into a variable to determine if a child object is touched. The initial attempts to use `@{myVariable} = p.onTouch` and `set()` resulted in errors and confusion regarding the proper usage of these commands.

## Solution
To effectively store the touch state of a matrix object, use the following JavaScript code within the matrix properties:

```javascript
JS{{
  let p = {};
  p.onTouch = `if (event.type == "start") { set("touchState", 1) } else { set("touchState", 0) }`;
  return p;
}}
```

This approach allows you to utilize the `set()` and `get()` commands correctly within the JavaScript block. You can then retrieve the touch state with:

```javascript
let state = get("touchState");
if (state == 1) {
  // do something
}
```

This method ensures that the touch state is updated based on the `event.type`, allowing for effective control of OSC input based on touch interactions.

# Button with Four Values - Routing Values to Buttons through Script or Module

**Problem Description:**
Creating a step sequencer for Redrum requires buttons that can represent four velocity values: off, soft, medium, and hard. A standard toggle button only supports two values, leading to the need for a more complex solution. The challenge is to avoid creating multiple script widgets for each button (192 in total) while effectively routing MIDI control messages to modify button states and colors.

**Solution:**
1. **Use `receive()` Function:** Instead of using `send()`, utilize the `receive()` function to handle incoming MIDI control messages effectively.

2. **Custom Button Implementation:** Create a custom button using a canvas widget that supports four states. Here is an example of how to implement the button logic:

   ```javascript
   if (event.type == 'start') {
       if (value === 0)
           set('this', 1);
       else if (value === 1)
           set('this', 2);
       else if (value === 2)
           set('this', 3);
       else if (value === 3)
           set('this', 0);
   } else if (event.type == 'stop') {
       if (value === 0)
           set('this', 0);
       else if (value === 1)
           set('this', 1);
       else if (value === 2)
           set('this', 2);
       else if (value === 3)
           set('this', 3);
   }
   ```

3. **Module for Routing:** Create a module that filters incoming MIDI control messages. For example, if the channel and control change (cc) match, forward the value to a script listening on the OSC address `/debug`. This script can then modify the button value, on value, and label based on the received value.

   Example module structure:
   ```javascript
   module.exports = {
       oscInFilter: function(data) {
           var {address, args, host, port} = data;

           if (host === 'midi') {
               if (address === '/control') {
                   var [channel, ctrl, value] = args.map(arg => arg.value);
                   receive('midi', 'loopMIDI', '/debug', {channel, ctrl, value});
               }
               return; // bypass original message
           }
           return {address, args, host, port};
       }
   }
   ```

4. **Attachments:** 
   - [Attachment: wBDHPKDtdvDmkJGqsai9IXrYJyc.json]
   - [Attachment: j8kNiPcIvdaqyVcWir3oMYkGiau.json]
   - [Attachment: uFLo5lbdOols90szgBAhFXAcpBm.js]

This approach allows for efficient management of multiple buttons without the need for numerous script widgets, ensuring a streamlined workflow for the step sequencer.

# Setting a Button Color Based on Value Sent from Cubase

When creating a control surface for Cubase, you may want to change button colors or CSS classes based on the state of the DAW. This allows your control surface to reflect actions taken within Cubase, such as pressing the STOP button.

## Problem Description
You need to set button colors in Open Stage Control based on the feedback received from Cubase. When testing, you observed that clicking the STOP button generates two log entries with the same value of 1. This raises questions about whether the first entry is triggered by your click and the second by a response from Cubase.

## Solution
To achieve dynamic button color changes based on Cubase's state:

1. **Use OSC Messages**: Ensure that Cubase is configured to send OSC messages in response to actions. This typically involves setting up a Generic Remote or MIDI channel in Cubase.

2. **Custom Module**: Implement a custom module in Open Stage Control that interprets the OSC messages from Cubase. This module should be able to change the button's CSS class or color based on the received values.

3. **Log Output**: The two log entries you observed are likely due to the button click triggering an event and Cubase sending a confirmation message back. You can differentiate between these events in your script.

By following these steps, you can effectively synchronize your control surface with Cubase's transport controls. 

For further details on setting up OSC and custom modules, please refer to the Open Stage Control documentation. 

(attachment reference missing)

# Auto-refresh Button Backgrounds in Open Stage Control

**Problem Description:**
When using Open Stage Control with Resolume, the thumbnails for buttons do not update automatically after changes are made to clips in Resolume. The user seeks a method to periodically refresh the button's background style to reflect the latest thumbnails.

**Solution:**
To ensure that the button's background updates automatically, you can implement a timestamp in the URL to force the browser to re-download the asset. Here are the steps to achieve this:

1. **Create a Variable Widget:**
   - Use the following script in the `onCreate` event of the variable widget:
   ```javascript
   setInterval(()=>{
     // Update the variable's value periodically using the current date timestamp
     set(this, Date.now())
   }, 10000 /* ms*/)
   ```

2. **Update the Background URL:**
   - Append the timestamp to the asset URL using the inheritance syntax:
   ```css
   background:url('http://192.168.0.153:1234/api/v1/composition/layers/2/clips/1/thumbnail?t=@{variable_widget_id}');
   background-size: contain; 
   background-repeat: no-repeat;
   background-position: center;
   ```

3. **Alternative Method (Button Click):**
   - If periodic updates are too frequent, you can clear the variable's `onCreate` script and create a button that updates the variable when clicked:
   ```javascript
   // button.onValue
   set('variable_widget_id', Date.now())
   ```

4. **Conditional Background Update:**
   - If the above methods do not work, you can use a conditional script to manage the background update:
   ```javascript
   JS{
   if (@{variable_widget_id} !== 0)
     return "background:url('http://192.168.0.153:1234/api/v1/composition/layers/2/clips/1/thumbnail');"
   else return ""
   }
   background-size: contain; 
   background-repeat: no-repeat;
   background-position: center;

   // Reset the variable to trigger the update
   set(this, 0) // Make the conditional CSS empty
   setTimeout(()=>{
     set(this, 1) // Restore it shortly after
   }, 1)
   ```

By following these steps, you should be able to refresh the button backgrounds in Open Stage Control effectively. 

[Attachment: filename.ext]

# Accessing Array Values in Open Stage Control Scripts

## Problem Description
Users may encounter difficulties when trying to access specific values from an array in Open Stage Control using MIDI input. For example, a user wants to read values from a grid based on a number received from a MIDI channel, but struggles with the script context and variable assignments.

## Solution
To properly access array values and display them based on conditions, follow these steps:

1. **Store Values in Global Variables**: Instead of using `@{SCRIPTNAME}`, which does not return the script's context, store the desired values in a global variable.
   ```javascript
   JS{{
   global.artValue = config[selector]['grid'];
   }}
   ```

2. **Use MathJs for Display Logic**: When using MathJs formulas, remember that they do not have access to the global object. Write your display logic as follows:
   ```javascript
   JS{{return global.artValue[1] == 1 ? "display:flex;" : "display:none;"}}
   ```

3. **Adjust Quotes**: Ensure that you use valid quotes in your JavaScript. Replace double quotes with an empty string if you only want to hide the widget when the condition is not met:
   ```javascript
   JS{{return global.artValue[1] == 1 ? "display:flex;" : "";}}
   ```

By following these guidelines, you can effectively manage and display values from arrays in your Open Stage Control projects.

# Data Type for PureData

**Problem Description:**
A user is trying to send data from Open Stage Control (OSC) to a PureData patch. The goal is to output the current value of a dropdown menu followed by the slider's ID and value. The user is struggling with the correct data types and formatting to ensure that PureData interprets the values correctly.

**Solution:**
To achieve the desired output, the following adjustments can be made:

1. Use the `preArgs` field to send additional values before the final value of the slider. This allows you to send the dropdown value as a float.
   
2. The address field can be simplified. Instead of complex conditions, use:
   ```javascript
   return '/dropdown/' + @{dropdown} + '/slider'
   ```
   or even more simply:
   ```
   /dropdown/@{dropdown}/slider
   ```

3. For sending the actual values, configure the slider as follows:
   - **Address:** `/slider`
   - **preArgs:** `@{dropdown}`

This configuration will send messages in the format:
```
/slider DROPDOWN_VALUE FADER_VALUE
```

By following these steps, the dropdown value will be sent as part of the OSC message, allowing PureData to interpret it correctly as a float.

# How to Set Custom Touch Area for an Element

## Problem Description
Users may want to control a fader on a touchscreen device, utilizing a larger touch area without increasing the range of the fader itself. The challenge is to register touch interactions across a larger area while keeping the fader's value range unchanged.

## Solution
It is not possible to resize the touch area of a fader without also enlarging its range. However, there are two alternative approaches:

1. **Adjust Fader Sensitivity**: Increase the fader's sensitivity to allow for more responsive movement, though touch gestures must still start on the fader itself.

2. **Use a Canvas Widget**: Create a canvas widget of the desired size to capture touch events and then adjust the fader's value accordingly. 

An example configuration for this method can be found in the attached file:
[Attachment: 4vum849i5NT8wGL6l8p022QKi3E.json]

# Accessing Clone Matrix Widget Values in JavaScript

**Problem Description:**
A user needs to retrieve the values of individual toggle widgets within a clone matrix to use them in JavaScript for triggering other widget values. 

**Solution:**
A recent bug has been fixed that allows users to access the values of a clone matrix directly. You can now use the following syntax in a `JS{{ }}` block to reference the matrix:

```javascript
@{matrix_1}
```

Here’s how to implement it:

1. Create a script widget.
2. Set the **value** property to:
   ```plaintext
   @{matrix_1}
   ```
3. Set the **script** property as follows:
   ```javascript
   JS{{

   // "value" is an array containing the matrix' children's values
   // e.g., [0, 0, 0, 1, 0, 1, ...]

   var n_active = value.filter(x => x == 1).length;

   set("input_2", n_active);

   }}
   ```

This script counts the number of active toggles in the matrix and updates another widget (e.g., `input_2`) with this count whenever a widget in the matrix is updated.

For further reference, consult the following documentation:
- [Property Syntax](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/)
- [Script Widget](https://openstagecontrol.ammd.net/docs/widgets-reference/#script)

**Attachments:**
- [Attachment: clone-matrix.json]
- [Attachment: fwDCCmZWqUyWqU7PyEoqembhfHr_1.json]

# Understanding Switches Array, Related Values, and JSON in Open Stage Control

## Problem Description
The user is building an articulation switcher in Open Stage Control that interacts with an external module for OSC and Logic. They successfully send a JSON array of articulation names to a switch, but they are unclear on how to set the MIDI note values for each switch when pressed. The user is unsure about the format to use for the note values and how to ensure that the correct note is assigned to each button.

## Solution
1. **Understanding the Value in Open Stage Control**:
   - The value associated with each key in the JSON array (e.g., `25` for `"legato"`) is used to determine the widget's current value. When a switch is selected, its value is set accordingly, and this value is sent in the OSC message after any defined `preArgs`.

2. **Sending MIDI Notes**:
   - For MIDI messages, `preArgs` should represent the channel and the note number, while the widget's value typically represents the velocity.
   - To send a MIDI note when a switch is pressed, use scripting to define the message. For example:
     ```javascript
     // switch's onValue property
     var channel = 16;
     var velocity = 127;
     var note = value; // This uses the value of the switch
     send('midi:logic', '/note', channel, note, velocity);
     ```

3. **Setting PreArgs**:
   - It is recommended to keep static values in `preArgs` to ensure proper functionality. Avoid using dynamic values (e.g., `@{}`) in `preArgs`, as changing them on the fly can lead to issues.

4. **Correctly Assigning Note Values**:
   - To ensure that the correct note value is assigned to each button, use the switch's value directly in the script. This means that when the switch is pressed, it will send the corresponding note value defined in your JSON array.

By following these guidelines, you can effectively manage the interaction between your external module and Open Stage Control to achieve the desired functionality.

# Alignment of Strip Type Containers

When creating multiple channel strips in Open Stage Control, you may encounter issues with alignment, particularly when trying to fit them within a specific resolution without causing scrollbars to appear.

## Problem Description
For a Dell 2418 touchscreen with a resolution of 1920, attempting to create 24 channel strips, each 80 pixels wide (totaling 1920 pixels), may result in misalignment. The last element may require adjustment to avoid scrollbars. Similar issues arise when using percentage widths, such as 4.1666667%.

## Solution
To achieve proper alignment without scrollbars, follow these steps:

1. Set all strip widths to `auto`.
2. Place the strips in a single container.
3. Set the container's properties:
   - `horizontal` to `true`
   - `width` to `100%`

This configuration will ensure that the strips fit neatly within the available space.

# Buttons Matrix Behaving Like a Switch

**Problem Description:**
Users need a way to create a button matrix in Open Stage Control that behaves like a switch, allowing only one button to be activated at a time. This is essential for triggering MIDI program changes and visually indicating the currently selected program.

**Solution:**
To achieve a matrix of buttons that functions as a switch, follow these steps:

1. **Use a Switch Widget:**
   - Instead of a matrix widget, use a switch widget to ensure only one button can be activated at a time.

2. **Configure the Switch Widget:**
   - Add a Switch widget to your project.
   - Set the number of values (at least 4) to create a grid layout.

3. **Apply CSS for Grid Layout:**
   - In the Style section, add the following CSS code to format the switch as a grid:
     ```css
     .switch {
       display: grid;
       grid-template-columns: repeat(3, 1fr); /* Adjust the number of columns as needed */
       grid-gap: 1rem;
     }
     .value {
       margin: 0;
       border: 0;
     }
     ```

4. **MIDI Program Changes:**
   - To make the widget send MIDI program changes, configure the following:
     - **Address:** `/program`
     - **Pre-args:** `1` (for MIDI channel 1)
     - **Target:** `"midi:openstage"` (replace "openstage" with the appropriate value for your setup)

This solution allows you to create a functional button matrix that behaves like a switch, ensuring only one button is active at any time.

[Attachment: b0GtjtqJ6f1pdwIBOxB9bSvKZoe.json]

[Attachment: 8ndLjTRN3njIbSsQ9qUQZbZkChv.json]

# Increment Fader Configuration Issue

**Problem Description**  
A user is attempting to create an "increment" fader with plus and minus buttons that adjust the fader value by 1. While the fader operates correctly in OSC, the plus and minus buttons do not send MIDI CC information when pressed, resulting in no effect on MIDI output.

**Solution**  
To resolve the issue, follow these steps:

1. **Remove OSC Configuration from Fader Widget**:  
   In the fader widget's properties, clear any settings in the `osc` property panel.

2. **Use `onValue()` Property**:  
   In the `onValue()` property of the fader, implement the following command to send MIDI data when the fader value changes:
   ```javascript
   send("midi:OSCtoCUBASE", "/control", 1, 83, value)
   ```
   This ensures that any change in the fader's value, whether from user interaction or other widgets, triggers the MIDI output.

By applying these changes, the increment and decrement buttons should properly send MIDI CC information as intended. 

[Attachment: aZpD7qB3RQGGW3wSZJ2QxGtHEXo.json]

[Attachment: tn7FHDUvIfsXB9wtRrdLy6Md900.json]

# Color Switch Widgets Configuration

**Problem Description:**
Users want to change the colors of individual switches within a switch widget based on their values. Specifically, they seek to set properties such as `colorFill` and `colorStroke` for each switch, allowing for a unique background and text color for each switch rather than applying a uniform color to all.

**Solution:**
To achieve this, you can utilize CSS pseudo-classes to target individual switches. The `:nth-child` selector can be particularly useful for this purpose. For example, you can define specific styles for each switch based on its order in the widget.

Refer to the following documentation for more details on using the `:nth-child` selector: [MDN Web Docs - :nth-child](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child).

Make sure to apply the styles in your CSS configuration accordingly to reflect the desired colors for each switch based on its value.

# Using a Script to Convert a Value to Semitones

## Problem Description
When mapping the Arturia MiniFreak to a template, there is a need to convert a knob's value (ranging from -48 to +48 semitones) into a text box display. The knob's value increments by 0.96 for each semitone, and a script is required to automate this conversion.

## Solution
Use the following script to convert the knob's value from a range of 0 to 1 into semitones:

```javascript
// knob onValue: convert 0, 1 range to -48, 48 
set('text_id', Math.round(value * 96) - 48)
```

This script will correctly display the corresponding semitone value in the text box.

# Dynamically Labelled Controls in Ableton (Max4Live Device + OSC Template)

## Problem Description
Users are seeking guidance on how to set up a Max4Live device to send dynamically updated parameter names, device names, and track names to Open Stage Control via OSC. The original post includes a Live 11 project and a Max device but lacks clear instructions for setup.

## Solution
To successfully configure the Max4Live device with Open Stage Control, follow these steps:

1. **Load the JSON File**: 
   - First, load the provided `.json` file into Open Stage Control.
   - Set the OSC send address to the IP address of the computer running Ableton, using port 7099. For local communication, this would be `127.0.0.1:7099`. If you wish to use a different port, ensure to update this in the Max4Live device as well.

2. **Load the Demo Project in Ableton**: 
   - Open the demo project in Ableton Live. It should automatically load a pad and the modified Max device for OSC on track one.

3. **Dynamic Label Updates**: 
   - Once the setup is complete, the labels in the Open Stage Control session will update dynamically. You can remap them using the Max4Live device, and they will reflect the names of the mapped parameters.

4. **OSC Address Convention**: 
   - The dynamic labels follow the OSC address convention. For example, if the device is set to receive OSC on the address `/fader1`, it will broadcast the label on `/fader1_text` to the output port.

This setup allows for a clearer interface and the ability to maintain learned parameters across Ableton sessions. 

For further exploration, users familiar with Max and OSC can expand upon this setup.

[Attachment: Live11_Project_with_Max_Device.zip]

# Receiving Specific Arguments in Open Stage Control

## Problem Description
When receiving OSC messages with multiple arguments, such as:
```
OSC received: {
address: '/oscRobot/move',
args: [ 19.75, -2.59 ]
}
```
it can be challenging to visualize each argument on separate widgets, like knobs, without sending them separately with distinct addresses.

## Solution
There are two effective methods to separate the arguments received by Open Stage Control:

1. **Using a Custom Module**: 
   - You can create a custom module to route incoming messages to different addresses (widgets). Refer to the community for examples on how to implement this.

2. **Using a Script Widget**: 
   - A script widget can listen on the OSC address (e.g., `/oscRobot/move`) and dispatch the received arguments. The script property should be set as follows:
   ```javascript
   // o-s-c v1.0.0
   set('knob_1', value[0])
   set('knob_2', value[1])
   ```
   Or for older versions:
   ```javascript
   JS{{
   // o-s-c v0.49.12
   set('knob_1', value[0])
   set('knob_2', value[1])
   }}
   ```

Both methods are valid, but the choice between them may depend on your specific use case and preferences.

# Scripting a For Loop in JavaScript for Open Stage Control

## Problem Description
The user is attempting to implement a 'for' loop in JavaScript to iterate over a set of variables and conditionally set values based on their numeric ranges. However, they are encountering issues with the loop structure and variable comparisons, specifically with the use of string concatenation and the `@{}` syntax.

## Solution
To correctly implement the 'for' loop, ensure that the variable being compared is indeed a number, not a string. Avoid using the `@{}` syntax in scripts. Here is a refined version of the original script:

```javascript
for (let i = 0; i < 4; i++) {
    let currentText = Text + i; // Ensure Text is a number
    if (currentText < 5) {
        setVar('KK' + parent.variables.a + 'DynChannelSelect', 'textColor' + i, '#6ffcd8');
    } else if (currentText > 4 && currentText < 9) {
        setVar('KK' + parent.variables.a + 'DynChannelSelect', 'textColor' + i, '#8efd6d');
    } else if (currentText > 8 && currentText < 13) {
        setVar('KK' + parent.variables.a + 'DynChannelSelect', 'textColor' + i, '#ecfd6d');
    } else if (currentText > 12 && currentText < 17) {
        setVar('KK' + parent.variables.a + 'DynChannelSelect', 'textColor' + i, '#fdc66d');
    }
}
```

### Key Changes:
- Ensure `Text + i` is treated as a number by confirming `Text` is a numeric variable.
- Removed the `@{}` syntax in the variable reference.
- Used `let currentText` to store the concatenated value for clarity.

For debugging, set Debug to true in the launcher window and use `console.log(currentText)` to verify the values being processed.

# Azimuth Encoder Configuration for -180 to 180 Degrees

**Problem Description:**
Users may want to configure an encoder to control the azimuth of a source, allowing it to wrap around from -180 degrees to 180 degrees when reaching the limits.

**Solution:**
To achieve this functionality using Open Stage Control with OSC, configure a knob with the following settings:

- Set the angle to **360** degrees.
- Use the property **"mode": "snap"** to ensure the encoder snaps correctly between the values.

This configuration will allow the encoder to wrap around seamlessly from -180 to 180 degrees.

# Running Open Stage Control with Node.js

## Problem Description
Users are interested in running Open Stage Control (OSC) from Node.js, particularly in the context of integrating it with Cycling74's MAX 8 and Max for Live. There is confusion regarding how to execute OSC without a graphical interface and how to adapt the command for their specific system setup.

## Solution
To run Open Stage Control from Node.js, you can execute it directly using the following command in your terminal:

```bash
ELECTRON_RUN_AS_NODE=1 open-stage-control path/to/open-stage-control/resources/app/ [options]
```

If you are using MAX 8 and can run Node directly, use:

```bash
node path/to/open-stage-control/resources/app
```

You can include options, for example:

```bash
node path/to/open-stage-control/resources/app --debug --port 9000
```

If you are working within a Node environment where OSC needs to be launched from a script, you can use the following approach:

```javascript
// Insert options in command line
process.argv.push('--debug', '--port', 9000);
// Load Open Stage Control
require('/path/to/open-stage-control/resources/app');
```

Note that running OSC this way may complicate debugging and is not the standard or supported method for launching OSC.

# Suppress 3 Dots Action in Client

**Problem Description:**
Users may want to prevent interaction with the three dots menu in the Open Stage Control client interface, especially in scenarios like using an iPhone for a theatrical video game, where escaping the interface is undesirable.

**Solution:**
To disable the three dots menu, set the `hideMenu` property on the root widget. Note that while this will hide the menu, keyboard shortcuts will still function unless the keyboard is disabled in kiosk settings. 

For example:
```json
{
  "type": "root",
  "hideMenu": true
}
```

This solution effectively prevents users from interacting with the menu while using the application. 

[Attachment: filename.ext]

# Performing MIDI CC Fade Using a Button

## Problem Description
Users want to implement a MIDI CC fade effect triggered by a button, allowing for customizable fade parameters such as starting value, ending value, and duration. 

## Solution
To achieve a MIDI CC fade using a button, you can use the following script. This script defines a global function that can be reused across multiple buttons, ensuring performance efficiency.

### Global Fade Function
Define the fade function in a script:
```javascript
globals.fade = function(btnValue, cc, from, to, dur) {
    var fps = 30,
        channel = 1;

    if (btnValue) {
        // Start fade when button is on
        var start = Date.now();
        
        setInterval(function() {
            var pos = (Date.now() - start) / dur;
            if (pos >= 1) {
                clearInterval();
                pos = 1;
            }
            var val = pos * (to - from) + from;
            send('midi:port', '/control', channel, cc, val);
        }, 1000 / fps);
    } else {
        // Cancel when button is off
        clearInterval();
    }
}
```

### Button Script
In each button's script, call the global fade function with the desired parameters:
```javascript
globals.fade(value, 10, 0, 127, 1000);
```

### Notes
- The `setInterval` function can handle both fading in and fading out by simply inverting the `from` and `to` values when calling the function.
- Each button has its own `locals` object, so using the same variable names across different buttons will not cause interference.

This implementation allows for multiple buttons to trigger fades without performance issues, as long as only a few fades run simultaneously. 

[Attachment: filename.ext] (attachment reference missing)

# Button Label Alignment

## Problem Description
A user is attempting to position a label to the right of a rectangular button (200x70) that has an image background. Despite various CSS attempts, the label remains centered instead of being aligned to the right.

## Solution
To align the label to the right of the button, use the following CSS:

```css
label {
  justify-content: flex-end;
  /* use padding-right to adjust */
}
```

This will ensure that the label is justified to the right side of the button. Adjust the padding as necessary to achieve the desired spacing.

# Assigning colorFill to OSC Message in Open Stage Control

## Problem Description
Users may want to update a widget's `colorFill` property based on incoming OSC messages, such as track color messages formatted like this:
```
(DEBUG, OSC) In:  { address: '/TrackColor/Color', args: '#88d51dff' } From: 127.0.0.1:61319
```
A custom module was initially created to handle this, but it did not work as expected.

## Solution
No custom module is required to achieve this functionality. Instead, you can directly assign the OSC message to the `colorFill` property of the widget. 

To do this, set the `colorFill` property of the widget to the OSC address as follows:
```
OSC{/TrackColor/Color}
```

This will allow the widget to automatically update its color based on the incoming OSC messages.

# CSS Panel Border Radius

**Problem:**
The border-radius of a panel in Open Stage Control is not changing as expected despite applying CSS styles.

**Solution:**
To successfully apply a border-radius to a panel, use the following CSS code:

```css
:host {
  border-radius: 5px;
}
```

This code should be placed in the appropriate CSS section for the panel to ensure the border-radius is applied correctly.

# Text Widget Value Passing with /EDIT

**Problem Description:**
When assigning values to multiple text widgets within an if query, the debug output consistently shows 'From: undefined:undefined'. This raises a question about potential syntax errors.

**Solution:**
The behavior observed is not due to a syntax error. The `receive()` function accepts two optional parameters that specify the message's origin. If these parameters are not provided, they default to undefined, which results in the debug message displaying 'From: undefined:undefined'. No action is required; this is expected behavior. 

[Attachment: Bildschirmfoto 2022-02-05 um 13.55.04]  
[Attachment: Bildschirmfoto 2022-02-05 um 14.04.28]

# Sending OSC Text to Feed an HTML Image

**Problem Description**  
The user inquired about the possibility of sending OSC data from a textarea (e.g., sending "123") to dynamically load an HTML image from a URL formatted as "www.site.com/123.jpg". The user also asked if the script could reload the site to reflect this change.

**Solution**  
To achieve this, you can use the following advanced syntax in Open Stage Control:

```html
<img src="domain.tld/@{text_widget_id}.jpg" />
```

In this example, `@{text_widget_id}` will be replaced with the value from the widget with the specified ID, allowing the image source to dynamically update based on the textarea input.

For vertical alignment of text in a textarea or switch, it is important to note that:
- Vertical alignment in a textarea is not supported.
- Switch labels are already centered both vertically and horizontally.

If you need to adjust the appearance of a textarea, you can use CSS like this:

```css
textarea {
    margin-top: 80%;
    text-align: center;
}
```

However, keep in mind that this adjustment may depend on the size of each textarea.

# Resend Another Widget’s Current Value

## Problem Description
The goal is to trigger the sending of the current value of a Switch widget ("colourPaletteSwitch") whenever another Switch widget ("lookSwitchA" or "lookSwitchB") is tapped. The challenge is to ensure that the value of "colourPaletteSwitch" remains unchanged while still sending its current value.

## Solution
To achieve this, use the following code in the `onValue` property of "lookSwitchA" and "lookSwitchB":

```javascript
setTimeout(() => {
  set('colourPaletteSwitch', get('colourPaletteSwitch'));
}, 1); // 1 ms delay
```

This code sets a timeout of 1 millisecond before sending the current value of "colourPaletteSwitch".

### Expanding Functionality
To resend the value of all widgets in the session without manually inputting each widget's ID, you can use one of the following methods:

1. Click on **Menu > State > Send**.
2. Run the command: `toolbar(1,2)`.
3. Use the following code in the `onValue` property of a widget:
   ```javascript
   stateSet(stateGet('root'));
   ```

This will resend the value of every widget in the session when the widget is interacted with, including its own value.

[Attachment: RS013-MS_COLLINS_Controls-01.json]  
[Attachment: q2lFdH2cf9BOBFzltCPhTgG4VI9.json]

# Write Only Part of a Widget's ID in the set() Function

**Problem Description:**
The user wants to know if it's possible to use only part of a widget's ID in the `set()` function to activate or deactivate multiple widgets with a common prefix (e.g., "solo_push_"). This would simplify the script by avoiding the need to add a new line for each new button created with that prefix.

**Solution:**
You can use wildcards ("*") in the `set()` function to target multiple widgets at once. For example, the following command will affect all widgets whose IDs begin with "solo_push_":

```javascript
set("solo_push_*", 0)
```

This approach allows for efficient management of widgets with similar ID prefixes.

# How to Reload an Image Widget in Open Stage Control

## Problem Description
Users may need to reload an image in an image widget without changing its value. The image widget has a cache property that, when set to true, allows for reloading the image by sending a "reload" command. However, users may be unclear on how to send this command to the widget.

## Solution
There are two primary methods to send a "reload" command to an image widget:

1. **Using OSC Messages from External Software**:
   - Every widget receives OSC messages sent to the address defined in its `address` property. 
   - For example, if the image widget's address is `/image_1`, send the value `reload` to that address on port 8080 (the default input port for Open Stage Control).

2. **Using a Button within the Same Session**:
   - Create a button widget:
     - Set the button's `mode` property to `tap`.
     - Set the button's `on` property to `reload`.
     - Ensure both the button and the image widget share the same `linkId` property (e.g., `reloadlink`).
   - Clicking the button will send its `on` value (`reload`) to the image widget due to the shared `linkId`.

Additionally, if you want the image to reload automatically at intervals (e.g., every 2 seconds), you can use the button's `script` property with the following code:

```javascript
setInterval(function(){
  set("image_id", "reload")
}, 2000) // every 2000ms
```

Note: Actual video stream playback is not currently implemented in Open Stage Control. However, you can use external software to stream video over HTTP and display it using a frame widget. 

[Attachment: filename.ext]

# Using locals.variables in Open Stage Control

## Problem Description
Users may encounter issues when trying to increment a `locals.variable` in Open Stage Control, resulting in unexpected values such as `NaN` (Not a Number). This often occurs when the variable has not been properly initialized.

## Solution
To correctly increment a `locals.variable`, ensure that it is initialized as a number before performing any operations. Here’s how to do it:

1. Initialize the variable if it is undefined:
   ```javascript
   if (locals.plus === undefined) locals.plus = 0;
   ```

2. Increment the variable as needed:
   ```javascript
   locals.plus += 1; // Example of incrementing
   console.log(locals.plus); // Outputs the current value
   ```

By following these steps, you can avoid the `NaN` result and ensure that your `locals.variable` behaves as expected.

# Sending and Receiving Arrays of [x, y] Values Over OSC in Open Stage Control

## Problem Description
Users need to send and receive arrays of [x, y] values to plot points in a 2D space using Open Stage Control. There is confusion regarding the correct OSC message format to achieve this, particularly when using Max.

## Solution
To send an array of [x, y] values over OSC, you can use the following formats:

1. **Array of Arrays**: 
   - Format: `[[x1, y1], [x2, y2], ...]`
   - Example: `[[1, 2], [3, 4]]`
   - This format will be automatically converted by the plot widget.

2. **Stringified Object**:
   - Format: `{index: [x, y], ...}`
   - Example: `{0: [1, 2], 1: [3, 4]}`
   - This allows for updating specific coordinates without redrawing the entire plot.

3. **String Representation**:
   - For the array of arrays: `"[ [1, 2], [3, 4] ]"`
   - For the stringified object: `"{0: [1, 2], 1: [3, 4]}"`

### Updating Coordinates
To update specific coordinates, you can send a message like:
- `{0: 1, 4: 0}`
This will change the coordinates of the 1st and 5th points without affecting others.

### Important Notes
- When sending OSC bundles, ensure that you do not send multiple messages with the same address but different values in the same bundle, as only the last message will be processed.
- If you want to clear the plot before sending new coordinates, you may need to send a simple array first to reset the plot.

### Example Code for Conversion
If you have a flat array (e.g., `[1, 2, 3, 4]`), you can convert it to an array of arrays using JavaScript:
```javascript
var flatarray = [1, 2, 3, 4],
    _2darray = [];

for (var i = 0; i < flatarray.length; i += 2) {
  _2darray.push([flatarray[i], flatarray[i + 1]]);
}
```

This will create an array of arrays suitable for plotting.

For further reference, please check the attached documentation or examples related to this topic. 

[Attachment: O-S-C_Max_tutorial]

# Keeping Cubase Focused After Pressing a Button on OSC

**Problem Description:**
When using Open Stage Control (OSC) with Cubase, pressing a button in OSC causes Cubase to lose focus, requiring the user to click back into Cubase for keyboard commands to work. The issue persists even when attempting to use the `noFocus=1` option in OSC.

**Solution:**
To prevent OSC from taking focus away from Cubase, set the `client-options` to `noFocus=1`. However, be aware that this option will make input widgets in OSC unusable, as they will not be focusable anymore. 

If the `noFocus=1` option causes focus to cycle through random open windows instead of returning to Cubase, it may indicate a bug related to the underlying Electron/browser engine used by OSC. In this case, testing on different configurations (such as Windows versions or number of screens) may help identify the issue. 

Currently, there is no support for simulating keystrokes or commands (like Alt-Tab) through OSC buttons to return focus to Cubase. 

For further assistance, consider providing a minimal JSON session file for testing or checking with other software to see if the issue persists across different applications. 

**Note:** Feedback from users experiencing similar issues can help determine if this is a bug in OSC or related to the operating system.

# Handling Spaces in Address and Widget IDs in Open Stage Control

## Problem Description
Open Stage Control allows the use of spaces in widget IDs and addresses, despite the OSC specification stating that spaces are not permitted in addresses. This raises concerns about how these spaces are managed when interfacing with other applications that may not support them.

## Solution
Open Stage Control permits spaces in both addresses and widget IDs. Most implementations of OSC support this feature, allowing users to utilize names with spaces as addresses without requiring any special escaping.

# Omnisphere Orb - XY to Polar Coordinates

## Problem Description
Users may encounter difficulties when trying to create a controller for the Omnisphere synth's "Orb" interface, which requires converting Cartesian (XY) coordinates into Polar coordinates (radius and angle). This conversion is necessary for proper interaction with the synth.

## Solution
To successfully convert XY coordinates to Polar coordinates for the Omnisphere Orb, follow these steps:

1. **Use the provided script** to convert Cartesian coordinates to Polar coordinates:
   ```javascript
   // Cartesian coordinates
   var x = value[0], y = value[1];

   // Polar coordinates
   var a = Math.atan2(y, x) / (Math.PI);
   var r = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));

   // Convert to range 0-127
   a = (a / 2 + 0.5) * 127;
   r = Math.min(127, r * 127);

   // Send MIDI
   send('midi:Omnisphere', '/control', 1, 34, a);
   send('midi:Omnisphere', '/control', 1, 35, r);
   ```

2. **Adjust MIDI Port**: Ensure that the `midi:port` in your script matches your server configuration.

3. **Send Control Change (CC) Messages Individually**: When binding the synth, you may need to send the CC messages separately for proper MIDI learning.

4. **Adjust XY Range**: If you experience axis inversion, modify the XY ranges to:
   ```json
   {
     "min": 1,
     "max": -1
   }
   ```

5. **Test and Verify**: After making these adjustments, test the setup to ensure that the Orb interface responds correctly to the OSC interface actions.

By following these steps, you should achieve full access to the Orb movements within the circular interface. 

[Attachment: zvzzTI0UggRR274bwkI1prtWVtA.json]

# Set Custom Variable using Custom Module

## Problem Description
Users may encounter difficulties when trying to set and access custom variables within Open Stage Control using custom modules. Specifically, there can be confusion regarding the correct usage of the `send()` command and how to properly format the commands for variable manipulation.

## Solution
To set a custom variable in a custom module, use the following command structure:

1. To set a variable, use:
   ```javascript
   receive('/SCRIPT', `setVar("id", "variable", value)`);
   ```

2. To access a variable from another widget, use:
   ```javascript
   let number = getVar("widgetID", "test");
   ```

3. Ensure that when using string interpolation within the custom module, you wrap the `/SCRIPT` command with backticks (`` ` ``) instead of single quotes.

By following these guidelines, you should be able to effectively manage custom variables within Open Stage Control.

# Knob Touch Script Issue

## Problem Description
In a panel with multiple knobs, values are being sent continuously while the knobs are touched, rather than only when they are released (untouched). This issue occurs with knobs that receive their properties via OSC commands, while other knobs function correctly.

## Solution
To resolve this issue, use the `bypass` option in your script. This will prevent the widget from sending the default messages while the knob is being touched. 

Example usage:
```javascript
bypass();
```

This adjustment should ensure that values are only sent when the knob is untouching.

[Attachment: r5vGUj12RL9uhbW50cHWj1qtq6B.json]

[Attachment: iiZ3z3feN5DRpnR4jxPK1J05UrR.js]

# CSS Field: Border-Radius, nth-child(), and Background Color Issue

## Problem Description
When attempting to set `border-radius: 10px;` in the CSS file for a menu with four values, the background color of the first item (`nth-child(1)`) becomes transparent, affecting the entire panel containing the menu.

## Solution
To resolve this issue, use the `:host` selector in your CSS. This will ensure that the styles applied do not interfere with the background colors of the menu items. 

Example:
```css
:host {
    border-radius: 10px;
}

.item:nth-child(1) {
    background: rgba(10, 9, 48, 1);
    font-size: 130%;
}
.item:nth-child(2) {
    background: rgba(20, 19, 58, 1);
    font-size: 120%;
}
.item:nth-child(3) {
    background: rgba(30, 29, 68, 1);
    font-size: 110%;
}
.item:nth-child(4) {
    background: rgba(40, 39, 78, 1);
    font-size: 100%;
}
```

# Pad XY "Spring" Mode

## Problem Description
When using the spring mode of the XY pad, the control is expected to return to a default value. The user set the default values to:
```json
{
  "min": 0.5,
  "max": 0.5
}
```
However, the control continues to return to the bottom left corner (values 0,0) instead of the intended center position.

## Solution
To correctly set the default value for the XY pad in spring mode, use a JavaScript array format. The default value should be specified as:
```javascript
[0.5, 0.5]
``` 

This adjustment will ensure the control returns to the center position as intended.

# Piano Widget Configuration for Open Stage Control

## Problem Description
Users may encounter difficulties in configuring the piano widget to work with Mainstage, particularly regarding the type of control, preArgs for a 25-key setup, and octave adjustments.

## Solution
To successfully configure the piano widget:

1. **MIDI Note Configuration**:
   - Set the widget's address to `/note`.
   - Use the `preArgs` property to define the MIDI channel as a single number.
   - Note numbers will correspond to the keys pressed, which can be configured using the `keys` and `start` properties. The velocity will depend on the `on` property.

2. **Octave Adjustment**:
   - Use an input widget to store the octave offset.
   - Set the keyboard's `start` property using the input widget's value.
   - To increment or decrement the octave, use buttons with the following script in their `script` property:
     ```javascript
     set('input_id', get('input_id') + 12) // For increasing an octave
     set('input_id', get('input_id') - 12) // For decreasing an octave
     ```

This configuration allows for effective integration of the piano widget with Mainstage, enabling octave adjustments similar to mini MIDI controllers.

# Issue with Plot Widget Disappearing Curve

## Problem Description
The plot widget exhibits unexpected behavior where the curve disappears for specific knob values (0.28, 0.29, 0.55 - 0.58). 

## Solution
The issue arises from `plotVal` being a non-integer value, which causes problems in the second for loop. To resolve this, modify the code as follows:

```javascript
plotVal = parseInt(thr * 100);
```

Additionally, you can achieve the same graphical representation with only three points, which will improve performance. Use the following code:

```javascript
var knob = @{knob_1},
    curve = [[0,0]];

curve.push([knob, knob * 100]);
curve.push([1, knob * 100]);

return curve;
```

For creating a curved line, you may need to plot it through several points to achieve the desired effect, especially for applications like compressors that require a "softened" knee display.

[Attachment: plot_test.json]  
[Attachment: plot_test_v2.json]

[Attachment: eX1u3nL88cfZGWHjvQpLky9YszG.json]

[Attachment: peUjdXWwRsbZV9tp7zqZZxzv5RF.json]

# Menu Circular Layout Issues

## Problem Description
In circular layout, the widget size cannot be adjusted to accommodate the longest label, leading to display issues. Additionally, neighboring items are displayed on a single line both on the top and bottom, making them not fully visible.

## Solution
To address the display issues in circular layout:

1. **Manual Size Adjustment**: Adjust the widget size manually to fit your preferences.
2. **CSS Customization**: 
   - You can modify the font size using CSS.
   - To insert line breaks, use the newline character `"\n"`. Ensure to add the following CSS rule to make it work:
     ```css
     .item {white-space: pre;}
     ```
   - Note that this functionality is confirmed to work in version 1.8.2. For further customization, additional CSS adjustments may be necessary.

Consider suggesting a line offset between text lines on the left and right sides to enhance readability. 

[Attachment: filename.ext]

# GUI Performance Optimization

## Problem Description
Users have reported latency issues when switching between full-screen panels in Open Stage Control, particularly on low-performance devices like the iPad 2 Mini. The latency occurs due to the recreation of widgets when panels are set to visible or hidden, leading to delays of up to one second for panels containing many widgets. Users are seeking methods to optimize panel switching and reduce latency.

## Solution
To improve GUI performance and reduce latency when switching panels, consider the following strategies:

1. **Use Layouts Instead of Absolute Positioning**:
   - Prefer using vertical, horizontal, or grid layouts over absolute positioning for widgets. This can help the browser manage elements more efficiently.

2. **Utilize Tabs Instead of Panels**:
   - Where applicable, use tabs instead of full-screen panels. Inactive tabs are hidden in a way that has a lesser impact on performance compared to hidden panels.

3. **Custom Module for Widget Management**:
   - For advanced users, consider creating a custom module to generate widget properties and populate a container using the `/EDIT` command. This approach can help maintain a tighter session, although it is technically more complex.

These strategies aim to minimize the performance impact when switching between different views in Open Stage Control. 

[Attachment: Rec Panel]  
[Attachment: Play Panel]

# Log Scale Issues with EQ Plot

## Problem Description
Users have reported issues with the equalizer (EQ) plot displaying frequencies incorrectly when using a logarithmic scale. Specifically, when the `logScaleX` property is enabled, the peaks do not appear in their expected positions. Adjusting values causes the peaks to shift unexpectedly, and disabling `logScaleX` returns the display to normal.

## Solution
This issue has been identified as a bug. To work around it until a fix is implemented, follow these steps:

1. Set `logScaleX` to `true`.
2. Save and load the session.
3. Do not modify the `logScaleX` setting thereafter.

In version 1, the following changes will be applied to address this issue:
- The `logScaleX` property will be removed, and the frequency response will always be drawn logarithmically.
- The logarithmic x-axis scale will be fixed.
- Filters will now be defined using the `filters` property, allowing the `value` to maintain its default purpose.

This should resolve the positioning issues with the EQ plot when using logarithmic scaling. 

[Attachment: filename.ext]

# Using Protokol in OSC Mode with Open Stage Control

**Problem Description:**
Users have encountered issues when trying to use Protokol in OSC mode with Open Stage Control, resulting in a blocked link between Bitwig and Open Stage Control.

**Solution:**
To successfully configure Protokol in OSC mode without interfering with message transmission, follow these steps:

1. **Start Protokol** and enable it on a designated OSC port (e.g., 12345).
2. Go to **Settings** in Protokol.
3. Navigate to the **OSC** section.
4. Enable and configure the **Forward** option.
5. Ensure that Protokol is listening on a different port than the application (Open Stage Control) that is receiving the messages.

By setting up the Forward option correctly, you can prevent Protokol from blocking OSC messages while allowing it to function alongside Open Stage Control.

# MIDI Sysex Configuration for Open Stage Control

## Problem Description
Users may encounter difficulties in assigning MIDI SysEx messages to buttons in Open Stage Control. Specifically, there can be issues with triggering a button from a MIDI device and vice versa, often resulting in error messages or non-responsiveness.

## Solution
To successfully assign a MIDI SysEx message to a button in Open Stage Control, follow these steps:

1. **Button Configuration**:
   - Set the following properties in the OSC editor:
     - **Address**: `/sysex`
     - **preArgs**: Leave empty
     - **typeTags**: Leave empty (the OSC will manage this)
     - **on**: `F0 43 73 01 52 25 00 01 01 00 01 01 F7`
     - **mode**: `tap`

2. **Testing MIDI Output**:
   - If you encounter errors, try using a different MIDI output port or a different message type. For example:
     - **Address**: `/note`
     - **preArgs**: `[1, 60]`
     - **on**: `127`
   - Enable the debug option to check if messages are being sent correctly.

3. **Message Formatting**:
   - Ensure that the SysEx message is formatted correctly without unnecessary spaces. Use lowercase letters in the button's `on` property if issues persist.

4. **Confirming MIDI Communication**:
   - If the button does not trigger the desired action on your synth, verify that the synth is listening for the correct incoming message. For example, the outgoing message from the button should match the expected input for the synth.

5. **Example of Correct Outgoing Message**:
   - To trigger a specific pad on the synth, the outgoing message should be:
     - `F0 43 73 01 52 25 11 00 02 00 01 F7`

By following these steps, you should be able to establish a functional connection between your MIDI device and Open Stage Control, allowing for successful triggering of buttons and actions. 

[Attachment: Capture_2020_10_27_00_17_58_174]
[Attachment: Capture_2020_10_27_00_19_18_301]
[Attachment: Capture_2020_10_27_09_18_14_750]
[Attachment: Capture_2020_10_27_10_55_19_396]

[Attachment: qUoCuMjbG5njDAm4wiAl9v2XZiA.json]

# Automatically Moving All Multixy Points Relative to Main Point

**Problem Description:**
A user is attempting to control multiple points in a multixy widget, where one point serves as an anchor. The goal is for all other points to move relative to this anchor point when it is adjusted. However, the secondary points only update their positions after releasing the anchor point, which is not the desired behavior.

**Solution:**
This issue is due to the queuing of values received while the widget is being touched, which is designed to prevent conflicts during interaction. The functionality to allow immediate updates of secondary points while the main point is being moved has been implemented in version 1.19.0 of Open Stage Control. Users experiencing this problem should update to this version for the desired behavior. 

[Attachment: filename.ext]

# Changing Fader Text Values

**Problem Description:**
A user wants to display specific delay time values on a text widget based on the position of a MIDI-controlled fader ("fader_ddl_time"). The goal is to show values like "1/16", "1/8", and "1/4" instead of the fader's raw value ranging from 1 to 127.

**Solution:**
Use an if/else statement in the text widget's script to map the fader values to the desired text output. Here is a sample script:

```javascript
var val = @{fader_ddl_time}
if (val <= 7) return "1/16"
else if (val <= 15) return "1/8"
else if (val <= 30) return "1/4"
// Add additional conditions as needed
```

This approach provides a straightforward way to display the desired delay times based on the fader's value.

# Assigning Multiple Arguments to Widget Address Fields

**Problem Description**  
When dealing with messages that contain multiple arguments, there is a need to assign each argument to different widgets. The challenge is determining the correct syntax for this assignment.

**Solution**  
Widgets in Open Stage Control can only consume the last value from a message, or multiple values if they are designed to do so (e.g., XY pads). To handle multiple arguments effectively, consider the following approaches:

1. **Using `preArgs` Property**:  
   You can specify static values before the actual value to consume using the `preArgs` property. These static values will be ignored for consumption but can help in addressing the widget.

2. **Advanced Routing with Custom Modules or Scripting**:  
   - A **script widget** can be utilized to receive the message containing multiple values and then route the relevant value to another widget. 
   - For example, in the `onValue` property of the script widget, you can use the following code to assign a specific value to another widget:
     ```javascript
     set('otherWidgetID', value[1])
     ```

This method allows for more flexibility in managing multiple arguments within your Open Stage Control setup.

# Color Widget OSC Listener Issue

**Problem Description:**
When listening to the OSC message "OSC{/truc/1/color}", the color is displayed correctly in the preview but not applied to the widget. The color is received in hex format (e.g., `04832ff`). Attempts to use the shortcut `#OSC{/truc/1/color}` have been inconsistent. There are issues with the JavaScript block returning the color value, particularly when a space is inadvertently included after the `#`.

**Solution:**
To ensure consistent application of the color to the widget, use the following JavaScript code:

```javascript
JS{{
var col = OSC{/adm/obj/1/color} || "ffffff"; // Default to white if no color is received
return '#' + col;
}}
```

Alternatively, you can use the CSS style directly:

```css
:host {
    background-color: #{OSC{/adm/obj/1/color} || "white"};
}
```

Key points to ensure reliability:
- Always include a default color value in the OSC listener to prevent errors.
- Avoid spaces after the `#` symbol in your color string.
- If issues persist, consider creating a session file to reproduce the behavior for further troubleshooting.

[Attachment: filename.ext] (attachment reference missing)

# Widget Length Differs from Editor and Display

**Problem Description:**
After updating to the latest version of Open Stage Control, users may experience discrepancies in the display length of widgets between the editor on a Mac and a touchscreen device using Edge. This issue is often related to differences in screen resolutions and the use of relative versus absolute sizing for widget dimensions.

**Solution:**
To resolve the display length issue, ensure that all widget dimensions are consistently defined. Specifically, check the following:

- Use relative units (like percentages) for all widget sizes to maintain consistency across different screen resolutions.
- Avoid mixing relative units with absolute pixel values for widget dimensions.

By standardizing the sizing method, the display should align correctly across devices.

# Generating Non-Repeating Random Numbers in Open Stage Control

**Problem Description**  
Users may need to generate random numbers for triggering effects in applications like Shaperbox VST without repeating the same number consecutively. 

**Solution**  
To achieve non-repeating random numbers, you can implement a function that checks the last generated number and ensures the new number is different. Below is a sample implementation:

### Code for the `onCreate` property:
```javascript
locals.randomNote = (note) => {
  let newNote;
  do {
    newNote = Math.round(Math.random() * 8) + 61; // Generates a number between 61 and 68
  } while (note == newNote); // Ensures the new number is different from the last one
  locals.lastNote = newNote; // Store the last generated number
  return newNote; // Return the new number
}
```

### Code for the `onValue` property:
```javascript
const sendNote = locals.randomNote(locals.lastNote); // Call the function to get a new note
send("midi:fx", "/note", 1, sendNote, 127); // Send the MIDI note
```

This implementation ensures that the same note is not triggered consecutively, enhancing the randomness of the effects.

# Responsive Font Size for Buttons in Open Stage Control

## Problem Description
The user is seeking a method to make the font size of a button in Open Stage Control responsive to the button's size using CSS. They have tried using the `calc()` function and a font-size variable but are unsure how to achieve the desired effect.

## Solution
It is not possible to directly set the font size relative to the element's size using CSS. However, you can retrieve the widget's width or height property using `@{this.width}` or `@{this.height}` and adjust the font size accordingly, provided that the size is not set to `auto` and is not overridden by the parent container's layout.

Here is an example of how you might adjust the CSS:

```css
.Music_Icon_Only {
  text-transform: none;
  border: none;
  border-radius: 5rem;    
}

.Music_Icon_Only:before {
  --font-size: 40rem; /* Base font size */
  font-family: 'Bravura';
  display: grid; 
  height: 100%;
  width: 100%;
  place-items: center center;  
  color: black;
  font-size: calc(var(--font-size) - 1vw); /* Adjust based on viewport width */
  padding-top: calc(var(--font-size) - 50%);
  z-index: -1;  
}

.Music_Icon_Only label {
  align-items: flex-end;
  padding-bottom: 3% !important;
  color: transparent;
}
```

Additionally, consider using media queries to further refine the responsiveness of the font size based on different screen sizes. 

For more examples of automatic text scaling, refer to related resources or community posts that provide practical implementations. 

[Attachment: image]

# No Release on Matrix Push Button

**Problem Description:**
Users may want to configure a push button within a matrix widget to operate without a release action.

**Solution:**
To enable the norelease mode for a matrix widget's push button, modify the `props` property as follows:

```json
{
  "norelease": true
}
```

You can also override multiple properties simultaneously. For example:

```json
{
  "norelease": true,
  "on": 100,
  "off": -1
}
```

Additionally, when using formulas, an extra variable (`$`) is available to reference the subwidget’s index. Here’s an example:

```json
{
  "norelease": true,
  "on": 100,
  "off": -1,
  "label": "JS{{return 'btn ' + $}}"
}
```

# Switching Between Tabs with a Button or Switch

## Problem Description
Users want to toggle between multiple tabs using a single switch or two buttons in Open Stage Control. There is a need for a reliable method to navigate through tabs programmatically.

## Solution
To switch between tabs using buttons or a switch, you can utilize the `onValue` property of the button or switch. Here’s how to implement it:

### For Switching Tabs Up
Use the following code in the `onValue` property of the button designed to switch tabs upwards:
```javascript
const panelValue = get("panel_1"); // Gets the current value of the panel containing the tabs
if (panelValue < 3) set("panel_1", panelValue + 1); // Increments the value if below the maximum number of tabs
```

### For Switching Tabs Down
For the button that scrolls tabs backwards, use this code:
```javascript
const panelValue = get("panel_1"); // Gets the current value of the panel containing the tabs
if (panelValue > 0) set("panel_1", panelValue - 1); // Decrements the value if above zero
```

### Setting a Default Tab
To set a default tab for a panel, use the `default` property under the `value` tab in the inspector. However, note that this default value only applies when the session is loaded. To reset to the default tab after navigating away, you should use the following in the `onValue` property of the widget that returns you to the desired tab:
```javascript
set("panel_id", value); // Replace "panel_id" with your panel's ID and "value" with the desired tab number
```

This approach allows you to effectively manage tab navigation within your Open Stage Control setup.

# OSC Reply/Translate Using JSON Object Array

## Problem Description
The goal is to create a custom module in Open Stage Control that translates an incoming OSC message with an integer argument into a new OSC message with a string argument. The translation is based on a JSON array of objects, where the integer serves as a key to find the corresponding object and retrieve its "name" value.

## Solution
The following JavaScript code can be used to implement this functionality:

```javascript
// Load initial JSON data
// It is assumed that the file always contains an array of objects
var my_data = loadJSON('./data.json');

module.exports = {
    oscInFilter: function(data) {
        var {host, port, address, args} = data;

        if (address === '/ChampSelect/Slot1') {
            // Find item in my_data with key equal to the first argument of the OSC message
            var subdata = my_data.find(item => item.key === args[0].value);

            if (subdata) {
                send('127.0.0.1', 5555, '/Video/Layer', subdata.id);
            } else {
                console.log(`No data found for ${address} ${args[0].value}`);
            }

            // return // Uncomment to bypass original message if it doesn't need to reach any widget
        }

        return data;
    },

    oscOutFilter: function(data) {
        var {host, port, address, args} = data;

        // Assuming we have a file widget with this address
        // (and a target set so that it sends a message that we can catch here)
        if (address === '/load_json') {
            var path = args[0].value;
            // Update my_data with new file
            my_data = loadJSON(path);
            
            return; // This message has no probable reason to be sent
        }

        return data;
    }
}
```

### Key Points
- The `oscInFilter` function listens for incoming OSC messages at the address `/ChampSelect/Slot1`.
- It searches for an object in `my_data` where the `key` matches the integer argument from the OSC message.
- If a match is found, it sends a new OSC message to `/Video/Layer` with the corresponding `id`.
- The `oscOutFilter` function allows for loading a new JSON file dynamically using a file widget.

For further reference, consult the documentation on [Array.prototype.find() - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find). 

[Attachment: filename.ext]

# Traktor Pro 3 Interface with Open Stage Control

## Problem Description
Users are interested in integrating Traktor Pro 3 with Open Stage Control, specifically regarding the mapping and communication methods (MIDI vs. OSC).

## Solution
To create a mapping between Traktor Pro 3 and Open Stage Control, a custom script can be utilized to receive MIDI messages from Traktor. Additionally, a workaround using QML can be implemented to send tempo changes and other controls.

For further assistance or to share session files, users are encouraged to connect with the community. 

[Attachment: traktor_interface.png]

# MIDI Device Configuration in Open Stage Control

## Problem Description
Users may want to configure MIDI devices in Open Stage Control such that changes made at the root level automatically propagate to child devices. Additionally, issues may arise when improperly configured widgets attempt to send MIDI messages, resulting in error messages.

## Solution
To configure MIDI devices effectively:

1. **Set Server Send Option**:
   - Configure the server's `send` option to `midi:your_midi_device`. This will allow all widgets to inherit this target automatically, unless overridden by the `ignoreDefaults` property.

2. **Using Variable Widgets**:
   - Create a variable widget and set its value to `midi:your_midi_device`. Use `@{variable_id}` in the targets of other widgets to reference this variable.

3. **Avoiding Errors**:
   - Ensure that any widget that should not send MIDI messages has the `ignoreDefaults` property applied. This is particularly important for the root widget to prevent errors like "invalid address (/root)".

4. **Correct Variable Usage**:
   - When using variable references, ensure the correct syntax is applied. For example, `@{variable_1}` retrieves the value of the widget with `id` equal to `variable_1`. If you need to access the target, use `@{variable_1.target}`.

For further assistance, refer to the attached configuration file for examples: [Attachment: rHQly5z24yzbeUQ4JGHyEYPlK2J.json].

# Dynamically Moving Faders in Open Stage Control

## Problem Description
Users may want to create dynamic templates in Open Stage Control that allow faders to be reassigned to different panels based on specific tags (e.g., filter, envelope). The goal is to have a flexible interface that reorganizes itself according to the current focused plugin in an external application like Reaper.

## Solution
It is not possible to rearrange the widget structure directly via widget scripts in Open Stage Control. The only method to achieve dynamic organization of widgets is to generate a widget tree from a custom module and utilize `/EDIT` commands to modify the session on the fly.

For users looking for alternatives, consider using color coding for faders to visually indicate their associated controls, which can simplify the interface without needing to rearrange widgets dynamically.

[Attachment: image.png]

# Retrieving Values from REST API in Open Stage Control

## Problem Description
Users are attempting to retrieve the Group Name from Resolume Arena 7 using the REST API and update a label in Open Stage Control. While they can successfully fetch data from the API, they encounter difficulties in changing the label to reflect the retrieved value.

## Solution
To change the label using the fetched value from the REST API, you can use the following JavaScript code snippet in your custom module. This example demonstrates how to retrieve the Group Name and update the label accordingly:

```javascript
app.on('sessionOpened', (data, client) => {
  const http = nativeRequire('http');

  http.get('http://127.0.0.1:1234/api/v1/composition/layergroups/1', (resp) => {
    let data = '';
    resp.on('data', chunk => {
      data += chunk;
    });
    resp.on('end', () => {
      const response = JSON.parse(data);
      const groupName = response.name.value; // Extract the Group Name
      receive('/EDIT', 'your_label_control_id', {
        'value': groupName, // Update the label with the Group Name
      }, {clientId: client.id});
    });
  }).on('error', err => {
    console.log("Error: ", err.message);
  });
});
```

Replace `'your_label_control_id'` with the actual ID of the label control you wish to update. This code retrieves the Group Name from the specified API endpoint and updates the label in Open Stage Control accordingly.

Make sure your Open Stage Control instance has access to the REST API and that the endpoint is correct. If you continue to experience issues, verify your network settings and ensure that the API is responding as expected.

# Sending Different MIDI Messages Based on Switch Widget

**Problem Description:**
A user needs to send different MIDI messages from multiple buttons based on the state of a switch widget. The initial implementation involved using if statements in each button to check the switch state, which became cumbersome for larger projects.

**Solution:**
A more efficient approach involves creating an object that maps all MIDI Control Change (CC) values to each switch state. The switch can use an array of keywords as values, allowing the buttons to reference the corresponding CC values with a simpler check.

1. Create an object to map switch states to MIDI CC values.
2. Modify the switch to use an array of keywords.
3. Update the button logic to access the MIDI CC values from the object based on the switch state.

This method simplifies the code and improves maintainability for larger projects.

**Attachments:**
- [Attachment: nudge_Trim.json]
- [Attachment: zchCC64mbeKTZx1EWgAJbmUsJhX.json]
- [Attachment: n1noZuODzAHbqyP88Hfh9kvP05C.json]

# WebSocket API Integration with Open Stage Control

## Problem Description
Users are looking to implement WebSocket API integration with Open Stage Control, specifically for controlling devices like the Ashly FX series amplifiers. There is interest in using JavaScript for sending WebSocket commands, as well as exploring alternatives like Node-RED for handling WebSocket communications.

## Solution
1. **Using Node-RED**: One effective solution is to utilize Node-RED to manage WebSocket connections. This approach allows for easier integration and control of devices through Open Stage Control. Users have successfully implemented this method to control their devices.

2. **Custom WebSocket Client Module**: A custom WebSocket client can be created as a module within Open Stage Control. A user has shared a version of their WebSocket client, which includes the necessary websocket package. The client can send messages to the WebSocket server, but users must implement the JSON message format expected by their specific server in the `customModule.js` file.

   - **Download the custom module**: [Attachment: osc-websocket.zip]
   - **Refined version available**: Users can find a more polished version of the WebSocket client on GitHub: [GitHub - smithkyle/osc-websocket](https://github.com/smithkyle/osc-websocket).

By following these methods, users can effectively control their devices using Open Stage Control through WebSocket API integration.

[Attachment: 9Ztdn2z2ZMc6BeU9Q375YXkDO3H.zip]

# Problème de Responsivité

Lors de la transition de l'interface tablette à une interface mobile, des problèmes de responsivité ont été rencontrés, notamment avec les strips. Le premier strip fonctionne correctement, tandis que le deuxième ne répond pas aux ajustements CSS.

## Solution

Le code CSS initial mélangeait la syntaxe CSS "inline" et la syntaxe classique, ce qui a causé des problèmes. Voici la version corrigée :

```css
:host {
  width: 450rem;
}
@media screen and (max-width: 900px) {
  :host {
    width: calc(100% - 100rem);
    margin-top: -40rem;
    margin-left: -60rem;
  }
}
```

Des unités `px` ont été remplacées par des unités `rem`, sauf dans la ligne `@media`. Pour plus de détails, consultez la documentation sur [la syntaxe des sélecteurs](https://openstagecontrol.ammd.net/docs/css-tips/#selector-syntax) et [les unités de taille](https://openstagecontrol.ammd.net/docs/css-tips/#size-units).

### Autres Questions

- Pour empêcher l'appui sur un bouton lors du défilement, il est conseillé d'utiliser des barres de défilement. Un bug a été identifié concernant la barre de défilement horizontale sur les petits écrans, qui sera corrigé dans une prochaine version.

- Pour changer le nom des labels sous un certain `max-width`, une méthode peu conventionnelle est proposée :

```css
@media screen and (max-width: 900px) {
  .label {
    font-size: 0px;
  }
  .label:before {
    content: "Alt label";
    font-size: 11rem;
  }
}
```

- Concernant la création de formes en JavaScript, la syntaxe ne permet pas de créer des éléments, mais seulement de définir dynamiquement les propriétés des widgets. 

[Attachment: image.png]

# Create New Object Default Geometry Percentages

**Problem Description:**
Users have requested the ability to set default geometry for new objects (such as buttons, modals, panels, etc.) in percentages rather than fixed integer coordinates. This feature would facilitate the creation of responsive layouts that adapt to multiple viewing devices.

**Solution:**
The option to set default geometry in percentages has been implemented in the sources. Users are also encouraged to utilize vertical, horizontal, and grid panels to build responsive layouts effectively.

# Create an Increment Button

## Problem Description
A user is attempting to create a button in Open Stage Control that increments a predefined variable by 1 each time it is pressed. The goal is to start with a variable value (e.g., 5) and increase it with each button press.

## Solution
Refer to the `scripting.json` file, which provides an example of how to implement this functionality. It covers the exact case of creating a button that increments a variable's value upon each press. 

[Attachment: scripting.json]

# Button Color Change Based on Modifier Button State

## Problem Description
A user wants to change the color of a button (`buttonOne`) based on whether a modifier button (`modButton`) is pressed. The color should reflect the velocity received from a MIDI note when the modifier button is held down. The initial approach involved using a variable widget to listen for MIDI note events, but it did not work as expected.

## Solution
To achieve the desired functionality, follow these steps:

1. **Use the `visible` Property**: Instead of trying to manipulate the color directly through a variable, utilize the `visible` property of the buttons. Create two variables to control the visibility of the two button layers.

2. **Modify the `modButton` Script**: Set up the `modButton` to toggle the visibility of `buttonOne` and `buttonTwo` based on its state. This can be done by updating the script property of `modButton` to set the visibility variables accordingly.

3. **Example Configuration**:
   - For `buttonOne`:
     ```json
     {
       "type": "button",
       "id": "buttonOne",
       "colorFill": "JS{{
         var c = globals.midmixLedColors1(OSC{/note} || [0 , 87]);
         return 'hsl(' + c[0] + ',100%,' + c[1] + '%)';
       }}",
       "visible": "get('buttonOneVisible')",
       ...
     }
     ```

   - For `buttonTwo`:
     ```json
     {
       "type": "button",
       "id": "buttonTwo",
       "visible": "get('buttonTwoVisible')",
       ...
     }
     ```

   - For `modButton`:
     ```json
     {
       "type": "button",
       "id": "modButton",
       "on": 1,
       "off": 0,
       "mode": "push",
       "script": "set('buttonOneVisible', false); set('buttonTwoVisible', true);",
       ...
     }
     ```

4. **Variable Setup**: Ensure that you have two variables defined:
   - `buttonOneVisible` (initially set to true)
   - `buttonTwoVisible` (initially set to false)

By following this approach, you can effectively manage the visibility of the buttons and achieve the desired overlay effect.

[Attachment: 8vHEwzY0vQUNs4J5CkOx32xo5Qb.json]  
[Attachment: d1PCziFLMHwkK1AHLloQYWoTkf7.json]

# Get Point XY for Multi XY Widget

**Problem Description:**
Users need to retrieve the XY coordinates of a specific point in a Multi XY widget during touch events, rather than sending the entire array of points. This is particularly important when only one point is being moved at a time, as it reduces unnecessary data transmission.

**Solution:**
To achieve this, implement the following script:

```javascript
// onCreate
// Keep a local track of which point is touched
locals.touched = {}

// onTouch
// Update list of touched points
if (event.handle !== undefined) {
  locals.touched[event.handle] = event.type == 'start'
}

// onValue
// Send a message for each point that's currently being touched
// Set bypass to `true` if you want the original message to be bypassed (disables cross-client sync)
for (var n in locals.touched) {
  if (locals.touched[n]) {
    send('/multixy/point/' + n, value[2*n], value[2*n + 1])
  }
}
```

This script ensures that the correct XY coordinates for the touched point are sent, addressing the issue of receiving static values instead of the dynamic coordinates. Adjustments were made to the `onValue` script to ensure accurate data transmission. 

[Attachment: filename.ext]

# ReaperControl OSC Template

## Problem Description
Users are seeking guidance on how to utilize the ReaperControl OSC template effectively, specifically regarding the fader bank functionality and the creation of tab widgets in Open Stage Control. Additionally, there are inquiries about modifying the template to display the Reaper MCP or mixer view for larger sessions.

## Solution
1. **Fader Bank Functionality**:
   - The fader bank allows control over track levels and panorama. The "Volume" control adjusts the levels and panorama of the tracks, while "Send 1-4" controls the levels and panorama of the send buses (1-4), which are typically used for effects like reverb or delay. Ensure that the send buses are created in Reaper beforehand.

2. **Creating Tab Widgets**:
   - To create a tab widget in Open Stage Control:
     - Create a panel.
     - Right-click on the panel or in the project tree.
     - Select “+ Add tab” from the menu.

3. **Displaying Reaper MCP or Mixer View**:
   - To modify the template to display the Reaper MCP or mixer view:
     - Check the setting in the toolbar (cogwheel icon) for "device track bank follows" and set it to "mixer". This may help synchronize the OSC view with the Reaper mixer, ensuring that disabled tracks in the MCP do not appear in the OSC mixer view.

### Attachments
- [Attachment: ReaperControl_20241118.json]
- [Attachment: ReaperControl_2023-08.json]
- [Attachment: ReaperControl_20201222.json]
- [Attachment: e2zFNBxK7vE4d88vpHTVK7SqKuh.json]
- [Attachment: AfjqmlaU2Z7mNDVpw1C1TYdS1yC.json]
- [Attachment: wkdRB4soP8QD7mYA164uIRbg10n.json]

# Can't Save Session Outside the Startup Drive in Windows

When attempting to save a session in Open Stage Control on Windows, the file manager defaults to the user folder, limiting access to other drives, such as a dedicated HDD.

## Solution

Set the server's `remote-root` option to the desired drive's location (e.g., `D:\`). This adjustment allows access to other drives when saving sessions. Future updates may improve the file browser's awareness of Windows drives.

# Sending Different MIDI Notes for Each Button in a Matrix

**Problem Description:**
A user requires a matrix of 32 buttons, with each button sending a different MIDI note. They encountered difficulties using the `$` variable to achieve this in the button scripts.

**Solution:**
The `$` variable can be utilized in `JS{{}}` and `#{}` blocks, but not directly in scripts unless included within such a block (e.g., `#{$}`). For this specific case, it is not necessary to use a script. Instead, the following properties can be set directly in the matrix's `props`:

1. **Using `preArgs`:**
   ```json
   {
     "mode": "push",
     "on": 100,
     "target": "midi:mon_port_midi",
     "address": "/note",
     "preArgs": [1, #{$+48}]
   }
   ```

2. **Using a Script:**
   ```json
   {
     "mode": "push",
     "on": 100,
     "script": "send('midi:mon_port_midi', '/note', 1, #{$}+48, value)"
   }
   ```

Both methods effectively allow each button to send a unique MIDI note, starting from note 49 for the first button. For further clarity, including a simple example in the documentation on how to use `$` in matrix properties would be beneficial.

[Attachment: Capture d'écran 2020-10-11 15.52.18]

# Increase UDP Buffer Size on Mac OS

When implementing bi-directional communication for Ableton clips, users may experience lag in command execution after triggering multiple clips. This lag is often attributed to the default UDP buffer size being insufficient, leading to delayed actions and dropped commands.

## Solution

To increase the UDP buffer size on Mac OS, follow these steps:

1. Open the Terminal application.
2. Execute the following command to increase the maximum datagram size:
   ```bash
   sudo sysctl -w net.inet.udp.maxdgram=65535
   ```
   Note: If this command does not resolve the issue, consider further adjustments to the system's UDP buffer settings.

For additional guidance, refer to the article "Increase OS UDP Buffers to Improve Performance" by Cameron Sparr, which provides further insights on optimizing UDP performance on BSD/Darwin systems. 

[Attachment: filename.ext] (attachment reference missing)

# Fader - Transition Value Animation

## Problem Description
A user is seeking a way to create a "fade in/out" effect for a fader in Open Stage Control, specifically transitioning the fader value from 0 to 1 over 1 second, and later requested a fade in and fade out effect (from 1 to 0 and back to 1) over 2 seconds.

## Solution
While Open Stage Control does not have a built-in function for this animation, it can be achieved using JavaScript. Below is a script that can be used for both the fade in and fade out effects.

### Fade In Effect (0 to 1 over 1 second)
```javascript
// button.script
var start = Date.now(),
    duration = 1000,
    fps = 30,
    from = get('fader_1'),
    to = 1;

setInterval(() => {
    var x = (Date.now() - start) / duration;

    if (x < 1) {
        var y = (to - from) * x + from;
        set('fader_1', y);
    } else {
        set('fader_1', to);
        clearInterval();
    }
}, 1000 / fps);
```

### Fade In and Fade Out Effect (1 to 0 to 1 over 2 seconds)
To create a fade in and fade out effect, you can modify the script as follows:
```javascript
// button.script
var start = Date.now(),
    duration = 2000,
    fps = 30,
    from = 1,
    to = 0;

setInterval(() => {
    var x = (Date.now() - start) / (duration / 2); // First half for fade out

    if (x < 1) {
        var y = (to - from) * x + from;
        set('fader_1', y);
    } else {
        start = Date.now(); // Reset start time for fade in
        from = 0;
        to = 1;
        
        setInterval(() => {
            var y = (to - from) * x + from;
            set('fader_1', y);
            x = (Date.now() - start) / (duration / 2); // Second half for fade in
            if (x >= 1) {
                set('fader_1', to);
                clearInterval();
            }
        }, 1000 / fps);
    }
}, 1000 / fps);
```

### Note on Easing Functions
For implementing an "Easy In/Out" effect, consider using easing functions that adjust the transition speed. You can find various easing functions online and implement them in the transition calculations.

For more information on scripting in Open Stage Control, refer to the documentation: [Open Stage Control Scripting](https://openstagecontrol.ammd.net/docs/widgets/scripting/).

[Attachment: Zrzut ekranu 2021-05-12 101652]  
[Attachment: ezgif.com-gif-maker]

# Populating Dropdown Options/Values via Call to Local API

**Problem Description:**
To build a dropdown menu using results from a local HTTP request to an ExpressJS server, it is necessary to include the header `Accept: application/json` in the GET request. Without this header, the response is formatted as HTML instead of the required JSON array.

**Solution:**
While expanding the `httpGet()` function to include headers is a potential solution, a more effective approach is to use a custom module to handle the request. The following steps outline how to implement this:

1. Use the `axios` library to perform the HTTP GET request.
2. Fetch the data when a session is opened, rather than during server initialization, to ensure that the client is connected.
3. Update the dropdown values with the fetched data.

Here is an example implementation:

```javascript
const axios = nativeRequire('axios');

app.on('sessionOpened', (data, client) => {
  axios.get('http://localhost:8889/transits')
    .then(function (response) {
      receive('/EDIT', 'transit-choices', {"values": response.data}, {clientId: client.id});
    })
    .catch(function (error) {
      console.log(`getTransits error: ${error}`);
    });
});
```

In this code:
- The `sessionOpened` event is used to trigger the HTTP request.
- The response data, which is an array of filenames (e.g., `["file_1", "file_2", …, "file_n"]`), is sent to update the dropdown values.

This method effectively retrieves the necessary data and populates the dropdown without encountering issues related to HTTP headers.

# MCU Sample Not Working

**Problem Description:**
Users have reported issues with the Mackie Control example in Open Stage Control, specifically with the eight encoders/knobs at the top of the screen not responding to mouse clicks or taps. This issue appears to be related to the "vpot" class attribute. Additionally, there are concerns about the screen not refreshing properly after certain commands, affecting the state of buttons like "Select," "REC," "MUTE," and "SOLO."

**Solution:**
A fix for the vpot issue has been implemented in the latest update of the repository. Users should ensure they are using the most recent version of the Mackie Control example from the following link: [Mackie Control Repository](https://github.com/jean-emmanuel/open-stage-control-mcu).

For the screen refresh issue, there is currently no direct method to programmatically force a refresh after commands. However, users have found that navigating to the next or previous bank can trigger a refresh, ensuring that the button states are correctly updated.

For additional functionality, such as adding click/double-click events to the knobs for toggling plugin values, users may need to implement custom code or add buttons below the encoders to achieve this functionality.

[Attachment: filename.ext]

# Displaying Non-Truncated Widget Values in Comments

## Problem Description
After upgrading from version 1.15 to 1.16 of Open Stage Control, users noticed that the displayed value in comments, which uses the syntax `@{mySlider.value}`, is no longer truncated. This change affects how values are displayed, making them less readable. Users are seeking a way to round or limit the displayed value to a more manageable format.

## Solution
This issue is recognized as an unexpected side effect of a recent update. A workaround to round or truncate the displayed value can be implemented using JavaScript. You can use the following code snippet to achieve this:

```javascript
return Math.round(@{mySlider} * 100) / 100 // 2 decimals
```

This code will round the value to two decimal places. 

Additionally, it is noted that a fix for this issue is expected to be released in version 1.16.1. 

For further reference, see the attached example session:
[Attachment: comment value decimals issue.json]  
[Attachment: VrH0I1K41T25d4cIKHzmsaswgc.json]

# Setting Different Colors for Menu Items Using nth-child

## Problem Description
The user wants to assign different background colors to a menu with 29 items using CSS. The initial approach involves using multiple `nth-child` selectors, but the user seeks a more efficient solution to avoid repetitive code.

## Solution
A JavaScript solution can dynamically generate the necessary CSS for coloring the menu items. Below is a refined version of the code that efficiently assigns colors based on item positions:

```javascript
var css = ''
for (var i = 0; i < 3; i++) {
  css += ".item:nth-child(" + (i+1) + "){background:" + "purple" + ";}\n"
}
for (var i = 3; i < 6; i++) {
  css += ".item:nth-child(" + (i+1) + "){background:" + "green" + ";}\n"
}
for (var i = 6; i < 17; i++) {
  css += ".item:nth-child(" + (i+1) + "){background:" + "red" + ";}\n"
}
for (var i = 17; i < 25; i++) {
  css += ".item:nth-child(" + (i+1) + "){background:" + "orange" + ";}\n"
}
return css
```

### Explanation
- The code uses a loop to generate CSS rules for each item in the menu based on its position.
- The `nth-child` selector is used to target specific items, and the `background` property is set to the desired color.
- Each section of the loop corresponds to a range of items, allowing for different colors to be applied efficiently.

This approach eliminates the need for hardcoding each color for every item and makes future adjustments easier. 

For further customization, you can modify the ranges and colors directly in the loops as needed.

[Attachment: couleurs menu]

# Block Outgoing OSC and MIDI Messages Based on a Timer

## Problem Description
Users may encounter issues with devices that have problematic touchscreens, leading to unintended ghost touches. A temporary solution is needed to limit the frequency of outgoing OSC and MIDI messages.

## Solution
You can implement a custom module in Open Stage Control to filter outgoing OSC messages based on a timer. Below is a simple example that allows only one message to be sent every 2 seconds:

```javascript
var lastMessageTime = 0,
    minimumTimeBetweenMessages = 2000; // in ms

module.exports = {
    oscOutFilter: function(data) {
        // Filter outgoing OSC messages
        var {address, args, host, port, clientId} = data;

        var time = Date.now(),
            elapsedTimeSinceLastMessage = time - lastMessageTime;

        if (elapsedTimeSinceLastMessage < minimumTimeBetweenMessages && lastMessageTime > 0) {
            // Bypass message by returning nothing
            return;
        }

        // Update timestamp
        lastMessageTime = time;

        // Return data if you want the message to be sent
        return {address, args, host, port};
    }
}
```

This script can be adjusted to fit specific needs, ensuring that only one message is sent within the defined time interval.

# Dynamic Label Update for Button Widget

**Problem Description:**
A user seeks to dynamically update the label of a button widget in Open Stage Control using text retrieved from a DAW via OSC. The current implementation updates a text widget instead and requires a method to achieve the same functionality for a button label.

**Solution:**
To dynamically update the label of a button widget, follow these steps:

1. Replace the current method of retrieving the variable with:
   ```javascript
   getProp('parent', 'variables').n
   ```

2. In the button's label property, use the following syntax to create a custom variable:
   ```
   VAR{mylabel}
   ```

3. Update the button label by calling:
   ```javascript
   setVar('button_id', 'mylabel', currentText)
   ```

This approach allows for efficient updates to the button label without the overhead of reevaluating the code, thus improving performance and reducing potential errors.

# Networking Question

**Problem Description:**
The user has two Macs, each running Open Stage Control Server. They want to control a fader on Mac B using a fader on Mac A, which should then send MIDI values to a synthesizer. While the fader on Mac A successfully controls the fader on Mac B, the synthesizer does not receive the correct MIDI values when the fader is manipulated from Mac A.

**Solution:**
To achieve the desired functionality, it is recommended to use a single Open Stage Control server with a dedicated MIDI target. This setup ensures that the fader on Mac A can control the fader on Mac B, which in turn sends the correct MIDI values to the synthesizer.

If you need to run two different servers, consider using a frame widget to access the second server from the first one. However, note that sending messages to Open Stage Control updates the widgets but does not trigger them to send messages back by default. To enable OSC replies, a custom module is required (see this example).

[Attachment: example]

# Integrating Custom JavaScript Code and External Libraries in Open Stage Control

## Problem Description
Users want to integrate custom JavaScript modules with graphical interfaces and behaviors using libraries such as Planck.js, Matter.js, or P5.js within Open Stage Control (OSC). There are questions regarding whether to use a Frame module or a Custom module, the necessity of running a separate HTML server, and the compatibility of various JavaScript libraries.

## Solution
1. **Module Selection**: Use a Frame widget to display another webpage. The path to the HTML file can be either absolute or relative to the session file. However, note that the Frame widget will not interact directly with other OSC widgets unless it sends OSC messages to the server.

2. **Server Requirement**: You do not need to run a separate HTTP server to load the JavaScript. The HTML file can be loaded directly as long as the path is correctly specified.

3. **JavaScript Compatibility**: The compatibility level is generally as good as a standard web browser. However, the Frame widget may impose some limitations. It is advisable to test the webpage directly in a browser before displaying it in a Frame within OSC. Check the browser console (F12) for any errors if the JavaScript does not function as expected.

4. **Building from Source**: For advanced users wanting to implement custom features, building OSC from source is an option. However, it is important to note that OSC is designed primarily for remote control and scripting conveniences, and time-critical tasks are better handled by dedicated software.

For further guidance on building from source, refer to the documentation available at [openstagecontrol.ammd.net](https://openstagecontrol.ammd.net). 

(attachment reference missing)

# Start on Program Launch or with Hotkey

## Problem Description
Users may want to automatically load a specific session file when launching Open Stage Control (OSC) on Windows. Additionally, there is a need for remote reset/loading of the session.

## Solution
To automatically load a session file when starting OSC, you can launch the application from a terminal with specified server options. Use the following startup script:

```bash
cd path\to\open-stage-control
open-stage-control.exe -- --load path\to\session.json
```

This method bypasses the OSC launcher and directly loads the desired session file.

# Save (on the server) change default folder path

When exporting fragments or saving files in Open Stage Control, users may want to change the default folder location from the default Windows user folder to a more convenient location.

## Solution

In the upcoming version, Open Stage Control will remember the last displayed directory, improving the user experience. 

However, if the last used folder has been renamed, moved, or deleted, an error may occur when attempting to save or open a session. To avoid this issue, you can modify the `"last-dir"` attribute in the `%APPDATA%\open-stage-control\Config\config.json` file. This will allow the application to default to `%HOMEPATH%` if the last directory does not exist.

This issue has been acknowledged and will be addressed in version 1.27.1.

# CSS for a Matrix Child Issue

## Problem Description
A user encountered an issue where the folder picture did not appear when the first button of a matrix was off. The relevant properties of the matrix were configured, but the expected CSS classes did not apply correctly.

## Solution
The issue was resolved by moving the CSS classes to the Root level. This adjustment allowed the classes to function properly, ensuring that the correct folder images displayed based on the button states. 

For reference, the original matrix properties included conditions for visibility and CSS classes based on the button state. The following properties were initially set:

```javascript
props.label = $ !== 0 ? Lab_Basses[$] : false;
props.visible = $ !== 0 ? @{Basses_0} == 1 ? 1 : 0 : true;
props.height = 60;
props.expand = false;
props.padding = 'off';
props.colorStroke = 'off';
props.html = $ === 0 ? '<h1>Basses</h1>' : '';
props.css = $ === 0 ? @{Basses_0} === 0 || undefined ? 
'class: Dossier_fermé;h1{background:rgba(178,44,44,.4);margin-left:60px;height:60px;line-height:60px;}' : 
'class: Dossier_ouvert;h1{background:rgba(178,44,44,.6);margin-left:60px;height:60px;line-height:60px;}' : 
'';
```

The CSS classes defined were:

```css
.Dossier_fermé { background: no-repeat 15px 16px / 15% url(Images/Cubase_Divers/Répertoire_fermé.png); }
.Dossier_ouvert { background: no-repeat 15px 16px / 15% url(Images/Cubase_Divers/Répertoire_ouvert.png); }
```

By placing the CSS classes in the Root, the issue was resolved.

# Fragments Exporting/Importing

## Problem Description
When attempting to import a panel of buttons from a JSON file using Open Stage Control, the panel does not appear as expected. The initial approach involved using `loadJSON` to load the JSON data and then sending it to the client upon session opening. However, the panel fails to display correctly.

## Solution
To properly load and display fragments in Open Stage Control, follow these guidelines:

1. **Use Fragment Widgets**: Instead of trying to load a fragment directly, utilize a fragment widget. This is the intended method for handling fragments.

2. **Access Widget Content**: When loading JSON data, ensure you access the widget data correctly. Use `widgetData.content` to retrieve the necessary content from the loaded JSON.

3. **Load JSON Once**: Load your JSON files at the beginning of your JavaScript file. For example:
   ```javascript
   var FM8Panel = loadJSON('./panels/FM8.json');
   var absynthPanel = loadJSON('./panels/absynth.json');
   ```

4. **Conditionally Send Data**: In your `oscInFilter` function, reference the loaded JSON data based on conditions. For example:
   ```javascript
   if (args[1].value == 116 && args[2].value == 1) {
       receive('/EDIT', 'UI_Panel', JSON.stringify(FM8Panel.content));
   } else if (args[1].value == 116 && args[2].value == 2) {
       receive('/EDIT', 'UI_Panel', JSON.stringify(absynthPanel.content));
   }
   ```

By following these steps, you can effectively manage and display different UI panels based on incoming MIDI control changes. 

[Attachment: UI_synth1.json]  
[Attachment: UI_synth2.json]  
[Attachment: FM8.json]  
[Attachment: absynth.json]

# Copying and Moving Multiple Buttons in Open Stage Control

**Problem Description:**
Users may want to copy and move multiple buttons simultaneously within a project. The challenge lies in selecting multiple buttons efficiently without having to handle them individually.

**Solution:**
To select multiple buttons in Open Stage Control, use the following steps:

1. **Select Multiple Buttons:**
   - Hold `Ctrl` (or `Command` on Mac) and click on each button you wish to select.

2. **Move the Selected Group:**
   - After selecting the buttons, hold `Alt` and use the mouse to drag the entire group to the desired location.

3. **Using Containers for Grouping:**
   - For easier management, place related buttons inside a container. This allows you to copy and paste the entire container, duplicating all buttons within it. Use the format `+id1` when pasting to ensure all buttons are duplicated correctly.

By following these steps, you can efficiently manage multiple buttons in your project. 

[Attachment: filename.ext]

# RGB Widget Changing Color of a Button

When using an RGB widget to change the color of another widget, such as a button, it's important to understand how the RGB values are transmitted.

## Problem Description
The RGB widget sends color values as an array, but there may be confusion on how to properly reference these values in the button's `colorWidget` property.

## Solution
To correctly set the `colorWidget` of a button using the RGB values from the RGB widget, use the following syntax:

```javascript
#{`rgb(${@{rgb_1}.join(",")})`}
```

This OSC JavaScript block concatenates the RGB array values into a string formatted as `rgb(r, g, b)`, which is compatible with the button's `colorWidget` property.

# Opening a Web Page with JavaScript in Open Stage Control

## Problem Description
Users may want to open a web browser with a button press in Open Stage Control to provide online help or links to websites. The initial attempt using the `window.open(url, '_blank')` method in the script field does not function as expected. Additionally, there is a need to display a simple URL within an HTML tag, but the interactive functionality is removed due to the sanitizer.

## Solution
1. **Custom Module for Opening URLs**: There is no built-in functionality to open a web page directly. However, you can create a custom module using the `openurl` native module to achieve this.

2. **Allowing `href` in HTML Tags**: The sanitizer in Open Stage Control removes the `href` attribute from anchor (`<a>`) tags by default. To allow this functionality:
   - The `sanitizeHtml` library can be modified to permit the `href` attribute on anchor elements. This change has been committed to the Open Stage Control source code.

For further details, refer to the source code changes at [github.com/jean-emmanuel/open-stage-control](https://github.com/jean-emmanuel/open-stage-control).

[Attachment: filename.ext]

# Sending Two MIDI Control Change Messages Based on Button Interaction

## Problem Description
The goal is to send two different MIDI messages from a single button depending on the interaction: a tap sends one message, while holding the button for 5 seconds sends another.

## Solution
To achieve this behavior, use the following scripts in the button's configuration:

```javascript
// onCreate
locals.holding = false;

// onValue
if (value === 1) {
  locals.holding = true;
  setTimeout(() => {
    send('midi:device_name', '/control', 2, 15, 1);
    locals.holding = false;
  }, 5000); // 5 seconds
} else {
  if (locals.holding) {
    clearTimeout();
    locals.holding = false;
    send('midi:device_name', '/control', 1, 15, 1);
  }
}
```

This script sets a timeout when the button is pressed, sending the second message if the button is held for 5 seconds. If the button is released before 5 seconds, it cancels the timeout and sends the first message.

# Filling Buttons into a Panel

**Problem Description**  
When adding buttons to a panel in Open Stage Control, the user wants the first 8 buttons to maintain their full size while ensuring that any additional buttons automatically resize to fit within the panel. The initial configuration using `gridTemplate` does not achieve this desired behavior.

**Solution**  
To achieve the desired layout where the first 8 buttons are full size and any additional buttons resize to fit, you can use the following configuration:

```css
grid-template: repeat(8, 50px) auto / auto;
```

However, if you want to ensure that the buttons resize only after reaching a specific number (e.g., 8 buttons), consider using the `vertical` layout if multiple columns are not required. This layout will allow the first set of buttons to maintain their size while dynamically adjusting the size of any additional buttons. 

For a more complex layout with multiple columns, you may need to adjust the `grid-template` property further based on your specific requirements. 

[Attachment: filling_buttons.png]

# Matrix Default Values Configuration

## Problem Description
When attempting to set a default button "on" state in a matrix of buttons, using the default field with an array (e.g., `["Alt 1", 0, 0, 0, 0]`) does not work as expected. The button does not default to being "on". Setting the button state manually in the `onCreate` function works, but it's unclear if default values can be set for a matrix or if this is a bug.

## Solution
The `value` property of the matrix widget does not propagate to its children, and you cannot directly set the value of a matrix widget. Instead, you can use the `JS{}` syntax within the `props` property to dispatch an array of default values. Here’s an example:

```javascript
JS{
var props = {}

var labels = ['a', 'b', 'c', 'd', 'e']
var values = ["Alt 1", 0, 0, 0, 0]

props.label = labels[$]
props.value = values[$]

return props
}
```

This code snippet will properly set the default values for the matrix buttons.

# Widget Visibility Based on Another Widget's Value

**Problem Description:**
Users may encounter issues with making a series of menu widgets visible or invisible based on the value of a text widget. The text widget receives its value from an external source (e.g., Cubase) via MIDI CC messages. Despite the text widget updating correctly, the visibility of the menu widgets may not behave as expected.

**Solution:**
1. **Comparison Logic**: Ensure that the comparison logic is correctly implemented. For example, instead of using:
   ```javascript
   value === [1, 127]
   ```
   Use:
   ```javascript
   if (Array.isArray(value) && value[0] === 1 && value[1] === 127)
   ```
   or simply:
   ```javascript
   value === 1
   ```
   or
   ```javascript
   value === 0
   ```
   Note that direct array comparisons will not work as intended in JavaScript.

2. **String Comparison**: If comparing against a string, ensure that the syntax is correct. For example:
   ```javascript
   if (value === "piano fx") {
       setVar('pianofxmenu', 'my_visibility', true);
   } else {
       setVar('pianofxmenu', 'my_visibility', false);
   }
   ```
   Avoid using assignment expressions in function calls, as this can lead to confusion.

3. **Check for Consistency**: If the visibility works for some tracks but not others, verify that the text widget is receiving the correct value for each track. Debugging the value received can help identify any inconsistencies.

4. **Update to Latest Version**: Ensure that you are using the latest version of Open Stage Control, as updates may resolve existing issues.

[Attachment: text widget's current value 1280×984 173 KB]

# Change Fader CC Output Based on Position

To dynamically change the CC output of a fader based on its position, you need to utilize a variable in your Open Stage Control session.

## Problem Description
Users may encounter difficulty in setting up a fader to change its CC output based on its position using variables.

## Solution
1. Ensure that there is a widget with the ID `pitchSend` in your session, such as a variable widget.
2. Use the correct syntax to set the variable. Instead of:
   ```javascript
   set"{pitchSend}", 99
   ```
   use:
   ```javascript
   set("pitchSend", 99)
   ```

This will allow the fader to correctly reference and change the CC output based on its position. 

[Attachment: image]  
[Attachment: image]

# How to Send a Message Periodically and Configure Knobs in Open Stage Control

## Problem Description
Users may need to send OSC messages periodically (e.g., `/xremotefb` every second) and configure knobs to represent specific ranges and values in Open Stage Control. Additionally, users may encounter issues with displaying precise values and converting ranges for knobs.

## Solution

### Sending OSC Messages Periodically
To send an OSC message periodically, create a custom module in Open Stage Control. Use the following code snippet:

```javascript
setInterval(() => {
    send('127.0.0.1', 5555, '/ping');
}, 1000);

module.exports = {
  // init, oscInFilter, oscOutFilter... see docs
}
```

### Configuring Knobs with Specific Ranges
To configure a knob to display values from -100 to +100, use the `range` property and enable the `pips` property. As of version 0.48.4, the configuration should look like this:

```json
{
  "min": {"-100": 0},
  "max": {"+100": 1}
}
```
For more details, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/widgets-reference/#knob_range).

### Displaying Modified Values
To display a modified value in a text widget under the knob, you can use the following expression:

```javascript
#{(100*@{knob_1})-50}
```
To limit the precision of the displayed value, set the input's `precision` property.

### Converting Knob Values to a Logarithmic Scale
For converting knob values from a range of 0-1 to a logarithmic scale (e.g., 20-20000), enable the `logScale` property of the knob and set its range as follows:

```json
{
  "min": 20,
  "max": 20000
}
```

This configuration will allow the knob to represent values on a logarithmic scale effectively.

# Switch Text - Duplicate Labels

## Problem Description
Users may want to assign the same label to multiple buttons in a switch widget in Open Stage Control. Initially, it was not possible to have duplicate labels, leading to the need for workarounds or the use of multiple button widgets.

## Solution
As of the latest updates, you can now use a new syntax to allow duplicate labels in a switch. The following configuration can be used:

```json
{
  "labels": ['a', 'b', 'a', 'c'],
  "values": [1, 2, 3, 4]
}
```

This allows for the same label to be assigned to multiple buttons within the switch.

Additionally, users can customize the styles or colors of the various elements/buttons on the switch, enhancing the visual presentation of the interface. 

For earlier workarounds, users had previously used variations in spacing to create the illusion of duplicate labels, but this is no longer necessary with the new syntax. 

[Attachment: Screenshot 2021-11-03 at 10.40.55]

# Trouble with Dropdown Menu Sizing

When using dropdown menus in Open Stage Control, users may encounter issues with the visibility and sizing of the dropdown grid, particularly when multiple elements are present. This can lead to dropdowns being cut off or unreadable, especially when positioned on the left side of the screen.

## Solution

A confirmed solution to improve the dropdown menu appearance is as follows:

1. Change the grid layout to "Vertical".
2. Adjust the `menuAlignV` property:
   - Set to "Top" for dropdowns located in the top row.
   - Set to "Bottom" for dropdowns located in the bottom row.
3. Modify the size of the dropdown to `[100, 500]` to ensure all elements fit within the visible area.

This configuration helps ensure that the dropdown menus are fully visible and readable on the screen.

[Attachment: Screen Shot 2022-05-16 at 1.24.33 AM]
[Attachment: Screen Shot 2022-05-16 at 1.24.41 AM]
[Attachment: Screen Shot 2022-05-16 at 1.24.36 AM]
[Attachment: Screen Shot 2022-05-16 at 9.10.35 AM]
[Attachment: Screen Shot 2022-05-16 at 9.37.08 AM]

# Change Widget Class Based on Conditions in Open Stage Control

## Problem Description
Users want to dynamically change the class of button widgets based on the value of a variable (e.g., `testSwitch_1`). An initial attempt to implement this using a conditional statement in the CSS box of the button widget did not work as expected.

## Solution
To change the class of a button widget based on a condition, ensure that the syntax is correct. The following example demonstrates how to use an if statement within the CSS box:

```css
:host {
  #{@{testSwitch_1} == 1 ? "class: wizardGreenBtn;" : "class: wizardGreenBtnImage;"}
}
```

**Note:** Adding a new line after `:host {` resolves parsing issues.

For more complex scenarios, such as changing the class based on an array of classifications, you can use a JavaScript loop to set the class dynamically. Here’s a simplified approach:

1. Define an array for classifications:
   ```javascript
   var instrument = {
       '5': { /* ... */ },
       '6': { 'artType': [1, 2, 1, 3, 5, 2], /* other properties */ },
       // other instruments...
   };
   ```

2. Loop through the `artType` array and set the class based on its value:
   ```javascript
   var gridSize = instrument[instrNumber].trackArticulations.length;
   var artType = instrument[instrNumber].artType;

   for (i = 0; i < gridSize; i++) {
       var buttonClass;
       if (artType[i] == 1) {
           buttonClass = 'articulationLong';
       } else if (artType[i] == 2) {
           buttonClass = 'articulationShort';
       }
       // Add more conditions as needed

       // Apply the class to the button
       receiveOsc({
           address: Object.values(artButtons)[i],
           args: [
               { type: 's', value: buttonClass }
           ]
       });
   }
   ```

This method allows you to dynamically assign classes to buttons based on their corresponding `artType` values. Adjust the conditions as necessary to fit your specific requirements.

# Issue with Interaction Property on Tabs

When the interaction property of a tab is set to false, the pointer is still active, allowing interaction with the tab itself.

## Solution

The interaction property only affects the content within the tab, not the tab button in the navigation, which is controlled by its parent. Therefore, disabling interaction on the tab does not prevent interaction with the tab button. 

[Attachment: image.png]

# How to Create Two Interfaces Working in Parallel

**Problem Description:**
Users may want to run two interfaces in parallel using Open Stage Control, allowing different devices to connect and control separate sessions.

**Solution:**
There are multiple solutions to achieve this:

1. **Single Server with Multiple Clients:**
   - Run one Open Stage Control server.
   - Connect both tablets (clients) to the server using the URL `http://ip:7500`.
   - Load different session files in each client using the main menu.

2. **Automatic Session Loading Based on Client IP:**
   - Similar to the first option, but configure the server to automatically load a specific session based on the client's IP address. For more details, refer to the discussion on [Multiple unique clients - #4 by jean-emmanuel](attachment reference missing).

3. **Two Separate Servers:**
   - Alternatively, you can run two instances of the Open Stage Control server, each serving a different interface.

The first option is the simplest and most effective for users who are less experienced with server configurations.

# Update a Knob's Value by Incoming SYSEX

**Problem Description:**
A custom module requires updating a knob's value based on incoming SYSEX messages. The challenge is to convert hexadecimal values from the SYSEX string to integers and then adjust the knob with a specific ID in the custom module.

**Solution:**
1. **Convert Hexadecimal to Integer:**
   Use the `parseInt()` function to convert the hexadecimal string to an integer:
   ```javascript
   parseInt('7f', 16); // Returns 127
   ```

2. **Receive and Update Knob Value:**
   To update the knob's value with a specific ID, use the `receive` function with the appropriate OSC address. For example:
   ```javascript
   receive('/STATE/SET', {'xyz': VALUE});
   ```
   Here, replace `VALUE` with the integer value obtained from the SYSEX message.

3. **Implementation Steps:**
   - In the `oscOutFilter` function, send the SYSEX message.
   - In the `oscInFilter` function, parse the incoming SYSEX string to extract the hexadecimal values, convert them to integers, and then call the `receive` function to update the knob.

By following these steps, the GUI will be updated based on the values from the device, ensuring synchronization between the hardware and the interface.

# Issue with "Save As..." and "Open" Functions in Open Stage Control

**Problem Description:**
After updating to version 1.14 (and 1.14.1), users may experience issues with the "Save As..." and "Open" functions, where they are unable to click on folders to save or open files. This may be accompanied by layout issues when interacting with widget properties.

**Solution:**
Check if you are using a theme file. The layout issues can affect the functionality of the "Save As..." and "Open" features. Removing or adjusting the theme file should resolve the problem.

# Custom Module EDIT on Init Timing Issue

When attempting to change labels via the `/EDIT` command in the init function of a Custom Module, the command may fail silently if it is received before the target widgets are fully loaded. This results in the command executing without any effect.

## Solution

To ensure that the `/EDIT` command is executed only after the session has fully loaded, use the following code snippet:

```javascript
app.on('sessionOpened', function(data, client) {
    // Event triggered when a client finishes loading a session
    receive('/EDIT', 'widget_id',
        {label: 'foo'}, // Overwrite some properties
        {noWarning: true}, // Prevent "unsaved changes" prompt (optional)
        {clientId: client.id} // Send command only to the client that just connected (recommended)
    );
});
```

This method is more reliable than using a timer and ensures that the command is executed at the appropriate time. 

[Attachment: filename.ext]

# Double Touch Behavior in Range Widget

**Problem Description:**
The range widget in Open Stage Control behaves like a single-touch widget with increased precision when attempting to move both knobs simultaneously. Users expect to manipulate both points of the slider at the same rate, similar to multitouch functionality.

**Solution:**
This issue has been identified as a bug or regression. It was confirmed that the multitouch functionality works correctly in the multixy widget. The problem with the range widget has been addressed and was fixed in the release on July 4, 2022. Users experiencing this issue should update to the latest version to resolve the problem.

# Binding Two Switches with Different Values

## Problem Description
The goal is to link two switches so that when one switch is activated (e.g., "Value A"), it sends a signal to both plugins with different values. The second switch should operate independently when another value (e.g., "Value X") is selected, allowing the user to choose from multiple values (e.g., Value1, Value2, Value3) without affecting the first switch.

## Solution
To achieve the desired functionality of linking the two switches, follow these steps:

1. **Configure the First Switch**: Set up the first switch to send the desired command (e.g., "Value A") to the first plugin.
2. **Link the Second Switch**: Configure the second switch to respond to the first switch's state. When the first switch is activated, the second switch should send its own command (e.g., "Value1") to the second plugin.
3. **Independent Operation**: Ensure that when "Value X" is selected on the first switch, the second switch can operate independently, allowing for the selection of any of its values (Value1, Value2, Value3).

For a practical example, you may refer to the provided session file that demonstrates this setup: [Attachment: tabs-instead-of-switches.json]. 

This configuration allows for simultaneous control of both switches while maintaining the independence of the second switch when necessary.

[Attachment: fCNVfqo3LlvKAsic77Z9O6gKQt9.json]

# Switch with Three Value Colors

## Problem Description
The goal is to create a switch with three values, each displaying different text colors based on the selected value. The desired colors are:
- Value 1: Blue (on) / Grey (off)
- Value 2: Green (on) / Grey (off)
- Value 3: Orange (on) / Grey (off)

## Solution
To achieve this, you can use the following CSS code in the switch's CSS field:

```css
:nth-child(1) {
   #{@{this} == 1 ? 
      "color:blue" : 
      "color:grey"};
}

:nth-child(2) {
   #{@{this} == 2 ? 
      "color:green" : 
      "color:grey"};
}

:nth-child(3) {
   #{@{this} == 3 ? 
      "color:orange" : 
      "color:grey"};
}
```

Additionally, if you want to include background images for each state, you can expand the CSS as follows:

```css
:nth-child(1) {
   #{@{this} == 1 ? 
      "background:url(Images/Cubase_Divers/QC_Pistes_original.png);" : 
      "background:url(Images/Cubase_Divers/QC_Pistes_off.png);"};
   background-repeat:no-repeat;
   background-position:center;
   background-size:contain;
}

:nth-child(2) {
   #{@{this} == 2 ? "color:#32cd32" : "color:grey"};
   font-size:120%;
   background:url(Images/Cubase_Divers/QC_EQ.png);
   background-repeat:no-repeat;
   background-position:center;
   background-size:contain;
}

:nth-child(3) {
   #{@{this} == 3 ? "color:orange" : "color:grey"};
   font-size:110%;
   background:url(Images/Cubase_Divers/QC_MIDI.png);
   background-repeat:no-repeat;
   background-position:center;
   background-size:contain;
}
```

This configuration will set the text color and background image based on the selected value of the switch.

# Floating Value Slider for Controlling Volume

## Problem Description
A user wants to create a fader (slider) in Open Stage Control to control the volume of an OSC Player using the address `/volume` with values ranging from 0 to 100. The user is experiencing issues with the slider outputting the correct format to the OSC Player.

## Solution
1. **Set the Range for the Fader**: Configure the fader's range with the following settings:
   ```json
   {
     "min": 0,
     "max": 100
   }
   ```
   This ensures the slider outputs values between 0 and 100.

2. **Address Configuration**: Ensure the OSC address is set to `/volume`.

3. **Output Format**: Since the OSC Player accepts the command as a STRING, set the `typeTags` under the OSC tap to `s` to send the value as a string.

4. **Debugging**: Enable the server's debug option to monitor what is being sent when moving the fader. This can help confirm that the correct values are being transmitted.

5. **Example Configuration**: Refer to the provided example file for a starting point:
   [Attachment: ukdlO4Fw4F3IF7uGAV7vssEDgNb.json] 

By following these steps, the fader should correctly control the volume of the OSC Player.

# Sending a MIDI Message Without User Interaction Using a Custom Module

## Problem Description
Users may encounter difficulties sending MIDI messages without user interaction in Open Stage Control. Specifically, the `send()` function does not operate as expected unless it is triggered by user interaction. This can lead to confusion regarding the proper implementation of custom modules and OSC message handling.

## Solution
To send a MIDI message without user interaction, you need to handle the reply logic in the custom module's `oscInFilter` function. Here’s a concise overview of how to set this up:

1. **Custom Module Setup**:
   Implement the `oscInFilter` function to process incoming OSC messages and respond accordingly. This function should check for specific conditions and send replies based on the received data.

   ```javascript
   module.exports = {
       oscInFilter: function(data) {
           if (data.host === 'midi' && data.port === 'SKiano-C') {
               var [channel, control, value] = data.args.map(x => x.value);
               if (control > 63 && control < 74) {
                   var digit = 73 - control;
                   var msb = value >> 4;
                   var val = value & 0xF;
                   if (msb >> 2) val += '.';
                   if (!(msb & (1 << 1))) val = '';
                   receive('/timecode', digit, val);
                   return;
               }
           }
           return data;
       }
   }
   ```

2. **Sending OSC Messages**:
   To trigger actions in the custom module from a widget, use the `send()` function. Note that this function requires user interaction to execute. Therefore, ensure that the OSC message is sent correctly from the widget script.

   ```javascript
   send("127.0.0.1:8080", "/outAdd", {type: "i", value: str});
   ```

3. **Avoiding Feedback Loops**:
   Be mindful of creating infinite feedback loops when sending and receiving messages. The design of OSC inherently prevents such loops, so ensure your logic accounts for this.

By following these steps, you can effectively send MIDI messages without requiring user interaction, utilizing the custom module's capabilities to manage OSC messages properly.

[Attachment: image1.png]
[Attachment: image2.png]

# Maximizing Surface Area on an iPad

**Problem Description:**
Users seeking to maximize the touchable area on an iPad while using Open Stage Control often inquire about the best browser and settings to minimize the space occupied by browser controls such as tabs.

**Solution:**
To maximize the touchable area on an iPad, follow these steps:

1. **Use Safari**: Open your templates in Safari.
2. **Add to Home Screen**: Select the option to "Add to Home Screen." This will create a standalone app-like experience without browser tabs and interface elements.

Note: The "Add to Home Screen" option is not available in Chrome on iPadOS. Therefore, using Safari is recommended for this purpose. 

[Attachment: filename.ext]

# Sending MIDI CC via Tabs in Open Stage Control

## Problem Description
Users migrating from TouchOSC to Open Stage Control may encounter difficulties sending MIDI CC messages when interacting with tabs. Specifically, the issue arises when trying to send a MIDI CC message to display the BPM (Beats Per Minute) value from Ableton Live in a text widget upon selecting a tab.

## Solution
To successfully send MIDI CC messages when a tab is clicked, configure the parent of the tab. The value of the tab's parent indicates the index of the selected tab. Use the following script to send the appropriate MIDI CC message based on the selected tab:

```javascript
if (value === 0) {
  // First tab selected
  send('midi:my_port', '/control', 12, 58, 127)
}
```

This script should be placed in the panel's `script` property. 

To display the BPM value in a text widget, ensure that the OSC message is correctly formatted and that the text widget is configured to listen for the OSC address you are sending. For example, if you are sending the message `osc flt /dsp% BPM%`, the text widget should be set to listen on the address `/dsp`.

For further details on scripting in Open Stage Control, refer to the documentation: [Open Stage Control Scripting](https://openstagecontrol.ammd.net/docs/widgets/scripting/). 

By following these steps, you should be able to achieve the desired functionality of sending MIDI CC messages and updating the text widget with the BPM value.

# Menu Selection Issue After Update

**Problem Description:**
After a recent update of Open Stage Control (OSC), a user experienced issues with a menu widget where selected values were not displayed correctly. The problem seemed to arise specifically when using a certain character (―) in the menu options. The user suspected this might be a regression or a change in functionality with the new update.

**Solution:**
The issue was resolved by removing the IP address from the configuration. Users experiencing similar problems should consider checking their menu configurations and removing any problematic characters or settings that may interfere with value display. If issues persist, testing with previous versions of OSC may help identify if a regression has occurred.

[Attachment: Menu_test.json]

[Attachment: fAXhNqaozRSoGRW3piKV7l2Nbmz.json]

# Script to Start Playback in Cubase from a Specific Bar

## Problem Description
Users may need a script to control playback in Cubase, allowing them to start from a specific bar number using a MIDI controller. The script must handle bar offsets and ensure that playback starts accurately based on user input.

## Solution
The following script can be used to start playback in Cubase from a specified bar. It checks the value of a widget and sends MIDI commands to move the cursor and initiate playback.

```javascript
// If the widget with the ID 'misc_for_keypad' is value 1, then the value entered into the keypad will trigger the following lines.
if (get('misc_for_keypad') === 1) {
    // Delay origin
    setTimeout(function() {
        send('midi:SessionKiano', '/note', 7, 38, 1); // Move the cursor in Cubase to the start of the project (origin).
        send('midi:SessionKiano', '/note', 7, 41, 1); // Move the cursor 5 bars forward

        setTimeout(function() {
            var obar = parseInt(`${get('digit_1')}` + `${get('digit_2')}` + `${get('digit_3')}`); // Old bar
            setTimeout(function() {
                var nbar = get('this'); // New bar
                var diff = Math.abs(nbar - obar); // Difference calculation

                setTimeout(function() {
                    if (diff < 5 && nbar < obar) {
                        for (var i = 0; i < diff; i++) {
                            send('midi:SessionKiano', '/note', 1, 73, 1); // Cursor +1 (previous bar)
                        }
                    } else if (diff < 5 && nbar > obar) {
                        for (var i = 0; i < diff; i++) {
                            send('midi:SessionKiano', '/note', 1, 72, 1); // Cursor +1 (next bar)
                        }
                    } else if (diff > 4 && nbar > obar) {
                        for (var i = 0; i < diff; i++) {
                            send('midi:SessionKiano', '/note', 1, 72, 1); // Cursor +1
                        }
                    }

                    setTimeout(function() {
                        // Reset button states
                        set('push_43', 0, {send: false});
                        set('Backward one bar', 0, {send: false});
                        set('forward_one_bar', 0, {send: false});

                        // Start playback
                        send('midi:SessionKiano', '/note', 1, 75, 1);
                    }, 230);
                }, 220);
            }, 200);
        }, 180);
    }, 50);
}
```

### Important Notes
- A bar offset between 1 (lowest value) and 5 (highest value) must be set in **Project/Project Setup**.
- If the bar offset exceeds 5, the cursor may start playback from an earlier bar than intended.
- If the bar offset is less than 1, it may cause the following issues:
  - At bar offset 0, entering "1" will trigger playback from bar 6.
  - At bar offset -1, entering "1" or "2" will trigger playback from bar 7.
  - At bar offset -2, entering "1", "2", or "3" will trigger playback from bar 8.

[Attachment: filename.ext]

# How to Escape Backslashes in Matrix Properties

## Problem Description
When using a string in matrix properties within Open Stage Control, backslashes are not behaving as expected. Typically, two backslashes are used to escape a single backslash, which works in scripting properties. However, in matrix properties, the output shows two backslashes instead of one.

## Solution
To ensure the correct representation of backslashes in matrix properties:

1. **Use Two Backslashes**: Always use two backslashes (`\\`) to represent one backslash in strings. This is the expected behavior in many programming contexts, including Open Stage Control.

2. **Consider Using Forward Slashes**: If issues persist, consider using forward slashes (`/`) instead of backslashes. Open Stage Control can handle forward slashes on all operating systems, including Windows.

3. **Check Path Formatting**: Ensure that the path is correctly formatted. For example, a path starting with `.Pictures` should be correctly referenced as `./Pictures` or `/.Pictures` depending on your operating system.

By following these guidelines, you should be able to correctly display and utilize backslashes in your matrix properties without issues.

[Attachment: hIaOPiNchQhyxDHsaCesxRJ7CTI.json]

# Matrix Props Using OSC Listener With Index

**Problem Description**  
The user is attempting to utilize an OSC listener within a matrix to dynamically set labels based on the matrix index. However, the OSC listener does not function as intended when used directly inside matrix properties.

**Solution**  
The OSC listener cannot be used directly within matrix properties because it is parsed before the JavaScript block. Instead, use an external variable and reference it within the matrix using the `@{variable_1}` syntax. 

To implement this, consider creating a variable matrix to receive OSC messages. Set the quantity to the maximum number of possible values and configure the properties as follows:

```json
{
  "address": "/adm/obj/#{$ + 1}/name",
  "id": "name_#{$ + 1}"
}
```

This approach allows you to handle OSC messages effectively while updating the matrix labels accordingly.

# Tab CSS Doesn't Inherit from Parent Panel

**Problem Description:**
Tabs in Open Stage Control do not inherit CSS properties from their parent Panel. This results in the tab background remaining the default color, even when the parent panel's background color is changed. Users may find it cumbersome to edit the CSS properties for each individual tab, especially when dealing with a large number of tabs.

**Solution:**
To ensure that tabs inherit the background color from their parent panel, you can add the following CSS to the root's CSS or a theme file:

```css
.navigation {
  background: inherit;
}
.navigation .on {
  background: rgba(255,255,255, 0.4);
}
```

This solution allows for a consistent styling across all tabs without the need to edit each one individually.

# How to Send OSC on Chrome

**Problem Description:**
When using Open Stage Control on Chrome, a user is unable to receive log messages from a fader sending OSC messages to 127.0.0.1:8080. The setup works correctly with the standalone application but not in the browser.

**Solution:**
1. Ensure that the server's debug option is enabled. This setting allows the server to print sent and received messages, which can help in troubleshooting.
2. If using a mobile or tablet, be aware that OSC messages are sent by the server, not the browser. Therefore, the address 127.0.0.1 resolves to the server device, not the mobile device.
3. If issues persist, consider uploading your session file for further analysis.

[Attachment: session_file.osc] (attachment reference missing)

# Change Encoder Position with a Button

**Problem Description:**
A user wants to change the current position of an encoder to a specific value (e.g., 0) using a button in Open Stage Control.

**Solution:**
To achieve this, you can use the `set` function in the button's `onValue` property. For example, to set the encoder's position to 0.33, you can configure the button as follows:

```javascript
set('knob_1', 0.33)
```

This will effectively change the encoder's position when the button is pressed.

For reference, see the attached configuration file that demonstrates this setup: [Attachment: setKnob.json].

[Attachment: 4UX1vJFGlDiDfmNGeV7rARzVSXn_1.json]

# Custom OSC Message per Tab

## Problem Description
Users want to send custom OSC messages when selecting different tabs in Open Stage Control, instead of the default "/tab <tab_index>". The requirement is to have distinct messages for each tab that remain consistent even if the order of the tabs changes.

## Solution
To achieve this, you can use the `onValue` script of the tab parent. Here’s a reliable method to send custom OSC messages based on the tab ID:

1. **Get the Index of Each Tab**: Use the `getIndex` function to retrieve the index of each tab by its ID.
   
   ```javascript
   let fooIndex = getIndex('foo');
   let barIndex = getIndex('bar');
   ```

2. **Send Custom OSC Messages**: Implement a conditional statement to send the appropriate OSC message based on the selected tab's index.

   ```javascript
   if (value === fooIndex) {
     send('/foo', 1, 2, 3);
   } else if (value === barIndex) {
     send('/bar', 4, 5, 'six');
   }
   ```

3. **Alternative Using Switch Statement**: You can also use a switch statement for a cleaner approach:

   ```javascript
   switch (value) {
     case getIndex('foo'):
       send('/foo', 1, 2, 3);
       break;
     case getIndex('bar'):
       send('/bar', 4, 5, 'six');
       break;
   }
   ```

This setup allows you to change the order of the tabs without affecting the OSC messages sent.

### Additional Information
For practical implementation, a sample JSON session file is provided for testing:
[Attachment: mI1UIo0xT9cd0SlANXA5ysgdBjt.json]

An improved version of the session that allows external selection of any tab via OSC messages is also available:
[Attachment: 6l3Q0Y5TzwnycLMk9ScMcDFtPcS.json]

# Xy Pad to Knob Filtered by a Dropdown

## Problem Description
Users want to send XY values separately to knobs based on the selection of a dropdown widget to control different parts of a synthesizer. The challenge is to implement this functionality effectively using scripts.

## Solution
To achieve this, you can use the script property of the XY widget to read the state of the dropdown and update the corresponding knobs. Here’s a reliable approach:

1. **Script for XY Widget**:
   Use the following script to update the knobs based on the dropdown selection:

   ```javascript
   var choice = get('dropdown_1');
   if (choice == 1) { set('knob_1', value[0]); }
   else if (choice == 2) { set('knob_2', value[0]); }
   // Add more conditions as needed for other knobs

   choice = get('dropdown_2');
   if (choice == 1) { set('knob_1', value[1]); }
   else if (choice == 2) { set('knob_2', value[1]); }
   // Add more conditions as needed for other knobs
   ```

2. **Script for Knobs to XY**:
   To manage the XY values based on the knobs, use the following script in the script widget:

   ```javascript
   var choice = get('dropdown_1');
   if (choice == 1) { set('xy_1', [get('knob_1'), '']); }
   else if (choice == 2) { set('xy_1', [get('knob_2'), '']); }
   // Add more conditions as needed for other knobs

   choice = get('dropdown_2');
   if (choice == 1) { set('xy_1', ['', get('knob_1')]); }
   else if (choice == 2) { set('xy_1', ['', get('knob_2')]); }
   // Add more conditions as needed for other knobs
   ```

3. **Demo File**:
   A demo file demonstrating this functionality is available: [Attachment: xy_and_knobs.json].

This method allows for flexible control of the knobs based on dropdown selections, ensuring that each knob can be independently controlled by the XY pad.

[Attachment: Z8IAhG9XzjVUXoZG3pdhm954W9.json]

# Auto-Scrolling Panels in Open Stage Control

**Problem Description:**
Users may encounter issues when attempting to stack panels with fixed sizes for automatic scrolling up and down. Instead of enabling scrolling, the panels may resize unexpectedly.

**Solution:**
To achieve the desired auto-scrolling effect, configure the panels for vertical and/or horizontal layout according to your requirements. This setup will ensure that the panels maintain their size while allowing for scrolling functionality.

# How to Enable Full Screen Mode in Browsers and Deactivate the Menu on Smartphones

## Problem Description
Users have reported difficulties in activating full screen mode for the control window in browsers such as Google Chrome and Safari. Additionally, there is a need to deactivate the menu on smartphones.

## Solution
To achieve full screen mode on iOS devices, follow these steps:
1. Add the Open Stage Control page to your home screen. This allows you to launch the application in full screen mode.

To deactivate the menu on smartphones:
1. Enable the `hideMenu` property of the root widget.

These steps should help you configure your Open Stage Control setup effectively.

# Toggling Multiple Track Visibility in Cubase via OSC

## Problem Description
The goal is to toggle the visibility of multiple tracks in Cubase using OSC commands from a touch controller. The challenge arises from Cubase's limited commands, which only allow selecting one track at a time and toggling visibility for selected tracks. Attempts to execute these commands sequentially have resulted in issues where tracks are deselected before their visibility can be toggled.

## Solution
To successfully toggle the visibility of multiple tracks, ensure that commands are executed in the correct order with appropriate delays. The following approach is recommended:

1. **Select the First Track**: Send an OSC message to select the first track.
2. **Press the Ctrl Key**: Use a third-party solution (e.g., Bome) to simulate pressing the Ctrl key.
3. **Select Additional Tracks**: Send OSC messages to select each additional track.
4. **Toggle Visibility**: After all desired tracks are selected, send a command to toggle their visibility.
5. **Release the Ctrl Key**: Finally, release the Ctrl key.

### Example Code
Here is a refined version of the code that incorporates the necessary steps:

```javascript
var stat = get("VariableStatus"); // Track visibility status
send("midi:OSC_GR", "/control", 4, 0, 127); // Select the first track
send("midi:OSC_BMT", "/control", 2, 121, 127); // Press the Ctrl key

// Loop through the tracks of interest
for (var i = 0; i < 16; i++) {
    if (get("InstrMtxAllTx/" + i) === stat) { // Check visibility status
        send("midi:OSC_GR", "/control", 4, i, 127); // Select the track
        set("InstrMtxAllTx/" + i, stat ? 0 : 1, {send: false}); // Update status
    }
}

send("midi:OSC_BMT", "/control", 2, 121, 0); // Release the Ctrl key
send("midi:OSC_GR", "/control", 2, 120, 127); // Toggle visibility for selected tracks
```

### Important Note on `setTimeout`
When using `setTimeout`, be aware that Open Stage Control does not allow multiple unnamed timeouts to run in parallel. This can lead to unexpected behavior where only the last timeout executes. Use named functions or ensure that timeouts are properly managed to avoid conflicts.

By following this structured approach, you should be able to toggle the visibility of multiple tracks in Cubase effectively.

# Slider Matrix Number #9 Not Updating When Triggered by a For Loop in Custom Module

**Problem Description:**
In Open Stage Control version 1.22.0 on Linux Mint 20.1, a specific slider (index number 9) does not update when triggered by a `for` loop in a custom module using the `receive('/SET', target, value)` function. The issue arises when attempting to set the slider to a float value, while integer values work correctly.

**Solution:**
The problem is caused by a conflict between faders and flash/show buttons due to identical IDs and addresses. To resolve this issue, follow these steps:

1. **Assign Unique IDs and Addresses:**
   - Ensure that buttons and faders have different IDs and addresses. This prevents conflicts when the `/SET` command is received.

2. **Use `linkId` or `onValue` Properties:**
   - Utilize the `linkId` or `onValue` properties to link buttons and faders together, rather than using identical IDs.

3. **Direct Address Messaging:**
   - When sending messages, use the widget's address directly instead of the `/SET` command. This allows the value to be passed to all matching widgets without the synchronization issues caused by `/SET`.

By implementing these changes, the slider at index number 9 should update correctly with float values.

[Attachment: VIMIX_ctrl.json]  
[Attachment: midi2OSC.js]  
[Attachment: eY3KLwmidyHKogYhO1h7W9apAN2.json]  
[Attachment: 7C1SRuT7hZwwfjYce0UyhhmyIGp.js]

# Declaring Multiple MIDI Devices in Open Stage Control

When setting up MIDI devices in Open Stage Control, you may want to declare more than one device for bidirectional communication.

## Problem Description
Users may need guidance on the syntax for declaring multiple MIDI devices in the launcher/setup panel.

## Solution
You can declare additional MIDI devices by specifying the `device_name:input,output` format for each device, separated by a space. For example:

```
bmt1-2:12,8 otherdevice:11,7
```

This configuration allows you to set up multiple MIDI devices simultaneously.

# Controlling a Switch with a Script

**Problem Description:**
When controlling a switch widget via a script using `set('preset_recall_switch_0', 1);`, the switch value changes, but it does not send its OSC message. This issue occurs when modifying the default value of a shortcut key, leading to the switch not sending OSC messages despite the state change.

**Solution:**
1. Ensure that the switch has a target defined or that a default target is set using the server's `send` option. This is necessary unless the switch's `bypass` or `ignoreDefaults` options are enabled.
2. Note that widgets do not send messages in response to received messages; they only update their value. To reply to an incoming message, a custom module must be used.
3. A bug related to the script widget in keyboard mode was identified and fixed in version 1.8.1. If you are experiencing this issue, updating to this version may resolve it.
4. If the OSC message loop is intentional for your custom module, ensure that your server configuration supports this behavior.

For further reference, see the attached session files:
- [Attachment: empty_session - minimal.json]
- [Attachment: qPPUIRVhQRD1IAq0P5ql1QHpiY3.json]

# SOLVED: Changing Default Properties of Cloned Panels/Buttons in Matrix

When attempting to modify the default settings of cloned buttons in a matrix, the changes may not take effect as expected. Specifically, inverting the default on and off values of a button can be challenging.

## Problem Description
The user attempted to set the on and off properties of a button within a matrix of cloned panels using the following configuration:

```json
{
  "widgetId": "button_send",
  "props": { "on": 0, "off": 127, "variables": { "n": "#{$ + 9}", "target": "@{midi_target}" }, "visible": true }
}
```

However, the buttons continued to behave with their default settings (on = 127 and off = 0).

## Solution
To successfully override the properties of cloned buttons, the following structure should be used:

```json
{
  "widgetId": "button_send",
  "props": { 
    "props": {
      "on": 0, 
      "off": 127
    }, 
    "variables": { 
      "n": "#{$ + 9}", 
      "target": "@{midi_target}" 
    }, 
    "visible": true 
  }
}
```

Alternatively, a JavaScript approach can be utilized for more complex configurations:

```javascript
JS{
var matrixProps = {
  widgetId: 'button_send',
  props: { on: 0, off: 127 },
  visible: true,
  variables: {
    n: $ + 9,
    target: @{midi_target}
  }
}

// Optionally, populate properties one by one
matrixProps.props.borderRadius = 4;

return matrixProps;
}
```

If the button is nested within a cloned panel, ensure to reference the parent variables for the on and off properties:

```json
{
  "on": "@{parent.variables.on}",
  "off": "@{parent.variables.off}"
}
```

This method ensures that the button behaves according to the desired settings. 

For additional reference, a mini version of the project was provided: [Attachment: fKy6rUvoJfvRv8Wwix0j5WbOLlW.json].

# Client-Side Speech Synthesis and Audio Playback Issues

## Problem Description
Users are experiencing issues with speech synthesis in Open Stage Control. Specifically, when a widget receives an `onValue`, the speech synthesis repeats endlessly in Firefox and does not work at all in Chromium. Additionally, there are challenges with audio playback using the HTML Audio tag, where Firefox fails to load the audio file, and Chromium throws an error stating "Audio is not a constructor."

## Solution

### Speech Synthesis
To implement speech synthesis correctly, use the following approach to ensure that the speech synthesis does not repeat endlessly:

```javascript
globals.synth = window.speechSynthesis;

const utterThis = new SpeechSynthesisUtterance(value + "");
globals.synth.speak(utterThis);

// Optional: Cancel previous utterances if needed
setTimeout(() => {
  globals.synth.cancel();
}, 800);
```

However, since different numbers may have varying utterance lengths, consider implementing a more sophisticated mechanism to manage the utterances, such as checking if the synthesis is currently speaking before queuing a new utterance.

### Audio Playback
For audio playback using the HTML Audio tag, ensure that you are correctly initializing the audio object. Here’s a recommended approach:

```javascript
locals.audio = new Audio("penrose.wav");

locals.audio.play().catch(error => {
  console.error("Error playing audio:", error);
});
```

If you encounter issues with loading the audio file in Firefox, ensure the file path is correct. If using an absolute path, verify that it is accessible and properly formatted. For Chromium, ensure that the audio file is correctly referenced and that the environment supports the Audio constructor.

If problems persist, consider checking browser compatibility or using alternative audio playback libraries that may provide more robust support across different browsers.

### Additional Notes
- If you are still facing issues with speech synthesis or audio playback, consider exploring other libraries or APIs that may offer better compatibility.
- For further assistance, please refer to the relevant documentation or community discussions.

[Attachment: penrose.wav]

# How to Create a Horizontal Fader with an Overlapping Label

## Problem Description
Users may want to display a label on top of a horizontal fader without a background behind the label. Attempts to adjust the label using CSS or overlaying a text widget often result in the text widget intercepting mouse or touch gestures intended for the fader.

## Solution
To achieve a label that overlaps the fader without a background, ensure that the label is styled correctly and positioned appropriately. Here’s how to do it:

1. Use the following CSS to style the label:
   ```css
   > .label {
       position: absolute; /* Position the label absolutely */
       top: 0;            /* Adjust the top position as needed */
       left: 50%;         /* Center the label horizontally */
       transform: translateX(-50%); /* Center the label */
       background: none;  /* Remove background */
       pointer-events: none; /* Allow mouse events to pass through */
   }
   ```

2. Ensure that the label is placed within the same container as the fader, allowing it to overlap correctly.

By following these steps, the label will appear on top of the slider bar without any background, and it will not interfere with the fader's functionality.

# Matrix Dynamic Button Label Configuration

## Problem Description
Users may encounter difficulties when trying to configure dynamic button labels in a matrix, specifically when attempting to display different icons based on the button's pressed state. Additionally, there may be confusion regarding how to assign scripts to button actions.

## Solution
To create a dynamic button label that changes based on the button's state, use the following JavaScript code:

```javascript
JS{
var props = {}

props.id = 'Slider_B' + $
// props.label is split in two parts only for readability 
props.label = '^microphone-lines' + '#_{@_{this} == 1 ? "" : "-slash"}}'
props.onValue = `
console.log('hey I'm button ' + getProp(this, 'id') + ' and my value is ' + value)
`

return props
}
```

### Key Points:
- Define object properties individually to minimize issues with quotes.
- Use an underscore before the opening bracket for advanced syntaxes intended for child elements (e.g., `#_{@_{this}}`).
- Always reference the widget itself using `@_{this}` instead of `@{id}`.
- Use backticks for multiline strings in the `onValue` property, and avoid advanced syntaxes in scripts like `onValue`.

This approach allows for clear and functional button configurations within a matrix in Open Stage Control. 

For further clarification, it is recommended to include a note in the documentation regarding the use of underscores in advanced syntaxes when dealing with child elements.

[Attachment: filename.ext]

# Changing Fonts of Similar Widgets in Open Stage Control

**Problem Description:**
Users may want to change the font size of all instances of a specific widget type (e.g., dropdown menus) within a session in Open Stage Control.

**Solution:**
To change the font size for all similar widgets, you can add custom CSS rules in the CSS panel of the root. For example, to adjust the font size of dropdown menus and buttons, use the following CSS:

```css
.menu-container {
  font-size: 5rem;
}

.button-container {
  font-size: 20rem;
}
```

To identify the correct CSS classes for your widgets, use the developer tools in your browser:
1. Press the F12 key to open the developer tools.
2. Click on the element you want to inspect.
3. Note the displayed CSS classes (e.g., `button-container`, `menu-container`, etc.).

This method allows you to apply consistent styling across all instances of the same widget type. 

[Attachment: image.png]

# How to Call a Function Stored in a Variable Widget

When attempting to call a function stored in a variable widget, ensure that the function is declared correctly. 

## Problem
Users may encounter issues when trying to call a function assigned to a variable, often resulting in the function not being recognized or executed.

## Solution
To successfully call a function stored in a variable widget, declare the function in the root widget's `onPreload` script. This ensures that the function is accessible throughout your scripts.

Example:
```javascript
// In the root widget's onPreload script
globals.myFunction = function() {
    // function code here
};

// Calling the function from another script
globals.myFunction();
```

This approach should resolve any issues related to function accessibility.

# Modal Widget as Input

## Problem Description
The user wants to use a modal as a pure text input, specifically to have the input widget focused automatically when the modal opens.

## Solution
Currently, there is no built-in feature to automatically focus on the input widget when the modal opens. However, a recent update has introduced a `setFocus()` function that allows scripts to set focus on an input widget when the modal is activated. 

This can be implemented in your scripts to achieve the desired functionality.

# Legend Tag in HTML Property

**Problem Description:**
There is a request for support regarding the use of the `<legend>` tag in HTML properties within Open Stage Control panels or buttons, specifically for styling purposes.

**Solution:**
Inserted HTML elements in Open Stage Control are unstyled by default. Therefore, even if the `<legend>` element is used, it will not inherit any default styles. Users need to manually apply styling using CSS to achieve the desired appearance.

# Unique Widget IDs

## Problem Description
When two faders in Open Stage Control share the same `preArgs` setting, they interact with each other, causing one fader to move the other. The goal is to give each fader a unique ID to prevent this interaction.

## Solution
To ensure that two faders do not interact with each other:

1. **Assign Unique IDs**: Ensure that each fader has a different ID. This prevents them from responding to the same MIDI messages.

2. **Use Scripting for MIDI Address**: Instead of using the same `preArgs` and address for both faders, use a script to define the MIDI address for each fader. For example:
   ```javascript
   send('midi', '/control', 1, 1, value)
   ```
   Here, `value` should represent the current value of the fader.

3. **Remove Shared Settings**: Avoid sharing the same `preArgs` and address settings between the faders. By scripting the MIDI information, you ensure that the faders only send data without receiving conflicting messages.

By implementing these steps, you can achieve independence between widgets that share the same `preArgs` setting.

# Setting Default Dropdown Value in Open Stage Control

**Problem Description**  
Users may encounter difficulties in setting a dropdown widget to default to a specific value, such as "Normal," upon loading a session. The default behavior may not reflect the desired label, leading to confusion.

**Solution**  
To set a dropdown widget to display "Normal" by default, follow these steps:

1. **Set the Default Value**: In the widget's properties, set the `default` property to the corresponding value that represents "Normal." For example, if "Normal" corresponds to `0.5`, set the default to `0.5`.

2. **Labeling**: Ensure that the dropdown items are properly labeled so that "Normal" is displayed instead of the numeric value. This can be done by associating the value with a label in the widget settings.

3. **Testing**: If issues persist, copy the widget and paste it into a new session. This can help identify if the problem is session-specific.

4. **Understanding Default Behavior**: Note that updating the `default` property does not automatically change the widget's current value. This behavior is intentional, so make sure to set the desired value before saving the session.

For additional reference, consult the [Properties reference - Open Stage Control](attachment:properties_reference.pdf).

# Will OSC Receive and Display Timecode?

**Problem Description:**
The user is attempting to implement Open Stage Control (OSC) in a theatre setting, specifically needing it to receive and display SMPTE Timecode. The requirement includes triggering actions based on Timecode stamps, as the OSC will be used for various control tasks beyond audio, such as media cues and special effects.

**Solution:**
Currently, OSC does not fully support MIDI Timecode messages. It can receive the full time code as raw sysex messages, but quarter frame messages are ignored. While users can trigger custom actions based on incoming values through scripting or custom modules, creating a comprehensive cue timeline may exceed OSC's intended functionality.

In version 1.3, there will be the capability to receive MIDI Timecode messages as raw sysex messages, with the parsing logic left to users.

For those seeking a more integrated solution, consider exploring **Chataigne**, which serves as a central hub for managing multiple interfaces, software, devices, and sensors. 

[Attachment: Chataigne's]

# OSC Patch Migration from Mac to Windows

**Problem Description:**
When migrating an OSC patch for expression map management with Cubase from Mac to Windows, error messages are encountered. The necessary modules, xml-js and xml2js, have been installed, but issues persist, potentially related to SAX parsing.

**Solution:**
The problem may stem from an encoding issue with the XML file. It is recommended to search for methods to remove the Byte Order Mark (BOM) from the XML file, as this could resolve the errors encountered during the migration. 

[Attachment: Capture d’écran 2024-04-17 180016]

# Sending Rate and Decimal Control for Multi XY Widget

## Problem Description
When using the Multi XY widget to send values to a Digital Audio Workstation (DAW) via the `onValue` script, the DAW may become overwhelmed with the volume of messages. Additionally, there is a need to control the number of decimal places in the sent values.

## Solution
To manage the sending rate and the number of decimals for the Multi XY widget, follow these steps:

1. **Enable Bypass**: This prevents default messages from the widget and disables cross-client synchronization.

2. **Control Sending Rate**:
   Use the following script in the `onCreate` property to limit the number of messages sent per second:

   ```javascript
   locals.rate = 10 // max messages per second
   locals.lastValues = []
   locals.limitDecimals = (num) => {
     return Math.round(num * 100) / 100 // Adjust for desired decimal places
   }

   // onTouch script property
   var points = getProp(this, 'points')
   var x, y, i
   var sending = false

   if (event.type === "start") {
     sending = true

     // Start loop to check if values changed and send every cycle
     setInterval(() => {
       for (i = 0; i < points; i++) {
         x = locals.limitDecimals(value[i * 2])
         y = locals.limitDecimals(value[i * 2 + 1])

         // Send only if values have changed
         if (x !== locals.lastValues[i * 2]) send('/track/' + i + '/x', x)
         if (y !== locals.lastValues[i * 2 + 1]) send('/track/' + i + '/y', y)

         // Store last values for comparison
         locals.lastValues[i * 2] = x
         locals.lastValues[i * 2 + 1] = y
       }

       // Stop loop if interaction has stopped
       if (!sending) clearInterval()

     }, 1000 / locals.rate)

   } else if (event.type === "stop") {
     sending = false
     locals.lastValues = [] // Clear stored values for new interaction
   }
   ```

3. **Decimal Control**: If not using scripting for sending messages, the `decimals` property can be used to define the number of decimal places.

4. **Client Synchronization**: To keep clients in sync without sending the default message of a widget, enable `ignoreDefaults` instead of `bypass`. This will prevent messages from being sent to the default server targets.

By implementing these adjustments, you can effectively manage the message flow to your DAW and control the precision of the values being sent.

# Roland JD-08 - Issue with Button State Updates Using Same CC Code

**Problem Description:**
When controlling the Roland JD-08, a GUI is designed to manage four Tone Bank layers using the same MIDI CC code (CC 111). Each button corresponds to a specific bit position (Tone A = bit 0, Tone B = bit 1, Tone C = bit 2, Tone D = bit 3). The GUI correctly updates button states based on incoming MIDI data, but when a button is pressed, it does not update its own state immediately. Instead, the button state only updates after a subsequent button press triggers a new event.

**Solution:**
This behavior may be due to internal safeguards that prevent infinite loops in the event handling. However, it should still allow for the button that generated the event to update its state. To troubleshoot this issue, consider the following steps:

1. **Check Event Handling Logic:** Ensure that the event handling for the button press correctly updates the button state before sending out the MIDI CC message.
   
2. **Custom Module:** If the issue persists, consider creating a custom module to intercept messages and map the bit state values to a composite value, allowing for more control over the state updates.

3. **Session File Review:** If further assistance is needed, upload the session file for testing to identify any specific issues in the configuration.

For further assistance, please refer to the session file you may need to provide for testing. 

[Attachment: session_file.jso] (attachment reference missing)

# Mapping Arguments to a Fader in Open Stage Control

## Problem Description
When using the Syntien iOS app, pitch, roll, and yaw data are received as arguments in a single message rather than as separate messages. The goal is to map these arguments to a fader in Open Stage Control.

## Solution
To separate the incoming arguments and send them to the interface, you can create a custom module. Below is an example of how to implement this:

```javascript
module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        // Filter incoming message with specific address
        if (address === '/accelerometer/address') {
            // Get values
            var pitch = args[0].value; // first argument
            var roll = args[1].value; // second argument
            var yaw = args[2].value; // third argument

            // Send values to OSC client
            receive('/pitch', pitch);
            receive('/roll', roll);
            receive('/yaw', yaw);

            return; // Bypass original message
        }

        return {address, args, host, port};
    }
}
```

This code will effectively separate the pitch, roll, and yaw values from the incoming message and send them to their respective OSC addresses. 

**References:**
- [Attachment: custom module (v0.49.12)]
- [Attachment: custom module (v1.0.0)]

# Ignoring Touch on Text Widgets in Open Stage Control

## Problem Description
Users may encounter issues where touch interactions on text widgets prevent key presses on overlapping keyboard widgets. This occurs when the text widget is layered over the keyboard widget, causing the touch to be registered on the text instead of the keyboard.

## Solution
To resolve this issue, ensure that the `interaction` property is set to `false` for the parent panel containing the text widgets. This allows touch events to pass through to the keyboard widget beneath. 

Additionally, check the following:
- For TextArea widgets, ensure that the `interaction` property is correctly applied, as it may be overridden when the editor is enabled.
- Verify that CSS properties, particularly `pointer-events`, are not interfering with the intended behavior.

By configuring these settings correctly, touch interactions should work as expected, allowing key presses on the keyboard widget when touching the area above the text.

# ReferenceError: y is not defined

The error "ReferenceError: y is not defined" occurs when the variable `y` is accessed outside its defined scope in the provided script. This typically happens when a variable is declared within a block (like a loop) and is used in a different context where it is not recognized.

## Solution

To resolve this issue, replace the usage of `y` in the last timeout block with a direct calculation. Instead of referencing `y`, you can use `r - 1` to achieve the desired effect. Here is the modified section of the script:

```javascript
setTimeout(function(){
    // sets the used buttons to a 0 value state
    set('push_43', 0, {send: false}); 
    set('Backward one bar', 0, {send: false});
    set('forward_one_bar', 0, {send: false});

    // starts the playback
    send('midi:SessionKiano', '/note', 1, 75, 1);
}, x * bb + (r - 1) * cc); // updated to use r - 1 instead of y
```

This change ensures that the variable used is defined within the scope of the function, eliminating the reference error.

# Using TypeScript with Custom Modules in Open Stage Control

## Problem Description
Users have encountered issues when trying to compile custom modules using TypeScript in Open Stage Control (OSC). The main challenges include errors related to module imports and exports, specifically:

- `SyntaxError: Cannot use import statement outside a module`
- `ReferenceError: exports is not defined`

These errors often arise due to the way OSC handles compiled TypeScript modules.

## Solution
To successfully compile and run TypeScript custom modules in OSC, follow these guidelines:

1. **TypeScript Configuration**: Ensure your `tsconfig.json` is properly set up. A recommended configuration is as follows:

    ```json
    {
      "compilerOptions": {
        "baseUrl": ".",
        "paths": {
          ".": ["."]
        },
        "outDir": "./compiled",
        "rootDir": "./src",
        "module": "CommonJS",
        "moduleResolution": "Node",
        "esModuleInterop": true,
        "allowSyntheticDefaultImports": true,
        "sourceMap": false,
        "target": "ES6",
        "checkJs": true,
        "lib": ["ES6"],
        "skipLibCheck": true,
        "noImplicitThis": false,
        "forceConsistentCasingInFileNames": true
      },
      "include": ["./**/*.ts"],
      "exclude": ["node_modules"]
    }
    ```

2. **Module Structure**: Ensure that your TypeScript files are structured correctly. For example, consider the following files:

    - **testMain.ts**:
      ```typescript
      import testImport from "./testImport.js";
      console.log(testImport);
      ```

    - **testImport.ts**:
      ```typescript
      export default {
        testImport: "hello",
      };
      ```

3. **Compilation**: Compile your TypeScript files using the TypeScript compiler. Ensure that the output files are placed in the specified `outDir`.

4. **Check OSC Compatibility**: Verify that the compiled JavaScript files are compatible with OSC. If issues persist, it may be necessary to check for updates or changes in OSC that affect module handling.

By following these steps, you should be able to compile and run TypeScript custom modules in Open Stage Control without encountering the aforementioned errors.

# Controlling Zebra Instrument PADs with OSC in Open Stage Control

## Problem Description
Users experience issues with OSC not updating when moving the pads in Cubase, despite MIDI data arriving correctly. The setup involves assigning MIDI control change messages (cc13,1 and cc13,2) to the instrument, but OSC does not respond as expected.

## Solution
To resolve the issue, ensure that the script for handling incoming MIDI messages is correctly implemented. Follow these steps:

1. **Create a Script Widget**: 
   - Ensure you have a script widget defined in your Open Stage Control setup.

2. **Use the Following Script**:
   ```javascript
   target:
   midi:OSC
   (must match the MIDI port on which feedback is received)
   address:
/control
   preArgs:
   13
   onValue:
   if (value[0] == 1) { 
     // if cc 1
     set('xy_id', [value[1], '']) // update x
   } else if (value[0] == 2) {
     // if cc 2
     set('xy_id', ['', value[1]]) // update y
   }
   ```
   - Ensure there are no syntax errors, such as misplaced parentheses.

3. **Check MIDI Data**:
   - Use the debug feature in Open Stage Control to verify that the MIDI messages are being received correctly and that the MIDI port matches the script widget's target.

4. **Layer Positioning**:
   - The layer positioning of the script widget does not affect its functionality.

5. **Custom Module Option**:
   - If preferred, you can also implement the logic in your custom module (main.js) as follows:
   ```javascript
   module.exports = {
       oscInFilter: function(data) {
           if (data.host === 'midi' && data.port === 'OSC' && data.address === '/control') {
               var [channel, control, value] = data.args.map(x => x.value);
               if (channel == 13) {
                   if (control == 1) receive('/pad_address', '', value);
                   if (control == 2) receive('/pad_address', value, '');
               }
           }
           return data;
       }
   }
   ```

By following these steps, you should be able to successfully control the Zebra instrument's PADs and ensure OSC updates correctly when interacting with Cubase. 

[Attachment: Bildschirmfoto 2022-02-13 um 08.17.16]
[Attachment: Screenshot_13_02_22__08_34]
[Attachment: Bildschirmfoto 2022-02-13 um 13.34.22]
[Attachment: Bildschirmfoto 2022-02-13 um 14.54.06]
[Attachment: Bildschirmfoto 2022-02-13 um 15.52.00]
[Attachment: Bildschirmfoto 2022-02-13 um 15.53.15]
[Attachment: Bildschirmfoto 2022-02-13 um 15.54.34]
[Attachment: Bildschirmfoto 2022-02-13 um 16.45.44]

[Attachment: cpvEsnvuNvhuzpwt0tRmp0gW2Y5.js]

# Controlling Open Stage Control Widgets Using OSC from an External Source

## Problem Description
Users may encounter difficulties when attempting to send OSC messages to control widgets in Open Stage Control, particularly when trying to set values for widgets like faders. There may also be issues with two instances of Open Stage Control communicating with each other over OSC.

## Solution
To update a widget's value using OSC, send a message to its address in the following format:

```
/SET widget_id value
```

For example, to set a fader with the ID `fader_1` to a value of `0.5`, the correct OSC message would be:

```
/SET fader_1 0.5
```

Ensure that the OSC message is formatted correctly, with `/SET` as the address, the widget ID as the first argument, and the new value as the second argument.

### Troubleshooting Communication Between Instances
When using multiple instances of Open Stage Control, ensure that:
- Instance A is configured to listen on one port and send on another.
- Instance B is set up to do the opposite (listening on the port that Instance A is sending to and vice versa).

If communication issues persist, consider enabling the debug option to monitor sent and received messages.

### Additional Notes
If OSC communication is not functioning as expected, it may be due to other processes interfering with the OSC ports. For instance, using tools like `OSC_Data_Monitor` can block the port if it is actively listening. If issues arise, testing on a different computer may help identify the problem.

[Attachment: OSC_Data_Monitor]

# Minimum PC Specifications for Open Stage Control (OSC)

## Problem Description
Users have inquired about the minimum PC specifications required to run Open Stage Control (OSC), particularly in scenarios involving older hardware. There are concerns regarding performance based on the specifications of older PCs and laptops.

## Solution
Open Stage Control can run on a variety of hardware configurations. Here are some confirmed specifications based on user experiences:

- **Minimum Specifications**: 
  - A laptop from 2009 with a Core 2 Duo processor and 4 GB of RAM has been reported to work effectively.
  - An AMD 2.4GHz Quad Core with 4 GB of RAM and a 64 GB SSD also runs OSC without issues.
  
- **Recommended Specifications**:
  - For better performance, especially with larger sessions, a more powerful setup is advisable. An i7 2600k has been successfully used, providing smooth operation.
  - Users have also reported success with an i7 4700K desktop, indicating that newer processors generally handle OSC better.

- **General Advice**: 
  - OSC primarily runs in a web browser, so any system capable of running a compatible browser should suffice. However, larger sessions may require more resources.
  
In summary, while older systems can run OSC, investing in a more powerful machine will enhance performance, especially for complex projects.

# How to Make Overflow Visible for Containers

When attempting to make widgets larger than their container fully visible, using `overflow: visible` in the container's CSS may not yield the desired results. 

## Solution

To ensure that overflow is visible, you can use the following CSS properties:

```css
:host, :host > inner {
  contain: unset;
  overflow: visible;
}
```

This approach has been confirmed to work, particularly for panels. However, it is important to note that this method may not be reliable in the long term due to potential changes in CSS containment behavior within Open Stage Control.

For specific cases, such as a matrix of cloned faders, further adjustments may be necessary, but no additional solution has been provided in this context.

[Attachment: filename.ext]

# Script Editor Keyboard Shortcut for Replacement

**Problem Description:**
Users may encounter difficulty when attempting to replace a specific number in the script editor. Selecting the number visually highlights it, but the replacement does not occur. A keyboard shortcut for this function is sought.

**Solution:**
To replace a selected number in the script editor, use the keyboard shortcut:

- **Ctrl + Alt + K**

Additionally, for frequent replacements, consider creating a variable in the script. This allows you to use the variable in commands and easily change its value when needed. 

[Attachment: filename.ext]

# Connecting to Open Stage Control Server Without IP Address Configuration

## Problem Description
When using Open Stage Control (O-S-C) on different Wi-Fi networks, the IP address of the server device changes, making it inconvenient to connect without knowing the current IP. Users seek a method to connect to the O-S-C server without manually entering the IP address each time.

## Solution
To connect to the O-S-C server without worrying about IP addresses, you can use the following methods:

1. **Using Bonjour/Zeroconf**:
   - O-S-C announces itself on the network using Bonjour/Zeroconf. A client-side application that detects O-S-C and connects automatically would be ideal. While there is no native mobile app currently available, this remains a potential solution for future development.

2. **Modifying the Hosts File**:
   - You can modify the hosts file on your client device to map a custom domain name to the server's IP address. For example:
     ```
     myoscserver    192.168.0.100
     myoscserver    192.168.1.100
     ```
   - Access the O-S-C server by entering `http://myoscserver:8080` in your browser.

3. **Using an AutoHotkey Script**:
   - An AutoHotkey (AHK) script can automate the process of updating the hosts file with the current IP address of the server. Here’s a basic outline of the script:
     ```ahk
     #NoEnv
     SendMode Input
     SetWorkingDir %A_ScriptDir%

     !z:: Reload

     !a::
     ; Variables
     serverComputerName := "aaa"
     domainName := "osc_server"

     ; Obtain the current IP address and update the hosts file
     Clipboard =
     RunWait, %ComSpec% /c ping -n 1 %serverComputerName% | find "Reply from", , OutputVar
     ; Further code to extract IP and update hosts file...
     ```
   - This script will ping the server, extract the IP address, and update the hosts file accordingly, allowing you to use a bookmark like `http://osc_server:8080` seamlessly.

By implementing one of these solutions, you can connect to your O-S-C server without needing to remember or manually enter the IP address each time. 

[Attachment: AutoHotkey_Script.ahk]

# Sending MIDI Data After Changing a Panel Tab

## Problem Description
Users may encounter difficulties in sending MIDI Note messages when changing tabs within a panel in Open Stage Control. Specifically, setting the OSC properties of each tab does not result in the expected MIDI output.

## Solution
To successfully send MIDI Note messages when a tab is changed, configure the tab's parent to handle value changes. Here’s how to set it up:

1. **Configure the Parent of the Tabs**:
   - Set the OSC properties of the tab's parent with the following:
     - **Address**: `/note`
     - **Pre Args**: `[10, 1]`
     - **Target**: `midi:midichannel`

2. **Implement Scripting for Different Notes**:
   For more complex mappings (e.g., sending different notes for each tab), use the following JavaScript snippet in the tab's parent `onValue` event:

   ```javascript
   // tab's parent onValue
   if (value === 0) { // first tab
     send('/note', 10, 1, 127);
   } else if (value === 1) { // second tab
     send('/note', 10, 2, 127);
   } // Add additional conditions for more tabs as needed
   ```

This setup will ensure that the correct MIDI Note messages are sent based on the selected tab.

# Improving Open Stage Control Performance in Crowded Wi-Fi Areas

**Problem Description:**
Users have reported difficulties using Open Stage Control (OSC) in crowded environments with numerous Wi-Fi devices. Connections may initially load but become slow and eventually disconnect, making OSC unusable during presentations or demonstrations.

**Solution:**
To enhance OSC functionality in crowded Wi-Fi areas, consider the following recommendations:

1. **Use 5GHz Wi-Fi:**
   - Switch to a 5GHz Wi-Fi network instead of 2.4GHz. While it has a shorter range and poorer wall penetration, it is often less congested.

2. **Identify Less Crowded Channels:**
   - Utilize your router’s scanner to find and connect to the least crowded Wi-Fi channel.

3. **Manual Configuration:**
   - Set your device's IP address and Wi-Fi channel manually to prevent automatic changes that could disrupt the connection.

4. **Disable Mobile Data:**
   - If your mobile device has a 3G/4G chip, consider disabling it to reduce potential interference.

5. **Reverse Tethering with SimpleRT:**
   - Implement reverse tethering using SimpleRT, which can stabilize connections and function without Wi-Fi. An APK needs to be installed on the Android device, which runs automatically upon USB connection.

By following these steps, users can improve their OSC experience in environments with high Wi-Fi activity.

[Attachment: filename.ext]

# Controlling Unreal Engine via Open Stage Control (OStageC)

**Problem Description:**
Users are interested in the possibility of using Open Stage Control (OStageC) to control Unreal Engine through its web remote control feature, which utilizes a REST API. There is uncertainty regarding compatibility and the methods available for integration.

**Solution:**
It may be possible to control Unreal Engine using Open Stage Control by employing the `httpGet` function from a script. However, this approach is likely to have limitations. 

For users looking for a more direct method, it is noted that Unreal Engine can also be controlled directly using OSC (Open Sound Control) without entering game mode. This alternative may provide a more robust solution for integration.

[Attachment: unreal_web_remote_control_docs.pdf]

# Future Deprecation of Formulas

## Problem Description
There are concerns regarding the future deprecation of the formula syntax `#{}` in Open Stage Control, particularly its benefits over the `JS{{}}` syntax, such as being more compact and providing implicit return values. Users have noted issues with variable persistence and unexpected behavior when using `JS{{}}` for computed values.

## Solution
In the upcoming major release (v1), the following changes will be implemented:

- The `#{}` syntax will be retained and repurposed as a shorthand for `JS{{}}`, maintaining the implicit return functionality.
- Variable persistence issues will be resolved through the introduction of local variable storage for each widget.
- The unexpected behavior with `JS{{}}` is recognized as a bug and will be addressed.

These changes aim to improve usability while phasing out the MathJS dependency. Further details will be provided in the blog section as the release approaches.

# Sending MIDI from a Custom Module

**Problem:**
A user is attempting to set up a widget that sends multiple values to a module, which in turn sends MIDI notes to a Digital Audio Workstation (DAW). The initial implementation resulted in an error: `(ERROR, OSC) Malformed address: 1`, indicating that the module was trying to send OSC instead of MIDI.

**Solution:**
To correctly send MIDI messages from the custom module, use one of the following methods:

1. **Using the `send` method:**
   ```javascript
   send('midi', 'loopMIDI', '/note', 1, 23, 100);
   ```

2. **Using the `sendOsc` method:**
   ```javascript
   sendOsc({
       address: "/note",
       args: [
           { type: "i", value: 1 },
           { type: "i", value: 23 },
           { type: "i", value: 100 },
       ],
       host: "midi",
       port: "loopMIDI",
   });
   ```

The first solution is confirmed to work effectively.

# Changing Knob Rotation in Open Stage Control

## Problem Description
Users may want to change the rotation direction of a knob from clockwise to counterclockwise and set the range of the knob's movement in degrees (e.g., 0-90 degrees).

## Solution
To reverse the knob's rotation and set a specific range:

1. **Reverse the Knob's Rotation**:
   - Set the knob properties as follows:
     ```json
     {
       "min": 1,
       "max": 0
     }
     ```
   This configuration will make the knob act counterclockwise.

2. **Set the Knob's Range in Degrees**:
   - To limit the knob's movement to a specific range (e.g., 0-90 degrees) while maintaining its normal parameter output, use the following configuration:
     ```json
     {
       "min": { "0/360": 1 },
       "25%": { "90": 0.75 },
       "50%": { "180": 0.5 },
       "75%": { "270": 0.25 },
       "max": { "": 0 }
     }
     ```

This setup allows you to control the knob's rotation direction and define its movement range effectively.

# Matrix Dynamic Properties in Open Stage Control

## Problem Description
Users may encounter difficulties when trying to dynamically change the `alphaFillOff` property of a matrix based on a value. Initial attempts to set this property using conditional statements may only work during initialization and not dynamically during operation.

## Solution
To achieve dynamic updates to the `alphaFillOff` property in a matrix, it is recommended to use a matrix of clone widgets. This approach allows for the use of advanced syntax blocks, such as `@{}`, `OSC{}`, `JS{{}}`, and `#{}`, which are resolved at the matrix's scope. 

For example, instead of directly assigning the property with a conditional statement, you can use:
```javascript
props.alphaFillOff = "#{(OSC{/preset/recall} != $) ? "0.1" : "0.5"}";
```
However, this syntax will only work if the matrix is set up correctly, such as using cloned widgets.

For further reference, you can consult the [Open Stage Control documentation on matrix properties](https://openstagecontrol.ammd.net/docs/widgets/properties-reference/#matrix_props).

For a practical example, refer to the attached session files:
- [Attachment: matrix-props.json]
- [Attachment: yKBMfRvMKS7qJyF2GHrUC2mVuxb.json]

Note: Improvements to the syntax for matrices are under consideration, which may simplify the handling of advanced syntaxes in the future.

# Understanding grid-template in Open Stage Control

## Problem Description
Users are seeking clarification on how to effectively use `grid-template` in Open Stage Control (OSC), particularly regarding dynamic adjustments to grid layouts based on visibility of components.

## Solution
1. **Basic Usage of grid-template**:
   - The `grid-template` property allows you to define the layout of your components in a grid format. For example:
     ```
     "a a a" 
     "b b c" 
     "b b c" 
     "b c c" 
     ```
   - This configuration specifies that the header (row one) spans three columns, while the navigation (rows two and three) and main content (rows four and five) are arranged accordingly.

2. **Dynamic Adjustments**:
   - Non-dynamic properties like `gridTemplate` can be adjusted dynamically with some limitations. For more advanced usage, refer to the documentation on [Advanced syntaxes - Open Stage Control](https://open-stage-control.readthedocs.io/en/latest/syntax.html#advanced-syntaxes).
   - Currently, there is no built-in way to update `gridTemplate` dynamically based on component visibility. However, users can experiment with layouts and share their findings for collaborative improvement.

3. **Example Configuration**:
   - A working example of a grid layout can be found in the attached file:
     [Attachment: 4oPoL6GUwOIbC1loZV8otqj9B0H.json].
   - For further experimentation, users can refer to the session file:
     [Attachment: 3uZ7ub1GfcRvUDML02axWoilcWX.json].

4. **Additional Resources**:
   - For a comprehensive guide on CSS Grid, consider visiting [A Complete Guide to Grid | CSS-Tricks](https://css-tricks.com/snippets/css/complete-guide-grid/).

By utilizing these guidelines, users can better understand and implement grid layouts in Open Stage Control.

[Attachment: lZ5SzDrTqQCeoDJXe27Iezf5m7o.json]

# Formatting Question in Open Stage Control

## Problem Description
Users may encounter issues with syntax when using the Open Stage Control editor, particularly when trying to retrieve widget values or properties. Specifically, confusion arises around the use of `get()` versus `getProp()` functions.

## Solution
To correctly retrieve widget values and properties in Open Stage Control:

- Use `get()` to retrieve a widget's value:
  ```javascript
  get("parent.variables.varCh")
  ```

- Use `getProp()` to access a widget's property:
  ```javascript
  getProp("parent", "variables").varCh
  ```

Ensure that you do not use quotes incorrectly, as this can lead to syntax errors. For example, the following code is incorrect:
```javascript
send("midi:looper", "/control", get("parent.variables.varCh"), get("parent.variables.LoopClip1"), 127)
```
Instead, use the correct property access method as shown above.

Refer to the scripting documentation for additional details and warnings regarding syntax usage. 

[Attachment: image.png]

# Changing Property of a Widget Dynamically

**Problem Description:**
The challenge is to update the property (e.g., color) of one widget (WidgetB) dynamically based on the actions of another widget (WidgetA). The initial approach involved creating a separate variable for each widget's property, which can be cumbersome when dealing with multiple widgets.

**Solution:**
To dynamically update the property of a widget, you can use the following method:

1. In the property of WidgetB, use the variable syntax:
   ```
   VAR{foo}
   ```

2. To change the value of this variable from WidgetA, use the `setVar` function:
   ```javascript
   setVar("widgetId", "foo", "red")
   ```
   Replace `"widgetId"` with the actual ID of WidgetB and `"red"` with the desired color.

This method allows for efficient dynamic updates without the need to create individual variables for each widget.

# Using Switches to Navigate Panel Tabs

## Problem Description
A user wanted to implement multiple switches to navigate through tabs within a single panel in Open Stage Control. They initially set values for the switches and created variables to manage the tab navigation. However, they sought a more efficient method as they anticipated needing more than three switches.

## Solution
To simplify the setup, you can utilize the `linkId` property, which allows for a grid layout with only one switch, eliminating the need for multiple variables. This approach streamlines the configuration and scripting.

Here is an example of how to set up the switches using `linkId`:

```json
{
  "switches": [
    {
      "id": "switch_1",
      "linkId": "tab_1"
    },
    {
      "id": "switch_2",
      "linkId": "tab_2"
    },
    {
      "id": "switch_3",
      "linkId": "tab_3"
    }
  ]
}
```

For further reference, see the attached example JSON file: [Attachment: 712ugtgqkx44xQXqxSm7m0a6AKq.json].

This method allows for greater flexibility and reduces complexity in your configuration, particularly when managing multiple switches.

# Using AbletonOSC with Open Stage Control

## Problem Description
A user is attempting to send a command to Ableton Live using Open Stage Control and the AbletonOSC protocol. They are able to start playback with the command `send("/live/song/start_playing")`, but they are unsure how to perform a GET request to retrieve the name of a track using `send("/live/track/get/name")`, as it does not return any response in the console.

## Solution
The issue arises because OSC (Open Sound Control) does not support synchronous replies. The `send()` function does not return any value. To retrieve data from Ableton Live, you need to set up a widget in Open Stage Control that listens for the response message sent back from Ableton. 

To assist with debugging, enable the server's debug option, which will print all outgoing and incoming messages. This can help identify the responses being sent from Ableton Live.

For further reference, consider reviewing the Open Stage Control documentation on OSC messaging and widget configurations.

# Connecting Open Stage Control on a Public Network with Different IP Addresses

**Problem Description:**
Users may encounter issues connecting Open Stage Control between devices (e.g., a Mac and an iPad) on different networks, particularly when using public networks like eduroam. The problem arises due to the devices having different IP addresses, which prevents them from communicating effectively.

**Solution:**
1. **Network Configuration:** If devices cannot see each other on the public network, this is likely a security measure to prevent unauthorized access. In this case, Open Stage Control will not be able to establish a connection.
   
2. **Consult Network Admin:** It is advisable to reach out to the network administrator for assistance. They may provide solutions or configurations that allow device communication.

3. **Ad-Hoc Network:** As an alternative, consider creating an ad-hoc network on your Mac. This can allow your iPad to connect directly to your Mac without the restrictions of the public network.

By following these steps, you should be able to resolve connectivity issues between your devices on different networks.

# Managing State and Variables in Open Stage Control

## Problem Description
Users may need clarification on how to effectively use state and variables in Open Stage Control, particularly regarding the following:
- Storing custom state models using widget state.
- The difference between `set/get` and `setState/getState` methods.
- The limitations of basic widgets concerning variable storage.
- The need for a widget state that can be accessed by other widgets.

## Solution
1. **Using State for Custom Models**: The state of a widget, manipulated by `set/get/stateSet/stateGet`, represents its value. Variable widgets can store any type of value, unlike basic widgets that have predefined uses (e.g., faders).

2. **Difference Between Methods**:
   - `set/get` methods are for individual widget values.
   - `stateSet/stateGet` allows manipulation of multiple widget states in one action, storing values against widget IDs.

3. **Basic Widgets and Variables**: Basic widgets do not have inherent variable storage capabilities. To assign an index property (e.g., `idx`) to buttons, users often need to enclose buttons in containers and manage variables at the container level.

4. **Recommended Approach for Custom State**:
   - While variable widgets can store any type of value, if you need a widget state that can be accessed by other widgets, consider using the JavaScript `locals` variable for local state management. However, note that `locals` cannot be accessed from outside the widget.
   - For a more global state that multiple widgets can read, encapsulating state and logic within the same widget using complex values is advisable, as it allows for better integration of functionality.

5. **Complex State Management**: If a widget’s state needs to be shared or reacted to by other widgets, consider structuring the state in a way that allows for this interaction, possibly through the use of variable widgets or custom scripting.

By following these guidelines, users can effectively manage state and variables in Open Stage Control to enhance their projects.

# Knobs in Matrix: Changing Value Range and Addressing

## Problem Description
Users are trying to configure a matrix of knobs in Open Stage Control to send values within a specific range (0 to 127) and are encountering issues with setting the correct syntax for properties and addressing.

## Solution
To set the value range for knobs in a matrix, use the following syntax:

```javascript
p.range = {min: 0, max: 127}
```
or alternatively:
```javascript
p.range = {}
p.range.min = 0
p.range.max = 127
```

For setting the IDs and ensuring the correct address format, use the following:

1. Set the address dynamically based on the matrix ID:
   ```javascript
   p.address = "/matrix_1/" + ids[$]
   ```

2. To dynamically reference the matrix address, use:
   ```javascript
   p.address = @{this.address} + "/" + ids[$]
   ```

Note: The `id` property is not applicable for knobs; instead, use the `address` property to define unique identifiers for each knob in the matrix.

For further reference, see the attached configuration files:
[Attachment: matrix-knobs-01.json]  
[Attachment: kQ5Mi9M5WD2mSioQstKD0e2ZAX9.json]

# Bypass the MIDI Output of a Button Based on Another Button's Value Change

**Problem Description:**
The goal is to bypass the MIDI output of a button when its value is changed by another button using the `set()` function in Open Stage Control. Specifically, when one button is pressed, it should deactivate certain states without sending MIDI messages for the other buttons.

**Solution:**
To achieve this, you can add an extra argument `{send: false}` to your `set()` function. This prevents MIDI messages from being sent when the button's value is changed programmatically.

Here is an example implementation:

```javascript
if (value === 1) {
    send('/note', 2, 83, 127); // Deactivates all SOLO states in Cubase
    send('/note', 2, 84, 127); // Deactivates all mute states
} else {
    set("solo_push_*", 1, {send: false}); // Deactivates the red buttons without sending MIDI
    set("mute_push_*", 1, {send: false}); // Deactivates the mute buttons without sending MIDI
}
```

This approach ensures that the MIDI output is bypassed when changing the button states programmatically.

# Sending and Receiving TCP ASCII Commands in Open Stage Control

## Problem Description
Users want to send and receive simple ASCII commands through Open Stage Control (OSC) using TCP. While OSC primarily focuses on OSC messages, there is a need for TCP communication to control non-OSC devices.

## Solution
To implement TCP communication in Open Stage Control, you can create a custom JavaScript module. Below is a basic example to get started:

1. **Create a TCP Server**:
   ```javascript
   var net = require('net'),
       port = 12345,
       tcpServer = net.createServer();

   tcpServer.listen(port, function() {
       console.log(`TCP server listening for connection requests on socket localhost:${port}`);
   });

   tcpServer.on('connection', function(socket){
       // Follow some "node tcp server" tutorials to complete this part
   });

   module.exports = {
       // Read custom module documentation & examples to complete this part
   };
   ```

2. **Custom Module Example**:
   Here is a more complete example that connects to a TCP server and sends commands:
   ```javascript
   const net = nativeRequire('net');
   const port = 50000;
   const host = '127.0.0.1'; // or the IP of the device
   const socket = new net.Socket();

   socket.connect(port, host, function() {
       console.log('>>> TCP SOCKET CONNECTED');
   });

   module.exports = {
       oscInFilter: function(data) {
           var { address, args, host, port } = data;
           if (address === '/rawtcp') {
               socket.write(data.args[0].value);
               console.log('>>> RAW TCP: ' + data.args[0].value);
           }
           return { address, args, host, port };
       },
   };
   ```

3. **Button Configuration**:
   You can call this module from a button in your OSC interface:
   ```json
   {
       "type": "button",
       "mode": "momentary",
       "address": "/rawtcp",
       "preArgs": "JS{{ return ('hello\\x0a\\x0d') }}",
       "typeTags": "s",
       "target": "127.0.0.1:12000"
   }
   ```

### Troubleshooting Connection Issues
If you encounter a connection error (e.g., `ECONNREFUSED`), ensure that:
- The TCP server is running and listening on the correct port.
- You can test the connection using `nc` (netcat) instead of `telnet` on macOS:
  ```
  nc 127.0.0.1 50000
  ```
- Verify that the correct IP address and port are being used in your configuration.

### Sending Modifier Keys
To send keyboard commands (e.g., ⌘+H) from OSC to applications like Logic Pro, you need to know the hex codes for the keys you want to send. Refer to the device's protocol manual for the correct codes.

[Attachment: example_tcp_module.js]

# Virtual LaunchControlXL for Use with Ableton Live

## Problem Description
Users may seek a virtual MIDI device to replicate the functionality of the Novation LaunchControlXL for use with Ableton Live, allowing remote control without the physical hardware.

## Solution
The Virtual LaunchControlXL is designed to work seamlessly with Ableton Live, utilizing built-in scripts for MIDI control. This virtual device allows users to manage the Mix Menu and assign parameters to knobs automatically.

### Key Features:
- **Compatibility**: Works with Ableton Live using built-in scripts.
- **Remote Access**: Operates as a touchscreen interface, ideal for situations where physical hardware is unavailable.
- **Custom Mapping**: A custom script from Isotonik Studios enhances device mapping capabilities.

For further details and testing, users are encouraged to explore the functionality and report any bugs encountered.

![Virtual LaunchControlXL](virtual-launchcontrolxl-01) [Attachment: virtual-launchcontrolxl-01]

# Triggering Menu Items on Threshold Crossed

## Problem Description
Users of Open Stage Control have expressed a need for menu items to send their messages when the cursor crosses into their threshold, rather than only on release. This behavior can be impractical, as it requires closing and reopening the menu after each selection.

## Solution
This feature will be available in the next release of Open Stage Control, allowing menu items to trigger messages upon cursor entry.

# Best Practices for Mutating Arrays in Open Stage Control

**Problem Description**  
When using advanced syntax in Open Stage Control, there is a warning against mutating arrays returned by scripts, as this can lead to unexpected behavior. Users need guidance on where to store arrays intended for mutation, particularly in relation to global variable storage and variable widgets.

**Solution**  
The warning against mutating arrays applies specifically to `JS{}` and `#{}` scripts. Advanced syntaxes should not be used in regular scripting properties such as `onCreate`.

To create mutable arrays, consider the following practices:

1. **Global Variable Storage**: It is acceptable to store arrays in global variable storage if you intend to mutate them.
  
2. **Variable Widgets**: Mutating an array stored in a variable widget is permissible, but ensure that you are aware of the implications on the underlying data.

3. **Creating Copies**: When working with arrays or objects, create copies to avoid unintended mutations:
   - For shallow copies (simple objects with primitives):
     ```javascript
     // Array
     var arr = [1, 2, 3];
     var copy = [...arr];

     // Object
     var obj = {a: 1, b: 2};
     var ocopy = {...obj};
     ```
   - For deep copies (nested objects/arrays), use:
     ```javascript
     var copy = JSON.parse(JSON.stringify(anything));
     ```

These methods will help ensure that your arrays can be safely mutated without affecting the original data in memory. 

(Note: More context may be needed for specific use cases.)

# Sending MIDI NOTE_ON with Velocity=0

**Problem:**  
Is it possible to send a MIDI NOTE_ON message with a velocity of 0 instead of using a NOTE_OFF message?

**Solution:**  
Yes, you can send a MIDI NOTE_ON message with a velocity of 0 by using a raw MIDI message as a SysEx command. The following command can be used:

```javascript
send('midi:midi_target', '/sysex', '90 7F 00') // ch 1, note 127, value 0
```

This command sends a NOTE_ON message for channel 1, note 127, with a velocity of 0, effectively achieving the desired outcome.

# Menu Items Not Responding Until Properties or Script Are Modified

**Problem Description:**

Users may encounter an issue where menu widgets do not respond to scripts until the widget's properties or script are modified. This can prevent expected functionality, such as triggering MIDI notes or resetting values in a template.

**Solution:**

1. **Identify the Cause:**
   - Check for errors in the console (Ctrl + K) to ensure that all referenced properties are valid. For example, using `getProp('arranger', 'variables')` may return `undefined` if the widget ID does not exist, causing subsequent commands like `set()` to be ignored.

2. **Modify Script Order:**
   - If you encounter issues with the `set()` function, try placing it before other function calls in your script. This can help ensure that the menu widget is updated correctly.

3. **Widget Recreation:**
   - If the issue persists, consider deleting the problematic menu widget and creating a new one from scratch. This can resolve issues related to legacy code or configuration that may be affecting the widget's behavior.

4. **Testing:**
   - Create minimal test sessions to isolate the issue. This can help in debugging and identifying the root cause of the problem.

By following these steps, you should be able to resolve issues with menu widgets not responding as expected. 

[Attachment: cYqOOJITJ5Gp3JwF7u2PZdorTJf.json]  
[Attachment: sIuhUYXBCL6HUjf4G3NnF96dID8.json]

# Increment the Values of All Knobs in a Matrix

**Problem Description:**
The user is attempting to add a constant value to all knobs in a matrix using a script. They have tried various methods but have not succeeded in achieving the desired outcome.

**Solution:**
To add a constant value (e.g., 10) to all knobs in a matrix, use the following script:

```javascript
for (var i = 0; i < 4; i++) {
  set('knob_' + i, get('knob_' + i) + 10);
}
```

This script iterates through each knob and increments its value by 10. Adjust the loop limit (`4` in this case) according to the number of knobs in your matrix.

# Issue with @{parent.variables.n} in colorBg

## Problem Description
The `colorBg` property of a panel is not updating correctly when using the expression `@{parent.variables.n}`. Instead, it appears to retain the value of `n=1` even after cloning the panel and setting `n=2` in the cloned panel's properties.

## Solution
To resolve this issue, use the expression `@{this.variables.n}` instead of `@{parent.variables.n}` for the `colorBg` property. This change ensures that the correct value of `n` from the current panel is referenced.

Example configuration:
```json
"colorBg": "OSC{/Select@{this.variables.n}/Color}"
```

# Implementing a Timer in Open Stage Control

## Problem Description
Users may want to insert a timer into their Open Stage Control session but may be uncertain about how to obtain the current time using JavaScript. Specifically, questions arise about using the `Date()` function and how to implement a timer that can be reset through OSC messages.

## Solution
To implement a timer, you can use a custom module with the following code:

```javascript
// time reference
var time_zero;

function resetTimer() {
    // set time reference to now
    time_zero = Date.now();
    // update interface
    setTimer(0);
}

function setTimer(time) {
    // convert time (in seconds) to hh:mm:ss
    var h = Math.floor(time / 3600),
        m = Math.floor((time - h * 3600) / 60),
        s = Math.round((time - m * 60));

    var formattedTime = [h, m, s].map(x => String(x).padStart(2, 0)).join(':');

    // send it to the interface
    receiveOsc({
        address: '/timer',
        args: [
            { type: 's', value: formattedTime }
        ]
    });
}

module.exports = {
    init: function() {
        // init the timer when the engine is started
        resetTimer();

        setInterval(() => {
            // call setTimer once per second
            var elapsedSeconds = (Date.now() - time_zero) / 1000;
            setTimer(elapsedSeconds);
        }, 1000);
    },

    oscOutFilter: function(data) {
        var { address } = data;

        if (address === '/timer/reset') {
            // reset the timer when the interface sends a message on this osc address
            return resetTimer();
        }

        return data;
    }
};
```

### Steps to Implement:
1. Copy the above code into a text file.
2. In the Open Stage Control launcher, select this file in the custom-module field.
3. Ensure that you have a push button set up to send a `/timer/reset` message to reset the timer.

### Troubleshooting:
- If the server does not launch, verify that the entire code is pasted correctly.
- If you encounter a `ReferenceError: resetTimer is not defined`, ensure that the `resetTimer` function is defined within the same scope as where it is being called.

This approach provides a reliable method for implementing a timer in Open Stage Control using JavaScript's `Date()` function. 

[Attachment: filename.ext] (attachment reference missing)

# Word Wrap for Button Labels in Open Stage Control

## Problem Description
Users may encounter issues with long button labels in Open Stage Control, where the text does not wrap onto multiple lines, making it difficult to read. This is particularly problematic when using custom modules that populate articulation descriptions based on selected tracks. 

## Solution
To enable word wrapping for button labels, you can add specific CSS properties. Here are the confirmed solutions:

1. **For Button Labels**:
   Add the following CSS to the relevant CSS field:
   ```css
   label {
     white-space: normal;
     word-break: break-all;
   }
   ```
   Alternatively, to apply this to all buttons, use:
   ```css
   .button-container label {
     white-space: normal;
     word-break: break-all;
   }
   ```

2. **For Switch Labels**:
   If you need to wrap text on switches, inspect the widget using the browser's inspector (F12) to identify the HTML elements. Switches do not use `<label>` elements but rather `<value>` elements.

3. **Adjusting Line Breaks**:
   To control line breaks and spacing, use:
   ```css
   label {
     color: #2dcf7a;
     justify-content: flex-end;
     font-size: 150%;
     padding-left: 50px;
     white-space: pre-wrap; /* Ensure this is set */
     word-break: normal; /* Use this to prevent breaking between words */
   }
   ```
   Ensure that the "wrap text" checkbox in the button properties is unchecked for the CSS to take effect.

4. **Increasing Line Spacing**:
   To increase spacing between lines, adjust the `line-height` property in your CSS:
   ```css
   label {
     line-height: 1.5; /* Adjust this value as needed */
   }
   ```

By following these steps, you can effectively manage the appearance of button labels and ensure they are readable, even with long text. 

[Attachment: filename.ext] (attachment reference missing)

# Change the MIDI Channel of a Widget Using Another Widget

**Problem Description:**
A user wants to change the MIDI channel of a keyboard widget and other related widgets in Open Stage Control by clicking buttons corresponding to different MIDI channels. The goal is to dynamically update the MIDI channel based on user input.

**Solution:**
To achieve this, you can use the following approach:

1. Set the MIDI channel of your keyboard widget to reference the value of a dropdown or button widget. For example, if you have a dropdown widget with the ID `dropdown_1`, you can set the MIDI channel of the keyboard widget to:
   ```
   @{dropdown_1.value}
   ```

2. Ensure that the dropdown or button widget values correspond to the desired MIDI channels (e.g., values 1 to 8 for channels 1 to 8).

3. This method allows the keyboard widget to change its MIDI channel dynamically based on the selection made in the dropdown or button widget.

By implementing this solution, you can effectively switch MIDI channels for your keyboard and other widgets like faders and controls.

[Attachment: u7idxl75lBSmeXs38S6ek8nc7wq.json]

# Preventing a Button Widget from Being Pressable

## Problem Description
The goal is to make a button widget unpressable based on the value of a switch. Attempts to set the button's "ON" property to 0 using OSC commands did not yield the desired result. The user seeks a reliable method to disable the button visually and functionally when a specific condition is met.

## Solution
To effectively disable a button widget based on a switch's value, follow these steps:

1. **Use OSC Listeners or the /EDIT Command**: Instead of trying to set the button's "ON" property directly via OSC commands, utilize OSC listeners or the `/EDIT` command to modify the button's properties.

2. **Implement Interaction Logic**: Set the button's interaction property to `false` when the switch is in the defined state. This can be done using the following expression:
   ```javascript
   #{@{id} == 'xx' ? "false" : "true"}
   ```
   Ensure that the editor is disabled when testing this logic, as the interaction property is ignored when the editor is enabled.

3. **Visual Indication**: To provide a visual cue that the button is unpressable, you can apply CSS styles. For example:
   ```css
   :host.no-interaction {
     filter: grayscale(1);
   }
   ```

4. **Setting Button Value**: If you want to ensure that the button's value is set to 0 when the switch is in a particular state, use the switch's script to send the appropriate command to the button.

By following these steps, you can effectively control the pressability of a button widget in Open Stage Control based on the state of another widget.

[Attachment: 8OKipjul2J00d2rF1v7S1N4flVG.json]

[Attachment: bE2F9kSOHqcoa1bDcStlDs04Q8m.js]

# Using OSC Messages from the OSCHook App in Open Stage Control

## Problem Description
Users have reported challenges in utilizing OSC messages received from the OSCHook app to control fader values in Open Stage Control. The OSCHook app sends multiple values in a single message, which complicates direct assignment to faders that expect a single value.

## Solution
To effectively use the OSC messages from the OSCHook app, follow these steps:

1. **Do Not Set a Fixed Target IP/Port**: You do not need to set the widget's target to a specific IP and port (e.g., `192.168.43.147:7001`). The port used by OSCHook (e.g., `42494`) is not crucial as it may change.

2. **Handle Multiple Values**: Since OSCHook sends multiple values in one message, you will need to split these values before assigning them to faders. This can be accomplished using a script widget or a custom module.

   Example script to split values:
   ```javascript
   set('fader_1', value[0]); // Assign first value to fader_1
   set('fader_2', value[1]); // Assign second value to fader_2
   set('fader_3', value[2]); // Assign third value to fader_3
   ```

3. **Address Matching**: Ensure that the address property in your script matches the address used by OSCHook to receive the correct messages.

By implementing these steps, you should be able to control fader values effectively using the OSC messages from the OSCHook app. 

[Attachment: accelerometer_settings_screenshot.png]  
[Attachment: host_ip_port_settings_screenshot.png]  
[Attachment: input_widget_gif.gif]  
[Attachment: osc_message_example.png]

# File Pop-up Size Issue

**Problem Description:**
The file widget's pop-up file selector is too small when a long address is displayed, making it difficult to use.

**Solution:**
This issue has been addressed in the source code. Users experiencing this problem should ensure they are using the latest version of Open Stage Control to benefit from the fix.

# Using VAR with Object as Value in Open Stage Control

## Problem Description
A user encountered issues when trying to assign an object as a value to a variable in Open Stage Control. The intended object was:
```javascript
{Legato: 1, 'Kurze Artikulation': 2, 'Lange Artikulation': 3, Runs: 4}
```
Attempts to assign this object during the loading of the patch using the `VAR` syntax were unsuccessful. The user found that while using `setVar` worked after interacting with the widget, it did not function during the initial loading phase.

## Solution
The issue arises because the `values` property is not dynamic and requires the widget to be recreated when modified, which cannot occur during the creation phase. To resolve this, use the following approach:

1. Introduce a delay to allow the widget to finish its creation phase before setting the variable:
   ```javascript
   setTimeout(() => {
     setVar("this", "Articulations", {Legato: 1, 'Kurze Artikulation': 2, 'Lange Artikulation': 3, Runs: 4});
   });
   ```

2. For the initial assignment using `VAR`, the correct syntax is:
   ```javascript
   #{VAR{Articulations} || {Legato: 1, KurzeArtikulation: 2, LangeArtikulation: 3, Runs: 4}}
   ```

This approach ensures that the variable is set correctly after the widget has been fully created.

# Mapping Float Values to Frequency (Hz) or dB in Open Stage Control

## Problem Description
Users often need to map float values to specific ranges, such as frequency (20-20,000 Hz) or dB levels (-96 to +10 dB), when working with Open Stage Control and devices like the X32 console. This includes displaying mapped values in text widgets and ensuring proper scaling for faders.

## Solution
### Case 1: Mapping Frequency Values
To map a float value from a knob widget (e.g., `HPF`) to a frequency range (20-400 Hz), use the following JavaScript code in the value property of the text widget:

```javascript
JS{{
return 20 + @{HPF} * 380;
}}
```

This assumes a linear mapping. If the mapping is logarithmic, use:

```javascript
JS{{
return Math.exp(Math.log(20) + (Math.log(20000) - Math.log(20)) * @{fader_id});
}}
```

### Case 2: Mapping Fader dB Values
For fader values that need to represent dB levels, configure the fader's range property as follows, ensuring that `logScale` is set to false:

```json
{
  "0%": { "-90dB": 0 },
  "12.5%": { "-60dB": 0.0625 },
  "25%": { "-30dB": 0.25 },
  "50%": { "-10dB": 0.5 },
  "75%": { "0dB": 0.75 },
  "100%": { "10dB": 1 }
}
```

This setup allows the fader to send values between 0 and 1 while displaying the appropriate dB scale.

### Additional Notes
- The JavaScript code can be used in any property other than the script property.
- Ensure that the ranges and values are correctly defined to avoid unexpected behavior (e.g., incorrect fader movements).

[Attachment: bild]

# Recent Change Slightly Broke MCU Emulator

**Problem Description:**
After updating the MCU emulator from version 1.9.3 to 1.9.7, users reported that each channel strip is shifted to the right in terms of the MIDI data it sends. This issue appears to be related to the removal of the start property in matrices.

**Solution:**
The issue has been addressed in the updated repository. Users should ensure they are using the latest version of the MCU emulator to avoid this problem. 

Additionally, it was noted that the MCU protocol for button pushes and releases differs from the implementation in the vMCU. The official MCU protocol specifies that button pushes should send a MIDI Note On message with a velocity of 127, while button releases should send a Note On message with a velocity of zero. The vMCU currently sends Note Off messages on release, which may cause compatibility issues with some software.

For optimal performance, users are encouraged to modify their software to accept both Note Off and Note On with a velocity of zero as equivalent, as most modern software handles this correctly.

[Attachment: MCU.json]

# Configuration MIDI sous Windows 10 pour Open Stage Control

## Problème
L'utilisateur souhaite configurer Open Stage Control (OSC) pour contrôler le logiciel Voicemeeter via MIDI. Il éprouve des difficultés à établir une communication MIDI entre OSC et Voicemeeter, notamment en ce qui concerne la configuration des ports MIDI virtuels.

## Solution
1. **Installer LoopMidi**: 
   - Téléchargez et installez LoopMidi pour créer des ports MIDI virtuels.
   - Créez deux ports MIDI virtuels, par exemple, "toto-in" et "titi-out".

2. **Configurer Open Stage Control**:
   - Dans OSC, configurez les ports MIDI dans le champ approprié. Par exemple, utilisez la syntaxe suivante pour les ports créés :
     ```
     midi:Midimidi1:5,6
     ```
   - Assurez-vous que le port de sortie est configuré correctement dans le champ `target` et non dans `address`. Le champ `address` doit indiquer le type de message MIDI à envoyer, tel que `/control` pour un changement de contrôle.

3. **Vérification de la communication**:
   - Testez la communication en déplaçant un fader dans OSC. Vous devriez voir un message MIDI de type "control change" sur le canal 1, avec un numéro de contrôle change de 7 et une valeur variant de 0 à 127.
   - Si Voicemeeter ne réagit pas, essayez de redémarrer Voicemeeter après chaque modification de la configuration MIDI.

4. **Utilisation d'un seul port MIDI**:
   - Un seul port MIDI virtuel peut suffire pour la communication unidirectionnelle. Si vous souhaitez une communication bidirectionnelle, envisagez d'utiliser plusieurs ports.

5. **Contrôle des valeurs en décibels**:
   - Pour contrôler un fader dont les valeurs sont exprimées en décibels (de -50 dB à +12 dB), assurez-vous que la configuration du fader dans OSC correspond à ces valeurs.

Pour des instructions détaillées sur la configuration MIDI dans Open Stage Control, consultez la documentation officielle : [Open Stage Control MIDI Configuration](https://openstagecontrol.ammd.net/docs/midi/midi-configuration/).

(attachment reference missing)

# Creating Menus and Their Values in Open Stage Control

## Problem Description
Users may encounter difficulties when trying to create a menu widget in Open Stage Control that displays descriptive names instead of numerical values. Additionally, there may be confusion regarding how to assign these menu values to specific OSC commands for controlling tools in a DAW.

## Solution
To properly configure a menu widget and assign meaningful names to its values, follow these steps:

1. **Set Up Menu Values**: 
   - Use the `label` property of the menu widget to display the selected word instead of numbers. Insert `%key` into the `label` property.

2. **Define Values for OSC Commands**:
   - Use the `script` property of the menu to assign OSC commands to the values. Here’s an example of how to structure the script:
     ```javascript
     if (value == "Object Select") {
         send("midi:my_daw", "/control", 2, 5, 127);
     } else if (value == "Range Select") {
         send("midi:my_daw", "/control", 2, 6, 127);
     } else if (value == "Draw") {
         send("midi:my_daw", "/control", 2, 7, 127);
     } else if (value == "Cut") {
         send("midi:my_daw", "/control", 2, 8, 127);
     }
     ```

3. **Alternative Method for Menu Values**:
   - You can define menu values without numbers using an array format:
     ```javascript
     [
         "Hello!",
         "You",
         "Will",
         "Resolve",
         "Your",
         "Issue",
         "Have a nice day!"
     ]
     ```
   - This method allows for easier tracking of values.

4. **Switch Widget**: 
   - If you switch from a menu to a switch widget, the same scripting principles apply. Ensure that the OSC commands are correctly formatted and that the widget is properly configured to send the expected messages.

By following these guidelines, you should be able to create a functional menu or switch widget that communicates effectively with your DAW.

[Attachment: Screenshot 2021-11-05]

# Open Stage Control and Max Integration Guide

## Problem Description
Users are seeking guidance on how to effectively integrate Open Stage Control (OSC) with Max, along with examples and tutorials to facilitate this process.

## Solution
A GitHub repository has been created to provide resources for integrating Open Stage Control with Max. The repository includes the following folders:

1. **01_O-S-C_Max_tutorial**: Contains a Max patch and OSC session demonstrating various patching mechanisms and widget customization examples.
2. **02_O-S-C_Max_using_OSSIA-lib**: Illustrates how OSSIA can simplify the integration of Open Stage Control into Max workflows.
3. **03_O-S-C_Max-for-Live_example**: A work-in-progress section that will provide a Max for Live template proposal.

Users are encouraged to explore these resources and adapt them to their projects. Feedback and contributions for improvements or additional examples are welcome.

For more details, visit the repository: [OpenStageControl_Max_examples](https://github.com/matcham/OpenStageControl_Max_examples).

**Note**: Users with only Max for Live (M4L) may need to check if they can open `.maxpat` files or if they are limited to `.amxd` files, as this may affect their ability to run the tutorials.

# Scrollbars Not Visible on iPad and Scrolling Issues

## Problem Description
On iPads, users are unable to scroll through content in Open Stage Control when it overflows, as the scrollbars do not appear and touch gestures do not initiate scrolling.

## Solution
A workaround for this issue has been implemented in version 1.8.14. Users should update to this version to resolve the scrolling problem on iPads.

# Changing Button Labels Based on Switch State

## Problem Description
A user wanted to change button labels dynamically based on the state of a switch. They implemented a solution using the `setVar` function to set a variable for the button label, but were inquiring if there was a simpler or cleaner method.

## Solution
The confirmed solution involves using the `setVar` function to set the button label based on the switch state, as follows:

```javascript
setVar('button_eucl3_4', 'name', 'OpenHat')
```

This method is considered clean and effective. An alternative approach would be to use JavaScript directly in the button's label property, which could look like this:

```javascript
JS{
if (@{switch_id} == 1) return "Label for value 1";
else if (@{switch_id} == 2) return "Label for value 2";
else return "Default label";
}
```

However, the original method using `setVar` is recommended for its simplicity and clarity.

# Refresh Images in Matrix CSS

## Problem Description
When using a Matrix of buttons with background images set in CSS, there is a need to refresh these images dynamically. The initial implementation using a timestamp query string did not work as expected, causing the images to stop displaying.

## Solution
To ensure that the images refresh correctly, append a timestamp query to the image URL. Use the following code structure in your JavaScript:

```javascript
var css = "";
for (var i = 1; i <= 36; i++) {
    css += `.widget:nth-child(${i}) { background-image: url("/Thumbnails/10-${i}.png?${OSC{/timestamp}}"); }`;
}
return css;
```

Additionally, make sure to send an updated timestamp value from your custom module to the `/timestamp` address using:

```javascript
receive('/timestamp', Date.now());
```

This setup will force the browser to re-download the images whenever the timestamp changes. Ensure that the Matrix widget does not have any preArgs set, or use the third argument in the OSC listener to ignore them:

```javascript
OSC{/timestamp, 0, false}
```

This approach should resolve the issue and allow the images to refresh correctly. 

[Attachment: filename.ext]

# Hide or Show Tabs Using Toggle Widgets

**Problem Description:**
Users may want to hide or show tabs in Open Stage Control using toggle widgets, particularly to manage visibility based on different modes, such as read-only or editing modes.

**Solution:**
To hide or show tabs using toggle widgets, you can utilize variables in the CSS settings of the tab panel. Here’s a reliable method:

1. In the CSS box of the tab panel, use the following code:
   ```css
   .navigation { display: #{(@{this.variables.config_mode} != "control") ? "block" : "none" }; }
   ```
   Replace `@{this.variables.config_mode}` with `@{toggle}` if you are using a toggle widget.

2. For hiding the main tab navigation in read-only mode and showing it in editing mode, you can add a custom theme to the theme option in production:
   ```css
   .root-panel > .panel > .navigation {
       display: none;
   }
   /* Optionally hide the side panel */
   #sidepanel {
       display: none;
   }
   #container.sidepanel-open {
       right: 0!important;
   }
   ```

This approach allows you to control the visibility of the navigation based on the current mode effectively. 

[Attachment: filename.ext] (attachment reference missing)

# Setting Clipboard in Open Stage Control

**Problem Description:**
Users may encounter issues when trying to set the clipboard from within Open Stage Control (OSC) using the `globals.clipboard` variable. The method `globals.clipboard.writeText()` may appear undefined, leading to errors when attempting to write to the clipboard.

**Solution:**
1. Ensure you are using a secure context (HTTPS). The clipboard functionality may be restricted to secure contexts, which is necessary for `globals.clipboard.writeText()` to work properly.
2. If you receive an error stating that `globals.clipboard` is undefined, check that you are running the latest version of OSC and that you are accessing it through a secure connection.
3. Use the following code snippet in the `onValue` script section of your button:
   ```javascript
   globals.clipboard.writeText("Hello");
   ```
4. If you encounter any authorization prompts, be aware that `globals.clipboard.readText()` requires user permission when used in a browser.

By following these steps, you should be able to successfully write to the clipboard from OSC. 

[Attachment: image.png]

# Running Multiple Open Stage Control Instances

**Problem Description:**
The user needed to manage multiple clients and faced challenges with client IDs in properties. They considered running multiple instances of Open Stage Control on different OSC input and output ports to address and receive each instance separately.

**Solution:**
Running multiple instances of Open Stage Control is possible and can simplify management of different information for each client. Each instance can be configured with unique OSC input and output ports. 

For integrating a feature that allows users to open a webpage (e.g., for taking selfies), you can utilize the scripting function `openUrl`. Additionally, you can use a frame widget to embed a webpage by setting its value to your web server's URL.

For further reference, see the attached file for additional context: [Attachment: filename.ext].

# SOLVED: "grid-auto-flow: column" for Matrix Grid

**Problem Description:**
The user wanted to arrange the elements of a matrix in a specific column-wise order but encountered issues when attempting to use `grid-auto-flow: column;` in the CSS field with a preceding colon.

**Solution:**
To achieve the desired column-wise arrangement, remove the colon before `inner` in the CSS field. Additional CSS properties may need to be overridden for optimal behavior.

# Multixy with Extra Features

## Problem Description
A user created a project named "multixy_abWrap" to practice Open Stage Control (OSC) basics and shared it with the community. The project is in its early stages, and the user is seeking feedback for improvements.

## Solution
The user has provided the following resources for others to review and utilize:
- **Project File**: [Attachment: multixy_abWrap v1.01.json]
- **Demo Video**: [Attachment: ttlAjBusovCc8j4ac6UgVYQ9Z0u.json]

The user is open to feedback on code improvements and is committed to refining the project further.

# Modal Popup Position Percentages Issue

**Problem Description:**
When converting templates from pixels to percentages for modal popups, the positioning does not behave as expected across different screen sizes. Specifically, the modal popups appear in incorrect positions on tablets with varying resolutions, despite using percentage values for positioning properties.

**Solution:**
The modal popup geometry is defined by the following properties:
- `popupWidth`
- `popupHeight`
- `popupLeft`
- `popupTop`

These properties can accept percentage values. However, a known issue exists where `popupTop` percentages depend on the total width instead of the total height, leading to incorrect positioning on different screen sizes.

To resolve this issue temporarily, you can modify the modal's CSS by adding the following code:

```css
.popup-wrapper {
  margin-top: auto;
  top: var(--top);
}
```

This adjustment should help position the modal correctly across various screen resolutions.

[Attachment: 8GzMP77OH3xXjccHDZVcOoE4q9t.json]

# Formuls: An Experimental Electronic Musical Instrument

## Problem Description
Formuls is an experimental synthesis-based electronic musical instrument that utilizes Open Stage Control for its control GUI. The main application runs on a laptop with a headless version of Open Stage Control, while the interface is accessed via an iPad or Android device on the same network. The audio processing and sequencing are handled by libpd and Faust, bundled into a Python application.

## Solution
The gesture recording is managed within the libpd component of the application and synchronized with Open Sound Control (OSC). Recording directly in OSC is not deemed advantageous, as it would complicate the integration of LFO and Chaos modulation, and updating the interface in response to audio signal modulation would be challenging.

For further details, the macOS Silicon binary version and source code are available on GitHub: [GitHub - jrdooley/formuls: The formuls music environment](https://github.com/jrdooley/formuls).

You can also listen to music created with Formuls on Bandcamp: [https://formuls.bandcamp.com/](https://formuls.bandcamp.com/). 

[Attachment: missing]

# Best Practices for Setting Up Global Variables in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to set up and manage global variables in Open Stage Control, particularly when trying to change their values dynamically and retrieve them in various widgets. Common issues include improper syntax in scripts and misunderstanding how to define default values for variables.

## Solution
To effectively set up global variables, follow these best practices:

1. **Define Global Variables**:
   Use a variable widget to define global variables. Set its default value using the `default` property and leave the `script` property empty. For example:
   ```json
   {
     "type": "variable",
     "id": "deviceMode",
     "default": 9
   }
   ```

2. **Change Variable Values**:
   Use the `set()` function in the script of a button or other interactive widget to change the variable's value. For example:
   ```json
   {
     "type": "button",
     "id": "button_6",
     "script": "
     if (get('user') == 1) {
         set('deviceMode', 1);
     } else if (get('factory') == 1) {
         set('deviceMode', 9);
     } else {
         send('midi:messing', '/note', get('deviceMode'), 6, 20);
     }"
   }
   ```

3. **Retrieve Variable Values**:
   To retrieve the value of a global variable in scripts, use the `get()` function. For example:
   ```json
   {
     "preArgs": "[JS {{ get('deviceMode') }}, 13]"
   }
   ```

4. **Important Syntax Notes**:
   - Ensure that you use commas (`,`) instead of dots (`.`) when concatenating strings or variables.
   - If using `getVar()` in scripts, remember that it can only be used within script contexts and not directly in widget properties.

By following these guidelines, you can effectively manage global variables in Open Stage Control, ensuring they are set, modified, and retrieved correctly.

[Attachment: filename.ext]

# How to Add Scroll to a Text Widget

When using a text widget in Open Stage Control that receives input (such as command outputs) from another system, you may encounter issues with scrolling when the number of lines exceeds the visible area.

## Solution

The text widget is not currently multiline scrollable. The recommended solution is to use an HTML widget instead. Here are the steps to implement scrolling:

1. **Use an HTML Widget**: Replace the text widget with an HTML widget.
2. **Set Up OSC Messages**: Use the correct OSC syntax to feed the HTML widget. For example, use `OSC{/reply}` or `OSC{/reply, }` to avoid undefined values.
3. **CSS for Scrolling**: Ensure that the CSS property is set correctly to enable scrolling. If you encounter issues, check for any `\n` characters in your CSS property, as these can disrupt the scrolling functionality. Removing these characters may resolve the issue.

For reference, see the attached example session file for a working configuration: [Attachment: html_log.json]. If you need further assistance, please refer to the attached session file: [Attachment: 9yNK2QXd7MQ7v4RkF1tb53Msdgz.json].

[Attachment: Antp6Kj09SMV9pCv9jQOYFptNCe.json]

# Setting Key Commands as Widgets in Open Stage Control

## Problem Description
Users want to set widgets in Open Stage Control to trigger key commands (e.g., "save as," "quit," "open editor"). However, Open Stage Control primarily works with OSC and MIDI messages, leading to questions about how to implement this functionality.

## Solution
Directly mapping key commands to widgets in Open Stage Control is not possible. Instead, you can use intermediary software to convert OSC or MIDI messages into key commands. Here are the recommended solutions:

1. **For macOS**: Use **Bome MIDI Translator Pro**. This software allows you to link MIDI messages to scripts (such as AppleScripts) that can execute key commands. Note that Bome is not free.

2. **For Windows**: Use **Auto Hotkey (AHK)**. This free tool can handle OSC messages and can be configured to send key commands based on received messages. It is primarily focused on OSC.

3. **Alternative Option**: Consider using **MidiKey2Key**, which can receive MIDI messages and send key commands. However, support for this tool may be limited.

By utilizing these tools, you can effectively map OSC or MIDI messages to key commands in your applications. 

[Attachment: filename.ext] (attachment reference missing)

# Adjusting Font Size for Specific Text in Open Stage Control

## Problem Description
In a tab panel, there is a need to change the font size of a specific piece of text (e.g., "Flute 8va BWW") without affecting the font size of other text within the same panel.

## Solution
To adjust the font size of specific text within a tab panel, you can use the following CSS selector to target the content wrapped in the "html" class:

```css
.html {
  /* Apply your desired styles here */
  font-size: larger; /* Example of changing font size */
}
```

This method allows you to style only the text within the HTML property without altering the font size of all text in the panel. 

[Attachment: title]

# Importing a Text File as a String in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to import a text file (e.g., `.txt`, `.rtf`) as a string in a custom module within Open Stage Control. Common issues include errors related to file reading and incorrect method usage.

## Solution
To successfully read a text file in Open Stage Control using Node.js, follow these steps:

1. Use the `nativeRequire` function to import the `fs` module:
   ```javascript
   fs = nativeRequire('fs');
   ```

2. To read the file synchronously, use `fs.readFileSync()`:
   ```javascript
   var string_articulations = fs.readFileSync('D:/_GOD TEMPLATE/Athena v1.2 for Bear/string_articulations.txt', 'utf8');
   console.log(string_articulations);
   ```

3. Ensure that the file path is correct and the file exists at the specified location.

By using `fs.readFileSync()`, you will obtain the file content directly as a string, avoiding issues with asynchronous callbacks. 

For further reference, consult the Node.js documentation on file reading. 

[Attachment: filename.ext] (attachment reference missing)

# Storing a Variable Through New Client Connection/Reboot

## Problem Description
Users may encounter issues with storing and recalling variables in Open Stage Control when a new client connects or when a client reloads the interface. The variable widget works well within the same client session, but the value appears as "undefined" when these events occur. 

## Solution
To ensure variables persist across client connections and reboots, follow these guidelines:

1. **Variable Synchronization**: Ensure that the variable's `bypass` property is set to `false`. If it is set to `true`, the variable will not synchronize across clients.

2. **Client Connection Requirement**: At least one client must remain connected to maintain the state of widgets. If you need values to persist even when no clients are connected, consider implementing a custom module.

3. **Custom Module for Persistence**: A custom module can be created to store and restore variable values. This approach allows for data persistence through reboots and can be designed to export variables to text files, enabling sharing between clients.

4. **Avoiding Workarounds**: While sending OSC messages to save sessions may work, it is not recommended due to performance concerns and the notification that appears when the session is saved.

For further customization or assistance with creating a module, refer to the Open Stage Control documentation or community resources.

# How to Change the Fader Style in a Matrix

To customize the design of faders within a matrix in Open Stage Control, you can utilize the `props` property to override the default settings of the duplicated widget.

## Solution

You can define the desired properties in the following format:

```json
{
  "design": "compact",
  "range": {"min": 1, "max": 100},
  "knobSize": 4
}
```

This allows you to adjust the fader design, range, and knob size as needed.

# Changing CC Values on a Controller from Another Widget

## Problem Description
Users want to dynamically change the CC (Control Change) values of a fader in Open Stage Control using another widget, such as a knob. The goal is to allow the fader to send different CC values without needing to edit the configuration through the editor.

## Solution
A reliable method to achieve this involves using a knob to define the `preArgs` property of the fader. Here’s how to set it up:

1. **Use a Knob Widget**: Create a knob that will determine the CC value for the fader.
2. **Linking Widgets**: Ensure both the knob and the fader share the same `linkId` to keep them synchronized. This allows direct input of a CC number.
3. **Set the Fader's Target**: Adjust the fader's `target` property according to your MIDI configuration.
4. **Implement Memory for CC Values**: To remember the last value for each CC, use a variable widget to store incoming CC values. The knob's `onValue` script should store the fader's value in the variable widget and recall the value for the newly selected CC number.

### Example Configurations
- **Basic Implementation**: 
  - [Attachment: variable_cc_fader.json]
- **Memory Implementation**: 
  - [Attachment: variable_cc_fader_memory.json]
- **Alternative Implementation**: 
  - [Attachment: variableFader_v4.json]

These configurations provide a solid foundation for managing dynamic CC values in Open Stage Control.

[Attachment: 9PJ8Gma4CBifcJImn4tsyadrZjI.json]

[Attachment: sSNejvFznV3fbn9DkEqmPuK0zCH.json]

[Attachment: uVClQ7Jrhp2nhxlNaIAjKIHgCIn.json]

[Attachment: sflklP7yhiRRzdszSnoNrFT193S.json]

[Attachment: yxwzYIYhKlWZUXo48FJExUxJ3WN.json]

[Attachment: nALA7tHx3Qo5QFy08xfQyDX8OyG.json]

# Aligning Musical Notation Icons in Open Stage Control

## Problem Description
Users may encounter difficulties aligning musical notation icons, such as "Triple" and "Dotted Note," within Open Stage Control. Specifically, users may struggle to position elements accurately and find that certain icons are not available in the default icon set.

## Solution
To address these alignment issues, you can utilize Base64 images in the CSS field of your buttons. Below are the CSS codes for the "Triple" and "Dotted Note" icons:

### CSS Code for Triple Icon
```css
:host {
    background-size: 80%;
    background-repeat: no-repeat;
    background-position: center center;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAACNCAYAAADFA/p1AAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw1AUhU9TiyIVEQuKOGSoThZERRy1CkWoEGqFVh1MXvoHTRqSFBdHwbXg4M9i1cHFWVcHV0EQ/AFxc3NSdJES70sKLWK88Hgf591zeO8+QKiXmWZ1jAOabpupRFzMZFfFzlcEEMIA+iDIzDLmJCkJ3/q6p26quxjP8u/7s3rUnMWAgEg8ywzTJt4gnt60Dc77xBFWlFXic+Ixky5I/Mh1xeM3zgWXBZ4ZMdOpeeIIsVhoY6WNWdHUiKeIo6qmU76Q8VjlvMVZK1dZ8578heGcvrLMdVrDSGARS5AgQkEVJZRhI0a7ToqFFJ3HffxDrl8il0KuEhg5FlCBBtn1g//B79la+ckJLykcB0IvjvMxAnTuAo2a43wfO07jBAg+A1d6y1+pAzOfpNdaWvQI6N0GLq5bmrIHXO4Ag0+GbMquFKQl5PPA+xl9UxbovwW617y5Nc9x+gCkaVbJG+DgEBgtUPa6z7u72uf2b09zfj/kq3JuZaSxggAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UBBhY6Mf6KV3wAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAF0ElEQVR42u3bX0hTfRjA8ee8dNNF0Et2G9VNaLQkquUCzWzlYF1oLaVA6EaJEgIp1IsuTCgv7Kqb3gyKCkoq+qNQBguC5US7MWcQ5qJFy2qvRYyM1p73It4XIutt52w7Z/b93Lbjc37nfPltnpkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPQwuQX5t375d6+rqJJ1OS0NDA9cfztbf36+pVEqDwaAmk0lNpVLq8/mUKwNHqq6u1vfv338TaDQa1ZmZGaKFMz169Eg3b978TaCdnZ2qqkQLZyorK/suzqdPnxItCkdxcfFyVdXLly8TLQpDNBrVZDJJsCbMm4uL2rZtm7a3t9s2v7W1VQYHB2d9nBUOh9Xlcsn8+fPl2bNn4na7dWho6LvXXr16VYuKivJ2zhUVFTx+s1NdXZ3ayev1/nAH3bp1q/r9fu3t7VVV1devX8/62lgsltdzZqd1iGAwKOl0Ou9zP3z48MN/GxgYMERE+vr6ZHJyUpctWzbr60KhkCxatCjn5+p2u2XBggXsdE7ZaZ1+nuvWrbP9PEdHRwtup/2DxO0zPDxs8MSLaAtKdXW1Gga//xCtg3k8nv+21ZKSki2nT5+WK1eucGH4RcyZEomELly4UG7duqVTU1PS0NAg165dkz179rDVEq0zBQIBCQQCIiIyPT0tlZWVEg6HCZZonSsYDBrBYJALQbQ/fCuWgYEB7u4vCIfDEo/HuRCForS0VH+nuSIiLpdrhDtfoA4fPqyqqlVVVXkNaO/evaqqWlNTk/dwu7u7NZFIFPyDYR55gWgBogWIFkQLEC1AtCBagGgBogXRAkQLEC2IFiBagGhBtADRAkQLEC2IFiBagGhBtADRAkQLogWIFiBaEC1AtADRgmgBogWIFiBaEC1AtADRgmgBogWIFkQLEC1AtCBagGgBogXRAkQLEC2IFiBaIKfmzeXFVVRUaH19vaxdu1YMw5BQKCTnz5+XkZERI5dzy8vLdefOneLxeEREZHR0VM6cOSOhUMjI9Zp37NihtbW1smLFChERuX37tly6dKlrbGysldwd7NSpU/oz0WhUjx07pqqqVVVVmo2ZpaWlevPmzZ/Ojcfjun//flVVramp0Wytd8OGDRqJRH46++7du3ry5ElNJBJKIQ7i9/s1U9mItrm5OeO52Yr2xIkTGc0lWgfp6elRM6xG29XVZWpuNqLt6+vLeC7ROkR/f7+aZSXatrY203OtRnvjxg1Tc4nWAQ4cOKBWmI12165dluZaiba7u9v0XKK12erVq/9Op9O2RJtMJm2JdtOmTWplzURrs/HxcbVq/fr1Gd/ECxcuWJ5rds1PnjyxNJdobVRWVqbZkOncNWvWqNXdPZVKmQqnqanJ8nonJiYKPtqC/Uasvr7e8s94/vx5xsf4fD4xDGvfEczMzJg6bt++fZbXHIlEhGht4vP5LP+M48ePZ3yMy+WyPLejo8PUcUuWLLE8++zZs7xN2yUbHw2Ki4uXZzr3/v37lmZ+/PjR9Nuz1Y8lY2Njc+Lz7G/7BzMHDx6Ux48fT+Z7bk9Pj+ljrX4s6ezsZLezUywWM73jhEIh0zvO9evXTc+NxWKWdjorj9kuXrzIUwO7HT161JZwWlpaTM199+6d5WgePnxoava9e/cI1glKSkq2ZHrzHjx4kJWbF4/HM5o7Pj6uK1eubLQ61+v1aiqVymj2uXPnCNZJamtrf/nmNTY2Zu3meb1e/fTp0//O/Pz5sx45ciSr0Rw6dOiX1vv27VsNBAIE60Tl5eU6NDQ064178+aNtrS05OTGud1uvXPnzqxzX716pW1tbbpq1areXMz2+/06MTEx6+zBwUHdvXv3nI7VmCsL8Xg8unjx4n8fh8nLly9z/j8URL7+/cPSpUv/FBH58uWLTE1NyfDwcF6u68aNG7WoqEhEvn5h8eLFi6ZIJPIXWxkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERH5B0syc1Xr3EGWAAAAAElFTkSuQmCC');
    text-transform: none;
    border: none;
    border-radius: 5px;
    font-size: 125%;
}
```

### CSS Code for Dotted Note Icon
```css
:host {
    background-size: 32%;
    background-repeat: no-repeat;
    background-position: center center;
    /* Add your Base64 image URL here */
}
```

Ensure to replace the placeholder comment in the dotted note icon CSS with the appropriate Base64 image URL for the dotted note icon.

By applying these CSS styles, you should be able to align your musical notation icons effectively.

[Attachment: 7ADrR4GefAvSnJiLlVT38zGsjwm.json]

# Using Different Background Images for a Button Based on State

To assign different background images for a button in Open Stage Control according to its On/Off state, you can utilize the advanced syntax for CSS properties.

## Problem Description
Users transitioning from other platforms, such as Lemur, may find it challenging to assign different images for a button's On and Off states in Open Stage Control, as it relies on CSS for image management.

## Solution
You can use the following CSS code in the button's properties to achieve this functionality:

```css
background-image: #{@{this} ? 'url(ImagePath/image-on.png)' : 'url(ImagePath/image-off.png)'};
background-size: 100% 100%;
```

- Replace `ImagePath/image-on.png` and `ImagePath/image-off.png` with the actual paths to your images.
- The `@{this}` refers to the button's current value, where the Off state is typically `0` and the On state is any value greater than `0`.

For more details on using JavaScript blocks in Open Stage Control, refer to the documentation:
- [JavaScript in OSC Advanced Syntax](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/#javascript-js-code)
- [JavaScript Code in OSC](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/#javascript-code)

# Adding CSS to a Specific Word in a Button's Label

## Problem Description
Users have inquired about the possibility of applying CSS styling to a specific word within a button's label in Open Stage Control. The challenge arises from the limitations of CSS selectors, which do not allow for the selection of individual words within a text string.

## Solution
The most effective method to style a specific word in a button's label is to use the HTML property instead of the label property. This allows for more complex formatting. Here’s how to implement it:

1. **Disable the button's label**.
2. **Set the HTML property** with the desired text, using HTML tags for styling:
   ```html
   I am a <b>label</b>
   ```
3. **Add CSS for styling**:
   ```css
   .html {
     position: absolute;
     height: 100%;
     width: 100%;
     display: flex;
     justify-content: center;
     align-items: center;
   }

   .html b {
     color: limegreen; /* Change the color of the specific word */
   }
   ```

This approach allows for targeted styling of specific words within the button's label, overcoming the limitations of standard CSS selectors.

[Attachment: labelStylingExample]

# Starting a Session Directly from a URL

## Problem Description
Users want to start a session in Open Stage Control directly from a URL rather than navigating through the IP address and file system. This is particularly useful for managing multiple devices with different sessions.

## Solution
To achieve this, you can set up a hub session that automatically loads specific sessions based on the URL parameters. Here’s how to implement it:

1. **Create a Hub Session**: Set up a hub session that will handle the loading of other sessions.

2. **Use the `load` Option**: Configure the server to load the hub session automatically when a client connects.

3. **Implement the OnCreate Script**: Add the following script to the `onCreate` event of a widget in your hub session:
   ```javascript
   if (globals.env.session) {
       send('127.0.0.1:whatever', '/hub/load_session', globals.env.session);
   }
   ```

4. **Create a Custom Module**: In your custom module, use the following code:
   ```javascript
   var sessionFolder = '/path/to/OSC/Sessions/';

   module.exports = {
       oscOutFilter: (data) => {
           if (data.address == '/hub/load_session') {
               receive('/SESSION/OPEN', sessionFolder + data.args[0].value + '.json', { clientId: data.clientId });
               return; // bypass original message 
           }
           return data;
       }
   }
   ```

5. **Specify the Session in the URL**: Clients can specify the session name in the URL as follows:
   ```
   http://192.168.1.10/?session=foo
   ```

6. **Configure Buttons in the Hub Session**: Create buttons in your hub session that send the appropriate messages for manual session selection. For each button, set the following parameters:
   - `mode`: `tap` (to send only its `on` value)
   - `on`: the session name (e.g., `session1` or `session2`)
   - `address`: `/hub/load_session`
   - `target`: `127.0.0.1:1234` (this is a dummy target)

### Example Configuration
- Replace `var sessionFolder = '~/OSC/Sessions/'` with:
  ```javascript
  var sessionFolder = 'D:\Daten\OSC_files\custom_modules\sessions\';
  ```

- Ensure that the button parameters match the expected values to trigger the session loading correctly.

By following these steps, you can conveniently switch between different sessions using bookmarks or direct URLs. 

[Attachment: load_session.json]  
[Attachment: load_session.js]

# Reset Toggle Button State Without Sending Off Message

**Problem Description:**
When resetting the state of toggle buttons in Open Stage Control, the buttons send an OFF message to the DAW, causing delays. The goal is to reset the toggle buttons without triggering these OFF messages.

**Solution:**
Use the `set` function with an optional third argument to prevent sending the OFF message. The syntax is as follows:

```javascript
set('sv_all_audio_folder', 0, {send: false})
set('sv_drum_kit_subfolder', 0, {send: false})
set('sv_guitars_subfolder', 0, {send: false})
set('sv_misc_subfolder', 0, {send: false})
set('sv_all_bass_folder', 0, {send: false})
```

By adding `{send: false}` as the third argument, the toggle buttons can be reset without sending the OFF messages to the DAW.

# Receive OSC from Behringer X32

## Problem Description
Users may encounter issues receiving OSC messages from the Behringer X32 or Midas M32 units while successfully sending OSC commands. 

## Solution
To receive OSC values from the X32, create a JavaScript file with the following code and load it into the Custom-Module section on the setup page:

```javascript
setInterval(()=>{
    send('192.168.0.29', 10023, '/xremote')
}, 10000)
```

Make sure to replace `'192.168.0.29'` with the actual IP address of your X32 unit. This script will periodically send a request to the X32, allowing you to receive OSC messages.

# Can't See Timecode with OSC on a Networked Computer

**Problem Description:**

Users may encounter issues displaying Timecode on a networked computer using Open Stage Control (OSC) with MIDI over a network. Although OSC works correctly on the main computer, the Timecode does not display on the secondary computer connected via Apple's MIDI Network Setup. The Timecode only updates during playback or recording, and does not refresh when interacting with the interface.

**Solution:**

1. **Text Widget Target Configuration:**
   Ensure that the text widget's target is set correctly to `midi:device_name_as_defined_in_server_config`. This configuration is essential for the text label to receive the Timecode data.

2. **MIDI Network Limitations:**
   It is possible that the MIDI-over-network setup may not be transmitting events properly. Consider testing with a direct hardware MIDI interface connection to eliminate potential issues with networked MIDI.

3. **Direct MIDI Connection:**
   For a more reliable setup, consider purchasing a second hardware MIDI interface. Connect the dedicated computer with the touch screen directly to this interface, and link it to the main computer's MIDI interface. This setup is likely to provide a more stable connection for Timecode display.

4. **DAW Configuration:**
   If Timecode updates are not reflecting when interacting with the interface, this may be an issue within the Digital Audio Workstation (DAW) rather than OSC itself. Check the DAW settings to ensure that it is configured to send Timecode updates consistently.

By following these steps, users should be able to resolve issues with Timecode display on networked computers using OSC.

# Adding to Custom Module

## Problem Description
Users may encounter issues when trying to add new code to an existing Custom Module in Open Stage Control. Simply copying and pasting new code can break the existing functionality.

## Solution
To successfully add new code to an existing Custom Module, you should modify the existing functions instead of using multiple assignments to the `module.exports` variable. Here’s a structured approach to achieve this:

1. Create an array of submodules that you want to include:
   ```javascript
   var submodules = [
       require('./custom_modA.js'),
       require('./custom_modB.js'),
       // Add additional submodules as needed
   ];
   ```

2. Modify the `module.exports` object to include the initialization and filtering functions:
   ```javascript
   module.exports = {
       init: function() {
           for (var m of submodules) {
               if (m.init) m.init();
           }
       },
       unload: function() {
           for (var m of submodules) {
               if (m.unload) m.unload();
           }
       },
       oscInFilter: function(data) {
           for (var m of submodules) {
               if (m.oscInFilter) data = m.oscInFilter(data);
               if (!data) return;
           }
           return data;
       },
       oscOutFilter: function(data) {
           for (var m of submodules) {
               if (m.oscOutFilter) data = m.oscOutFilter(data);
               if (!data) return;
           }
           return data;
       }
   };
   ```

This method allows you to integrate new functionality without disrupting the existing code.

# Switch with Custom Symbols Displaying in Arbitrary Order

**Problem Description:**
A user is attempting to create a switch with 20 rows of 10 buttons that display custom symbols instead of numbers. The values are defined in a JSON format, but Open Stage Control (O-S-C) automatically reorders the entries based on the keys, which are strings. This results in an undesired order of button labels. Additionally, there is an issue where buttons are displayed in a single column instead of a grid.

**Solution:**
To maintain the desired order of button labels while using custom symbols, convert numeric keys to strings with spaces. For example:

```json
{
  "a": 1,
  " 1 ": 2
}
```

This approach ensures that the numeric keys do not interfere with the ordering of the other keys. It is important to avoid using the same string for multiple entries, as this will lead to data loss. For example, use:

```json
{
  "p": 78,
  " p": 79
}
```

Ensure that there is a space before or after the character to differentiate the keys.

If buttons are displayed in a single column rather than a grid, check the configuration settings for the switch layout. Ensure that the properties for the button grid are correctly set to accommodate the desired number of columns.

For further reference, see the attached example file for a working configuration: [Attachment: wUGzmP0XrSqerpzvc8qHK8l9ov7.json].

# Issue with HTML Widget and /EDIT Command

## Problem Description
When sending HTML content to an 'R' HTML widget using the command:
```
osc.udp://localhost:8080 /EDIT ss R '{"html":"test"}'
```
the HTML field value updates in the editor, but the widget remains blank. This issue occurs on Linux and has been observed in multiple commits.

Additionally, there is a need to add multiple `<p>` elements with different colors in the HTML widget, but attributes such as `class` or `style` appear to be stripped from the `<p>` tags.

## Solution
1. **Blank Widget Issue**: This issue has been identified as a bug and has been fixed. It is important to note that using the `/EDIT` command is CPU intensive, as it causes the widget to be entirely recreated. To avoid this, consider using an OSC listener for the HTML property instead.

2. **Adding Colored `<p>` Elements**: While it is possible to use classes or inline CSS to style `<p>` elements, attributes are disabled by default in the HTML widget. This limitation will be addressed in version 1 of Open Stage Control, and it has been backported to version 0.49.12, which is the last release of the v0 series.

For more details, refer to the attached documentation. [Attachment: filename.ext]

# Error: python-rtmidi not found (Win 10 Pro)

When attempting to list MIDI devices in Open Stage Control (OSC) on Windows 10 Pro, an error occurs stating: 
```
(ERROR, MIDI) python-rtmidi not found (or wrong version) (running with python 3.7.0)
(INFO, MIDI) Get python-rtmidi at ...
```
This issue arises on one machine while OSC works correctly on another with the same setup.

## Solution

1. **Check Antivirus Settings**: The error may be due to the antivirus software deleting the necessary MIDI backend file. Re-download Open Stage Control and ensure that the file `osc-midi-windows.exe` is whitelisted in your antivirus settings.

2. **Installation Method**: Ensure that you are using the packaged version of OSC, as `osc-midi-windows.exe` is only included in that version.

3. **File Location**: Verify the installation path of OSC. It should not be in a deeply nested folder structure or a path with unusual characters. Try placing the OSC folder directly on the C: drive.

4. **Alternative Setup**: If the issue persists, consider following the installation procedure for "other systems" by installing Python and the `python-rtmidi` package. This may resolve the MIDI device listing issue.

5. **Using a Different Machine**: If the NUC is primarily used for sending controls, you can run the OSC server on your main system and access it via a browser on the NUC.

If these solutions do not resolve the issue, further investigation into system configurations may be necessary. 

[Attachment: filename.ext] (attachment reference missing)

# Using Images in Open Stage Control

## Problem Description
There is a concern about whether loading images, such as sound waveforms, under sliders in Open Stage Control could slow down the software's performance. Users are interested in implementing this feature but are uncertain about its impact on efficiency.

## Solution
Using images in Open Stage Control is unlikely to slow down the application. Users are encouraged to experiment with this feature. However, if you are using Windows and plan to load images from the server's drive, be aware of a known bug that has been addressed in version 0.45.5. For more details, refer to the issue tracker: [GitHub Issue #515](https://github.com/jean-emmanuel/open-stage-control/issues/515).

[Attachment: filename.ext]

# Scripting: Using Multiple Conditions in JavaScript If Statements

## Problem Description
A user encountered issues with a JavaScript script where a conditional statement using multiple conditions (e.g., `if (value === 0 && option_1 === 1 && option_2 === 1)`) did not trigger the expected actions. The user sought confirmation on the validity of the syntax and potential reasons for the script's failure to execute as intended.

## Solution
It is acceptable to use multiple conditions in a JavaScript `if` statement. The original script was revised to ensure proper functionality. Below is the corrected version of the script:

```javascript
var num = getProp('this', 'id').replace(/[^0-9]/g,'');
var option_1 = get("option_1");
var option_2 = get("option_2");
let myString1 = parseFloat(num) - 1;

// When the button is switched on
if (value === 1) {
    send('/note', 6, myString1, 127); // open key editor
}

// When the button is switched off
else if (value === 0 && option_1 == 1 && option_2 == 1) {
    send('midi:SessionKiano', '/note', 2, 86, 127); // controller lane configuration 1
    setTimeout(function(){
        send('midi:SessionKiano', '/note', 2, 85, 127); // activate next part
    }, 200);
}

else if (value === 0 && option_1 == 1 && option_2 == 2) {
    send('midi:SessionKiano', '/note', 2, 87, 127); // controller lane configuration 2
    setTimeout(function(){
        send('midi:SessionKiano', '/note', 2, 85, 127); // activate next part
    }, 200);
}

else if (value === 0 && option_1 == 1 && option_2 == 3) {
    send('midi:SessionKiano', '/note', 2, 88, 127); // controller lane configuration 3
    setTimeout(function(){
        send('midi:SessionKiano', '/note', 2, 85, 127); // activate next part
    }, 200);
}
```

### Additional Notes
- Parentheses are not strictly necessary in simple conditions but can enhance readability, especially when combining `AND (&&)` and `OR (||)` operators.
- For further reading on operator precedence and the use of parentheses in JavaScript, refer to the following resources:
  - [When should you use parentheses inside an if statement's condition? - Stack Overflow](https://stackoverflow.com/questions/1952278/when-should-you-use-parentheses-inside-an-if-statements-condition)
  - [Operator precedence - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)

# Understanding getVar() in Open Stage Control

## Problem Description
There is confusion regarding the use of the `getVar()` function in Open Stage Control. Users are unsure about what `getVar()` retrieves and how it differs from `setVar()`. Specifically, it is unclear whether `getVar()` accesses a local variable created in scripting properties or a variable from a widget.

## Solution
The `getVar()` function is used to retrieve a custom variable that has been stored in a widget's scripting fields. You can use `setVar()` to assign a value to a custom variable, and then `getVar()` to access that value later. 

To illustrate its usage, you can store a custom variable in any widget and retrieve it using the syntax `VAR{}` in your scripts. 

For a practical example, refer to the attached file which demonstrates how to implement `getVar()` effectively.

[Attachment: getVarThing.json]

[Attachment: a1eUk3c3a2J9gJXui42LeoJLJ1N.json]

# Setting "min" Range to Negatives

**Problem Description**  
A user is attempting to configure a knob with a range of `{"min": -64, "max": 63}`. However, when the knob is moved below 0, it snaps back to the maximum value (63). The user is unsure if there is a missing parameter or if this functionality is not supported.

**Solution**  
The issue arises because MIDI does not support negative values. When a negative value is sent, it is cast to a range between 0 and 127, which causes the knob to revert to the maximum value due to feedback from the MIDI target. 

To resolve this, it is recommended to use a range of `{"min": 0, "max": 127}` instead. This adjustment will ensure proper functionality without the snapping behavior.

**Attachments**  
- [Attachment: knobrange.json]  
- [Attachment: myknob.json]  
- [Attachment: h2palJWAdLUOZ0Exj5vrfcCNZfs.json]

[Attachment: 3YpLOnqVHiFzgIOzJi2vwCEPWYw.json]

# Calling a Formula from a Variable in Open Stage Control

## Problem Description
The user wants to simplify the management of button font sizes in Open Stage Control by using a formula stored in a variable. The goal is to avoid repeating the formula in each button's CSS field, but the initial attempt does not compute correctly.

## Solution
To store the formula in a global variable and use it in button CSS, follow these steps:

1. Create a new variable at the top of the tree to ensure it is set before other widgets call it.
2. In the `onCreate` property of this variable, add the following code:

   ```javascript
   globals.setFontSize = (h, w) => {
     return (parseFloat(h) + parseFloat(w) / 2) / 10;
   }
   ```

3. In the CSS field of the button, use the following syntax to call the variable:

   ```css
   font-size: #{globals.setFontSize(@{this.height}, @{this.width})}vw;
   ```

This method allows you to manage the formula in one place, making it easier to update as needed.

# Simplifying CSS Theme for Background Images

**Problem Description:**
The user is attempting to create a CSS theme to manage button styles, specifically to set a base configuration for buttons and apply different background images for subclasses. However, the subclass background image is not displaying correctly.

**Solution:**
To ensure that the background images for subclasses work correctly, follow these steps:

1. **Define Base Class:**
   Set up a base class for your buttons with the desired properties:
   ```css
   .buttons_explorer {
       border: none;
       --color-fill: none;
       --color-text: lightgrey;
       --widget-padding: padding;
       --line-width: none;
       --alpha-fill-on: none;
       --alpha-fill-off: none;
       --alpha-stroke: none;
       --color-widget: none;
       background-size: 90rem 90rem; 
       background-repeat: no-repeat;
       background-position: center;
   }
   ```

2. **Subclass Background Image:**
   Define the subclass with the specific background image:
   ```css
   .buttons_explorer .folder {
       background: url('..assets/OSC/Images/win_folder.png');
   }
   ```

3. **Assign Classes Correctly:**
   Ensure that you assign the classes correctly in your button properties:
   ```plaintext
   class: buttons_explorer;
   class: folder;
   ```

4. **Targeting All Buttons:**
   If you need to change all buttons at once, you can target the original CSS class `button-container`. However, this will apply to all buttons across all tabs and containers.

5. **Theme Configuration:**
   Confirm that the theme is referenced correctly in the server configuration under the `theme` property.

By following these steps, you should be able to successfully apply different background images to your button subclasses. 

[Attachment: filename.ext] (attachment reference missing)

# Mapping Button CC to Menu Value in Open Stage Control

**Problem Description:**
A user wants to configure a button widget to send a specific MIDI Control Change (CC) message based on the value selected from a nearby menu widget. For example, selecting "10 Ticks" from the menu should trigger the button to send a CC message associated with that value when pressed.

**Solution:**
To achieve this, you can use a script in the button's `onValue` property to check the selected value from the menu and send the corresponding MIDI message. Here’s a sample script to implement this functionality:

```javascript
// randomize.onValue
// Assuming menu.values is structured as follows:
// {
//   "10 Ticks": 10,
//   "100 Ticks": 100,
//   // etc
// }
var menuVal = get('menu_id'); // Replace 'menu_id' with the actual ID of your menu widget
if (menuVal === 10) {
  send('midi:my_device', '/control', 1, 10, 127); // Sends CC 10 on channel 1 with value 127
} else if (menuVal === 100) {
  send('midi:my_device', '/control', 1, 100, 127); // Sends CC 100 on channel 1 with value 127
  // Add additional conditions as needed for other menu values
}
```

Make sure to replace `'menu_id'` with the actual ID of your menu widget and adjust the CC values and channels as necessary. This script will ensure that the button sends the correct MIDI message based on the menu selection when pressed.

[Attachment: Screenshot 2025-01-26 at 11.40.14 AM]  
[Attachment: Screenshot 2025-03-01 at 6.36.54 PM]

# Getting Maximum Range Value from QLab OSC

## Problem Description
The goal is to recreate the “Load to Time” slider in QLab, which requires the slider's maximum range value to be dynamically set based on the selected cue's duration. Currently, the slider's maximum value is fixed and does not correspond to the cue duration, leading to incorrect values.

## Solution
To set the slider's maximum value based on the cue duration sent by QLab via OSC, you can use one of the following methods:

1. **Using a Variable Widget**:
   - Create a variable widget that receives the duration message from QLab.
   - Set the slider's range property to use this variable:
     ```json
     {
       "min": 0,
       "max": @{variable_widget_id}
     }
     ```

2. **Using OSC Directly**:
   - If you prefer not to create an additional widget, you can directly use the OSC syntax:
     ```json
     {
       "min": 0,
       "max": OSC{/qlab/duration/address}
     }
     ```
   - Note that this method is less flexible than using a variable widget.

By implementing either of these solutions, the slider's maximum value will correctly reflect the duration of the selected cue.

# Script Widget Syntax

## Problem Description
When using the `@{}` syntax in a script widget, it appears that the variables are not being evaluated correctly. For example, the following code:

```javascript
JS{{
var adrs = "/@{loop_nmbr}/test"
send(false, adrs)
}}
```

Results in sending the OSC address as `'/__VARS.VAR_999/test'`, rather than the expected value.

## Solution
In the context of Open Stage Control, `@{}` and `OSC{}` are treated as variables rather than their evaluated values. To correctly concatenate the variable values, you should manually concatenate the strings. The corrected code should look like this:

```javascript
var adrs = "/" + @{loop_nmbr} + "/test"
```

This will ensure that the variable `loop_nmbr` is evaluated correctly within the OSC address. 

For more information on property syntax, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/#javascript-js-code).

# Sending Text from QLab to Open Stage Control

**Problem Description:**
The goal is to send an OSC cue from QLab to Open Stage Control (O-S-C) to update a text indicator with the name of the currently playing song. The user is unsure of the correct OSC address to use for this purpose.

**Solution:**
To successfully send a text update from QLab to O-S-C, ensure that both applications use the same OSC address. For example, use the address `/text_1`. The OSC cue should be formatted as follows:

```
/text_1 "Song Name"
```

Replace `"Song Name"` with the desired text (e.g., `"Hello world"`). Once the cue is sent from QLab, it will update the text indicator in O-S-C accordingly.

# Controlling Fabfilter Pro Q3 Bands with Open Stage Control

## Problem Description
Users may want to control specific parameters in Fabfilter Pro Q3, such as limiting the gain of multiple bands to a range of +6 dB to -6 dB using MIDI CC. However, they may lack experience with CSS scripting and require assistance in configuring these settings.

## Solution
To limit the fader values for each band in Fabfilter Pro Q3, adjust the fader's `range` property in Open Stage Control. Set the minimum and maximum values to match your desired range of -6 dB to +6 dB, instead of using the default MIDI range of 0-127. This allows for precise control over the bands without exceeding the specified limits.

# Blink Text with JavaScript Command

## Problem Description
Users want to create a blinking text effect in Open Stage Control using JavaScript and CSS.

## Solution
To make text blink, you can use CSS keyframe animations along with a variable to control the blink rate. Here’s how to implement it:

1. **CSS for Blinking Text**:
   Use the following CSS code in your button widget to create the blinking effect:

   ```css
   label {
     color: red;
     animation: animate VAR{textBlink, 1}s linear infinite;
   }

   @keyframes animate {
     0% {
       opacity: 0;
     }
     50% {
       opacity: 0.7;
     }
     100% {
       opacity: 0;
     }
   }
   ```

2. **Control Blink Rate**:
   You can set the blink rate using a variable from another widget. Use the following JavaScript command in the `onValue` script property of the controlling widget:

   ```javascript
   setVar("widgetThatHasTextBlinkIdHere", "textBlink", value);
   ```

3. **Dynamic Animation Duration**:
   If you want the blink duration to change based on another widget's value, use this CSS:

   ```css
   label {
     color: red;
     animation: animate #{@{widgetId} === 1 ? 3 : 0}s linear infinite;
   }

   @keyframes animate {
     0% {
       opacity: 0;
     }
     50% {
       opacity: 0.7;
     }
     100% {
       opacity: 0;
     }
   }
   ```

Replace `widgetId` with the ID of the widget you want to monitor. If the value of `widgetId` is equal to 1, the blink duration will be 3 seconds; otherwise, it will be 0 (no blinking).

This approach allows for flexible control of the blinking effect based on user interaction.

# Examples of the Script Widget in Open Stage Control

## Problem Description
Users are seeking examples of how to effectively utilize the script widget in Open Stage Control, particularly in relation to the new JS{{}} feature. There is a need for clear documentation and practical examples for non-coders.

## Solution
The script widget can be useful for simple tasks, but for more complex functionalities, creating a custom module is recommended. For examples and additional information, refer to the following resources:

- **GitHub Repository**: [Open Stage Control](https://github.com/jean-emmanuel/open-stage-control)
- **FAQ & Tips Section**: [GitHub Issue #152](https://github.com/jean-emmanuel/open-stage-control/issues/152)
- **Discussion on Script Widget**: [GitHub Issue #355](https://github.com/jean-emmanuel/open-stage-control/issues/355)

These links provide insights and discussions that may help users understand the script widget better and how it compares to the new JS{{}} feature. 

(attachment reference missing)

# Node.js Version Used by Open Stage Control

**Problem Description:**
Users may need to know the version of Node.js that is bundled with Open Stage Control (OSC) for compatibility with libraries such as `better-sqlite3`.

**Solution:**
Open Stage Control is currently bundled with Node.js version **12.8.1**.

# logScale Behavior in Frequency Knobs and Faders

When using a frequency knob or fader with the `logScale` property in Open Stage Control, users may expect smaller frequencies to be more sensitive than larger ones. However, the default behavior may not align with this expectation.

## Solution

To achieve the desired behavior where smaller frequencies are finer than larger ones, set the `logScale` value to a small number, such as `0.1` or `0.05`. This adjustment will reverse the scaling behavior as intended. 

If you need to display the minimum value at the bottom of the fader, you can reverse the min and max values accordingly.

# Multiline Text and Word Wrap in Input Element

**Problem:**
The user is seeking a way to enable multiline text input or word wrap in an input element within Open Stage Control.

**Solution:**
The standard input element does not support multiline text. Instead, use the `textarea` widget, which allows for multiline input and enables users to enter a new line by pressing `Shift + Enter`.

# RGB Widget Sliders Width and Height Configuration

## Problem Description
Users may want to customize the width of the hue slider and the height of the alpha slider within the RGB widget in Open Stage Control.

## Solution
To set the width of the hue slider, use the following CSS:

```css
.hue {
  width: 50rem;
}
```

For adjusting the height of the alpha slider, apply the following CSS. The height is determined by a grid layout rule:

```css
.inner {
  grid-template:
          "a a b" auto
          "c c c" calc(20rem + var(--widget-spacing) * 2)/1fr;
}
/* 20rem = alpha slider height */
```

### Additional Notes
- There is no official documentation for the CSS classes of all widgets. Users are encouraged to use the browser inspector (F12) to identify classes or refer to the source code.
- Be aware that CSS classes may change in future updates, so adjustments might be necessary. 

[Attachment: filename.ext]

# Start OSC with Default Option Ticked for Relative Units (%)

**Problem Description:**
Users want to start Open Stage Control (OSC) with the "Relative Units" option enabled by default. The initial inquiry was about a command to achieve this, and subsequent discussions revealed issues with the implementation of client options.

**Solution:**
To enable the "Relative Units" option by default when starting OSC, add the following line to the server's `client-options` field:

```
usepercents=1
```

Note that the option must be written in lowercase due to a known bug. This change will ensure that the "Relative Units" option is ticked when a session starts.

For immediate use, you can also set this option directly in the address bar of your browser when connecting to the server:

```
http://server-ip:port?usePercents=1
```

This method works for individual client sessions. 

[Attachment: Screenshot 2021-11-05 1312×710 92.9 KB]  
[Attachment: Screenshot 2021-11-05 1322×652 90 KB]

# How to Find Child Widgets of Root

To determine the parent-child relationships between widgets in Open Stage Control, you can use the `getProp` function.

## Problem Description
Users may want to identify the widget IDs of the root or a specific panel and find out the parent widget of a given widget.

## Solution
You can retrieve the parent widget's ID using the following method:

```javascript
getProp("parent", "id")
```

This command will return the ID of the parent widget. Note that the `id` can be specified as a string or an array of strings, where `"this"` targets the host widget and `"parent"` targets the parent widget.

Currently, there are limited options for programmatically exploring the widget tree, which may be an area for future improvement.

# Switching from v0.49.2 to 1.7.5 - Key Considerations

## Problem Description
Users transitioning from version 0.49.2 to 1.7.5 of Open Stage Control may seek guidance on significant changes and new features introduced in the newer version.

## Solution
The most comprehensive resource for understanding the changes is the changelog file. It is recommended to read this document thoroughly, as it details all updates and modifications from version 0.49.2 to 1.7.5.

For examples of new features introduced since version 1.x, users can explore templates and custom modules shared by the community. 

[Attachment: changelog.md]

# Math.round Skipping Value Issue with Faders

## Problem Description
When using two faders, the first fader sets the maximum value of the second fader. However, when the first fader is set to 13, the second fader skips the value 8, displaying the sequence: 1, 2, 3, 4, 5, 6, 7, 7, 9, 10. This issue arises due to the implementation of a multiplication factor and the configuration of the steps for the second fader.

## Solution
To resolve the issue of skipped values, ensure that the number of steps for the second fader accounts for an additional step. This can be achieved by modifying the step function to include an extra step. The corrected expression should be:

```javascript
#{@{text_stepsvalue_@{parent.variables.ID}} + 1}
```

This adjustment allows the second fader to correctly reflect all values, including the previously skipped value of 8.

[Attachment: Steps-Fills.json]  
[Attachment: 1kLFMvVdNzT6YY0k3CHwVgVnYHh.json]  
[Attachment: wvj24a0iOh9GygasXoZCkvzIGup.json]

# Modify Range on Widgets in Matrix

To set the range of faders in a matrix to 0 - 127 instead of the default 0 - 1, use the following configuration:

## Problem Description
The default range for faders in a matrix is set to 0 - 1. Attempting to change the range using `{"range":[0,127]}` does not allow for proper movement of the faders.

## Solution
Use the following syntax to define the range correctly:

```json
{"min": 0, "max": 127}
```

This will successfully adjust the fader range to the desired values. For further reference, you can consult the documentation on fader range [here](https://openstagecontrol.ammd.net/docs/widgets-reference/#fader_range).

# Creating Virtual Ports in Open Stage Control

## Problem Description
Users may want to create virtual MIDI ports directly in Open Stage Control without relying on IAC on macOS. There are issues with the naming of these ports, where the expected names do not appear correctly.

## Solution
To create a virtual MIDI port in Open Stage Control, use the following configuration:

```plaintext
port_name:virtual
```

Instead of using a numerical port designation (e.g., `port_name:3,4`).

If you encounter issues with the naming of the virtual MIDI devices, it has been identified as a potential bug in the macOS implementation. The expected format for the port names should be:

```plaintext
device_name:midi_out
device_name:midi_in
```

For example, if your virtual MIDI device is named `my_midi`, the ports should appear as `my_midi:midi_out` and `my_midi:midi_in`. This issue will be addressed in a future release to ensure proper display of device names.

[Attachment: midi_list.png]  
[Attachment: Screenshot 2022-09-25.png]

# Get Value from Second Switch Using Custom Module

## Problem Description
The goal is to retrieve values from two independent switches, `TransChordFrom` and `TransChordTo`, and use these values in a custom module to call the function `getChordModificationLabel`. The challenge is to ensure that the values persist between calls and are correctly utilized in the function.

## Solution
To achieve this, follow these steps:

1. **Declare Variables Globally**: Ensure that the variables `transposeFromValue` and `transposeToValue` are declared outside the function's scope to maintain their values across multiple calls.

2. **Use `receive()` Asynchronously**: The `receive()` function does not return values directly. Instead, use it within the `oscOutFilter` function to handle incoming messages.

3. **Modify the Code**:
   - Update the code to handle both switches and ensure that the button update occurs only once after both values are set.

Here is a refined version of the working code:

```javascript
// Variables for Chord Modification Module
var transposeFromValue = 1; // index of the chord array
var transposeToValue = 1; // position within the object in the chord array
var chordType = "Select the chord structure to move from and to - Modification will appear here";

module.exports = {
    oscOutFilter: function (data) {
        const address = data.address;
        const args = data.args;

        // Handle TransChordFrom switch
        if (address === '/TransChordFrom') {
            transposeFromValue = args[0].value; // gets value from switch
            console.log("transposeFromValue: " + transposeFromValue); // Output: Value of switch pressed

            // Update chordType if transposeToValue is already set
            if (transposeToValue) {
                chordType = getChordModificationLabel(transposeFromValue, transposeToValue);
                receive('/EDIT', 'modal_transpose_DescribeBtn', { type: 's', value: { 'label': chordType } });
            }
        }

        // Handle TransChordTo switch
        if (address === '/TransChordTo') {
            transposeToValue = args[0].value; // gets value from switch
            console.log("transposeToValue: " + transposeToValue); // Output: Value of switch pressed

            // Update chordType if transposeFromValue is already set
            if (transposeFromValue) {
                chordType = getChordModificationLabel(transposeFromValue, transposeToValue);
                receive('/EDIT', 'modal_transpose_DescribeBtn', { type: 's', value: { 'label': chordType } });
            }
        }
    }
};
```

This code ensures that both switch values are captured and used effectively to update the chord modification label.

# Improvements for Two-Way Communication with Hardware

## Problem Description
Users are looking for a way to optimize the communication between Open Stage Control and hardware devices, specifically to send the value of a knob only when it is released (untouched). The current implementation sends multiple values during knob adjustments, which is inefficient. Additionally, there is a need to convert values into decibel strings for better representation on the panel.

## Solution
To achieve the desired functionality, follow these steps:

1. **Send Value on Untouch**:
   Utilize the new touch state of widgets to send the knob value only when it is released. This can be implemented in the widget's script property:
   ```javascript
   if (touch !== undefined) {
       if (touch == 0) {
           send('/@{this.id}', get("this"));
       }
   }
   ```

2. **Bypass Unwanted Messages**:
   Ensure that the bypass option on the widget is activated to prevent sending unwanted messages during adjustments.

3. **Using Custom Modules**:
   If you want to centralize the touch handling in a custom module, you can capture the touch information from the widget's script property. However, the custom module cannot directly access the touch state unless the widget sends it. To avoid code duplication, implement the following in a dummy knob's script:
   ```javascript
   if (touch === 0) {
       send('/' + getProp('this', 'id'), value);
   }
   ```
   Then, reference this script in other widgets using:
   ```javascript
   @{dummy_knob_id.script}
   ```

4. **Value Conversion**:
   For converting values to decibel strings, the following ranges can be used:
   - For 0 - 8192: -5 to 0 dB
   - For 8192 - 16383: 0 to +5 dB
   - For 0 - 8192: -infinity to 0 dB
   - For 8192 - 16383: 0 to +12 dB

By implementing these solutions, you can enhance the efficiency of two-way communication with hardware in Open Stage Control. 

[Attachment: openstagecontrol4reaper_v2.js]  
[Attachment: nuKHTAoz1BA9pauuw5aRBhNaMf.js]

# Quantizing Switch Incoming Values to Nearest Value

## Problem Description
A switch is configured to send decimal values (e.g., 0.5, 0.6, 0.7, 0.8) to a target that expects values in the range of 0 to 1. Due to floating-point precision issues, the values returned by the target are not exactly what the switch expects, causing the switch to become deselected. The goal is to quantize the incoming values so that the switch can select the nearest decimal value.

## Solution
A working approach involves configuring the switch with integer values (e.g., 5, 6, 7, 8) and setting `osc.bypass` to true to prevent it from receiving OSC messages from the target. The `onValue` method of the switch should call `send()` to manually send the OSC message, converting the integer value to the expected decimal value (by dividing by 10). 

Additionally, a variable should be defined with the same OSC address to receive messages from the target. In the variable's `onValue` method, use the following code to quantize the incoming value:

```javascript
set("mySwitch", Math.round(value * 10));
```

This setup allows the switch to convert its own value to the target's desired value and to convert the target's incoming value back to the switch's expected integer value.

Alternatively, consider using a custom module to apply rounding to incoming messages, which could simplify the process. However, note that switching to doubles (osc typetag "d") may not be feasible if the target requires float values.

[Attachment: filename.ext]

# Issue Opening MCU.json File

Users have reported difficulties in opening the `mcu.json` file, receiving errors when attempting to do so.

## Solution

1. The original `mcu.json` file can be accessed from the GitHub repository: [GitHub - jean-emmanuel/open-stage-control-mcu](https://github.com/jean-emmanuel/open-stage-control-mcu). This version has been confirmed to open correctly.
   
2. If you continue to experience issues, download the following tested files that are known to work:
   - [Attachment: zlKfuse8p88Joeue4dLUkc2IngJ.json]
   - [Attachment: 1MRwawTenZ2PxnVviisleU4OB4.js]

These files may provide the necessary insights and configurations you are looking for.

[Attachment: jjSl1LV93Y8c2AQwVqgTgJDxP6p.js]

[Attachment: tNomJluljAsTIOORvNBp6aDrPhg.json]

# Synced Video Player in OSC Panel

**Problem Description**  
There is a need to embed a video player in an Open Stage Control (OSC) panel that can sync with MIDI Time Code (MTC) from a Cubase setup. The goal is to offload video processing to a slave PC running only a browser for the OSC session, thereby freeing up resources on the main Cubase machine.

**Solution**  
While direct video playback within OSC is not supported, you can use the following methods to achieve video playback synchronized with Cubase:

1. **VidPlayVST**: This VST plug-in allows you to host video within Vienna Ensemble Pro (VEPro). It supports multiple video formats and is a cost-effective solution for syncing audio with video. You can find more information at [vidplayvst.com](https://vidplayvst.com).

2. **Audiogridder**: If you want to host video on your slave machine, consider using VidPlayVST in conjunction with the free Audiogridder network plugin. This setup allows video playback on the slave machine by setting the latency to zero.

By implementing either of these solutions, you can effectively manage video playback in your OSC panel while maintaining synchronization with your Cubase session.

# setTimeout Usage in Open Stage Control

## Problem Description
When using `setTimeout` in Open Stage Control, the intended function does not execute as expected. The user is attempting to send MIDI CC messages after a timeout, but the `send()` function fails to work because it is not triggered by user interaction.

## Solution
To successfully send MIDI messages from a script without user interaction, consider the following:

1. **Use `get()` Instead of `@{}`**: Ensure that you are using `get()` to retrieve values in your scripts, as `@{}` is not recommended.

   ```javascript
   setTimeout(endclear, get("vMeasure"));
   ```

2. **User Interaction Requirement**: The `send()` function will only work if the script is triggered by a user interaction. If you need to send messages without direct user interaction, consider the following approaches:
   - Use the script widget in **once** mode, which executes the script immediately after parsing.
   - Implement a custom module that listens for OSC messages. You can trigger functions in the custom module by sending OSC messages from your widgets.

3. **Custom Module Setup**: If you opt for a custom module:
   - Export the specific functions you want to trigger along with standard functions like `init` and `oscInFilter`.
   - Use OSC messages to communicate between the widget and the custom module.

By following these guidelines, you should be able to effectively use `setTimeout` and send MIDI messages as needed.

# Variables Scope in Open Stage Control

## Problem Description
Users may want to create dynamic OSC addresses that change based on a variable, allowing for easy duplication of custom templates without manually adjusting OSC targets. The challenge is to limit the scope of the variable so that only specific duplicated panels can access the new variable value, while original panels can use a different variable.

## Solution
To achieve this, use the syntax `@{parent.variables.anything}`. This method allows you to define variables that are scoped to the parent panel, enabling nested panels to access these variables without conflict. By default, the `variables` property of panels is set to `@{parent.variables}`, which facilitates this functionality.

For a practical example, refer to the attached file [Attachment: clones_and_variables.json]. This example demonstrates how to implement scoped variables effectively in your project.

# Opening Session on Other Drives

When attempting to open an existing session from the client on Windows, users may encounter a limitation where navigation to other drives is not possible.

## Solution

To access files located on other drives, utilize the server's `load` option. This allows you to load files from any location on your system.

# Changing Multi XY Values Through Scripts

## Problem Description
A user is attempting to update the values of a multi XY widget using a script in another widget. While they can read the values with `#{@{widgetId}[x]}`, they are struggling to write to the widget using various combinations of `set` and `setVar`.

## Solution
To update the values of a multi XY widget, you need to provide an array of values in the format `[x1, y1, x2, y2, ...]`. For example, to set the values, use the following command:

```javascript
set('multixy_id', [0, 0, 0.5, 0.5])
```

This will correctly update the multi XY widget with the specified coordinates.

# Embedded Tab Remote Control

**Problem Description:**
How to switch between embedded tabs in Open Stage Control, specifically from one tab to another within a nested structure.

**Solution:**
To switch to multiple tabs, you can send a single command to Open Stage Control. Use the following syntax:

```
/TABS tab_2_id tab_4_id
```

This command will open `tab_2` in `panel 1` and `tab_4` in `panel 2` simultaneously.

# Touch Screen Control for Animation Software

**Problem Description:**
Users are exploring the potential of using Open Stage Control (OSC) to trigger events in animation software. There are inquiries about the feasibility of integrating OSC with various animation packages and game engines.

**Solution:**
1. **OSC and Node.js Integration:**
   - Open Stage Control includes Node.js, allowing for extensive functionality, including file I/O operations. Users have successfully utilized OSC to control applications like Unreal Engine, indicating that similar integrations with animation software are feasible.

2. **MIDI/OSC Mapping:**
   - For Windows users, tools like MidiKey2Key can be employed to map MIDI/OSC signals to keystrokes or keyboard shortcuts.
   - Mac users can consider MidiShortcut, although it has limitations (e.g., inability to map the Shift key alone). Another option is Bome Translator, though it is more expensive.

3. **Messaging Protocols:**
   - Ensure that your animation software can receive OSC/MIDI messages or can be controlled via a messaging protocol to facilitate integration with Open Stage Control.

[Attachment: filename.ext] (attachment reference missing)

# MIDI Messages Sent in Multiples or Not at All After Moving Open Stage Control

When migrating an Open Stage Control setup to a new computer, users may encounter issues where MIDI messages are sent in multiples (10+) or not at all. This problem can arise despite the setup being identical to the previous configuration.

## Problem Description
The Open Stage Control project was copied to a new machine running on a Mac, while the MIDI interface remained the same. Users reported that MIDI messages were either duplicated excessively or not transmitted at all. Errors occasionally appeared in the launch window, but they were unrelated to the custom module or layout.

## Solution
1. **Check MIDI Configuration**: Ensure that the MIDI configuration is correct. If using software like loopMIDI or rtpMIDI, verify that they are properly set up to avoid feedback loops, which can cause erratic behavior.

2. **Replace Faulty Ports**: In cases where specific ports are malfunctioning, replacing them with alternative ports (e.g., switching to rtpMIDI) can resolve the issue. This was confirmed to work in a similar scenario involving an iConnect4 box.

3. **Monitor for Errors**: Keep an eye on the launch window for any error messages related to MIDI transmission. For example, errors may indicate problems with sending MIDI messages, as shown in the traceback provided:
   ```
   (ERROR, MIDI) Traceback (most recent call last):
   File "midi.py", line 300, in
   File "midi.py", line 285, in send_midi
   File "src\_rtmidi.pyx", line 1110, in rtmidi._rtmidi.MidiOut.send_message
   File "src\_rtmidi.pyx", line 220, in rtmidi._rtmidi._cb_error_func
   File "src\_rtmidi.pyx", line 408, in rtmidi._rtmidi._default_error_handler
   rtmidi._rtmidi.SystemError: MidiOutWinMM::sendMessage: error sending MIDI message.
   ```

By following these steps, users should be able to troubleshoot and resolve MIDI message transmission issues in Open Stage Control after migrating to a new system.

# Passing Data to a Script Widget from a Custom Module and Resending It

**Problem Description:**
When sending data from an external OSC address (using Qlab) to Open Stage Control, the data is filtered in a custom module and passed to a script widget. The script widget processes the data and attempts to send it back to the custom module for logging purposes. However, the `send()` function in the script widget does not work as expected because it is not triggered by user interaction.

**Solution:**
To successfully send data back from the script widget to the custom module, the `send()` function must be called directly from the custom module instead of the script widget. This is necessary because the `send()` function will not have any effect unless it is initiated by a user interaction.

Here is the relevant code snippet for the script widget:

```javascript
// Get Id
const theResId = get('resid-detail');

// Send the log message to the database
// This is a function in the custom module
send('/logData', value[0], value[1], theResId);
```

To implement the solution, modify the custom module to handle the data logging directly when the script widget processes the incoming data.

# Parent Variables in Matrix

**Problem Description:**
In a fader matrix, the use of `parent.variables.device` in the `preArgs` for MIDI output stopped functioning, requiring static parameters instead. This issue appeared to be a regression affecting the matrix functionality.

**Solution:**
This issue has been resolved in version 1.9.14 of Open Stage Control. Users experiencing this problem should update to this version to restore the functionality of using `parent.variables.device` in their MIDI output configurations.

# iPad Menu Glitch

**Problem Description:**
Users have reported that menus appear correctly on a computer but get cut off by the panel when viewed on an iPad. This issue has been observed across different menus within the same project.

**Solution:**
To resolve the menu cutoff issue on iPads, slightly reduce the height of the top container. This is a known bug specific to iPads and cannot be fixed through code adjustments.

If the issue persists with other menus, consider removing unnecessary interface elements, such as sliders, that may be causing layout problems. 

**Attachments:**
- [Attachment: hSI3gQxaOqTnwNCZ16PksX685Gk.json]
- [Attachment: 1eMF48BDylRvJ0Xw16rJ1ymqJsI.json]
- [Attachment: nD6ALCxOETKrdPPjmFotEVso8Ab_1.json]

# Change CSS Class of Widget Using Custom Module

To dynamically change the appearance of a widget by modifying its CSS class in Open Stage Control, you can utilize either an OSC listener or a custom variable.

## Solution

### Using OSC Listener
1. Define the class in your custom module:
   ```javascript
   class: OSC{class, defaultClass};
   ```
2. Set up the listener to receive class changes:
   ```javascript
   receive('/widget_address/class', 'someClass');
   ```

### Using Custom Variable
1. Define the class in your custom module:
   ```javascript
   class: VAR{class, defaultClass};
   ```
2. Call the following command to set the class:
   ```javascript
   receive('/SCRIPT', `setVar('widget_id', 'class', 'someClass')`);
   ```

Both methods allow you to change the widget's class dynamically, with the OSC listener being the preferred option as it has been confirmed to work effectively.

# Sending Gyro Data from Mobile Devices

## Problem Description
Users have reported difficulties in sending gyroscope data from mobile devices using Open Stage Control. The gyroscope widget does not appear to send OSC messages directly, leading to confusion about its functionality.

## Solution
To send gyroscope data, you cannot rely on the gyroscope widget alone, as it does not send OSC messages. Instead, you can retrieve its value using another widget that does send messages. 

Here’s how to set it up:

1. Create an input widget.
2. Set its `value` property using the following JavaScript code:

   ```javascript
   var data = @{gyroscope_id}
   return data.do.beta
   ```

This configuration allows you to access the gyroscope data and send it as needed.

For more details, refer to the documentation on `gyroscope#value`.

# Use Text from Text Widget in Custom Module

**Problem Description:**
Users may want to retrieve the text from a text widget and assign it to a variable within a custom module in Open Stage Control. The challenge lies in the fact that widget objects are not directly accessible within custom modules.

**Solution:**
To access the value of a text widget in a custom module, you can use OSC messages. Specifically, utilize the remote control command `/GET` to have the widget send its value. This can be captured in the `oscInFilter` function of your custom module.

### Steps:
1. **Set Up the Text Widget:**
   - Ensure your text widget is configured to send its value using the `/GET` command.

2. **Capture the Value:**
   - In your custom module, implement the `oscInFilter` function to listen for the OSC messages sent by the text widget.

3. **Using Configuration Values:**
   - If you have multiple configuration values (e.g., MIDI targets, file paths), consider using the `@{}` syntax to access these values directly in the client, if applicable. This can simplify your setup.

4. **Message Handling:**
   - When setting the text widget's value, it can also send a message if its target is set or via scripting. You can catch this message in your custom module for further processing.

By following these steps, you can effectively retrieve and utilize the text from a text widget within your custom module. 

[Attachment: filename.ext]

# Switching Panel Tabs with Incoming MIDI Messages

**Problem Description:**
Users want to switch between different tabs on a panel in Open Stage Control based on specific MIDI input messages received from an external DAW. The goal is to implement this functionality using a custom module or scripting.

**Solution:**
To achieve tab switching based on incoming MIDI messages, follow these steps:

1. **Create a Custom Module:**
   Use the following code as a basis for your custom module. This module listens for incoming OSC messages and sends a MIDI message back to the DAW when a specific condition is met.

   ```javascript
   module.exports = {
       oscInFilter: function(data) {
           var {address, args, host, port} = data;

           if (address !== '/control') return;
           if (args[1].value < 117) return;
           if (args[1].value == 127) {
               send('midi', 'OSCtoCUBASE', '/control', 1, 126, 1);
               return;
           }
           return {address, args, host, port};
       },
   }
   ```

2. **Set Up MIDI Messages:**
   Configure your DAW (e.g., Cubase) to send specific MIDI Control Change (CC) messages when you select different tracks. For instance, you can set it to send CC 127 for track selection.

3. **Implement Tab Switching Logic:**
   In your script widget or custom module, implement logic to switch tabs based on the incoming MIDI messages. For example:

   ```javascript
   if (args[1].value == 117) {
       set("Tab_01", 1); // Switch to Tab 01
   } else if (args[1].value == 118) {
       set("Tab_02", 1); // Switch to Tab 02
   } else if (args[1].value == 119) {
       set("Tab_03", 1); // Switch to Tab 03
   }
   ```

4. **Testing and Debugging:**
   Use the debug output to confirm that the correct MIDI messages are being received and that the corresponding tabs are being switched as expected.

By following these steps, you can effectively switch between tabs in Open Stage Control based on incoming MIDI messages from your DAW.

[Attachment: filename.ext] (attachment reference missing)

[Attachment: wP0bkzIrk9wKP4nEiZzidI6LZxh.json]

# Google Search-like Function with Input Widget

## Problem Description
The goal is to create a search function on a page that allows users to search within a JSON file and display results using dynamically created widgets. The user encountered issues with the input widget, specifically in capturing input when the Enter key is pressed to generate an OSC event for further processing in a custom module.

## Solution
The issue was resolved by ensuring the `target` attribute was properly set in the input widget configuration. This allows the input to trigger the desired OSC event when the Enter key is pressed.

Make sure to configure the input widget as follows:

```json
{
  "type": "input",
  "target": "your_target_here"  // Ensure this attribute is set
}
```

This will enable the input widget to function correctly, allowing you to capture the input and implement your JSON exploration algorithm.

# Using Open Stage Control on Android

## Problem Description
Users want to understand how to use Open Stage Control (O-S-C) on an Android device, specifically whether the server needs to run on a separate device and how to connect to it.

## Solution
To use Open Stage Control on an Android phone, the server should run on another device, such as a regular computer. The Android device can then connect to the server using a web browser.

Additionally, it is possible to run Open Stage Control directly on an Android device using Termux, although this method may require adjustments for compatibility with the latest O-S-C versions. For more information on this, refer to the following resources:
- [Building and running on Android - GitHub Issue #405](https://github.com/jean-emmanuel/open-stage-control/issues/405)
- [Open Stage Control Installation Instructions](https://openstagecontrol.ammd.net/docs/getting-started/introduction/#installation)

Please note that running the server on Android is not officially supported, and MIDI functionality may not work as expected. 

[Attachment: filename.ext]

# Input Widgets vs Knobs in Open Stage Control

## Problem Description
Users may encounter issues when replacing knob widgets with input widgets in Open Stage Control. Specifically, the functionality may not work as expected when the input widgets are renamed to match the original knobs.

## Solution
To resolve this issue, follow these steps:
1. Replace the knob widgets with input widgets.
2. Rename the input widgets to match the names of the original knob widgets.
3. Exit edit mode to ensure the changes take effect.

This process should allow the input widgets to function correctly, similar to the original knobs.

[Attachment: hFgZ44twco8SZcaCffySDzNEuLi.json]

# Dynamically Referencing Variables in Open Stage Control

## Problem Description
Users may encounter difficulties when trying to reference panel variables dynamically in Open Stage Control. Specifically, there is a need to use a variable (e.g., `FXslot`) to dynamically access another variable (e.g., `ChControlPanel.variables.1`) instead of hardcoding the variable name.

## Solution
To dynamically reference panel variables, avoid using the `@{}` syntax in scripting properties. Instead, utilize the `get()` or `getProp()` functions. Here’s how to implement it:

```javascript
var FXslot = "foo"; // Replace "foo" with the desired variable name
var slotValue = getProp('ChControlPanel', 'variables')[FXslot];

setVar('PresetNameText', 'Lbl', slotValue);
```

This method allows you to dynamically access the value of the variable specified by `FXslot`, providing a clean and efficient solution for your scripting needs.

# Widget Does Not Receive OSC Message from Device

**Problem Description:**
A user is unable to receive OSC messages in Open Stage Control (O-S-C) from a device. The device sends a message to `/hello`, and the expected reply is `/greetings human`. The button OSC address is set to `/hello`, and the text widget OSC address is set to `/greetings`, but the `onValue` function is not triggered despite the Protokol tool showing that the message is received.

**Solution:**
1. **Enable Debugging:** Activate the debug option in the O-S-C launcher to monitor incoming messages directly in the console. Ensure that there are no `preArgs` set in the text widget, as these must match the message's arguments for the widget to respond.

2. **Check Network Configuration:** Verify that the device is sending messages to the correct port (default is 8080) and that there are no firewall restrictions affecting O-S-C but not Protokol. Test sending messages to `127.0.0.1` to confirm local reception.

3. **Use a Custom Module for Debugging:** To log all incoming OSC messages, a custom module can be created. The following is a simple custom module that logs incoming values to the console:
   - Load the attached session file (`debug.json`) and custom module (`debug-com.js`) into the server's custom module option.
   - [Attachment: k4gXUyyF2czsgwT19dntTkvHS3g.js]
   - [Attachment: oWSyhTT9DKFqMvP2xhw1bfyJrIB.json]

By following these steps, the user should be able to receive and log all OSC messages effectively.

# Using a Variable Widget to Hold an Array of Variables

## Problem Description
Users may need to create a global array of variables in Open Stage Control that can be accessed and modified from various locations within a template. The goal is to establish a 'preset' system that allows for easy recall and manipulation of these variables.

## Solution
To create a global array of variables, follow these steps:

1. **Declare the Array in the `onCreate` Function**:
   Use the `onCreate` function of a widget to initialize the array as a global variable.
   ```javascript
   setVar(this, 'data', [1, 2, 3]);
   ```

2. **Accessing the Array**:
   To retrieve the array from another widget, use:
   ```javascript
   var data = getVar('widget_id', 'data');
   ```

3. **Modifying the Array**:
   To modify a specific element in the array:
   ```javascript
   var data = getVar('widget_id', 'data');
   data[i] = someVariable; // where i is the index
   setVar('widget_id', 'data', data);
   ```

4. **Retrieving a Specific Value**:
   To get a particular value from the array:
   ```javascript
   var particularValue = getVar('widget_id', 'data')[i];
   ```

5. **Using Global Variables for Performance**:
   If you plan to manipulate the array frequently and are concerned about performance, consider using global variables instead:
   ```javascript
   // In some widget's onCreate
   globals.data = [1, 2, 3];

   // Accessing the global variable elsewhere
   globals.data[1]; // returns 2
   globals.data[1] = -2; // assigns a new value
   ```

### Performance Considerations
If the array will contain a large number of values (e.g., over 1000), be aware that frequent manipulation may slow down performance, as `getVar()` makes a copy of the variable. Using global variables can help mitigate this issue.

This method allows for flexible and efficient management of variables across your Open Stage Control template.

# Custom Class CSS in Open Stage Control

## Problem Description
Users may struggle to implement custom CSS classes in Open Stage Control to streamline their session files. There is confusion regarding the correct syntax and structure for applying these custom classes within themes and widgets.

## Solution
To effectively use custom CSS classes in Open Stage Control, follow these guidelines:

1. **Define the CSS Class in Your Theme**:
   For example, to create a button style, add the following to your theme's CSS:
   ```css
   .wizardGreenBtn {
       white-space: normal;
       word-break: break-word;
       color: #2dcf7a;
   }
   ```

2. **Apply the Class in the Widget's CSS Box**:
   In the CSS box of the button widget, use the following syntax:
   ```css
   :host {
       class: wizardGreenBtn;
   }
   ```

3. **Targeting the Correct Element**:
   If the style does not apply as expected, ensure you are targeting the correct element. For instance, you might need to use:
   ```css
   .wizardGreenBtn label {
       /* styles here */
   }
   ```

4. **Styling All Buttons**:
   To apply styles to all button widgets at once, you can simplify your CSS:
   ```css
   .button-container label {
       /* styles here */
   }
   ```

5. **Styling Buttons in Specific Containers**:
   If you want to style buttons within a specific container, assign a unique class to that container and use:
   ```css
   .myCssClass .button-container label {
       /* styles here */
   }
   ```

By following these steps, you can create a cohesive set of button styles, such as:
```css
.wizardGreenBtn
.wizardGreenBtnWithLogo
.wizardGreenFrame
```

This approach allows you to modify a few properties in your theme to affect the entire session file efficiently.

For further reference on CSS selectors, consult the following resources:
- [Descendant combinator - CSS: Cascading Style Sheets | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors)
- [Class selectors - CSS: Cascading Style Sheets | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/Type_selector)

(attachment reference missing)

# Updating Data Structures in Open Stage Control

## Problem Description
Users may encounter issues when attempting to update a data structure embedded in a variable using the `onValue` script in Open Stage Control. Specifically, after modifying a property of the data structure and using `set()` to save the changes, the updates do not reflect in the original data structure.

## Solution
To effectively update a data structure and ensure changes are saved, follow these steps:

1. **Retrieve the Data Structure**: Use the `get()` function to obtain the current value of the variable containing the data structure.
   ```javascript
   var config = get("testVar");
   ```

2. **Modify the Desired Property**: Access and change the property you wish to update. For example, to change the frequency:
   ```javascript
   config.filter.f0.freq = 2000;
   ```

3. **Save the Modified Structure**: Use the `set()` function to save the updated data structure back to the variable.
   ```javascript
   set("testVar", config);
   ```

4. **Verify Changes**: After saving, you can log the updated value to confirm the changes:
   ```javascript
   console.log(get("testVar").filter.f0.freq); // Should log 2000
   ```

If changes are still not reflected, ensure that:
- The variable name used in `get()` and `set()` is correct.
- There are no other scripts or processes that might be overriding the changes after they are made.

### Additional Note
If you are looking to save the updated structure to a JSON file, you can use the following code snippet in your custom module:
```javascript
const fs = nativeRequire('fs');
module.exports = {
    oscOutFilter:function(data){
        var {address, args} = data;
        if (address === '/saveconfig') {
            fs.writeFileSync('../configTest.json', JSON.stringify(get("testVar")));
        }
    }
};
```
This will write the current state of `testVar` to a JSON file named `configTest.json`.

[Attachment: GWoaqQL9xP4sg6a4L68udh441e.json]

# Controlling the Patchbay Widget Without Sending OSC Messages

## Problem Description
Users may encounter issues with the patchbay widget in Open Stage Control where enabling the `ignoreDefaults` option still results in OSC messages being sent. Additionally, there is a desire to send patch information from another widget or custom module using the `set` method instead of OSC messages.

## Solution
1. **Ignore Defaults Bug**: The `ignoreDefaults` option is not functioning as intended, leading to OSC messages being sent despite being checked. This is a known bug that will be addressed in a future release.

2. **Using the Set Method**: To connect inputs and outputs without sending OSC messages, the following syntax can be used:
   - To connect `input_1` to `output_1`:
     ```javascript
     set('patchbay_1/input_1', ['output_1']);
     ```
   - To connect `input_1` to both `output_1` and `output_2`:
     ```javascript
     set('patchbay_1/input_1', ['output_1', 'output_2']);
     ```
   - To disconnect `input_1`:
     ```javascript
     set('patchbay_1/input_1', []);
     ```

3. **Patchbay Address Issue**: It has been noted that the patchbay's address may not function correctly when set to `auto`. This issue will also be resolved in the next release. 

For further reference, please consult the documentation once updated.

# Getting Values from a Binary Blob in Open Stage Control

When receiving floating point meter values as a binary blob via OSC, you may need to convert specific items in the blob into float values. The following outlines how to achieve this using JavaScript.

## Problem Description
You receive an OSC message containing a binary blob represented as a `Uint8Array`. The goal is to extract specific items from this array and convert them into float values.

Example OSC message:
```
{ address: '/meters/0',
  args: Uint8Array [ 8, 0, 0, 0, 8, 160, 8, 160, 0, 0, 0, 0, 0, 128, 0, 128, 8, 160, 8, 160 ] }
```

## Solution
To convert the `Uint8Array` to float values, you can implement a custom module with an OSC input filter. Below is a sample code snippet:

```javascript
module.exports = {
    oscInFilter: function(data) {
        // Filter incoming OSC messages
        var { address, args, host, port } = data;

        if (args.length && args[0].value instanceof Uint8Array) {
            var view = new DataView(args[0].value.buffer);
            var fval = view.getFloat32(0); // Adjust the byte offset as needed
            
            args[0] = { type: 'f', value: fval };
        }

        // Return data if you want the message to be processed
        return { address, args, host, port };
    }
}
```

### Notes:
- Ensure you replace `args.buffer` with `args[0].value.buffer` to correctly access the buffer of the `Uint8Array`.
- The `getFloat32` method reads a float value from the specified byte offset. Adjust the offset as necessary to read different items from the array.

### Additional Considerations
For sending multiple values, consider using the `receive` method, as it is more straightforward compared to passing values to a parent container.

[Attachment: filename.ext]

# Access Note Value of Keyboard Widget

When attempting to integrate the note number of a pressed key in the OSC address instead of the value part, users may encounter an issue where the output is a long array of zeros, such as `"/mymessages/[0,0,0,0,…0]/"`.

## Solution

To resolve this issue, set the `split` property to `"/mymessages/$"`. This configuration will correctly format the OSC address to include the note number of the pressed key.

# LED Widget Functionality in Open Stage Control

## Problem Description
A user is attempting to implement an LED widget that should respond to button presses. The expected behavior is as follows:
- When Button 1 is pressed, LED 1 turns on while LED 2 and LED 3 turn off.
- LED 1 should remain on until either Button 2 or Button 3 is pressed, which should turn on LED 2 or LED 3 respectively, while turning the others off.
However, the user reports that all LEDs remain off.

## Solution
To resolve the issue, the user can refer to the provided example scripts that demonstrate the correct implementation of the LED widget functionality. The following attachments contain working scripts:

- [Attachment: vm975ybp2QR3w1Pk65MY3DHwGg0.json]
- [Attachment: uCscP5dswcnfR7OwxuBW4rHtmiY.json]
- [Attachment: n0qZCY7bwoPghlhCYQdOPc8irdx.json]

These scripts illustrate the proper configuration and scripting needed to achieve the desired LED behavior.

# Update Widget Values Without Triggering onValue in Open Stage Control

## Problem Description
When updating toggle switches in Open Stage Control from a custom module using OSC commands, the `onValue` command is triggered, leading to an infinite loop. The goal is to update the toggle widget values without activating the `onValue` command.

## Solution
To update toggle widget values without triggering the `onValue` command, use the following approach:

Instead of using the `/SET` command, which simulates user interaction and causes the widget to send its value, use the `receive` function directly with the widget's address:

```javascript
receive('/toggleAddress', preArg1, preArg2, value)
// or if no preArg
receive('/toggleAddress', value)
```

This method allows you to update the widget's value without sending a message back, thereby avoiding feedback loops.

### For Matrix Widgets
To update a matrix of buttons without triggering the associated script multiple times, use:

```javascript
receive('/buttons/1', arr[0]) // for each button
```

Instead of using `/SET`, simply send the value directly to each button's address. If you want to update all buttons at once without triggering the script, you can use:

```javascript
receive('/SCRIPT', `
for (var i=0; i<${arr.length};i++) {
  set('buttons/${i}', ${arr[i]}, {sync: false, send: false})
}`)
```

This will update the child widgets of a matrix without executing the matrix widget script multiple times. 

By following these methods, you can effectively manage widget updates without unintended script executions.

# Linking OSC Knobs and Buttons to Raspberry Pi GPIO

## Problem Description
Users may want to connect OSC knobs and buttons in Open Stage Control to physical encoders or LEDs via the Raspberry Pi GPIO. The goal is to create a flexible MIDI controller and sequencer while utilizing OSC for the graphical user interface.

## Solution
1. **General Script for Encoders**: It is recommended to create a general script that allows encoders to send MIDI signals to OSC. This approach is practical and effective.

2. **Using Node Modules in Open Stage Control**: As of version 1.8.0, Open Stage Control supports the use of node modules within the custom module. This means you can theoretically use a library to handle GPIO directly from Open Stage Control. 

For more information on how to implement this, refer to the documentation on custom modules and available node modules. 

[Attachment: filename.ext] (attachment reference missing)

# Using Scripts in the 'Gradient' Field of a Fader

## Problem Description
Users may want to implement conditional logic, such as If/Else statements, in the 'gradient' field of a fader in Open Stage Control. However, attempts to use standard JavaScript syntax directly in this field may not work as expected.

## Solution
To use scripts in the 'gradient' field, you need to wrap your JavaScript code in a `JS{}` block. Additionally, avoid using advanced syntaxes like `@{}` directly within the script. Instead, utilize the `get()` function to retrieve values from other properties.

Here’s an example of how to implement conditional logic correctly:

```javascript
JS{ // javascript block

var FXlbl = @{SelectedVST},
    c = @{parent.variables.c}; // Cleaner code

if (FXlbl == "1") {
  return {
    "0": c + "1f",
    "1": c + "fc"
  };
} else if (FXlbl == "0") {
  return {
    "0": c + "99",
    "1": c + "00"
  };
}

} // end of javascript block
```

### Key Points:
- Use `JS{}` to wrap your JavaScript code.
- Retrieve widget values using `@{}` for properties, but avoid using `getProp()` in this context.
- Ensure to return a value from the `JS{}` block for it to output correctly.

This approach will allow you to implement conditional logic effectively in the gradient field of a fader.

# Control Values Being Skipped/Repeated

When logging fader values to the console, some values may appear to be repeated or skipped. This issue can occur when adjusting fader sensitivity.

## Solution

To minimize the occurrence of repeated or skipped values, adjust the fader's sensitivity setting. A sensitivity of 0.3 can help reduce skipped values, but may still result in some repetitions. 

It is important to note that the expected behavior of a one-pixel mouse movement corresponding to a +/- 1 change in value is not feasible due to the fixed rate at which mouse events are emitted, regardless of the speed of movement. 

Adjusting sensitivity can help manage the output of redundant MIDI data, but it may not eliminate it entirely.

# Issue with `send('/address', 'value')` Returning Undefined

When using the `send()` function in Open Stage Control, calling `send('/address', 'value')` results in `undefined` in the console. This behavior occurs even when the address is correctly defined in the widget's OSC settings.

## Solution

This behavior is expected. The `send()` function does not return a value; therefore, the console will display `undefined`. If the function were not defined, an error would be generated instead. 

To ensure proper usage, the correct format for sending a value is:

```javascript
send('/address', 25) // where 25 is the value you want to send
```

Make sure that the address and target are properly set in the widget's OSC configuration. If you continue to experience issues, consider updating to the latest version of Open Stage Control.

# How to Write a "Ping" Function in Open Stage Control

## Problem Description
To ensure a live coding setup receives updates from an OSC controller, there is a need to send a `/ping` message periodically without manual intervention. The goal is to automate this process, ideally sending the message every 5-10 seconds.

## Solution
You can achieve this by using JavaScript's `setInterval` function within a widget's `onCreate` script. Here’s an example of how to implement it:

```javascript
setInterval(() => {
  send('127.0.0.1:5555', '/ping');
}, 5000 /* ms */);
```

This code will send a `/ping` message every 5 seconds to the specified address. For more details on scripting in Open Stage Control, refer to the [Scripting - Open Stage Control](https://openstagecontrol.ammd.net/docs/scripting/) documentation.

# Implementing a "Snap" Function for Faders

## Problem Description
A user seeks to implement a "snap" function for faders in Open Stage Control, similar to the functionality found in Touchable. The goal is for faders to reset to their current values upon release when a button (snapButton) is activated. The user initially encountered issues with faders resetting to zero instead of their current values.

## Solution
To achieve the desired "snap" functionality, follow these steps:

1. **Set the Spring Property**: Make the faders' `spring` property depend on the value of the button. Use the following JavaScript code in the fader's properties:
   ```javascript
   // spring property
   return @{button_id}
   ```

2. **Store Fader Values**: Use a script widget to store the faders' values when the button is toggled. The `default` property of the faders should retrieve a global variable that stores these values. Here’s a minimal example of the script:
   ```javascript
   global.faderValues = global.faderValues || {};
   ```

3. **Ensure Proper Order of Widget Creation**: To avoid issues with the `default` property not resolving correctly, ensure that the script widget is placed before the faders in the parent widget's children list.

4. **Add Fallback for Default Property**: In the fader's `default` property, add a fallback line to handle cases where the global variable is not yet initialized:
   ```javascript
   if (!global.faderValues) return 0;
   ```

5. **Update to Latest Version**: Ensure you are using the latest release (v0.46.2 or later) for optimal performance and compatibility.

### Note
If you encounter issues with faders not moving after updating to v0.47.0, it may be due to the timing of variable initialization. Adjust the order of widget creation or implement the fallback as described above.

For a complete example, refer to the attached session file: [Attachment: zph8ebDuU2xGL1FwRdNFeQnwIaK.json].

# Looping Through a Switch and Applying Background Images to Buttons

## Problem Description
When using Open Stage Control with Resolume, there is a need to apply background images to multiple buttons in a switch. The current method involves referencing each button individually, which is inefficient.

## Solution
You can streamline the process by using JavaScript to generate the CSS dynamically in a loop. Here’s how to do it:

```css
value {
  font-size: 0;
  background-size: cover;
  color: blue;
}

JS{
var css = "";
for (var i = 1; i <= 2; i++) {
  css += `
  value:nth-child(${i}) {
    background-image: url("/Thumbnails/12-${i}.png");
  }`;
} 
return css;
}
```

This code creates a string of CSS rules for each button, applying the appropriate background image based on the button's index. 

References:
- Advanced syntaxes - Open Stage Control
- Template literals (Template strings) - JavaScript | MDN

# Getting Current Value of a Widget from JavaScript with Concatenation

## Problem Description
Users are attempting to implement a preset system in Open Stage Control (OSC) but are encountering issues with concatenating widget IDs in JavaScript. Specifically, they are facing syntax errors when trying to dynamically create widget IDs using nested variable calls.

## Solution
There are two main issues to address:

1. **Nested Variable Resolution**: Open Stage Control has a known bug that prevents nested `@{}` calls from resolving correctly in certain cases. This issue is documented as issue #516.

2. **JavaScript Syntax**: 
   - The logical operator `and` is invalid in JavaScript; it should be replaced with `&&`.
   - To concatenate strings properly, use the `+` operator instead of nested `@{}` calls. For example, instead of using:
     ```javascript
     "umc_@{parent.variables.n}_position"
     ```
     use:
     ```javascript
     "umc_" + @{parent.variables.n} + "_position"
     ```

The bug related to nested variable resolution has been fixed in version 0.45.5 of Open Stage Control.

[Attachment: image.png]

# Custom Module: Changing Matrix Button Labels

## Problem Description
Users may encounter difficulties when attempting to change button labels in a matrix using a Custom Module in Open Stage Control. The challenge arises from correctly referencing and updating the labels for each button in the matrix, especially when transitioning from button widgets to matrix widgets.

## Solution
To successfully update button labels in a matrix, follow these steps:

1. **Use Backticks for Template Literals**: When sending JavaScript code as a string, ensure to use backticks. For example:
   ```javascript
   receive('/EDIT', 'matrix_1', {'props': `
   JS{
       var props = {}
       // ...
       return props
   }`});
   ```

2. **Correctly Reference the Labels Array**: To assign labels from an array, use `JSON.stringify` to convert the array into a string format that can be used within the JavaScript context:
   ```javascript
   var labs = ${JSON.stringify(mesArticulations)}
   ```

3. **Hide Unused Buttons**: To hide buttons that are not labeled, compare the index value with the length of the labels array. For example:
   ```javascript
   var props = {}
   let Index = parseInt($) + 1
   props.id = "b" + Index
   if (Index <= mesArticulations.length) {
       props.label = labs[Index - 1]
   } else {
       props.visible = false // or any other logic to hide the button
   }
   ```

By following these guidelines, you should be able to effectively manage button labels in a matrix and control their visibility based on your application needs. 

[Attachment: matrix_example.png]

# Display Number Always with Decimal Places

**Problem Description:**
When using a fader that outputs values from 0 to 10 in 0.5 increments, the display shows whole numbers without decimal points (e.g., 0, 1, 2). The goal is to ensure that all numbers, including whole numbers, display with one decimal place (e.g., 0.0, 1.0, 2.0).

**Solution:**
To achieve the desired display format, use the following approach in the text widget:

1. Set the `value` field of the text widget to:
   ```javascript
   @{myfader}
   ```

2. For the `scripting:onValue`, use:
   ```javascript
   set(this, parseFloat(get('myfader')).toFixed(1))
   ```

This method ensures that the displayed value always includes one decimal place, even for whole numbers.

For reference, a minimal project demonstrating this issue is included: [Attachment: iTJsAl1JevZvEvohjXcqoEEVCdd.json].

# Reading Aftertouch (Poly Pressure) in Open Stage Control

## Problem Description
Users may inquire about how to read Aftertouch (Poly Pressure) in Open Stage Control, specifically if there are commands available beyond the standard `/control` and `/note`.

## Solution
To read Aftertouch (Poly Pressure) in Open Stage Control, use the command:

```
/key_pressure
```

# Accessing Parent Modal Name in Open Stage Control

**Problem Description:**
A user needs to access the parent modal's name within a nested modal in Open Stage Control. The goal is to insert a knob for a gain value that sends an OSC message formatted as "/comp/(first modal name)/gain".

**Solution:**
To achieve this, define the name in the first modal's `variables` property instead of using its `id`. The default value for `variables` is `@{parent.variables}`, which allows the inner modal to inherit the name and retrieve it anywhere within the modal.

1. Set the first modal’s `variables` property to:
   - `{"name": "01"}` or
   - `{"name": "@{this.id}"}`

2. Retrieve the name in the inner modal using:
   - `@{parent.variables.name}`

This approach ensures that the inner modal can access the parent modal's name effectively.

# Get Current @media Setting in Custom Module or Variable

**Problem Description:**
The user is trying to adapt the layout of their Open Stage Control interface to different screen sizes. They have successfully modified font sizes using media queries but are struggling to change the position of panels or widgets. They sought a method to read the screen size or a CSS variable from the script to create a custom variable for use with the @{} syntax.

**Solution:**
To access the current screen size, you can use the following command in your script:

```javascript
globals['screen']
```

This allows you to retrieve the screen size and use it to adjust your layout dynamically without duplicating widgets.

# Open Stage Control Knobs Not Updating with MIDI Controller

**Problem Description:**
Users have reported issues with Open Stage Control knobs not updating in real-time when controlling Ableton Live device parameters via a physical MIDI controller. The virtual knob value only updates after the physical MIDI encoder is released, despite the parameter value in Ableton Live updating continuously.

**Solution:**
1. **Enable OSC Server Debugging:**
   - Activate the debug option in the OSC server settings. This will allow you to monitor the OSC messages being received and help identify if the issue lies with the feedback from Ableton Live.

2. **Check Control Bindings:**
   - Ensure that the physical MIDI controller and the Open Stage Control knob are bound to the same parameter in Ableton Live. If they are using different addresses or controls, this could cause the discrepancy in updates.

3. **Test with Different Controllers:**
   - If possible, test with various MIDI controllers and configurations to rule out hardware-specific issues. 

4. **Consult ClyphX Pro Documentation:**
   - Since the issue may relate to how ClyphX Pro handles OSC messages, reviewing its documentation or seeking support from the ClyphX community may provide additional insights.

5. **Consider Alternative Software:**
   - If the problem persists, testing with alternative software like TouchOSC may help determine if the issue is specific to Open Stage Control or a broader compatibility issue with Ableton Live.

For further assistance, users are encouraged to share detailed configurations and any relevant OSC logs to facilitate troubleshooting. 

[Attachment: 20220914_153811]  
[Attachment: AKAI OSC Knob.mov]

# Setting the Starting Number for Matrix Button in Open Stage Control

## Problem Description
In version 1.23 of Open Stage Control, users are unable to set the starting number for buttons in a matrix widget, as the START parameter found in previous versions is not available.

## Solution
To adjust the starting number of the buttons in a matrix widget, you can modify the properties of the button by adding the following line to the props object:

```json
"label":  "#{$ + 1}"
```

This will effectively change the displayed number to start from 1 instead of 0.

# Range Fader Configuration

## Problem Description
Users want to set the range of a fader using a range slider, allowing the two heads of the slider to define the minimum and maximum values. Additionally, there is a need to control multiple faders with different ranges using a single master fader, ensuring that the other faders respond appropriately within their defined ranges.

## Solution
To set the range of a fader using a range slider, you can utilize the following JavaScript code in the `range` property of the fader:

```javascript
var range = @{range_widget_id} 
return {
  min: range[0],
  max: range[1]
}
```

For controlling multiple faders with a single master fader, instead of using `LinkID`, implement a script on the master fader that updates the values of the other faders. This script should include logic to determine how to map the master fader's value to the ranges of the other faders. 

Note that faders will not automatically adjust if they receive a value outside of their defined range, so custom logic is necessary to handle this scenario.

[Attachment: rdHdRZWNMhepsbDm2Zsa7rRaZEg.json]  
[Attachment: 9WuecBo84vKDngA9J3KyqR4xqip.json]

# How to Change Tab Colors When Active in Open Stage Control

## Problem Description
Users may encounter difficulties in changing the colors of tabs in a container when they are active (ON) versus inactive (OFF) in Open Stage Control. The CSS commands that worked in earlier beta versions may not function in the current stable version.

## Solution
To customize the tab colors based on their active state, you can use the following CSS rules:

```css
inner > .navigation > .tablink {
  /* default style for inactive tabs */
}

inner > .navigation > .tablink.on {
  /* style for active tabs */
}
```

- The `.tablink` elements have an additional class `on` when they are active. 
- Use browser development tools (F12) to inspect the HTML structure and verify the classes applied to the tabs.

For further guidance on using the inspector and CSS customization, refer to the documentation: [CSS Tips](https://openstagecontrol.ammd.net/docs/customization/css-tips/). 

This approach allows for distinct styling of tabs based on their active state, enhancing user interface clarity.

# Sending Strings with Push in Open Stage Control

**Problem Description:**
Users may encounter difficulties when trying to send strings using a push widget in Open Stage Control. Specifically, there can be confusion regarding how to properly format the message and its components, especially when integrating with other software like Bitwig.

**Solution:**
To send a string with a push widget, you can specify the values for the `on` and `off` properties. For example, if you want to send a string representation of a number, you can format it as follows:

```json
{
  "type": "s",
  "value": "1"
}
```

If you need to send a specific OSC address without an accompanying value, set the `address` property to your desired string (e.g., `/track/1/clip/launch`), the `on` property to `null`, and enable the `norelease` property to avoid sending a message when the button is released.

This approach ensures that the correct OSC message is sent, which is crucial for proper interpretation by software like Bitwig.

# Multiple Unique Clients with Different Session Files

## Problem Description
Users want to connect multiple devices to a single Open Stage Control server instance, each running different interfaces (session files) based on their IP addresses. The goal is to automate the loading of these session files without manual intervention through the interface.

## Solution
To achieve this, you can use a custom module that maps IP addresses to specific session files. Below is a sample code snippet that demonstrates how to implement this functionality:

```javascript
// Map IP addresses to session files 
var sessions = {
    '127.0.0.1': 'path/to/a.json',
    '192.168.1.1': 'path/to/b.json'
}

app.on('open', (data, client) => {
    // When a client connects
    var ip = client.address,
        id = client.id;

    console.log(`client connected with ip ${ip}`);

    // Check if we have a session for this IP address
    if (sessions[ip]) {
        console.log(`-> loading ${sessions[ip]}`);

        // Send a remote control command to that client
        // to make it load the appropriate session
        receive('/SESSION/OPEN', sessions[ip], { clientId: id });
    } else {
        console.log('-> no session associated with this ip');
    }
});
```

### Important Notes
- Ensure that the paths to the session files are correct and accessible.
- Only clients using the same session file will see UI updates.
- If clients are not automatically opening the specified session files, verify the console output for any errors or messages related to the `/SESSION/OPEN` command.

### Attachments
- [Attachment: c6SXrwp3Q0m5LLH1LwN4rUDT2y9.json]
- [Attachment: gdNoPavUC9n0UH3DymndhZ7mRYE.json]
- [Attachment: sKvQl1w8dkkRPtSdBt6jse6gvGg.js]

# How to Display Integer Values in Open Stage Control

## Problem Description
Users may want to display only integer values (ranging from 0 to 127) without any decimal places in Open Stage Control, particularly when working with MIDI data.

## Solution
To display only integer values, set the `decimals` property of the text element (found under the OSC settings) to `0`. This will ensure that no decimal places are shown.

[Attachment: integer.png]  
[Attachment: integerSolved.png]

# Understanding preArgs in Open Stage Control

## Problem Description
There is confusion regarding the relevance and usage of `preArgs` in Open Stage Control, particularly whether they are only applicable in MIDI scenarios or if they have broader applications.

## Solution
`preArgs` are not limited to MIDI situations; they can be utilized in various contexts, such as OSC (Open Sound Control) messages. 

### Key Points:
- **Definition**: `preArgs` are additional arguments that are prepended to the widget's value in messages.
- **Usage in OSC**: For example, an OSC message like `/example_daw/track/volume <track_number> <value>` requires `preArgs` to specify the track number alongside the value.
- **Flexibility**: `preArgs` allow for dynamic control in custom modules. For instance, they can be used to manage multiple instances of a widget by overwriting just the `preArgs` for clones, enabling control over various aspects of the widget.
- **General Application**: They are useful when more than one argument is needed in a message, similar to how `moreArgs` or `extraArgs` would function.

In summary, `preArgs` enhance the flexibility of message formatting in Open Stage Control, allowing for more complex interactions beyond simple MIDI commands.

# Emulating an LCD in Open Stage Control

## Problem Description
The goal is to create an emulator for an LCD display that can receive OSC messages from Pure Data and render them in Open Stage Control. The user is unsure how to access the drawing context (`ctx`) in a script that handles incoming messages and how to implement features like scrolling with intervals.

## Solution
To effectively handle drawing commands in Open Stage Control, follow these guidelines:

1. **Accessing the Drawing Context**: The `ctx` is only accessible within the `onDraw` function. All drawing commands must be executed from this function. The custom module does not share the client context; communication should occur via OSC messages.

2. **Sending Drawing Commands**: Use OSC messages to send drawing commands to the canvas. Wrap the arguments in an array to ensure the canvas receives a consistent number of arguments. Set the canvas's `valueLength` to `1`. For example:
   ```javascript
   receive('/canvas_address', ['text', color, x, y, 'hello']);
   ```

3. **Processing Commands in `onDraw`**: In the `onDraw` function, process the incoming value to determine the command and its arguments. Use the following structure:
   ```javascript
   // Ensure the value is usable
   if (Array.isArray(value)) {
     // Extract command and arguments
     let [cmd, ...args] = value;

     // Execute drawing commands based on the command type
     if (cmd === 'text') {
       let [color, x, y, text] = args;
       // ctx.whatever() to draw text
     } else if (cmd === 'clear') {
       ctx.clear();
     }
     // Add additional command handling as needed
   }
   ```

4. **Implementing Scrolling**: For features like scrolling, you will need to implement a queue in the `onValue` function and process the drawing commands in the `onDraw` function. This approach will allow you to manage the drawing commands effectively.

By following these steps, you can create a functional emulator for your LCD display that communicates effectively with Pure Data and Open Stage Control.

# Inspector Panel Blocks Widgets

When using Open Stage Control, users may encounter layout issues where widgets do not align correctly when the inspector panel is open. Specifically, widgets can appear misaligned or covered when attempting to edit them with the inspector enabled.

## Solution

To resolve this issue, consider the following steps:

1. **Set Fixed Width**: Assign a fixed width to the root widget (e.g., 1920). This will trigger a scrollbar when the editor's panels obscure part of the layout, helping to visualize the layout's edges.

2. **Adjust Scroll Properties**: Disabling the root widget's scroll property may also assist in managing layout visibility.

3. **Use Layout Containers**: Utilize vertical, horizontal, or grid containers (layout property) to create a responsive layout that adapts to the available screen size. This method may be less intuitive than absolute positioning but is more efficient for managing layout and screen size issues.

4. **Expand Widgets**: Ensure at least one widget in each container is set to expand, allowing it to use available space rather than maintaining a fixed size.

By following these steps, you can effectively manage your layout while keeping the inspector open. 

[Attachment: filename.ext]

# Adding Labels to Faders in Open Stage Control Beta5

## Problem Description
In Open Stage Control Beta5, users have reported that the Label option for faders has disappeared from the inspector. Attempts to use CSS for labeling have not been successful, leading to confusion about how to properly add labels to faders in the new version.

## Solution
To add labels to faders in Open Stage Control Beta5, you need to use a text widget. This is the current method for displaying additional information alongside faders. 

Additionally, a new generic `html` property is being introduced for all widgets, which will allow for more flexible content insertion. This feature is expected to enhance the way additional information is displayed on widgets.

For users migrating from version 0, the new `label` property will be translated into the `html` property during the import process. However, detailed information on conversion failures for specific widgets may not be available, as the conversion process is designed to be straightforward. 

For further assistance, please refer to the documentation or community forums. 

[Attachment: filename.ext]

# Sending an OSC Array

## Problem Description
Users may encounter difficulties when attempting to send an OSC array from Open Stage Control. Specifically, there is confusion regarding the correct format for sending multiple values associated with a single OSC address, as well as concerns about performance when sending large OSC arrays.

## Solution
Open Stage Control does not support sending OSC arrays formatted with typetags delimiters. Instead, you should send the arguments at the same level without using nested arrays. For example, the correct format would be:

```json
[
  0, "@{fader_1}",
  1, "@{fader_2}",
  2, "@{fader_3}",
  3, "@{fader_4}"
]
```

If you want to trigger the sending of an OSC message whenever a value is updated, you can use a script widget. By default, the script widget does not send messages, but you can implement it as follows:

```javascript
send('/address', ...value)
```

This syntax allows you to send all elements of the array as individual arguments.

For creating an indexed OSC array message, you can add values to the `preargs` field of the fader widget. For instance, adding:

```json
[
  0,
  0
]
```

to the `preargs` will generate an OSC array message with an index based on the number of zeros added.

Regarding performance, sending large OSC arrays (e.g., containing 50 values) may introduce some lag, but this largely depends on the receiving end's capability to process the data. Generally, sending a single OSC message with multiple values is efficient and can be advantageous when mapping controls, such as in a Reaktor 6 rack.

For further details, refer to the attached example file for a practical implementation: [Attachment: ba8nieuA2zX87OyzpGnwaocBsC3.json].

# Dealing with Object Iteration in Open Stage Control

## Problem Description
When attempting to set `props.label` based on the values of an object, all labels end up being set to a default value ('pistes') instead of the expected label. The code snippet provided was:

```javascript
const Dossiers = 
{
  "Basses" : 0,
  "Bois" : 6,
  "Cordes" : 12,
  ...
  "Cuivres" : 33
}

var K = Object.keys(Dossiers)
var V = Object.values(Dossiers)

V.forEach((el, i) => props.label = $ == el ? K[i] : 'pistes')
```

## Solution
The issue arises because the `forEach` method iterates over all items in `V`, reassigning `props.label` during each iteration. Consequently, `props.label` retains the value from the last iteration.

A more effective approach is to determine the index of the value directly and set `props.label` accordingly. The corrected code is as follows:

```javascript
var K = Object.keys(Dossiers);
var I = Object.values(Dossiers).indexOf($);

props.label = Object.values(Dossiers).includes($) ? K[I] : 'pistes';
``` 

This solution correctly assigns `props.label` based on whether the value exists in `Dossiers`.

# Submodule Auto Reload Behavior in Open Stage Control

## Problem Description
There is confusion regarding the behavior of submodules in Open Stage Control when changes are made. Specifically, some submodules trigger a hard reset (calling the `unload()` method) upon saving, while others do not. This inconsistency occurs when saving files in a nested structure, leading to the expectation that all changes should initiate a reload.

## Solution
The expected behavior is that all custom modules, including submodules, should reload upon any file changes. If a submodule does not trigger the `unload()` method as expected, it may be due to the structure of the module or how the changes are detected.

To ensure that changes in nested submodules trigger a reload:
1. Verify that the module structure is correctly set up to recognize changes in all levels of submodules.
2. If issues persist, consider implementing a manual trigger for the `unload()` method in your code when saving nested submodules.

For further investigation, it may be helpful to share the specific code structure of your modules to identify any potential issues.

[Attachment: test.zip]

[Attachment: fnG8FfzO1GtgUWDdMDlc8R46xLI.zip]

# Dynamically Setting Switch Values in Open Stage Control

## Problem Description
Users may need to dynamically set the number of switches based on an integer value received via an OSC message. For example, if an OSC message contains the value '10', the user wants to create 10 switches.

## Solution
To achieve this, you can use a combination of an OSC block and JavaScript to process the incoming integer value. Here’s how to set it up:

1. Use an `OSC{}` block in the `values` property to make it editable via an OSC message.
2. Implement a JavaScript block to process the integer value and generate the desired number of switches.

Here is an example of the JavaScript code to use:

```javascript
JS{
var n_values = OSC{values} || 3; // Default to 3 if no value is received
return Array(n_values).fill(0).map((val, index) => index); // Generates an array [0, 1, ..., n_values-1]
}
```

You can test this setup by sending an OSC message like `/switch_1/values '{a:1,b:2,c:3}'` to Open Stage Control.

For a practical example, refer to the attached session file: [Attachment: snbRSFhc5WgvnJZ0dxtsp1ksHwv.json].

# Sending Boolean Values through OSC in Open Stage Control

## Problem Description
When attempting to send boolean values ("true" and "false") from Open Stage Control to a PureData target, the messages are received as 'undefined' or with unrecognized type tags ('T' and 'F'). This issue arises when using a button in toggle mode, leading to complications in message parsing.

## Solution
To ensure that the correct string values are sent without unrecognized type tags, follow these steps:

1. **Set Type Tags**: Configure the button's `typetags` to `s` (string) and set the `on` and `off` values to `"true"` and `"false"` respectively.
   
2. **Modify Broadcast Function**: If using a custom module to broadcast messages, adjust the broadcasting logic:
   - Replace `args[1].value` with `args[1]` to include the necessary type tag in the message.
   - This allows the boolean value to be sent as a string without additional type tags that PureData cannot parse.

3. **Convert Boolean to Integer (Optional)**: If you prefer to send an integer instead of a boolean, you can use the following expression:
   ```javascript
   args[1].value ? 1 : 0
   ```
   This will convert the boolean value to `1` for true and `0` for false, which may use less bandwidth.

By implementing these changes, the OSC messages should be correctly formatted and recognized by PureData, resolving the issue of receiving undefined values.

# Working with Matrices in Open Stage Control

## Problem Description
Users may encounter challenges when attempting to programmatically manage the content of modal widgets within matrix elements in Open Stage Control. Specifically, users want to set different values for switch widgets in modals and retrieve the selected switch values for display purposes. 

## Solution
To effectively manage matrices and their contents, follow these guidelines:

1. **Template Approach**: Create a template widget that defines the necessary variables. Use this template to clone matrix elements, overriding the variable properties based on the index of each clone. This method allows for flexibility and reduces redundancy.

   Example: Use a template matrix file like `template_matrix.json` to establish your base configuration. 

   [Attachment: qv75mOpEhfOcAJjfrXSgCPKtO7L.json]

2. **Custom Module**: For a more efficient management of sample lists, consider building the widget data within a custom module. This approach allows you to programmatically edit the interface, making it easier to handle larger projects without excessive copy-pasting.

3. **Handling Errors**: If you encounter issues such as console errors (e.g., related to parentheses), note that these may be version-specific regressions. Keep your Open Stage Control updated to the latest version to avoid such bugs.

   Note: A regression was identified in version 1.9.3, which has been addressed in version 1.9.4.

By following these strategies, you can streamline your workflow and enhance the functionality of your matrix widgets in Open Stage Control.

[Attachment: qv75mOpEhfOcAJjfrXSgCPKtO7L_1.json]

# Trigger Button Using OSC Feedback from Another Computer

## Problem Description
When sending OSC messages from another computer, the user wants to trigger a specific widget that starts a timer using the arguments passed via OSC. The setup involves a test button configured with an OSC address, but it fails to respond to incoming messages.

## Solution
1. **Receiving OSC Messages**: 
   - Setting the target IP is unnecessary for receiving OSC messages. Instead, use a script widget or an input widget to handle any incoming values.
   - For button widgets, they only respond to messages that match their on/off values. For example, if the button's address is `/button`, with `on` set to `13` and `off` to `0`, it will respond to `/button 13` and `/button 0`.

2. **Handling Multiple Arguments**:
   - Button widgets do not accept multiple arguments directly. To display multiple arguments, create a text widget with a matching OSC address. This will allow the widget to display all incoming arguments.
   - If you need to use multiple arguments with a button, consider using the `preArgs` property, which allows fixed arguments before the button's actual value.

3. **Using setVar**:
   - If `setVar` is not functioning as expected, ensure that the widget IDs are unique. Cloning a panel can cause conflicts if multiple widgets share the same ID.
   - Use `setVar(this, 'text', 'newValue')` within the widget context to ensure the command affects the calling widget. Note that "this" must be enclosed in quotes to work correctly.

4. **Debugging setVar Issues**:
   - If `setVar` does not work within a specific panel, check for potential ID conflicts or ensure that the correct context is being used.
   - If you need to manipulate other buttons, ensure that you are referencing them correctly and that their IDs are unique.

For further details, refer to the attached configuration file for examples and context: [Attachment: x2sIjP9kh5pMRdDuOszKnAx1vA9.json].

[Attachment: pjlPcJljFCaw0yZTf9kU4ss9Llw.json]

# Scripting: Limited Wildcard for Button Widgets

## Problem Description
The goal is to change the value of button widgets with IDs in the format 'solo_push_*' where the asterisk represents a number smaller than 9. The user seeks a method to achieve this using a single `set()` function.

## Solution
To accomplish this, a `for` loop can be utilized to iterate through the desired button IDs. Below is a sample script that demonstrates this approach:

```javascript
// Create an array of numbers from 1 to 8
var w = Array.from(new Array(8), (x, i) => i + 1);

// Example value to trigger the button change
if (value === 1) {
    for (let n of w) {
        set('solo_push_' + n, 1);
    }
} else {
    console.log("Button is off now.");
}
```

This script will set the value of all button widgets with IDs 'solo_push_1' through 'solo_push_8' to 1 when the condition is met.

# Displaying Step Value in Fader

## Problem Description
Users may want to display the current step value of a fader configured with a specific number of steps (e.g., 18 steps) in Open Stage Control. The challenge lies in setting the correct range and displaying the step number alongside the control value.

## Solution
To display the step number in a fader while maintaining a control range from 0 to 1024, follow these steps:

1. **Set the Range Property**: Use the following JavaScript code to define the range based on the number of steps:

   ```javascript
   JS{
   var steps = 18; // or @{this.steps}
   var range = {};
   for (var i = 0; i < steps; i++) {
     var key = i / (steps - 1) * 100 + "%";
     range[key] = i / (steps - 1) * 1024;
   }
   return range;
   }
   ```

2. **Display Step Number**: To show the step number in the fader, set the `pips` property to `true` under the "style" section and adjust the range as follows:

   ```javascript
   JS{
   var steps = @{this.steps};
   var range = {};
   for (var i = 0; i < steps; i++) {
     var key = i / (steps - 1) * 100 + "%";
     range[key] = {};
     range[key][i] = i / (steps - 1) * 1024;
   }
   return range;
   }
   ```

By implementing these configurations, the fader will display the step value correctly while controlling the range from 0 to 1024.

**Note**: If you encounter issues with displaying the step number, ensure that the fader's properties are correctly set and that the JavaScript code is placed in the appropriate field. 

[Attachment: image]

# Auto Start Session at Startup in Open Stage Control

**Problem Description:**
Users want to know how to configure Open Stage Control (OSC) to automatically start and load a specific session upon startup.

**Solution:**
To achieve auto-start functionality for OSC, you can either launch it directly from a terminal or create a desktop shortcut with the appropriate command. Here’s how to create a desktop shortcut:

1. **Create a Desktop Shortcut:**
   - Right-click on your desktop and select "New" > "Shortcut."
   - In the shortcut target field, enter the following command, customizing the paths as necessary:

     ```
     "C:\Path\To\open-stage-control.exe" -- --load "C:\Path\To\YourSession.json" --port 8080
     ```

   - Ensure to replace `C:\Path\To\open-stage-control.exe` with the actual path to your OSC executable and `C:\Path\To\YourSession.json` with the path to your session file.

2. **Important Notes:**
   - Make sure to include the `--` before the options.
   - If your session uses images, ensure that the images are located in the same directory as your session JSON file for them to load correctly.

3. **Example Command:**
   For example, if your OSC executable is located at `C:\Users\nlb\Downloads\open-stage-control-1.13.2-win32-x64\open-stage-control.exe` and your session file is on the Desktop, the command would look like this:

   ```
   "C:\Users\nlb\Downloads\open-stage-control-1.13.2-win32-x64\open-stage-control.exe" -- --load "C:\Users\nlb\Desktop\exampleSession.json" --port 8080
   ```

By following these steps, OSC will automatically load your specified session and start the server when you launch the shortcut.

[Attachment: image]

# Set Default Properties for Widgets (Overflow and Wrap)

## Problem Description
The user wants to change the wrap behavior of all buttons to "soft" in their Open Stage Control theme. They attempted to use CSS properties like `overflow-wrap` and `--wrap`, but these did not yield the desired results.

## Solution
To achieve the desired wrap behavior for buttons, use the following CSS in your theme file:

```css
.button-container label {
    white-space: pre-wrap;
    word-break: normal;
}
```

This will set the appropriate properties to ensure that button text wraps as expected.

# Multiple Timers in Open Stage Control

## Problem Description
Users may encounter issues when implementing multiple timers in Open Stage Control, particularly when using clones for loopers. A common concern is whether a JavaScript custom module is necessary for timer functionality, as well as unexpected behavior with pause and unpause actions.

## Solution
Using timers in widgets is sufficient and does not require a JavaScript custom module. However, it is important to note that:

- Each widget can have its own timers.
- Performance may degrade if hundreds of timers are running simultaneously.
- If you experience issues with the pause functionality, it may be due to the example being unfinished or written for an older version of Open Stage Control.

For specific implementations, consider using a looping mechanism within a widget script to manage timers effectively. 

[Attachment: example_file.js]

# Connecting to a JSON-RPC Server via JavaScript in Open Stage Control

## Problem Description
Users may need to perform actions such as adding or deleting plugins in Guitarix using JSON-RPC, which cannot be accomplished through MIDI. This requires sending calls and notifications over JSON-RPC using scripts in Open Stage Control.

## Solution
To connect to a JSON-RPC server using JavaScript in Open Stage Control, follow these steps:

1. **Create a Custom Module**: Utilize the `nativeRequire` function to load Node.js modules.

2. **Implement the TCP Client**: Below is a sample implementation of a JSON-RPC TCP client.

   ```javascript
   // Import net and event-stream modules.
   var net = nativeRequire('net');
   var es = nativeRequire('event-stream');

   // Class to create a JSON-RPC TCP client.
   function Conn(name, host, port) {
       this.name = name;
       this.host = host;
       this.port = port;
       var Addr = {
           host: this.host,
           port: this.port
       };
       // Create TCP client.
       var client = net.createConnection(Addr, function () {
           console.log('Connection name : ' + this.name);
           console.log('Connection local address : ' + client.localAddress + ":" + client.localPort);
           console.log('Connection remote address : ' + client.remoteAddress + ":" + client.remotePort);
       });
       // Report changes of state and errors.
       client.on('end', function () {
           console.log(this.name, 'Client socket disconnect.');
       });
       client.on('timeout', function () {
           console.log(this.name, 'Client connection timeout.');
       });
       client.on('error', function (err) {
           console.error(this.name, JSON.stringify(err));
       });
       return client;
   }

   Cnotify = function(client, method, params) {
       var message = {
           jsonrpc: "2.0",
           method: method,
           params: params,
       };
       client.write(JSON.stringify(message) + '\n');
   };

   Ccall = function(client, id, method, params) {
       var message = {
           jsonrpc: "2.0",
           id: id,
           method: method,
           params: params,
       };
       client.write(JSON.stringify(message) + '\n');
   };

   Osc2rpc = function(data) {
       var {address, args} = data;
       var dotrpckey = address.replace(/\//g, '.');
       var rpckey = dotrpckey.substr(1, dotrpckey.length);
       var rpcvalue = args[0].value;
       var rpcparam = {
           params: [rpckey, rpcvalue],
       };
       return rpcparam;
   };

   Rpc2osc = function(data) {
       for (var i = 0; i < data.params.length; i += 2) {
           var osckey = data.params[i].replace(/\./g, '/');
           var oscout = data.params[i + 1];
           receive('localhost', 7000, '/' + osckey, oscout);
       }
   };

   // Create a Guitarix client socket.
   var gxClient = new Conn('guitarix', 'localhost', 7000);

   // Receive stream from server and process as newline-separated JSON-RPC objects.
   gxClient
       .pipe(es.split(null, null, {trailing: false}))
       .pipe(es.parse(/* additional processing logic */));
   ```

This code sets up a TCP client that can send JSON-RPC notifications and calls to the specified server. Adjust the host and port as necessary for your setup.

For further details or examples, refer to the Open Stage Control documentation.

# Issue with Color Widget in Button Matrix

## Problem Description
A user is experiencing an issue with a matrix of 80 buttons where the color of the buttons is set using a variable in the `colorWidget` property. The script successfully updates the color for the first 40 buttons, but fails to apply colors to the remaining buttons.

## Solution
The issue may be related to the way the variable is accessed in the script. It is recommended to replace the `@{}` syntax with the `getProp` method for better reliability. The following is the suggested modification:

### Updated Script
```javascript
var displayIdx = getProp('parent', 'variables').n; // Use getProp instead of @{}

// Ensure displayIdx is formatted correctly
if (displayIdx < 10) {
    displayIdx = '0' + displayIdx;
}

if (value.includes("f0 43 4f 4c 52 " + displayIdx)) {
    let hexValues = value.split(" ");  
    let rHex = hexValues[6];  
    let gHex = hexValues[7];  
    let bHex = hexValues[8];  

    let r = parseInt(rHex, 16) * 2;  
    let g = parseInt(gHex, 16) * 2;  
    let b = parseInt(bHex, 16) * 2;  

    console.log('At displayIdx=' + displayIdx + " r=" + r + " g=" + g + " b=" + b);

    if (isNaN(r) || isNaN(g) || isNaN(b)) {
        console.log("Error: Invalid RGB value.");
    } else {
        let colorValue = `rgb(${r}, ${g}, ${b})`;
        setVar("button_tracks_" + displayIdx, "color", colorValue);
    }
}
```

### Additional Notes
- Ensure that the `props` of the matrix are correctly set and that the variable `n` is being updated as expected.
- If issues persist, review the entire matrix configuration for any potential misconfigurations that could affect the button color updates.

# CPU Usage Tips and Tricks

**Problem Description:**
When using Open Stage Control (O-S-C) with a Raspberry Pi cluster, CPU usage increases significantly, especially in edit mode. The user is seeking tips to reduce CPU load while using Firefox as the client browser and Node.js for the server.

**Solution:**
1. **Client and Server on Same System:** Running both the client browser and server on the same system can contribute to higher CPU usage. Monitor the client (Firefox) specifically for resource consumption.
   
2. **Edit Mode Impact:** Be aware that CPU load increases when the client is in edit mode due to the higher resource demands of widget interactions. If possible, minimize the time spent in edit mode.

3. **Optimize Custom Modules:** Ensure that custom modules do not perform blocking operations (e.g., excessive read/write from disk), as these can contribute to increased CPU usage. 

4. **Reduce Widget Count:** If the session contains hundreds or thousands of widgets, consider simplifying the interface to improve performance on lower-resource devices.

By implementing these strategies, you may be able to lower CPU usage during operation.

# Widget Expansion and Scroll Configuration

**Problem Description:**
Users want to create a button layout that behaves like folders and subfolders, maintaining each button's height while allowing access to a scrollbar when too many buttons are visible. There is uncertainty about the correct configuration to achieve this behavior.

**Solution:**
1. For a container to allow scrolling while keeping button heights unchanged, set the container's `contain` property to `false`.
   
2. If using a matrix for the layout, ensure the following properties are set:
   - `expand`: false
   - `layout`: vertical
   - `contain`: false
   - `scroll`: true

3. Additionally, set the children's width or height in the `props` property to ensure proper scrolling functionality.

Refer to the attached JSON file for an example configuration: [Attachment: hLDgV2qDDvq4oki9Oby65SMaW2b.json].

# Default Knob Blurriness on Mobile Devices

**Problem:**
The default knobs in Open Stage Control appear blurry or aliased on mobile devices, affecting visual clarity.

**Solution:**
To improve the appearance of the default knobs, append `?hdpi=1` to the server's URL. This adjustment enhances the clarity, reducing blurriness significantly, although some aliasing may still be present when zoomed in.

# Focusing Textarea via Script in Open Stage Control

## Problem Description
Users want to focus on a specific textarea widget using keyboard shortcuts (e.g., Ctrl+1 for textarea 1, Ctrl+2 for textarea 2). However, the `focus()` method on the textarea instance is not available from script widgets, and attempts to use `setFocus(id)` for textareas do not yield the expected results.

## Solution
To focus on a specific textarea widget, use the `setFocus(id)` function. However, note that this function may not work as intended with textarea widgets, as it does with input widgets. 

Here is a sample script that demonstrates how to use keyboard shortcuts to focus on input widgets:

```javascript
if (type == 'keydown' && (code.substr(0, code.length - 1) == 'Digit') && meta === false) {
  setFocus('input_' + key); // Focus on input widgets
}

if (type == 'keydown' && (code.substr(0, code.length - 1) == 'Digit') && meta === true) {
  setFocus('textarea_' + key); // Attempt to focus on textarea widgets
  set('textarea_' + key, '999'); // Example action to set value
}
```

This script listens for keydown events and sets focus based on the pressed keys. However, be aware that keyboard shortcuts may be ignored while typing in the textareas, and you may need to hit Enter before switching focus between different widgets.

For further details, refer to the available scripting functions in the Open Stage Control documentation.

[Attachment: textarea.js]

[Attachment: zmswFuweG8F6uLMcpqG0C9A8Kxo.json]

# O-S-C Launcher: Keyboard Shortcuts for START-server and STOP-server

## Problem Description
Users requested the addition of keyboard shortcuts for starting and stopping the server in the O-S-C Launcher.

## Solution
As of March 1, 2021, new keyboard shortcuts have been added to the O-S-C Launcher, including those for starting and stopping the server. For the latest updates on available shortcuts, refer to the documentation or the application interface.

[Attachment: image.png]

# Toggle Button - Send Same Control Message for On and Off States

**Problem Description:**
The goal is to configure a toggle button in Open Stage Control to send the same control message when toggling both to the "on" and "off" states. For instance, when the toggle button is pressed to "on," it should send `/control midi channel 10 / cc 89`, and when toggled back to "off," it should send the same message again.

**Solution:**
You can achieve this functionality without a custom module by using the following script in the button's script property:

```javascript
send("midi:my_device", "/control", 10, 89, 1)
```

This single line of code will send the specified control message regardless of the toggle button's state. Ensure that the button is set to toggle mode or any other mode that suits your needs.

[Attachment: filename.ext]

# Custom Module for Modifier Key Click Mapping

**Problem Description**  
The user seeks to remap the left-click action to a middle-click when both the Option (OPT) and Command (CMD) keys are pressed on a Mac. This is necessary for horizontal smooth scrolling in Cubase, as the Mac's touchpad does not support a middle-click natively. Additionally, there is a need to check the state of the trackpad button to send MIDI notes based on whether the button is pressed or released.

**Solution**  
1. **Remapping Clicks**: Currently, middle-click functionality does not work in Chromium (the default client for Open Stage Control). It is suggested to use Firefox, where this functionality may be supported.

2. **Checking Trackpad Button State**:  
   To check if the trackpad button is down, you may use a library such as [node-hid](https://github.com/node-hid/node-hid). This library allows access to USB and Bluetooth HID devices through Node.js. However, ensure that the library is correctly installed and configured to avoid binding errors.

3. **Error Handling**:  
   If you encounter errors like "Could not locate the binding files" while running scripts from the node-hid library, ensure that all dependencies are properly installed and that the environment is set up correctly.

For further assistance, consider reviewing the library documentation or seeking help from the community if issues persist. 

[Attachment: image.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: terminal_error.png]

# Using IMPORT{} with Variable Names in Open Stage Control

## Problem Description
When attempting to import a JSON file using a variable name in Open Stage Control, the following syntax does not work:
```
IMPORT{path/@{variableName}.json}
```
Additionally, there is a question regarding the use of the IMPORT function within the `onValue` script field.

## Solution
The current implementation does not support using a variable within the IMPORT function directly. However, you can achieve similar functionality by using variable widgets with IMPORT statements in their value property. Each variable widget can import a specific JSON file, and you can retrieve the JSON data using:
```
get('variable_widget_id')
```

For reusing script code, you can use the IMPORT function directly in the `onValue` field, but it should be noted that the syntax for importing JSON files may not work as expected. The recommended approach is to define the content of the script using variable widgets.

For example:
- Define a variable widget to import JSON:
  ```
  IMPORT{/scripts/buttonCode.json}
  ```
- In the `onValue` field, retrieve the JSON data:
  ```javascript
  eval(getProp('this', 'comments'))
  ```

This method allows for a combination of directly written code and imported JSON data.

[Attachment: filename.ext]

# Adding Text to Buttons in a Matrix Widget

## Problem Description
Users want to add a number label to each button in a matrix widget while also setting an image for each button.

## Solution
You can use the matrix widget's properties to set the button's label. Here’s how to do it:

1. Use the following JavaScript code to set the background image and label for each button:

```javascript
var css = "";
for (var i = 1; i <= 36; i++) {
    css += `.widget:nth-child(${i}) { background-image: url("/Thumbnails/12-${i}.png"); }`;
}
return css;
```

2. To set the label for each button, use the following code snippet:

```javascript
var props = {};
props.label = $; // This will set the label to the button's number
return props;
```

This approach allows you to customize both the appearance and the labeling of buttons in the matrix widget effectively.

# Show Selected Value on Menu Button

## Problem Description
Users want to display the currently selected value on a menu button in Open Stage Control, eliminating the need to open the menu to check the selection.

## Solution
To achieve this, you can define the label property of the button using the following syntax:

```javascript
MyLabel: @{this}
```

If you are using version v1 of Open Stage Control, which is recommended, note that most widgets no longer have a label property. Instead, you should create a text widget and use the following syntax in the text's value property (assuming the menu's ID is "menu_1"):

```javascript
@{menu_1}
```

To display the selected item name/label/key, you can use the following JavaScript code in the text's value property:

```javascript
{{
var values = @{menu_1.values},
    v = @{menu_1}

return Object.keys(values).find(k => values[k] == v)
}}
```

Additionally, to include line breaks in the button's label, you can insert new lines by pressing Shift + Enter in the editor. 

For upgrading from version 0.49 to version 1.0, you can download the latest release from the following link: [https://github.com/jean-emmanuel/open-stage-control/releases/tag/v1.0.0-beta7](https://github.com/jean-emmanuel/open-stage-control/releases/tag/v1.0.0-beta7).

# SOLVED: Different Behavior When Selecting Tabs with Script

**Problem Description:**
Users experience inconsistent behavior when switching tabs using the commands `set("panel_root", 0)` or `set("panel_root", 1)`. On an Apple computer, the MAXIMIZE and MINIMIZE buttons function correctly, allowing seamless tab switching. However, on touchscreen devices, users must press the buttons twice after the second tab switch to achieve the desired panel change.

**Solution:**
This issue has been identified as a bug and has been fixed in the source code. The fix addresses the problem where the `touchend` event was not firing on elements that were removed or detached.

For users experiencing this issue, it is recommended to wait for version 1.24.2, which includes the fix. The update should be available shortly.

[Attachment: IMG_7291_1.mp4.zip]  
[Attachment: load test.json]  
[Attachment: b5x06YDBtdOUvEQRPLuY0Ex0PR2.zip]  
[Attachment: yD0OO8WH9qrc6RUhdBUSUUHndZY.json]

# Haptic or Sound Feedback on Tablet in Open Stage Control

**Problem Description:**
Users have inquired about the possibility of providing haptic or sound feedback on a tablet (such as an iPad) when a button is pressed while using Open Stage Control. The goal is to receive confirmation of button presses through sound or haptic feedback directly from the tablet.

**Solution:**
Currently, Open Stage Control does not support direct haptic or sound feedback from the server side. However, there are some workarounds:

1. **Using a Frame Element:**
   - You can create an HTML file (e.g., `sound.html`) that plays a sound when loaded. The following JavaScript code can be included in this HTML file:
     ```html
     <head>
     <script type="text/javascript">
     function playsound() {
         var urlParams = new URLSearchParams(window.location.search);
         s = urlParams.getAll('sound')[0];
         document.getElementById('a').innerHTML = '<audio controls autoplay><source src="'+s+'.wav" type="audio/wav"></audio>';
     }
     document.addEventListener("DOMContentLoaded", playsound);
     </script>
     </head>
     <body>
     <div id="a"></div>
     </body>
     ```
   - Place sound files (e.g., `sound1.wav`, `sound2.wav`) in the same directory as `sound.html`.
   - In Open Stage Control, add a frame and set the value to the URL of the HTML file with a query string for the sound:
     ```
     <YOUR_HTTP_SERVER_PATH>/sound.html?sound=sound1
     ```

2. **Using AutoHotKey (AHK):**
   - AHK can be used to execute scripts that play sounds upon button presses. This method is effective but may introduce some delay.

**Note:** The frame's value must be an HTTP address, requiring a web server to serve the `sound.html` file. If using AHK, ensure that the script is optimized to minimize any delays in sound playback. 

For further exploration of sound playback options, consider the limitations of browser autoplay policies that may affect functionality. 

[Attachment: sound.html]

# Custom Module: Setting Widget Value with MIDI Note Messages

## Problem Description
A user is attempting to set the value of a modal widget to 1 using a custom MIDI note message. The initial implementation alternates the widget value between 0 and 1 using the `Math.abs()` function. However, the widget does not receive the value change as expected, and the variable intended to store the state resets with each message received.

## Solution
To resolve the issue, ensure that the variable used to store the state is initialized outside the function so that it retains its value between function calls. Additionally, use the correct address format in the `receive` function.

Here is the corrected code:

```javascript
var aaa = 0; // Initialize outside the function

oscInFilter: function(data) {
    if (data.host === 'midi' && data.port === 'SessionKiano') {
        var {address, args} = data;

        if (args[0].value == 2 && args[1].value == 94 && args[2].value == 3) {
            aaa = Math.abs(aaa - 1); // Update the persistent variable
            receive('/AppleScript - KB1', 1, aaa); // Use the correct address
            console.log(aaa); // This will now print alternating values
            return;
        }
    }
    return data;       
}
```

### Key Changes:
- Move the declaration of the variable `aaa` outside the `oscInFilter` function to maintain its state.
- Ensure the `receive` function uses the correct address format (`'/AppleScript - KB1'`). 

These adjustments will allow the widget to correctly receive and reflect the changes in value based on the MIDI note messages.

# Sending OSC Messages with Multiple Values

## Problem Description
Users need to send OSC messages that include multiple values in the format:
```
/$index/set/color min max val
```
For example:
```
/5/set/color 0 100 0
/5/set/color 0 100 50
/5/set/color 0 100 100
```
There is uncertainty about how to configure a button in Open Stage Control to send such messages with multiple values.

## Solution
To send OSC messages with multiple values using a button in Open Stage Control, you can configure the button's properties as follows:

1. **Set the `address`** to the desired OSC path (e.g., `/5`).
2. **Use `preArgs`** to specify the additional arguments that follow the address. For example, set `preArgs` to `"/set/color"`.
3. **Configure the `on` property** to include the values you want to send. For instance, if you want to send the values `0`, `100`, and `50`, you can set:
   ```json
   "on": "0 100 50"
   ```

Here is an example configuration for the button:
```json
{
  "type": "button",
  "id": "button_1",
  "address": "/5",
  "preArgs": "/set/color",
  "on": "0 100 50",
  "mode": "tap"
}
```

This setup will send the OSC message:
```
/5/set/color 0 100 50
```
when the button is pressed. Adjust the values in the `on` property as needed to send different sets of values.

# How to Use Variables in a SysEx String

When working with Open Stage Control and SysEx strings, you may encounter challenges using variables within these strings. Below is a concise guide on how to effectively implement variables in SysEx messages.

## Problem Description
Users have reported difficulties in incorporating variables into SysEx strings, particularly when attempting to use syntax like `send('/sysex', 'F0 43 @{this} F7')`, which results in errors. The challenge arises from the need to convert variable values into the appropriate format for SysEx messages.

## Solution
To successfully use variables in SysEx strings, follow these steps:

1. **Avoid Using `@{}` Syntax**: Instead of using `@{}` for variable references in script fields, utilize the `get()` function to retrieve the value of the variable. For example:
   ```javascript
   var nn = get("this");  // Retrieves the fader position (0-127)
   ```

2. **Send SysEx in Multiple Calls**: You can send SysEx messages in multiple calls, which allows for greater flexibility. For example:
   ```javascript
   send("/sysex", "F0 43 11 62 02");
   send("/sysex", nn);
   send("/sysex", "F7");
   ```

3. **Use Decimal Values**: Instead of hexadecimal byte strings, you can send decimal integers directly. For example:
   ```javascript
   send("/sysex", 240, 67, 17, 98, 2, nn, 247);
   ```

4. **String Concatenation**: If you prefer to concatenate strings, ensure proper syntax. For example:
   ```javascript
   var faderValue = get("this");
   var offset = 16;

   send("/sysex", "F0 66 10 32", (get("pitch") >= 60) ? faderValue : faderValue + offset, "F7");
   ```

By following these guidelines, you can effectively integrate variables into your SysEx strings in Open Stage Control. For further reference, consider reviewing the documentation on scripting for additional details.

# loopMIDI Feedback in Ableton

**Problem Description:**
When mapping session view clips in Ableton, issues arise due to the use of a single MIDI port for both input and output. The user seeks a solution to create two separate ports (one for MIDI in and one for MIDI out) while maintaining a single target name in the OSC Launcher.

**Solution:**
To configure Open Stage Control (OSC) for this setup, use the following format in the MIDI configuration:
```
ableton:ableton-out,ableton-in
```
Ensure that "ableton-out" is listed in the MIDI input list and "ableton-in" is in the MIDI output list (accessible via the menu > List MIDI Devices).

This configuration allows for seamless operation without needing to adjust MIDI port numbers each time the MIDI list changes.

# Including External JSON File in Open Stage Control

**Problem Description**  
Users may need to include instruments defined in an external JSON file into a variable (matrix) using a loop. Issues may arise from incorrect JSON formatting, especially when exporting data from Excel.

**Solution**  
To successfully load and utilize an external JSON file in Open Stage Control, follow these steps:

1. **Ensure Correct JSON Format**: 
   - If exporting from Excel, ensure that the file uses commas as separators instead of semicolons. This can be done by changing the application language settings to English (UK) when exporting to CSV.

2. **Load the JSON File**: 
   Use the following code snippet to read the JSON file:
   ```javascript
   var trackInstruments = loadJSON('../excel/trackInstruments.json');
   ```

3. **Access Data**: 
   You can access specific elements in the JSON object. For example, to rename buttons based on the track name and corresponding instrument name:
   ```javascript
   // Rename Button text_1 with 4 digits code
   if (trackname) {
       receive('/EDIT', 'text_1', {value: trackname});
   }

   // Rename Button text_2 with Instrument name
   var codeFromCubase = parseInt(trackname);
   var instrumentName = trackInstruments[codeFromCubase - 1]['instrumentName'];
   if (trackname) {
       receive('/EDIT', 'text_2', {value: instrumentName});
   }
   ```

4. **Attachments**:  
   Ensure to reference the correct JSON files:
   - [Attachment: uIVRYSVqK0JG4mNUsBRL2v1JnoL.json]
   - [Attachment: hZKyWc4m1WeSElJWXwfJkDaFGnx.json] 

By following these steps, you can effectively include and utilize external JSON files in your Open Stage Control setup.

# Syntax for Variables in Clone Props

## Problem Description
Users may encounter issues when attempting to use variables within the `clone props` configuration in Open Stage Control. Specifically, the syntax for referencing variables may not yield the expected results, particularly when dealing with faders and panels.

## Solution
To correctly use variables in `clone props`, ensure that you are cloning a panel rather than a fader, as faders do not have a `variables` property. The correct syntax should look like this:

```json
{
  "variables": { "n": 17 },
  "preArgs": [ @{midiChnOSC}, 16 ]
}
```

### Important Notes:
- If you modify the `default` property of a variable (e.g., `midiChnOSC`), the changes will only apply once. To see updates, you must edit the `value` property of the variable.
- If you experience issues with variable values not updating, ensure you are modifying the correct property.

For further assistance, consider testing with a minimal session file to demonstrate the issue. 

[Attachment: Clone props example.json]  
[Attachment: ptvaYcVd5I0GF0a9Ca1tzc9mZrE.json]

# Creating a HOLD Feature with onTouch in Open Stage Control

## Problem Description
Users may want to implement a HOLD feature using the `onTouch` parameter in Open Stage Control, where a toggle button determines whether to send an ON or OFF MIDI CC message based on the state of the touch event. The challenge arises when the `onTouch` event sends an OFF message upon release, even when the toggle button is set to ON.

## Solution
To resolve this issue, it is recommended to use the `get` function instead of `getProp` to fetch the value of the toggle button. The `get` function provides the actual widget's value, ensuring that the script behaves as expected.

Here is the corrected script for the `xyPad` widget:

```javascript
// Fetch the current state of the toggle button (variable_1)
var isToggled = get('variable_1', 'value') || 0; // Use get instead of getProp

// Debugging: Log the toggle state
console.log("Toggle state (variable_1):", isToggled);

// Process the onTouch event
if (event.type === "start") {
    // Send ON message only if the toggle is OFF
    if (isToggled === 0) {
        send('midi:OpenStage', '/control', 1, 34, 127);
        console.log("Touched: ON message sent (Toggle OFF)");
    } else {
        console.log("Touched: ON message suppressed (Toggle ON)");
    }
} else if (event.type === "stop") {
    // Completely ignore the stop event if the toggle is ON
    if (isToggled === 1) {
        console.log("Released: OFF message suppressed (Toggle ON)");
        return; // Prevent further execution
    }

    // Send OFF message if the toggle is OFF
    send('midi:OpenStage', '/control', 1, 34, 0);
    console.log("Released: OFF message sent (Toggle OFF)");
}
```

Additionally, for the `button_1` widget, use the following code to update the toggle state:

```javascript
console.log("button_1 value changed to:", value);
set('variable_1', value);
```

This approach ensures that the OFF message is only sent when the toggle is OFF, effectively implementing the desired HOLD feature. 

[Attachment: script_for_variable.js]

# Using a Custom Client with Open Stage Control's WebSocket Server

## Problem Description
Users are interested in utilizing the Open Stage Control (OSC) WebSocket server with a custom client, particularly for applications with OSC functionalities. There are concerns regarding the stability and public accessibility of the OSC API, as well as the limitations of the server's current architecture in supporting generic client applications.

## Solution
The OSC WebSocket server can be adapted for use with a custom client, although it is not officially documented as a public API. Here are the key points for implementation:

1. **Custom Backend Development**: If the existing server does not meet your needs, you can create a custom backend using `osc.js`'s `WebSocketPort` and `UDPPort`.

2. **Callback Adjustments**: It is possible to modify the existing backend to provide a more generic API. This includes allowing the server to process messages that are not bound to the widget data table.

3. **Message Structure**: When sending OSC messages, ensure that:
   - The `clientId` is always set.
   - If the `data.h` (widget hash/unique ID) is not present, the server will ignore the widget table and instead use:
     - `data.address`: OSC address (string)
     - `data.target`: Array of target strings
     - `data.preArgs`: Array of values
     - `data.typeTags`: String
     - `data.v`: Widget value or array

4. **Heartbeat Management**: Implement a ping/pong heartbeat mechanism to maintain the connection, as the server may terminate inactive clients.

By following these guidelines, you can successfully integrate a custom client with the OSC WebSocket server. 

For further reference, please see the attached files for additional context and examples. [Attachment: filename.ext]

# Force set() to Send OSC

When using Open Stage Control, there may be instances where you want to trigger a widget to send its OSC command without direct user interaction. This can be particularly relevant when a reset function is called by an OSC command from a DAW.

## Problem Description
The `set()` function, when called from a widget script, only sends OSC messages if it is triggered by user interaction. Even with the `{send: true}` flag, the OSC command may not be sent if the initial call was not user-initiated. This can lead to situations where widgets update visually in the UI, but do not send their values correctly.

## Solution
To ensure that OSC messages are sent even when not triggered by user interaction, you can use the following methods:

1. **Directly Send Messages from a Custom Module**:
   - Use the `receive()` method to listen for OSC messages and then call `set()` with the `{send: true}` flag within the method.
   ```javascript
   receive("/SET", "reset_looper", args[0].value);
   set(id, df, {send: true});
   ```

2. **Mimic User Interaction**:
   - Use the `/SET` command to simulate user interaction, which can trigger the OSC messages as expected.

3. **Understanding send() vs. receive()**:
   - `send()`: Sends a message from the OSC server to another application.
   - `receive()`: Sends a message from the OSC server to the OSC clients, as if it were received from another application.

By implementing these methods, you can successfully force the `set()` function to send OSC commands even when not initiated by user interaction.

# Copying and Pasting Custom Widgets in Open Stage Control

## Problem Description
Users may want to add custom widgets to an existing JSON interface file in Open Stage Control (OSC) without the need to generate a complete new file. Current methods involve either maintaining a "dev" tab within the same file or copying from another session file, which can be cumbersome. Users are seeking a more efficient workflow similar to a "palette" feature found in other software, where custom widgets can be easily accessed and inserted.

## Solution
1. **Multiple Sessions**: You can open multiple sessions on the same server by launching a second client in a browser. This allows you to copy and paste widgets between sessions, as the clipboard is shared across clients.

2. **Alternative Method**: Consider storing the JSON code of your custom widgets in separate markdown files. This way, you can easily copy and paste the JSON text into your interface as needed.

3. **Future Feature**: While a dedicated palette feature for custom widgets has been discussed, it is not currently available. However, it remains a potential future enhancement.

4. **Text Export**: A suggestion was made to allow users to copy widget JSON directly from OSC to a text editor, potentially with a modified keyboard shortcut (e.g., Ctrl + C). This feature is not currently implemented but could enhance workflow if developed.

[Attachment: filename.ext]

# Cubase Send Toggled Instrument Folder Back to OSC Button

## Problem Description
The user seeks a method to create a toggle button in Open Stage Control (OSC) that not only opens an instrument folder in Cubase but also receives updates via OSC when the folder is opened or closed. The goal is to maintain visibility of the open and closed states of folders within Cubase.

## Solution
A reliable workaround involves using JSON data to track the states of the instrument folders. Here’s a step-by-step guide:

### Saving Folder States
1. **Send Folder State**: Use the `OnValue` event to send the current state of the folder toggle to a specified OSC address.
   ```javascript
   // value is a local variable that grabs the current value of the widget
   // id is a local variable that grabs the current id of the widget
   send("/toggleFolderAddress", {type: "s", value: {value, id}});
   ```

2. **Save to JSON**: In your custom module's `oscFilterOut` method, listen for the custom OSC address and save the folder state to a JSON file.
   ```javascript
   const { address, args } = data;
   if (address === "/toggleFolderAddress") {
       let value = args[0].value.value;
       let nameOfFolder = args[0].value.id;
       let saveToggleValue = {};
       saveToggleValue[nameOfFolder] = value;

       // Save the state to JSON
       saveJSON("./toggleFolder.json", saveToggleValue);
   }
   ```

### Loading Folder States
1. **Load JSON on Session Start**: At the beginning of your OSC session, load the JSON data and send the saved values to the corresponding widgets.
   ```javascript
   app.on("sessionOpened", () => {
       let toggleFolderJSON = loadJSON("./toggleFolder.json");

       // Iterate over each key-value pair in the object
       Object.keys(toggleFolderJSON).forEach((key) => {
           let id = key;
           let value = toggleFolderJSON[key];
           receive(`/${id}`, value);
       });
   });
   ```

By implementing this method, OSC will remember the state of your instrument folders across sessions, allowing you to easily see which folders are open or closed in Cubase.

[Attachment: filename.ext]

# How to Make a Push Button Unselect a Toggle Button in Open Stage Control

## Problem Description
When using toggle buttons to control solo states of instrument tracks in Open Stage Control (OSC), clicking a toggle button highlights it to indicate "Solo On" and removes the highlight for "Solo Off." However, when a push button is used to set all tracks to "Solo Off," the toggle buttons remain highlighted, indicating they are still "Solo On." 

## Solution
To ensure that the push button also affects the toggle buttons and sets them to "Solo Off," you can use the script property of the push button widget. Implement the following command in the script property:

```javascript
set('solo_button_*', 0, {send:false}) // 0 = button's "off" value
```

This command assumes that all solo buttons share the same ID prefix. If they do not, you will need to write a separate `set()` statement for each button ID. The `{send:false}` option updates the widget's value without sending OSC messages, ensuring that the toggle buttons reflect the correct state. 

[Attachment: 9eiWLMTTeNy9Os4fBpkkODn4b6I.json]

# Fader Displaying Current Value as dB

## Problem Description
Users want to display the current value of a fader in decibels (dB) and are exploring options for converting the standard MIDI Control Change (CC) range (0-127) to dB. There are concerns about the precision of this conversion and the feasibility of visualizing the current value or percentage.

## Solution
1. **Using NRPN MIDI Messages**: For a more precise representation of values in dB, consider using Non-Registered Parameter Number (NRPN) MIDI messages, which allow for a wider range of values compared to standard CC messages.

2. **Visualizing Current Values**: To visualize the current value or percentage of the fader:
   - Set the `pips` property to `true` in the fader configuration.
   - Adjust the `range` property for different pips configurations as needed.

3. **Alternative Approach**: If higher resolution is required, consider using the pitch wheel controller (`/pitch`) assigned to the fader. This provides 14-bit resolution (16383 values) compared to the 7-bit resolution of CC messages, and can offer direct feedback in dB from your digital audio workstation (DAW) when used with MCU/HUI devices.

For further details, refer to the Open Stage Control documentation under the Properties reference section.

# Using Custom Variables in Gradient Property of a Fader

**Problem Description:**
A user attempted to use a custom variable in the gradient property of a fader with the following code:
```json
{
  "0": "black",
  "0.3": "VAR{color}"
}
```
The user reported that this approach did not work and sought assistance on how to properly set up a custom variable in this context.

**Solution:**
The code provided will function correctly as long as the variable has a value assigned using `setVar()`. To ensure that the gradient property does not fail if the variable is not set, it is advisable to provide a default value. For example:
```json
VAR{color, red}
```
This will set the default color to red if the variable `color` is not defined. Additionally, refreshing the session may be necessary for changes to take effect.

# Using GIFs as Background Images in CSS

**Problem Description**  
Users may encounter issues when attempting to use GIFs as background images in CSS, leading to confusion about whether GIFs are supported.

**Solution**  
To successfully use GIFs as background images, ensure that the following CSS properties are included:

```css
.class_name {
    border: none;
    --alpha-fill-on: none;
    --alpha-fill-off: none;
    --alpha-stroke: none;
    --color-text: none;
    --color-widget: none;
    --color-fill: none;
    --line-width: none;
    background-image: url('/Users/YourPathHere'); /* Replace with the path to your GIF */
    background-size: contain;
    background-clip: border-box;
    background-repeat: no-repeat;
}
```

After defining the class, apply it to your button by setting the CSS value to `class: class_name`. 

Make sure to replace `'/Users/YourPathHere'` with the actual path to your GIF file.

# Controlling Different Synths in Open Stage Control

## Problem Description
Users want to control multiple synths (e.g., Diva, Zebra, Sylenth) within Open Stage Control by activating specific modals when a synth is selected. The goal is to adjust parameters like filter cutoff via MIDI CC messages sent to OSC, ensuring that only the relevant modal is displayed for the selected synth.

## Solution
To achieve this, you can create a panel widget that contains multiple tab widgets for each synth. Here’s a step-by-step approach:

1. **Create a Panel Widget**: Name it `Device_Panel`.
2. **Add Tab Widgets**: Inside the panel, create tabs for each synth (e.g., Diva, Dune, Fabfilter, Zebra).
3. **Send OSC Messages**: From your DAW, send OSC messages to switch tabs dynamically. For example, to switch to the third tab (Dune), send:
   ```
   /Device_Panel 3
   ```
4. **Use Unique OSC Messages**: To avoid conflicts, use different OSC messages for each parameter of each device. This is particularly important if you have many templates that might react to the same message.

5. **Consider DAW Limitations**: Be aware that some DAWs may have limited OSC support, which may require MIDI/OSC conversion. Ensure your setup can handle this effectively.

6. **Template Management**: Start with a few templates for your most-used devices and create a generic template for high-resolution VST control with named parameters.

For an example setup, refer to the provided JSON file:
[Attachment: 13tZ5sr4otwxHxSAyxT0V1CaQht.json]

This method allows for efficient control of multiple synths while minimizing potential issues with OSC message conflicts.

# Using a Button to Store and Recall a Widget's Value

**Problem Description:**
Users want to implement functionality in Open Stage Control where a button stores the current value of an XY pad, and another button recalls that stored value later, even after a session has been closed or restarted.

**Solution:**
To achieve this, you can utilize the browser's local storage feature. Here’s how to implement the functionality:

1. **Storing the Value:**
   Use the following script to store the current value of the XY pad:
   ```javascript
   // Save in slot "knob_val"
   storage.setItem("knob_val", get("knob_1"));
   ```

2. **Recalling the Value:**
   To restore the value later, use this script:
   ```javascript
   // Load from slot "knob_val"
   set("knob_1", storage.getItem("knob_val"));
   ```

**Important Notes:**
- The values stored in local storage are not shared between different clients. This means that if you store a value on one device, it cannot be recalled on another device after a session restart.
- To avoid synchronization issues between clients, consider setting the button's `bypass` property to `true`.

**Alternative Approach:**
If you need to store values on the server and recall them from any client, you can create a custom module. This involves sending the value to the server and handling it with JavaScript, allowing for more flexibility but requiring additional programming knowledge.

For further reference, see the attached example that demonstrates another method of storing values, although it resets when the session is closed: [Attachment: nRLSdfm13H41sN2gV4gnrM6sw6y.json].

# Issue with Custom Module for Open Stage Control

## Problem Description
A user encountered an error when starting a custom module intended for use with Open Stage Control and Cubase. The module is designed to handle MIDI communication using the MCU protocol but fails to operate correctly due to configuration issues.

## Solution
To resolve the error, ensure that you have created two MIDI targets in Open Stage Control, one for sending and one for receiving. However, it is recommended to simplify the setup by using a single target for both functions.

Replace the following lines in your module code:

```javascript
var midiPort_MCU_From_OSC = 'MCU_From_OSC'; // this is the MCU port you've set up in Cubase to send and receive MCU messages
var midiPort_MCU_To_OSC = 'MCU_To_OSC'; // this is the MCU port you've set up in Cubase to send and receive MCU messages
```

with:

```javascript
var midiPort_MCU_From_OSC = 'oscbensmir';
var midiPort_MCU_To_OSC = 'oscbensmir';
```

This change should help prevent the error. However, a solid understanding of the MCU protocol and basic JavaScript coding is necessary to troubleshoot further issues that may arise. 

For those new to coding, consider seeking out courses that cover JavaScript and MIDI protocol fundamentals to enhance your skills.

# Custom Module Setup in Open Stage Control

## Problem Description
Users may encounter difficulties when setting up a custom module in Open Stage Control, particularly in triggering functions based on OSC messages. A common issue is that debug messages do not appear when interacting with widgets, leading to confusion about the necessary configurations.

## Solution
To ensure that OSC functions are triggered correctly, follow these steps:

1. **Define a Target Attribute**: Ensure that your widget has a `target` attribute set. This attribute is essential for the OSC functions (`oscInFilter` and `oscOutFilter`) to be triggered. An arbitrary target (e.g., one that contains a colon) can be used, but be aware that using an invalid target may produce errors if the message is not bypassed.

   Example widget configuration:
   ```json
   {
     "type": "button",
     "top": 30,
     "left": 10,
     "id": "button_1",
     "visible": true,
     "interaction": true,
     "on": 1,
     "off": 0,
     "mode": "push",
     "value": "myVal",
     "address": "/myTest",
     "target": "localhost:8080",  // Ensure this is set
     // other properties...
   }
   ```

2. **Set a Default Send Parameter**: If you want to handle logic in the `oscInFilter`, configure the server to send messages to itself by setting a default send parameter. This allows the custom module to process incoming messages effectively.

3. **Avoid Unnecessary Configurations**: While it might seem convenient to set the server as the target, it is recommended to avoid this approach. Simply having the message sent is sufficient for processing in the `oscOutFilter` function without the need for additional configurations.

Following these guidelines will help ensure that your custom module functions correctly and that OSC messages are processed as intended. 

[Attachment: filename.ext] (attachment reference missing)

# Sending and Receiving OSC Messages in Open Stage Control

## Problem Description
A user is attempting to send OSC messages to the address `/string1` using buttons and wants to display the received values (e.g., "hello" and "bye") in a text widget. Despite setting the OSC address in the text widget, it displays "undefined" instead of the expected values.

## Solution
To successfully receive OSC messages in a text widget, follow these steps:

1. **Set the OSC Address**: Ensure that the text widget's OSC address is set to `/string1`. This allows the widget to listen for messages sent to this address.

2. **Check Widget Configuration**:
   - Make sure that the text widget is correctly configured to display the incoming OSC messages. The `value` field should be set to `OSC{}` to receive and display the messages.

3. **Debugging**: If the text widget is still not displaying the expected values:
   - Verify that the OSC messages are being sent correctly to the specified address.
   - Confirm that there are no issues with the network configuration (e.g., ensure that the OSC messages are being sent to the correct IP and port).

4. **Example Configuration**: Here is a minimal example of how the configuration might look:
   ```json
   {
     "type": "text",
     "id": "textWidgetIdHere",
     "address": "/string1",
     "value": "OSC{}"
   }
   ```

By following these steps, the text widget should be able to receive and display the OSC messages sent to `/string1`. If issues persist, consider reviewing the Open Stage Control documentation for further troubleshooting guidance. 

For more information on general mechanics, refer to the documentation: [General mechanics - Open Stage Control](attachment reference missing).

# Increment a Widget Value When Pressing a Push Button

## Problem Description
How can a fader value be incremented by pressing a push button in Open Stage Control? The user is unsure whether to use a script in the push button options or utilize a Script widget.

## Solution
The recommended approach is to use a Script widget. To configure the push button to trigger the script, set its `value` property to `@{button_id}`. Additionally, include a condition in the script to ignore the button's release event:

```javascript
if (value == 0) return;
set("fader_2", @{fader_2} - 1.0);
```

This setup will allow the fader to decrement its value correctly when the button is pressed.

# Passing a Switcher Widget Integer Value into a Panel

**Problem:**
How to pass a switcher widget's selected integer value into a different Panel Wrapper's ID as a variable? Can widget values outside the scope of a panel/strip/modal wrapper be accessed globally?

**Solution:**
You can access the selected value of a switcher widget globally using the following JavaScript code:

```javascript
JS{{return @{switcher_id}._selected}}
```

This method allows you to retrieve the selected integer value from the switcher widget and use it in other panels or wrappers.

# EQ Interface and Multixy Control

**Problem Description:**
The goal is to create a user experience where the multixy widget controls the frequency and gain points of an EQ, allowing users to drag these points seamlessly. Additionally, there is a query about the possibility of using a two-finger gesture to read a third value alongside the x and y coordinates.

**Solution:**
To implement the desired functionality, refer to the provided example configuration file. Note that two-finger gestures are not supported in multixy pads; however, this can be circumvented by using knobs instead.

- Example configuration: [Attachment: 3Fk0SRJzrai5lavbOuevcD4M7dI.json]

# Send All Note Off Function on a MIDI Channel

**Problem Description:**
Users may want to configure a button in Open Stage Control to send an "all note off" message on a MIDI channel.

**Solution:**
To send an "all note off" message, configure the button to send a Control Change (CC) message with the control change number 123. This is the designated CC number for the "all note off" function in MIDI.

# Change Matrix Behavior from Matrix to Switch

## Problem Description
There is a need to switch the behavior of a Matrix widget from Matrix mode to Switch mode in Open Stage Control. This allows for the use of multiple inputs or a single input, controlled by a button.

## Solution
To achieve this functionality, you can use a button that toggles the behavior of the Matrix widget. The provided configuration files can be utilized to implement this feature.

### Configuration Files
- [Attachment: Matrix_Mode.json]
- [Attachment: ylztcDhdFm85OAU5zuPHevHTeuC.json]

# Changing Button Text Based on Current Value

**Problem Description:**
Users may want to dynamically change the label of a button in Open Stage Control based on its current value. 

**Solution:**
To change the button's label according to its value, you can use the following expression in the label property:

```javascript
#{@{this} == 1 ? "On" : "Off"}
```

This expression checks if the button's value is set to `1` (indicating "On") and changes the label accordingly to "Off" when the value is not `1`. 

Note that the `get()` function is only available in scripting properties such as `onValue`, and cannot be used directly in the label property.

# Issue: Buttons Automatically Triggered Upon Session Opening

When opening a session in Open Stage Control, all buttons are automatically triggered, causing unintended actions. This issue arises when multiple clients are connected, leading to synchronization problems.

## Solution

To prevent buttons from being automatically triggered when a session opens, set the button's `bypass` property to `true`. This configuration stops the button from sending messages unless triggered by scripting, thus avoiding the issue of unintended state changes upon session initialization. 

[Attachment: nKvTyzxJAIrioH6whbXEY1Jh0cw_1.json]

# Vertical Tabs in Open Stage Control

## Problem Description
Users have requested a vertical tab system in Open Stage Control to better utilize space and emulate typical menu layouts. The default tab arrangement is horizontal, which limits the number of visible tabs. Additionally, users have encountered difficulties with customizing tab colors and text alignment.

## Solution
To create vertical tabs, you can use the `verticalTabs` property in the tab container settings starting from version 1.0. Here’s how to implement it:

1. **Set Vertical Tabs**: In the tab container, enable the `verticalTabs` property.
   
2. **CSS Customization**: If you are using an older version (prior to v1.0), you can apply the following CSS to achieve a vertical layout:
   ```css
   .panel {
     flex-direction: row;
   }
   .panel > .navigation {
     height: auto;
   }
   .panel > .navigation .tablist {
     flex-direction: column;
     height: 100%;
   }
   .panel > .navigation li {
     width: 100%;
     max-width: 100%;
   }
   ```

3. **Customizing Tab Colors**: To change the background color of active and inactive tabs, you may need to inspect the elements using the Chrome Inspector (F12) to identify the correct CSS properties to modify.

4. **Text Alignment**: If text alignment is not functioning as expected, it may be due to the use of `flex` properties. Ensure you are using the correct CSS for text alignment:
   ```css
   div {
     text-align: left;
   }
   ```

For a working example, refer to the attached configuration file: [Attachment: 1vuIdsXBkW0P36zLZEXyqoWXiOs.json].

# Using onValue to Respond to OSC Messages in Open Stage Control

## Problem Description
A user attempted to change the background color of a panel by sending an OSC message but encountered issues with the `onValue` function not triggering as expected. They were unsure if `onValue` works with panels and faced difficulties using `setVar` to change properties.

## Solution
Panel widgets in Open Stage Control only have a value in specific cases:
- When they have scrollbars (the value represents the scrollbar position as a [x,y] array).
- When they contain tabs (the value represents the active tab index).

To effectively respond to OSC messages and change properties like background color, follow these steps:
1. **Create a Script Widget**: Place a script widget within the panel to handle OSC messages.
2. **Use `setVar` Correctly**: Instead of directly changing properties with `setVar`, utilize the `VAR{}` syntax in the property definition. Then, call `setVar` to modify the value returned by that `VAR{}` statement.

This approach allows you to bypass the limitations of panel values and effectively manage property changes.

# Centering a Panel Based on Screen Size

**Problem:**  
How can a panel be centered based on the screen size in Open Stage Control?

**Solution:**  
There are multiple methods to center a panel:

1. **Using Percentages:**
   - Define the panel’s size and position using percentage values.

2. **Flexbox Method:**
   - If the panel is the only child of its parent, set its `left` and `top` properties to `auto` and add the following CSS to its parent:
     ```css
     .panel {
       display: flex;
       align-items: center;
       justify-content: center;
     }
     ```

3. **Calculation Method:**
   - Set the panel’s `left` and `top` properties to `auto`, define its `width` and `height`, and add the following CSS:
     ```css
     top: calc(50% - 50rem); /* 50rem = width/2 */
     left: calc(50% - 50rem);
     ```

For more information, refer to the documentation on responsive sizing: [Open Stage Control CSS Tips](https://openstagecontrol.ammd.net/docs/css-tips/#responsive-sizing).

# MIDI Message Also Being Sent As An OSC Message

When configuring a widget to send messages to a MIDI device, it may also send the same message as an OSC message if both targets are defined. This behavior can be confusing if it is not expected.

## Solution

To prevent the widget from sending OSC messages when targeting a MIDI device, set the widget's `ignoreDefaults` property to `true`. This will ignore the server's `send` option, which applies to all widgets. 

By doing this, you can ensure that only the intended MIDI messages are sent without duplicating them as OSC messages.

# How to Inherit @{parent.variables} and Add New Variables

When working with panel objects in Open Stage Control, you may want to inherit variables from a parent object while also declaring additional unique variables. 

## Problem Description
You need to access a parent’s variables in a child panel and add new variables specific to that child. An attempt to set the variables property using the syntax:
```json
{
  @{parent.variables}, "device": "filter"
}
```
results in incorrect formatting, making the parent variables inaccessible.

## Solution
To correctly inherit and merge the parent variables with new ones, use the following JavaScript code:
```javascript
#{Object.assign(@{parent.variables}, {device: "filter"})}
```
This will combine both objects, allowing access to the parent variables alongside the new variable.

For scenarios where you want to access a variable (e.g., "n") from an arbitrary ancestor without modifying each ancestor to inherit it, consider setting the variables at the highest level of the hierarchy. This way, you can leave the default values for all ancestors and only override them where necessary. Refer to the example in `clone_and_variables.json` for implementation guidance.

For more information on JavaScript object assignment, see:
- [Open Stage Control Documentation](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/#javascript-js-code)
- [MDN Web Docs on Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

# Modal Rendering Issues on iPhoneX and iPad

## Problem Description
Users have reported that modals behave unexpectedly on iPhoneX and iPad devices, while functioning correctly on laptops. This issue appears to be related to the layout rendering in iOS, particularly when elements overlap even slightly.

## Solution
The issue can be resolved by adjusting the layout using horizontal and vertical layouts. However, it is important to note that this may not prevent similar rendering bugs in other sessions. Users may need to experiment with their layouts to avoid such problems.

- Use horizontal and vertical layouts to mitigate rendering issues.
- Adjust the layout as necessary to prevent overlapping elements.

[Attachment: MyKeyboard.json]  
[Attachment: zzga6kOC7C61KMQAwmPSk5jLMfi.json]  
[Attachment: 3oKr6KnXj4OTX3MwYCBX1Z41BUE.json]  
[Attachment: IMG_6034 2.PNG]  
[Attachment: Screen Shot 2022-10-07 at 8.23.22 PM]

# Is there still a meter widget?

**Problem:**
Users are unable to find a dedicated 'meter' type widget in the latest version of Open Stage Control.

**Solution:**
The meter widget is no longer available. Instead, you can create a meter effect using a fader widget with the following settings:
- Set `design` to `compact`
- Set `interaction` to `false`

# Multiple PreArgs Targets

## Problem Description
Users want to know if `preArgs` can have multiple MIDI targets to allow a single text field to display values from different external MIDI faders. Specifically, they are looking to respond to multiple incoming MIDI Control Change (CC) messages, such as `[1,1]` and `[1,11]`, but are currently only able to configure it for a single MIDI message.

## Solution
`preArgs` cannot have multiple MIDI targets; widgets in Open Stage Control listen to only one set of address and `preArgs`. To route multiple MIDI messages to the same widget, you can either:

1. **Use Multiple Widgets**: Create separate widgets for each MIDI fader and use scripting to manage their interactions.
2. **Custom Module**: Develop a custom module that can handle multiple MIDI inputs and route them to the desired output.

For displaying values from different faders, you can use a button matrix or similar structure with scripts to control visibility based on the incoming MIDI CC information. 

For example, you can adapt the following JavaScript code to assign MIDI CC control for each knob independently:

```javascript
var p = {} /* create a JS object */
var ids = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']

var colors = ['auto', 'red', 'cyan', 'orange', "pink", "yellow", "rgba(255, 50,200,0.95)", "#556633"]

p.id = ids[$]
p.colorWidget = colors[$]

p.range = {min:0, max: 127}
const start_CC = 23
const goo = start_CC + $
p.address = "/control"
p.preArgs = "[ 1, " + goo + "]"
p.target = "midi:oxygen49"
p.script = "set('info', value)"

return p
```

To manage visibility of text widgets based on which fader is being moved, you can implement conditional scripts like this:

```javascript
if (value > 1) {
    set('panel_CC', 0) // For fader 1
}
```

This way, moving each fader will select the corresponding tab in a panel, displaying only the relevant text widget.

[Attachment: infoValue.json]

[Attachment: tyzt1Ev50IUtB5uarH8ud85QXVF.json]

[Attachment: 54kGhETXE6Y7m6vnxIUcMG1iksq.json]

# Drag / Slide Over Button to Toggle

**Problem Description:**
A user wants to implement a feature in an 8 x 16 grid of buttons that allows for toggling the states of multiple buttons by pressing down on one button and dragging over others. This functionality would enable the user to activate an entire row by swiping across the buttons.

**Solution:**
To achieve this functionality, set the matrix's `traversing` property to `true`. This will allow for drag gestures that span multiple controls, enabling the desired toggle effect across the grid.

# OSC Listener for MIDI Events: Filtering by Note Number and Retrieving Velocity

## Problem Description
The goal is to create a script that translates MIDI velocities to specific values by filtering incoming MIDI Note Messages based on the note number. The challenge is to listen for OSC messages that contain the velocity of MIDI notes while filtering for a specific note number.

## Solution
To filter MIDI Note Messages by note number and retrieve the corresponding velocity, use the following approach:

1. Set up the OSC listener with the appropriate address and parameters. The syntax is:
   ```javascript
   OSC{address, default, usePreArgs}
   ```

2. For incoming messages of the form:
   ```json
   { address: `/note/`, args: [1, 2, 4] }
   ```
   - The second value in the `args` array represents the note number.
   - The third value represents the velocity.

3. Ensure that the widget's `preArgs` are set correctly to filter by the desired note number. For example:
   ```json
   "preArgs": [
       Midichannel,
       NoteNumber
   ]
   ```
   This setup allows the OSC listener to inherit the widget's preArgs, enabling it to process the incoming MIDI messages effectively.

4. If you want to bypass the preArgs, set `usePreArgs` to `false`.

By following these steps, you can successfully filter MIDI messages by note number and retrieve the associated velocity values.

# Matrix Layout Vertical: Keeping the First Child on Top While Scrolling

## Problem Description
Is it possible to keep the first child in a matrix layout, such as a "folder button," fixed at the top while allowing the other buttons to scroll?

## Solution
You can achieve this by applying the following CSS hack to your matrix layout:

```css
.widget:first-child {
  position: sticky !important;
  top: 0 !important;
  z-index: 1;
  background: var(--color-background);
}
```

This code will make the first child of the matrix sticky, ensuring it remains visible at the top while the other elements scroll. Note that this is a workaround and may not be guaranteed to work indefinitely.

# Sending Different Values Based on Button Presses

**Problem Description:**
A user wants to create a menu with multiple toggle buttons that send different MIDI Control Change (CC) values depending on which buttons are selected. Specifically, they need to send one value when only one button is pressed, another value for the second button, and a third value when both buttons are toggled.

**Solution:**
To achieve this functionality, use the `onValue` script of the "go" button. Ensure that the `on` and `off` properties of the select buttons are set to `1` and `0`, respectively. The `target` property of the go button should be configured to your MIDI device, for example, `midi:device_name`.

Here is a sample script to implement this logic:

```javascript
var select_1 = get('select_1'),
    select_2 = get('select_2');

if (select_1 && !select_2) {
  // only select_1 is on
  send('/control', 1, 5, 1);
} else if (!select_1 && select_2) {
  // only select_2 is on 
  send('/control', 1, 5, 2);  
} else if (select_1 && select_2) {
  // select_1 and select_2 are on
  send('/control', 1, 5, 3);
}
```

This script checks the state of the toggle buttons and sends the appropriate CC value based on the selections made.

# Spitfire-like Easy Mix Fader in Open Stage Control

## Problem Description
Users are looking for a way to create a fader in Open Stage Control (OSC) that can control multiple microphone faders simultaneously, similar to the "easy mix" fader found in Spitfire sample libraries. The goal is to interpolate between preset values for multiple mics using a single OSC fader.

## Solution
A reliable method to achieve this functionality within OSC involves using a custom fader with scripting to control multiple mic faders. Here’s a step-by-step guide:

1. **Create a Fader in OSC**: Set up a fader in your OSC interface that will serve as the main control.

2. **Use the `onValue` Section**: In the fader's `onValue` section, implement the following script to control three mic faders:

   ```javascript
   if (value <= 63) {
       set("surround", 127 - 2 * value);
       set("room", 2 * value);
       set("close", 0);
   } else {
       set("close", (2 * value) - 127);
       set("room", 127 - 2 * (value - 63));
       set("surround", 0);
   }
   ```

   This script adjusts the values of the "surround," "room," and "close" faders based on the position of the main fader.

3. **Link to Cubase Quick Controls**: Ensure that the OSC faders are assigned to the Quick Controls in Cubase for seamless integration.

This approach allows for effective control of multiple microphone levels using a single fader in Open Stage Control.

[Attachment: easy_mix_fader_image.png]

# Feature Demo: Property Inheritance, Scripting, Clones

## Problem Description
Users may encounter an error when attempting to open example sessions downloaded from the GitHub repository. The error message states: "Could not open file (SyntaxError: Unexpected token < in JSON at position 6)."

## Solution
To resolve this issue, ensure that you download the examples correctly. Follow these steps:
1. Download the examples as a .zip file from the GitHub repository.
2. Extract the contents of the .zip file.
3. Open the extracted files in Open Stage Control.

This method should allow you to access the examples without encountering the syntax error. 

For more examples, visit the GitHub repository: [jean-emmanuel/open-stage-control-examples](https://github.com/jean-emmanuel/open-stage-control-examples).

# Text Widget - Target Configuration

## Problem Description
Users may want to configure different send and receive ports for widgets (such as rotary and text) in Open Stage Control. However, it appears that the "target" value only affects outgoing messages and does not allow for separate receiving ports. Additionally, there are questions regarding the appropriate use of the target value in text widgets and the possibility of using multiple OSC receiving ports.

## Solution
1. **Understanding the Target Property**:
   - The target property determines the destination for messages sent by widgets. It does not affect how widgets receive OSC messages. To receive OSC messages, you do not need to set a specific target for the widget.

2. **Setting the Widget Address**:
   - For receiving OSC messages, simply set the widget's address to the desired OSC path, such as:
     ```
     /fxparam/1/name
     ```
   - If using a variable, ensure it resolves correctly:
     ```
     /fxparam/@{parent.variables.n}/name
     ```

3. **Configuring the OSC Launcher**:
   - Ensure that the OSC Launcher is set to the correct port (e.g., 9010) for receiving messages. This is necessary for the widget to receive messages sent to that port.

4. **Sending to Multiple Targets**:
   - You can send messages to multiple targets using the target property or scripting. However, there is only one receiving port for OSC messages when using the UDP protocol.

5. **Using Multiple OSC APIs**:
   - If you need to use different OSC APIs (e.g., Reaper's built-in OSC API and the Reaper CSI extension), you can configure both APIs to send messages to the same receiving port. This allows you to avoid rewriting the entire OSC template.

6. **MIDI Ports**:
   - Unlike OSC, widgets can be set to receive from multiple MIDI ports by specifying them in an array format, such as:
     ```
     ['midi:a', 'midi:b']
     ```

By following these guidelines, you can effectively manage OSC message sending and receiving in Open Stage Control. 

[Attachment: filename.ext] (attachment reference missing)

# Button to Zero Out Another Widget Without Sending a Message

## Problem Description
The goal is to create a button that resets an XY pad to its center position without sending any messages during the reset process. Additionally, there is a requirement to reset the XY pad when a tab is clicked, while ensuring that the reset does not trigger any messages.

## Solution
To achieve the desired functionality, you can use the `set()` function with the last optional argument set to `{send: false}`. This prevents messages from being sent when the XY pad is reset.

### For the Button:
Use the following code in the button's script:
```javascript
set("xy_1", [0, 0], {send: false});
```

### For the Tab:
To reset the XY pad when a tab is clicked, you need to use the script property of the tab's parent. Here’s an example of how to monitor which tab is opened and reset the XY pads accordingly:
```javascript
if (value == 0) {
  set("xy_1", [0, 0], {send: false});
} else if (value == 1) {
  set("xy_2", [0, 0], {send: false});
}
```

### Multiple Arguments:
To reset multiple XY pads, you can either separate the statements with a semicolon or place them on new lines:
```javascript
set("xy_1", [0, 0], {send: false});
set("xy_2", [0, 0], {send: false});
```
or
```javascript
set("xy_1", [0, 0], {send: false}); set("xy_2", [0, 0], {send: false});
```

This approach ensures that both XY pads are reset without sending any messages during the process. 

[Attachment: filename.ext] (attachment reference missing)

# Using Buttons to Navigate Knob Steps in Open Stage Control

## Problem Description
The goal is to create two buttons that allow a user to navigate through the steps of a knob in Open Stage Control. The knob has a predefined set of values (e.g., [0, 12, 24, 36, 48, 60, 72, 86, 98, 110, 122]) and the user wants to increment or decrement the knob's value using these buttons.

## Solution
To implement this functionality, you can use a variable to keep track of the current index of the knob's steps. The following JavaScript syntax can be used to achieve this:

1. Define the steps and the current index:
   ```javascript
   const steps = [0, 12, 24, 36, 48, 60, 72, 86, 98, 110, 122];
   let currentIndex = 0; // Initialize the current index
   ```

2. Create functions to increment and decrement the index:
   ```javascript
   function incrementIndex() {
       if (currentIndex < steps.length - 1) {
           currentIndex++;
       }
       return steps[currentIndex]; // Returns the next step value
   }

   function decrementIndex() {
       if (currentIndex > 0) {
           currentIndex--;
       }
       return steps[currentIndex]; // Returns the previous step value
   }
   ```

3. Assign these functions to the buttons in your Open Stage Control interface.

### Example of Button Configuration
You can configure the buttons in your Open Stage Control JSON file as follows:
```json
{
    "type": "button",
    "action": "set",
    "value": "incrementIndex()",
    "label": "Next"
},
{
    "type": "button",
    "action": "set",
    "value": "decrementIndex()",
    "label": "Previous"
}
```

### Step Labels
If you want to display step labels instead of numeric values on the knob, you can use the following syntax within the knob's range:
```json
{
  "0%": { "C-2": 0 },
  "10%": { "C-1": 12 },
  "20%": { "C0": 24 },
  "30%": { "C1": 36 },
  "40%": { "C2": 48 },
  "50%": { "C3": 60 },
  "60%": { "C4": 72 },
  "70%": { "C5": 84 },
  "80%": { "C6": 96 },
  "90%": { "C7": 108 },
  "100%": { "C8": 120 }
}
```

This configuration allows the knob to display musical note labels corresponding to the numeric values. 

For further reference, you can check the attached examples:
- [Attachment: octave-buttons.json]
- [Attachment: octave-buttons&knob.json]

[Attachment: xOdyjxWX0gb7zISxJIQTz79IN9P.json]

[Attachment: e1U8Z76ZbUMSLkgnPs0KmsCLPjM.json]

# State Widget Resets After Reopening the App

The State Widget in Open Stage Control does not retain saved parameters after closing and reopening the application, leading to the loss of presets. Users are seeking a method to save the widget's state permanently, similar to the functionality of the State in the Side Bar.

## Solution

To address this issue, the following solutions have been confirmed:

1. **State File Loading**: You can set the server's `state` option to load a state file automatically when opening the session. This will help retain the widget's parameters.

2. **Upcoming Features**: In version 1 of Open Stage Control, the following enhancements will be implemented:
   - Functions for saving and loading state will be added to scripts.
   - Functions for storing per-client data that persists after refresh or close will be included.
   - Quick save/load options from the menu will also persist after refresh or close, although they can be cleared with the browser's cache.

These improvements will facilitate the quick recall of widget parameters during live performances, enhancing the usability of the State Widget.

# Button to Have Another Button Send Out Message

**Problem Description:**
The goal is to configure one toggle button (Button A) to trigger another toggle button (Button B) to send out its MIDI message when Button A is in the "on" state. Both buttons are set up on different ports, and there was confusion regarding the correct structure of the MIDI control message.

**Solution:**
To achieve this, ensure that the script for Button A correctly sends a MIDI control message with the required three values: channel, control number, and control value. Here is a corrected example of the script for Button A:

```javascript
if (value == 1) {
    send('midi:DT', '/control', 1, 84); // Send message from Button B
    send('midi:PORT', '/control', 1, 86); // Send message from Button B
}
```

Make sure to replace `'midi:DT'` and `'midi:PORT'` with the actual MIDI ports you are using, and adjust the control numbers (84 and 86) as needed for your specific setup.

# Recalling Values of Buttons with Shift Functionality

## Problem Description
A user is trying to implement a system with four buttons that behave differently based on the state of a Shift button. When the Shift button is off, the buttons act as switches, and when it is on, they act as toggle buttons. The user needs to recall the previous states of the buttons before the Shift button is toggled, but is encountering issues with setting the values back correctly.

## Solution
To manage the state of multiple widgets effectively, use the `stateGet` and `stateSet` functions. Here’s how to implement this:

1. **Saving the State**: When the Shift button is toggled on, save the current state of the buttons using `stateGet`.
   ```javascript
   var state = stateGet(["b1_Qpistes", "b2_fQ", "b3_Eq", "b4_Midi"]);
   ```

2. **Recalling the State**: When the Shift button is toggled off, recall the saved state using `stateSet`.
   ```javascript
   stateSet(state);
   ```

### Example Implementation
- **Get Button Script**:
   ```javascript
   var état = stateGet(["b1", "b2", "b3", "b4"]);
   console.log(état);
   ```

- **Set Button Script**:
   ```javascript
   stateSet(état);
   ```

### Important Notes
- Variables defined in one script are not accessible in another due to JavaScript's scope rules. To share data between widgets:
  - Use a variable widget to hold the state.
  - Utilize `setVar()` and `getVar()` to store and retrieve values in the widget's custom variables.
  
- Example of using `setVar()` and `getVar()`:
   - **Save Button**:
     ```javascript
     var state = stateGet(["b1", "b2", "b3", "b4"]);
     setVar('load_button', 'my_var', state);
     ```
   - **Load Button**:
     ```javascript
     var state = getVar('this', 'my_var');
     stateSet(state);
     ```

By following these guidelines, you can successfully manage the state of buttons in Open Stage Control. 

[Attachment: xtvEU4cyMGZxNC5eWJBYAmOnd7v.json]

[Attachment: kS4tiPcEgQWlXxaQoLfIAe06SNc.json]

[Attachment: x97P49LllIp1rgmmjW3PJ0C8W23.json]

# Switch and Knob Combination Configuration in Open Stage Control

## Problem Description
Users may encounter challenges when trying to create a switch and knob combination where the knob behaves differently based on the state of the switch. The desired functionality includes:
- The knob should not send any MIDI messages when the switch is off, but its value can still be adjusted.
- When the switch is on, the current knob value should be sent via MIDI.
- Rotating the knob should send MIDI messages only when the switch is on.
- The knob should retain its value when the switch is turned off, rather than resetting to zero.

## Solution
It is recommended to avoid linking matrices directly due to complexity. Instead, create a "template" widget that combines the button and knob logic. This template can then be duplicated using a clone matrix. 

### Steps:
1. **Create a Template Widget**: Design a widget that includes both the button (switch) and the knob. This widget should encapsulate the desired logic.
2. **Use Variables**: Ensure that the children of the template widget use variables that can be overridden by the matrix.
3. **Visibility Control**: If you want to hide the template widget, set its `visible` property to `false`. In the matrix properties, add `"visible": true` before the `"variable":` entry.

### Example File
For a practical implementation, refer to the provided example file: [Attachment: ButtonKnobCombo.json]. 

This approach simplifies the logic and enhances usability, making it easier to manage the switch and knob interactions effectively.

[Attachment: 7mURfP0KYX66Cys3tBDkY6RFfL.json]

# Switch Doesn't Send 0

When using a switch in Open Stage Control, users may encounter an issue where the value does not reset to 0 when switching between buttons. Instead, the value remains at 127.

## Solution

To achieve the desired functionality of sending different on/off values for each button in a switch, you can utilize a script to manage the state of the switch. Here’s a recommended approach:

1. **Use the following script** within the switch's configuration:
   ```javascript
   if (locals.previous) {
     // Send the last recorded value, replacing the last argument with 0
     var v = locals.previous;
     send('/address', 1, v[0], 0);
   }
   // Record the current value
   locals.previous = value;
   ```

2. **Note**: This script allows the switch to send a value of 0 when switching to another button, which is not the default behavior of a switch.

3. **Alternative Approach**: If you prefer a simpler configuration, consider using buttons instead of a switch. Configure the buttons in push mode to send 127 when pressed and 0 when released. For a toggle effect, set the buttons to toggle mode.

For reference, you can find an example configuration file for buttons here: [Attachment: notesOnOff.json]. 

For more information on sending MIDI note messages, refer to the documentation: [Open Stage Control MIDI Documentation](https://openstagecontrol.ammd.net/docs/midi/midi-messages/). 

Additionally, an example of a switch that sends control change messages is available here: [Attachment: mvjVNaECj970h9YZYWonuW81PtA.json].

# Responsive Layout with Strip Widget Replacement

## Problem Description
Users are seeking a way to create a responsive layout with buttons that adapt to screen size while sending OSC signals. The previous "strip" widget has been removed, and users are looking for alternatives to achieve similar functionality.

## Solution
The "strip" widget has been replaced with the panel's "vertical" and "horizontal" modes in version 1. To create a responsive layout, you can utilize the `gridTemplate` property. 

### Usage of `gridTemplate`
- When the mode is set to "grid", the `gridTemplate` property can be defined as:
  - A number (for easy column definition).
  - A string, following the CSS syntax described in the [CSS Grid documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout).

#### Example Syntax
To create a responsive grid, you can use:
```
grid-template-rows: repeat(auto-fill, 50px) / repeat(auto-fill, 150px);
```
This configuration will allow the layout to adapt to different screen sizes effectively.

For further customization, refer to the CSS Grid documentation for more options.

# OSC Virtual Keyboard Configuration

## Problem Description
Users are seeking guidance on how to configure the virtual keyboard in Open Stage Control (OSC) to sync with a synth keyboard. Key functionalities desired include:
- Sending MIDI notes from the OSC virtual keyboard to the synth.
- Reflecting key presses from the synth on the OSC virtual keyboard.
- Highlighting or coloring keys when pressed.
- Displaying chords based on multiple keys being played.

## Solution
To configure the OSC virtual keyboard to work with your synth, follow these steps:

1. **Set Up the Keyboard Widget:**
   - In the properties of the keyboard widget, configure the following:
     - **preArgs**: Set to `[1]` (or the desired MIDI channel).
     - **address**: Set to `/note`.
     - **target**: Set to `midi:your_configured_port` (replace with your actual MIDI port).

2. **MIDI Note Configuration:**
   - When keys are pressed, the widget will send messages formatted as:
     ```
     /note PREARG NOTE_NUMBER ON_OR_OFF_VALUE
     ```
   - Ensure that the velocity of the notes sent from the OSC keyboard is sufficient (e.g., set to `100`).

3. **Reflecting Synth Key Presses:**
   - To have the OSC keyboard reflect key presses from your synth, ensure that the synth sends MIDI events to the same MIDI port used by the OSC keyboard widget. The velocity of the incoming MIDI notes must match the "on" value set in the OSC keyboard properties.

4. **Highlighting Keys:**
   - To highlight or color keys when pressed, custom CSS can be applied, but there is no official method provided in the documentation.

5. **Handling Velocity:**
   - To make the OSC keyboard respond to any velocity from the synth, you can write a custom module that converts incoming values on the `/note` address to match the "on" value. Ensure that you do not filter the value `0`, as this would prevent keys from turning off.

6. **Custom Module Implementation:**
   - The custom module should be added as an additional file, not within the widget's script function. Refer to the examples in the Open Stage Control documentation for guidance on writing this module.

For further reference, consult the documentation on MIDI configuration in Open Stage Control and explore the examples provided for custom modules. 

[Attachment: Capture_2021_01_11_11_00_21_192]

# Assigning Specific Values to Each Clone in a Matrix Using Another Widget

## Problem Description
The goal is to assign specific values to each clone in a matrix based on the values provided by another widget. For instance, if the other widget outputs an array like `[1, 3, 4, 5]`, each clone should receive these values for the property `n`.

## Solution
To achieve this, modify the `n` property in the matrix widget's configuration as follows:

```json
{
  "widgetId": "track_strip",
  "props": {
    "variables": {
      "n": JS{
        var values = @{other_widget_id} || []; // Replace with the actual ID of the other widget
        return values[$];
      }
    }, 
    "visible": true
  }
}
```

This JavaScript code retrieves the array from the specified widget and assigns the corresponding value to each clone based on its index.

For handling values in a multixy widget, the following code can be used:

```javascript
JS{
var values = @{patch_multi_result_track_index} || []; // Replace with the actual ID of the multixy widget

var result = values.flatMap(value => [
    `OSC{/track/${value}/x}`, 
    `OSC{/track/${value}/y}`
]);

return `[${result.join(', ')}]`;
}
```

However, note that the OSC{} syntax cannot be dynamically composed in this manner. For more complex requirements, consider writing a custom module to handle the logic appropriately.

# Sending OSC Arguments via CLI or WebSocket

**Problem Description:**
The user inquired about the possibility of connecting to OSC using a WebSocket or CLI to send commands, specifically mentioning the use of `oscInFilter()` to listen for messages.

**Solution:**
It is not possible to see messages sent via WebSocket in the `oscInFilter` function. However, you can create your own WebSocket client within a custom module to facilitate communication. It is recommended to use a different port for the WebSocket to prevent interference with the server-client WebSocket.

Example code for creating a WebSocket client:
```javascript
const ws = new WebSocket("ws://127.0.0.1:8080");

// Send a message to the server
ws.send({ address, args, host, port });

// Log the message received from the server
ws.onmessage = (event) => {
    console.log(event.data);
}
```

# Dynamically Change Matrix Quantity

**Problem Description:**
The user needed to dynamically change the quantity of a matrix based on a configuration. Initial attempts using `props.quantity` were unsuccessful.

**Solution:**
To dynamically set the matrix quantity, use the following code in the quantity property:

```javascript
var json = JSON.parse(@{txtEffectConfig})
const effectsArray = json.C.split(',');
return effectsArray.length
```

This code parses the configuration, splits the relevant data into an array, and returns the length of that array, effectively setting the matrix quantity based on the number of elements.

# Don't Make Function Within a Loop

## Problem Description
When attempting to automate the process of generating strings by combining elements from two arrays, a warning is encountered: "Don't make a function within a loop." This warning arises when using the `map()` function inside a loop.

## Solution
To avoid the warning while still achieving the desired functionality, declare the mapping function outside of the loop. Here’s how to implement this:

```javascript
function mapping(el, ind) {
  return Pistes[i] + indexPistes[i][ind];
}

for (var i = 0; i < indexPistes.length; i++) {
  var distrib_id = Array(indexPistes[i].length).fill(0).map(mapping);
}
```

This approach ensures that the function is defined only once, preventing the warning while maintaining the intended automation of string generation.

# Custom Properties for Matrix Widgets

**Problem:**  
How to specify the `props.steps` property for a specific knob in a matrix widget.

**Solution:**  
To access the `steps` property of a specified knob in a matrix, use the following methods:

1. **To read the property:**
   - Use the syntax:  
     ``` 
     @{matrix_id/1.steps} 
     ```
   - In a script, use:  
     ``` 
     getProp('matrix_id/1', 'steps') 
     ```

2. **To define the property:**  
   Use the `props` property in JavaScript as follows:
   ```javascript
   var props = {};
   props.steps = 5; // Default number of steps

   // Optionally set a different number of steps for the 4th knob
   if ($ == 3) props.steps = 10;

   return props;
   ```

# Understanding Floats in Open Stage Control

## Problem Description
When sending long float values to Open Stage Control (OSC), the values may not display correctly in a text widget. Increasing the decimal count does not seem to affect the display, leading to confusion about the handling of float values.

## Solution
To ensure that the decimal settings are applied correctly in the text widget:
1. **New Value Requirement**: Changes to the `decimals` property will only take effect when the widget receives a new value. Make sure to send a new float value after adjusting the decimal count.
2. **Widget Addressing**: You do not need to use an OSC{} block for the text widget, as it has its own address for receiving values.
3. **Valid Number Format**: Ensure that the value being sent can be parsed as a number. For example, "1.2 1.2" is not a valid number and will not apply the decimal settings.

By following these guidelines, you should be able to display long floats correctly in your text widget.

# Preset/Snapshot

## Problem Description
The user wants to create preset buttons that capture the entire state of their GUI, which includes multiple buttons with various settings. Additionally, they seek a method to layer a preset button beneath an existing button while ensuring both buttons can respond to interactions.

## Solution
To implement preset functionality and manage button interactions, follow these steps:

1. **Saving and Loading States**:
   - Use a button to trigger the saving of the entire scene state to a file. This can be done through the editor.
   - Create another button to load the saved state from the file.
   - Refer to the functions mentioned by **jean-emmanuel** for detailed instructions on saving and loading states.

2. **Layering Buttons**:
   - It is not possible for one event to trigger two different widgets directly. Instead, consider the following approaches:
     - **Linking Widgets**: Use the `linkId` property to link the preset button to the existing button.
     - **Scripting**: Write a script that activates both buttons when one is pressed. This can be done by making the visible button trigger the action of the invisible preset button.

3. **Custom Module**:
   - For more complex interactions, consider creating a custom module that allows a single button click to trigger multiple actions.

By following these guidelines, you can effectively manage presets and button interactions in Open Stage Control. 

[Attachment: filename.ext] (attachment reference missing)

# Using a Custom Image as a Fader Cap

**Problem Description:**
Users have expressed interest in using a personal image as a fader cap in Open Stage Control. While attempts to achieve this using CSS transformations have been made, performance issues arise on less powerful devices, such as tablets.

**Solution:**
Currently, Open Stage Control does not support the direct replacement of the canvas knob of a fader with a personal image. However, users can explore the possibility of using SVG for custom designs. For further guidance, refer to the following resources:
- [GitHub Issue 429](https://github.com/jean-emmanuel/open-stage-control/issues/429#issuecomment-440260251)
- [GitHub Issue 64](https://github.com/jean-emmanuel/open-stage-control/issues/64#issuecomment-365208322)

[Attachment: filename.ext] (attachment reference missing)

# Changing Widget Values Without Sending MIDI Messages

## Problem Description
In Open Stage Control v0.49.12, there is a requirement to change the value of toggle widgets using a script without sending MIDI messages. Specifically, when using "Open All" and "Close All" buttons to control multiple toggle widgets, the goal is to prevent MIDI messages from being sent when the toggles are modified programmatically.

## Solution
To achieve this, you can utilize an input widget to manage the bypass state of the toggle widgets. Here’s how to implement it:

1. Create an input widget to serve as the bypass state.
2. Use the input widget in the toggles' property with the syntax `@{input_id}`.
3. Before changing the toggle values, set the input widget to true to activate the bypass.
4. Change the toggle values as needed.
5. After the changes, set the input widget back to false to deactivate the bypass.

Here is an example code snippet:

```javascript
set('input_id', true) // Activate bypass
set('woodwinds', 127)
set('brass', 127)
set('keys', 127)
set('input_id', false) // Deactivate bypass
```

This method ensures that the toggles only send MIDI messages when they are manually activated or deactivated by the user.

# Accessing Child Index and Touch State in Matrix Properties

**Problem:**
Users may want to retrieve the index and touch state of child elements directly from matrix properties in Open Stage Control, rather than using script fields.

**Solution:**
You can achieve this by using template literals within the `onTouch` property of the matrix. Here’s an example of how to implement it:

```javascript
p.onTouch = `console.log(${$}, event.type)`;
```

This approach allows you to log the index and touch state directly when a child element is interacted with.

# Load a JSON File as an Argument in a Linux Script

## Problem Description
A user encountered an issue with a zsh script that successfully loads a JSON file when the file path is hardcoded but fails to do so when the file name is provided as an argument (`$1`).

## Solution
The following revised script correctly checks for the existence of the JSON file passed as an argument and loads it into Open Stage Control:

```zsh
#!/usr/bin/zsh
# Source nvm
. ~/.nvm/nvm.sh

# Use Node.js version 16 as OSC is compatible with this version
nvm use 16.19.0

# Check the file to load
echo "Fichier à charger $1"

FILE=${1}

if test -f "$FILE"; then
    echo "$FILE exists."
else
    echo "$FILE does not exist."
    exit 1
fi

# Navigate to the correct directory
cd ~/audio/audio-code

# Launch Open Stage Control
node ~/audio/openStageControl/app \
--send midi:APC \
--debug \
--port 8081 \
--midi sysex list APC:4,4 port01:1,1 \
--custom-module OSC-scripts/APCkey25/myCustomModule.js \
--load $FILE
```

This script includes a check to confirm the file exists before attempting to load it, ensuring smoother execution.

# Using Multiple --midi Arguments in Command Line

## Problem Description
Users may encounter issues when attempting to start Open Stage Control with multiple MIDI routing configurations from the command line on Windows. Specifically, problems arise when using the `-midi` format, leading to the application not starting or MIDI devices not being recognized correctly.

## Solution
To successfully run Open Stage Control with multiple MIDI arguments from the command line, follow these steps:

1. Use a double dash (`--`) followed by a space before the options to avoid issues with colons in command line arguments. The command should look like this:
   ```
   open-stage-control.exe -- -s 192.168.2.200:7001 -m sysex OSC:1,2 APC:2,3 -d
   ```

2. For better reliability, especially when dealing with MIDI device changes, use device names instead of port numbers. For example:
   ```
   open-stage-control.exe -- -m "APC:APC mini m2,APC mini mk2"
   ```

By following these guidelines, MIDI devices should be properly recognized, and the application should start as expected. 

[Attachment: image.png]

# Specifying Session File in URL for Open Stage Control

**Problem Description:**
Users want to open different session files in Open Stage Control through specific URLs, allowing for customized window sizes and positions for each session. The goal is to avoid using the default session and instead load specific session files based on the URL parameters.

**Solution:**
You can achieve this by utilizing the client URL option with a custom module. Below is a code snippet that demonstrates how to set this up:

```javascript
var sessions = {
    'clientA': 'path/to/a.json', // for client loading "http://server:port?id=clientA"
    'clientB': 'path/to/b.json'  // for client loading "http://server:port?id=clientB"
}

app.on("open", (data, client) => {
    if (sessions[client.id]) {
        receive('/SESSION/OPEN', sessions[client.id], {clientId: client.id});
    }
});
```

In this setup:
- Replace `'path/to/a.json'` and `'path/to/b.json'` with the actual paths to your session files.
- Use the URL format `http://server:port?id=clientA` or `http://server:port?id=clientB` to open the respective sessions.

This method allows you to open multiple OSC client windows with different session files, each configured with its own size and location as specified in the desktop shortcuts.

# MCU Incoming Messages and VU Meters in Open Stage Control

## Problem Description
Users have reported receiving continuous incoming messages when using the Mackie Control Universal (MCU) protocol with Open Stage Control. Specifically, there are questions regarding the nature of these messages and how to utilize them effectively, particularly for visualizing VU meter values.

## Solution
The continuous incoming messages are part of the MCU protocol, specifically for sending VU meter values. To utilize this information for OSC (Open Sound Control), reference the MCU implementation in the Open Stage Control GitHub repository for guidance on handling these messages.

For further details, you can view the MCU code here: [Attachment: mcu.js].

# Syncing MIDI Feedback in Open Stage Control with DAW Volume Faders

**Problem Description:**
Users want to synchronize a fader in Open Stage Control with a corresponding fader in their Digital Audio Workstation (DAW) using MIDI feedback. The goal is to have the fader in Open Stage Control reflect the current value set in the DAW when adjusted.

**Solution:**
To achieve MIDI feedback in Open Stage Control, follow these steps:

1. **Configure Open Stage Control:**
   - Ensure that the widget (e.g., a fader) is set to emit MIDI messages. This is done by setting the widget's target property to the appropriate MIDI port.

2. **Send MIDI Feedback from DAW:**
   - Configure your DAW to send the feedback value as a Control Change message (e.g., Control Change 100 on channel 1) to the MIDI input port defined in Open Stage Control's server configuration. The exact method for doing this will depend on the specific DAW you are using.

3. **Testing:**
   - After setting up, adjust the fader in your DAW and verify that the corresponding fader in Open Stage Control updates to reflect the current value.

By following these steps, you should be able to successfully sync the volume fader in Open Stage Control with your DAW.

[Attachment: youtube URL]

# Addressing Children of Matrix Widgets via Script

## Problem Description
Users may encounter difficulties in obtaining the index of the child widget being interacted with in a matrix widget using scripts. The standard `$` syntax does not function as expected since the child widgets are not part of the props field.

## Solution
To access the index of the child widget being interacted with, use the following script:

```javascript
value[getIndex(id)]
```

This method works effectively for first-level children of the matrix widget.

# Setting a Value at Start

When attempting to run a script to update the display of another widget (e.g., tempo) at the start, you may encounter an issue where the script does not execute due to the widget having no initial 'value', despite a default value being set.

## Solution

To work around this issue until it is resolved in a future release, you can wrap your code in a `setTimeout` function. This allows the code to execute after a brief delay, ensuring that the widget has a value before the script runs.

```javascript
setTimeout(() => {
  // your code here
});
```

This approach should enable the script to function correctly at startup.

# Matrix Not Returning 'widgets' Property

When attempting to retrieve the 'widgets' property from a matrix of cloned objects in Open Stage Control version 1.9.7 and 1.9.9, it returns an empty array.

## Solution

The 'widgets' property of a matrix widget is not accessible using `getProp` or `@{}` methods. This behavior is expected, although it is not clearly documented. To retrieve properties of individual clones within a matrix, you can use the `get()` or `getProp()` methods, provided you know the specific ID of the clone you want to access.

For example, if you have a matrix with a template widget ID of 'template' and you want to access the properties of the third clone, you would reference it as 'template/2' (IDs start from 0). The ID for each clone is dynamically assigned based on the matrix configuration.

To define the ID for cloned widgets, you can set it in the clone widget's properties. Here is a sample code snippet for setting the ID:

```javascript
var props = {};
props.id = #{ $ }; // Ensure there is no space before the dollar sign
return props;
```

This approach will allow you to access the properties of the clones effectively. 

For further assistance or to report bugs, please refer to the latest documentation or community support.

[Attachment: filename.ext]

# Sending Continuous Fader Data

**Problem Description:**
Users may encounter issues when attempting to implement a continuous update stream from a fader that behaves like an encoder, sending data while held in position. The initial approach using `setInterval` may lead to performance issues and OSC data transmission interruptions.

**Solution:**
To efficiently send continuous fader data without creating multiple interval callbacks, use the following script:

```javascript
if (value == 0) {
  clearInterval();
  locals.timerRunning = false;
} else if (!locals.timerRunning) {
  locals.timerRunning = true;
  setInterval(() => {
    send('/eos/active/wheel/1', get('this'));
  }, 100);
}
```

### Key Points:
- Avoid creating a new interval for each fader update.
- Use local variables to manage the timer state.
- Ensure that the interval is cleared when the fader value returns to zero.

This method allows for a more reliable and efficient data transmission from the fader. 

**Note:** If there are issues with the fader not snapping back when using the mouse wheel, consider implementing a delay (e.g., 100ms) for snapping back or disabling mouse wheel input if necessary.

# Dynamic Multi XY Points Number

## Problem Description
The user is attempting to dynamically set the names of bubbles in a multi XY control based on the length of a 2D array imported from an external .txt file. They need to adjust the points arguments to match the number of names corresponding to the array length.

## Solution
It is recommended to write a custom module to handle this task. A custom module can read the file and modify the session dynamically with a more efficient and organized approach. This method allows for better management of the code and simplifies the process of updating the points based on the array length.

# Adding Custom Fonts in Open Stage Control

## Problem Description
Users may want to add custom fonts to their Open Stage Control projects for enhanced visual design.

## Solution
To add a custom font, use the `@font-face` rule in your theme file. Here’s how to do it:

1. Define the font using `@font-face`:
   ```css
   @font-face {
     font-family: "Font Name";
     src: url("fontfile.tff"); /* Ensure the file is in the same directory as the session or theme file */
   }
   ```

2. Apply the font globally or to specific elements:
   - To apply the font everywhere (except code inputs/editors):
     ```css
     body {
       font-family: "Font Name";
     }
     ```

   - To apply the font to a specific class:
     ```css
     .some_class {
       font-family: "Font Name";
     }
     ```

This method allows you to customize the font for various elements, including buttons, by assigning different classes as needed.

# Customizing Widget Display with HTML Property

## Problem Description
Users have encountered issues with the new HTML property in Open Stage Control, specifically regarding the formatting of text displayed in widgets. Concerns include unwanted line breaks, inconsistent placement of HTML content relative to widgets, and the desire to add additional information above widgets.

## Solution
To achieve a more compact display and customize the appearance of text in widgets, follow these guidelines:

1. **Adjusting Line Breaks**: If you notice excessive line breaks when using `<br>`, modify the CSS `line-height` property to control spacing. For example:
   ```css
   .html {
     line-height: 10rem; 
   }
   ```

2. **Positioning HTML Content**: The placement of HTML content varies by widget type. For widgets like switches and buttons, HTML may appear above the widget. To position HTML content above the widget consistently, use the following CSS:
   ```css
   .html {
     position: absolute;
     line-height: 10rem;
     top: 10rem; /* Adjust as needed */
     left: 0;
     right: 0;
     text-align: center;
     pointer-events: none; /* Allows events to pass through */
   }
   ```

3. **Customizing Widget Labels**: To customize the label of a fader or knob, you can use HTML tags directly in the label property. For example:
   ```html
   <h3 style="color:red;text-align:center;" title="tooltip">GAIN</h3>
   ```

For more examples and advanced customization, refer to general HTML/CSS resources available online. 

[Attachment: image.png]

# Toggle Button LED Property in Open Stage Control v1

**Problem Description**  
In Open Stage Control version 0, toggle buttons had an LED property that could be toggled on or off. Users are seeking guidance on how to replicate this feature in version 1.

**Solution**  
The LED property has been removed in version 1. Instead, users can customize the appearance of toggle buttons using HTML and CSS properties. 

For reference, an example configuration is provided in the attached file:

[Attachment: xfqt7gPjmQc8Dha14w0G9vp44i6.json]

# Rename Multi XY Pads in Open Stage Control

## Problem Description
Users transitioning from Lemur to Open Stage Control may encounter difficulties in renaming and coloring the dots in multi XY pads. Additionally, there are challenges with text visibility and OSC message formatting for multiple tracks in Holophonix.

## Solution
### Renaming Dots
To rename the dots in a multi XY pad, use the `points` property with an array of names:
```json
[
  "Gilles",
  "Sophie",
  "Marlene"
]
```

### Coloring Dots
While Open Stage Control does not officially support individual dot coloring, you can achieve this using CSS. Assign custom styles to each pad:
```css
.pad-0 {
  --color-fill: pink;
  --color-stroke: pink;
}
.pad-1 {
  --color-fill: blue;
  --color-stroke: blue;
}
/* Add more pads as needed */
```

### Adjusting Font Size
To change the font size of the text on the dots, use the following CSS:
```css
:host {
  font-size: 150%;
}
```

### Handling Text Alpha
Currently, there is no dedicated property for text alpha. However, you can set it using:
```css
:host {
  --alpha-pips: 1; /* Note: This is not semantically correct */
}
```
Improvements are expected in future releases.

### Sending Multiple OSC Messages
To send multiple OSC messages for each track in Holophonix, use the widget's `onValue` script:
```javascript
for (var i = 0; i < value.length / 2; i++) {
  send('/track/' + (i + 1), value[i * 2], value[i * 2 + 1]);
}
```

### Text Positioning
Currently, text cannot be positioned above the dots. This feature may be considered for future updates.

For further assistance, please refer to the attached screenshots for visual context: 
[Attachment: Capture d’écran 2023-10-05 à 23.10.56]  
[Attachment: Capture d’écran 2023-10-06 à 21.58.56]  
[Attachment: Capture d’écran 2023-10-06 à 22.00.51]

# OSC Faders Not Working

**Problem Description:**
Users may encounter issues where OSC faders do not function correctly in various applications, despite other controls working as expected. This can occur even when OSC is recognized as a MIDI device on the computer.

**Solution:**
1. Verify the MIDI ports assigned to the OSC faders. Ensure they are set to the correct channel and Control Change (CC) numbers.
2. If issues persist, check if the MIDI ports have changed unexpectedly. Adjust the settings in Open Stage Control to match the correct MIDI port configuration.

By ensuring the MIDI ports are correctly configured, the OSC faders should operate as intended.

[Attachment: filename.ext]

# How to Configure Widgets to Listen for OSC Messages from a Specific IP

**Problem Description:**
Users may need to configure widgets in Open Stage Control to listen for OSC messages from specific IP addresses, especially when multiple machines on the network send identical OSC messages.

**Solution:**
To differentiate incoming OSC messages from various IP addresses, you can use a custom module. Implement the `oscInFilter` function, which allows you to specify the host and port information for filtering incoming messages.

For example, you can set up the `oscInFilter` function in your custom module to filter messages based on the desired IP address and port.

[Attachment: filename.ext]

# Resetting Toggles and Faders to Default Status

To reset one or several toggles or faders to their original status using a push button, you can utilize scripting or custom modules.

## Solution

1. **Using a Script**:
   - You can combine the `set()` and `getProp()` functions to reset a widget to its default value, provided the property has been set.
   - Example:
     ```javascript
     // Assuming 'widget' is your target widget
     widget.set(widget.getProp('default'));
     ```

2. **Using a Custom Module**:
   - A custom module can store and recall the state of widgets with remote control commands.
   - This method allows for more complex functionality, including sending OSC messages with the default values to reset parameters in a DAW.

3. **Using Switcher Widgets**:
   - Switcher widgets can save and recall the state of other widgets. You can leverage the `state` widget in this way to manage defaults.

For more detailed implementation, refer to the documentation on scripting and custom modules.

[Attachment: filename.ext]

# Sending a Text String Not Working

When attempting to control a media player via OSC commands, issues may arise when sending string arguments. Specifically, commands that require a text string (e.g., video file names) may not function as expected, while commands with integer arguments work correctly.

### Problem Description
The media player accepts OSC commands with both integer and string arguments. While integer commands (e.g., `/stop`, `/quit`) are functioning properly, sending string commands (e.g., `/video`, `/videoloop`) is problematic. The challenge lies in ensuring that the string commands are sent correctly, as they require a specific format.

### Solution
To successfully send string commands using Open Stage Control, follow these guidelines:

1. **Use the `preArgs` Property**:
   - Set the widget properties as follows:
     ```plaintext
     mode: tap
     address: /video
     preArgs: videofile
     on: name
     ```

2. **Use the `script` Property**:
   - Alternatively, you can use the script property to send the command:
     ```plaintext
     mode: tap
     script: send("/video", videofile)
     ```

3. **Ensure Correct Configuration**:
   - Make sure the button's mode is set correctly (e.g., `tap`).
   - The text string (e.g., `film-1.mp4`) should be provided in the button's input box.
   - Ensure that "Ignore Defaults" and "Bypass" in the OSC tab are set to `False`.
   - The Widget ID should not conflict with the OSC address; it is only used as the OSC address if the address property is not set.

By following these steps, you should be able to send string commands successfully to your media player.

# Scroll Control with a Push Button: Long Press / Short Press

## Problem Description
A user is attempting to implement a button that controls the scroll position of a panel with different behaviors based on the type of press:
- Short press cycles through three scroll positions (0, 100, 200).
- Long press toggles the panel's scroll state between true and false.

The user also inquires about modifying the scrolling sensitivity.

## Solution
To achieve the desired functionality, you can use the following approach:

1. **Button Script for Scroll Control**:
   Use the script below to manage the button's behavior based on the type of press:

   ```javascript
   if (value == 1) {
     locals.pressTimeout = setTimeout(() => {
       var scrollVar = getVar('panel_id', 'scroll');
       setVar('panel_id', 'scroll', !scrollVar);
     }, 500); // Long press action after 0.5 seconds
   } else {
     clearTimeout(locals.pressTimeout); // Cancel if button is released
     // Short press action
     if (locals.compteur === undefined) locals.compteur = 0;
     locals.compteur = (locals.compteur % 3) + 1; // Cycle through 1, 2, 3
     if (locals.compteur == 1) {
       setScroll('panel_2', 0, 0);
     } else if (locals.compteur == 2) {
       setScroll('panel_2', 0, 100);
     } else if (locals.compteur == 3) {
       setScroll('panel_2', 0, 200);
     }
   }
   ```

2. **Handling Scroll State**:
   To maintain the scroll position when the scroll state is set to false, you can modify the button's script to avoid resetting the scroll position. Instead, implement a mechanism to store the last scroll position and restore it when needed.

3. **Scrolling Sensitivity**:
   Unfortunately, modifying the scrolling sensitivity is not supported.

This implementation allows for a clear distinction between short and long presses, effectively managing the scroll position and state of the panel. 

[Attachment: filename.ext]

# Outputting OSC from a Menu Selection

## Problem Description
A user is inquiring about the best method to output OSC messages based on menu selections in Open Stage Control. They have a working solution but are seeking confirmation or a more efficient approach.

## Solution
Using the script property with the "send" function is recommended for outputting OSC messages from a menu selection. This method is considered more efficient and manageable.

# Saving and Loading Issues with the Status File

When saving a state file in Open Stage Control, users may encounter issues where the file saves successfully, but the data does not load correctly. This problem has been noted to occur particularly when parameters are not positioned at the bottom of the state file.

## Solution

To resolve this issue, ensure that:

1. **Parameter Positioning**: Place all parameters at the bottom of the state file. This positioning seems to facilitate successful loading of the saved data.
   
2. **Unique Widget IDs**: Verify that there are no multiple widgets with the same IDs. Conflicting IDs can lead to issues when saving and loading the state file.

By following these steps, the problem with loading data from the state file should be resolved effectively.

# Sending an OSC Message When a Hotkey is Pressed

## Problem Description
Users may want to send a specific OSC message when a key or key combination is pressed while the Open Stage Control UI is active.

## Solution
To achieve this, create a script widget and configure its properties as follows:

- **Event:** `keyboard`
- **Key Binding:** `ctrl + d`
- **Script:** `send('127.0.0.1:5555', '/address', 'value?')`

For more details, refer to the key binding syntax examples and scripting documentation.

# Changing a Variable at Root Level from Different Widgets

**Problem Description**  
Users may need to change a variable defined at the root level from different widgets, particularly when dealing with multiple buttons that reference dynamic values.

**Solution**  
To change a root-level variable from different widgets, you can use a script widget linked to the buttons that trigger the text update. Here’s a reliable approach:

1. **Define the variable**: Use the variable property to link it to another widget's value. For example:
   ```json
   {"x": "@{input_id}"}
   ```

2. **Access the variable**: Retrieve the variable with:
   - For root-level access: `@{root.variables.x}`
   - For direct children (e.g., main tabs): `@{parent.variables.x}`

3. **Use a script widget**: Create a script widget that executes whenever it receives a value. This script can define the text's value based on the button pressed. Here’s an example script:
   ```javascript
   JS{{
   // "script" property
   // executed whenever the script widget receives a value

   var val_nr = get("nr")
   var val_x = get("name_" + val_nr)

   set("text_id", val_nr + "\n" + val_x)
   }}
   ```

This method allows the buttons to change the variable value at the root level, and the text widget can reference that updated value accordingly.

# Aligning Labels Below Matrix Faders

## Problem Description
Users want to position labels below the faders in a matrix widget in Open Stage Control. Initial attempts using CSS properties did not yield the desired results.

## Solution
To align labels below the faders in a matrix widget, follow these steps:

1. **Matrix Properties Configuration**:
   Use the following JavaScript code to set up the matrix properties:

   ```javascript
   var props = {}
   var labels = ["O FX 1", "O FX 2", "A Level", "B Level", "Low Cut", "Res", "Pan", "Level"]
   var colors = ['orange', 'orange', 'blue', 'blue', 'aqua', 'aqua', 'grey', 'red']
   props.colorWidget = colors[$]
   props.design = "compact"
   props.html = labels[$]
   props.colorText = colors[$]
   props.lineWidth = '1'
   props.target = "midi:midictrl"
   props.address = "/control"
   props.preArgs = [1, 50 + $]
   return props
   ```

2. **CSS for Matrix**:
   Add the following CSS to position the labels correctly:

   ```css
   .html {
       position: absolute;
       top: 96%;
       left: 0;
       right: 0;
       text-align: center;
   }
   ```

3. **Adjust Padding**:
   In the matrix style settings, set the padding to 40% to ensure proper spacing.

4. **Using Clones for Flexibility**:
   For greater flexibility, consider using clones in your matrix setup. Create a panel with the ID `cntn_CLONE` and set `alphaStroke` and `padding` to 0. Use variables to define the text and default values for the faders. 

   Example for setting up clones:

   ```javascript
   var props = {}
   var labels = ["O FX 1", "O FX 2", "A Level", "B Level", "Low Cut", "Res", "Pan", "Level"]
   var colors = ['orange', 'orange', 'blue', 'blue', 'aqua', 'aqua', 'grey', 'red']
   props.widgetId = "cntn_CLONE"
   props.props = {
       "variables": { "text": labels[$], "n": $ + 1, "def": $ * 2 + 50, "color": colors[$] }
   }
   props.target = "midi:midictrl"
   props.address = "/control"
   props.preArgs = [1, 50 + $]
   return props
   ```

5. **Ensure MIDI Functionality**:
   Verify that the MIDI controllers are properly configured to send data. If there are issues, check that the `props.preArgs` is set correctly as follows:

   ```javascript
   props.preArgs = [1, 50 + $]
   ```

By following these steps, you should be able to successfully align labels below the faders in a matrix widget while maintaining MIDI functionality.

[Attachment: 49EiUk54b8eRWmQpvcohDefNbEB.json]

# Changing Button's Label Based on Value

## Problem Description
A user wants to set a button's label to "Jog 1" when its value is 0 and "Jog 2" when its value is 1.

## Solution
Use the following expression in the button's label property:

```javascript
#{@{this} == 1 ? "Jog 2" : "Jog 1"}
```

This syntax allows for dynamic labeling based on the button's value.

# Accessing Parent Variables in Open Stage Control

## Problem Description
Users may encounter difficulty converting the syntax `@{parent.variables.n}` into the appropriate `getProp()` format in Open Stage Control scripts.

## Solution
To access the variable `n` from the parent object using `getProp()`, you can use the following methods:

1. **Direct Access**:
   ```javascript
   var n = getProp("parent", "variables").n;
   ```

2. **Bracket Notation**:
   ```javascript
   var n = getProp("parent", "variables")["n"];
   ```

3. **Intermediate Variable**:
   ```javascript
   var v = getProp("parent", "variables");
   var n = v.n;
   ```

4. **Using Bracket Notation with Intermediate Variable**:
   ```javascript
   var v = getProp("parent", "variables");
   var n = v["n"];
   ```

Note that you cannot use `getProp("parent", "variables.n")` because `getProp()` requires a property name as the second argument, and `variables.n` is not a valid property name.

# Switch Widget: Iterating Over Switch Colors

## Problem Description
Users migrating from Lemur to Open Stage Control may want to set the colors of buttons in a switch widget dynamically. The challenge is to find a way to iterate over an array of color values and assign them to the switches, similar to the `$` iterator used in matrices.

## Solution
While there is no built-in iterator for switches like the `$` in matrices, you can achieve the desired effect using a JavaScript `for` loop. Below is a sample code snippet that demonstrates how to iterate over an array of colors and apply them to the switches:

```javascript
var colors = ["red", "blue", "cyan", "lime"];
var css = '';
for (var i = 0; i < colors.length; i++) {
  css += "value:nth-child(" + (i + 1) + "){--color-fill:" + colors[i] + ";}\n";
}
return css;
```

This code constructs a CSS string that sets the `--color-fill` property for each switch based on its position in the array. The returned string is automatically inserted into the CSS block of the widget.

Alternatively, you can use template literals for a cleaner syntax:

```javascript
var colors = ["red", "blue", "cyan", "lime"];
var css = '';
for (var i = 0; i < colors.length; i++) {
  css += `value:nth-child(${i + 1}){--color-fill:${colors[i]};}\n`;
}
return css;
```

Both methods will effectively apply the specified colors to the switches in the widget.

# Zoom Out on iPad

**Problem Description:**
Users may want to zoom out on an iPad similar to the Command + scroll functionality available on MacOS.

**Solution:**
Currently, there is no direct equivalent for zooming out on mobile devices. However, you can specify a zoom level when loading the app by using a client option in the URL. For example:

```
http://server-ip:8080?zoom=0.8
```

# Convert a Float to an Array and Specify an Index for Output

## Problem Description
The goal is to convert a single float value from a fader into an array format, allowing the user to specify which index of the array the float value should be sent to. For example, if the fader outputs a value of 0.62, the desired output format would be:

```
FLOAT(0.00) FLOAT(0.00) FLOAT(0.00) FLOAT(0.00) FLOAT(0.62)
```

This approach aims to simplify the node structure in Unreal Engine by using a specific array index for particular messages instead of relying on OSC addresses.

## Solution
To achieve this, set the fader's `preArgs` to `[0, 0, 0, 0]`. This configuration will prepend four zero arguments to the output, allowing the float value to be placed at the specified index.

Example configuration:
```json
{
  "preArgs": [0, 0, 0, 0]
}
```

This solution is straightforward and effectively meets the requirement of isolating messages using array indices.

# Scripting Simplification for Erase Fader

## Problem Description
The initial script for an 'erase' fader was inefficient and had issues with the fader spring not resetting reliably. The goal was to activate the erase function only when a track is armed, using a more elegant coding approach.

## Solution
The following optimized script uses a loop and avoids the use of the `@{}` syntax, improving efficiency and reliability:

```javascript
if (value >= 120) {
  for (var i = 1; i < 7; i++) {
    if (get("Looper" + i + "ControlsFxrow1Arm") == 1024) {
      var id = "Looper" + i + "Controlsaction_rowerase_panelErase";
      set(id, 127);
      set(id, 0);
    }
  }
}

if (value >= 121) {
  set("@{this.id}", 0);
}
```

This script checks if the fader value is above 120 and iterates through the looper controls to activate the erase function when the corresponding track is armed. The spring issue was resolved with this approach. 

For further assistance with the spring problem, a minimal session file may be required to reproduce the issue.

# Lag Problems and Possible Optimizations on Android Tablet

**Problem Description:**
Users have reported experiencing delayed response times when sending and receiving values on Android tablets, specifically with the Galaxy Tab A (2016). The issue persists even after disabling certain features like track colors and vu-meters. While performance is smooth on PCs and Macs connected to the same network, the tablet continues to lag. Attempts to adjust the framerate using the `?framerate=30` parameter have not yielded improvements.

**Solution:**
1. **Session Optimization:**
   - Simplify the session design by using a vertical layout for strip templates.
   - Limit the use of button widgets; consider using a single button widget per button and utilize OSC{} syntax along with HTML/CSS properties to manage additional content (e.g., play status, color, name).

2. **Browser Testing:**
   - Experiment with different browsers. For example, the "Brave" browser has shown more stable performance compared to Chrome.

3. **Performance Practices:**
   - While switching to a vertical layout may not drastically improve performance, it is recommended for better organization and simplicity.
   - Ensure that tabs are placed directly in the root container instead of nested within additional panels.

4. **Color Indication for Status:**
   - To set colors for queued and playing statuses, use the following HTML and CSS example:
     ```html
     <div class="playing"></div>
     <div class="queued"></div>
     ```
     ```css
     .playing, .queued {
       position: absolute;
       right: 5rem;
       top: 5rem;
       width: 10rem;
       height: 10rem;
       border-radius: 100%;
     }
     .playing {
       background: lime;
       opacity: #{ OSC{/playingAddress} ? 1 : 0.2 };
     }
     .queued {
       right: 20rem;
       background: orange;
       opacity: #{ OSC{/queuedAddress} ? 1 : 0.2 };
     }
     ```
   - This method requires knowledge of advanced syntax, HTML/CSS, and some JavaScript.

By following these recommendations, users may experience improved responsiveness and reduced lag on their Android tablets. 

[Attachment: Electrypnose Launch Controler 24channels.json]  
[Attachment: Electrypnose Launch Controler _ Custom 1.0.json]  
[Attachment: pA5v6dwd5IoYBrEOOtsevwl0GNA.json]  
[Attachment: kite6UeTapZRm3M7vzqXxqbAr8d.json]

[Attachment: neIeFIPPHedsiBtggOGTTT84kZR.json]

# Accessing JSON Data from a Widget Script

## Problem Description
When attempting to access a JSON variable loaded in a custom module from a widget script, users encounter syntax errors and issues retrieving specific data points from the JSON structure.

## Solution
Variables cannot be directly shared between custom modules and widget scripts in Open Stage Control, as they operate in separate contexts. To access JSON data from a widget script, follow these steps:

1. **Send JSON Data to Widget**: Use the `receive` function to send the JSON data from the custom module to a variable widget. This should be done when the session opens:
   ```javascript
   app.on('sessionOpened', (data, client) => {
       receive('/variable_widget_address', vepKeys, {clientId: client.id});
   });
   ```

2. **Define Variable Widget**: Create a variable widget to store the JSON data. For example, name it `variable_vepKeys`.

3. **Access JSON Data in Widget Script**: Use the `get` function to retrieve the JSON data in the widget script. Ensure you access the properties correctly:
   ```javascript
   var instrumentCode = parseInt(get("text_code", value));
   var vepKeys = get('variable_vepKeys');
   if (typeof vepKeys === 'string') vepKeys = JSON.parse(vepKeys);
   var s1 = vepKeys.keys[instrumentCode].s1;
   var e1 = vepKeys.keys[instrumentCode].e1;
   var sk1 = vepKeys.keys[instrumentCode].sk1;
   var ek1 = vepKeys.keys[instrumentCode].ek1;
   ```

4. **Debugging**: If you encounter errors, ensure that:
   - The `instrumentCode` is correctly parsed.
   - The JSON structure is valid and matches the expected format.

By following these steps, you should be able to successfully access and manipulate JSON data within your widget scripts.

[Attachment: mZl8XgU8WFfsBMP6o9YN6NyBAGJ.zip]

# Purpose of Clone Containers in Open Stage Control

Clone Containers are a feature in Open Stage Control designed to facilitate the duplication of UI elements while allowing for customization of parameters. 

## Problem Description
Users may wonder whether Clone Containers save resources when duplicating elements like faders or sliders across multiple pages, especially when these elements share the same MIDI assignments.

## Solution
Clone Containers do not save system resources; however, they significantly save time during setup. Clones allow for the overriding of properties from the original container, providing flexibility and customization for each instance. 

For practical examples and further understanding, refer to the following resources:
- [Attachment: example_link] (example link provided in the original context)
- [Attachment: https://gum.co/Ableton_OSC_Script] (example of a simple mixer using clones and variables)

# Parsing JSON Files with Custom Modules in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to parse JSON files within Open Stage Control, particularly regarding the location of the custom module file and how to utilize it effectively. The documentation lacks clarity on these aspects, leading to confusion.

## Solution
To parse JSON files using a custom module in Open Stage Control, follow these steps:

1. **Locate the Custom Module**: 
   - The custom module file (e.g., `custom_module.js`) should be specified in the command line when launching Open Stage Control. Use the `-c` or `--custom-module` option followed by the path to your JavaScript file.

2. **Example Code**:
   - Below is an example of how to load a JSON file within your custom module:
   ```javascript
   app.on('sessionOpened', (data, client) => {
       const config = loadJSON('../../../config.json'); // Adjust the path as necessary
       let err = "";
       try {
           const compo = config.compositions;
           err = ": JSON is okay";
       } catch (e) {
           err = ": JSON is malformed: " + e.message;
       }
       let switchObject = {};
       compo.forEach((p, i) => {
           switchObject[p.title] = i;
       });
       receive('/NOTIFY', 'hand', err); 
       receive('/EDIT', 'compoSwitch', {
           'values': switchObject
       }, {clientId: client.id});
   });
   ```
   - This code attempts to load a JSON file and includes error handling to notify if the JSON is malformed.

3. **Dynamic Loading**: 
   - Currently, there is no built-in method to dynamically load custom modules during a session. You would need to implement this logic within your custom module itself.

4. **Caution**: 
   - Be aware that custom modules can access the file system, so ensure you understand the code you are using, especially if sourced from the internet.

For further details, refer to the documentation or community discussions for additional examples and best practices.

[Attachment: example_code.js]

# Matrix Usage of Switch in Open Stage Control

## Problem Description
When using a matrix configured as buttons, two issues arise:
1. In "push" mode, pressing a button sends the message twice, despite attempts to set `props.off = null`.
2. Changing the category with a menu widget causes the `props(jjs script)` to run for every matrix element, leading to multiple unwanted messages being sent when switching categories.

## Solution
1. To prevent double messaging in "push" mode, use the "tap" mode instead. This mode prevents sending a message on release, which can help mitigate the issue of duplicate messages.
   
2. Regarding the execution of `props(jjs script)` for each matrix element, it is important to note that this behavior is expected, as the script is evaluated for each child element. To avoid unnecessary message sending when changing categories, consider managing the decision to send messages directly within the custom module instead of relying on the matrix properties. This can help streamline the process and reduce unwanted outputs.

For further reference on advanced syntax and scoped variables, consult the relevant sections in the Open Stage Control documentation. 

[Attachment: clones_and_variables.json]

# How to Reach a Matrix Widget Child Inside a Closed Modal

When working with a modal containing a matrix of buttons (e.g., with IDs "f1", "f2", "f3", "f4"), you may want to set the state of a button (e.g., "f4") from outside the modal. 

## Problem
You need to set the value of a button inside a closed modal, but using methods like `set("modal_id.f4", 1)` does not yield the desired results. 

## Solution
To set the value of a button inside a modal, you can directly reference the button by its ID. For example, if you want to set the button with ID "f4" to 1, use the following command:

```javascript
set("f4", 1)
```

This approach allows you to manipulate the button state without needing to reference the modal directly.

# Scripting Points' Positions within a Multixy

## Problem Description
Users may want to set the positions of points in a multixy widget at specific locations when opening a session.

## Solution
To set the points' positions, use the “default” property with the following format:

```javascript
[x1, y1, x2, y2, etc]
```

Note that setting the default positions will not send a matching OSC message to the widget’s target.

# No Window Opens When Clicking "Start"

**Problem Description:**
When launching Open Stage Control on Windows and clicking the "start" button, no window opens to display the list of recent sessions. Restarting the computer does not resolve the issue. The user noted that the send address and the name of the custom module are highlighted in blue, but no debug messages appear.

**Solution:**
The issue was identified as being related to a typo in the custom module. Removing the path from the settings allowed the session opening window to appear. Ensure that the custom module is correctly configured and free of typos to resolve this issue.

[Attachment: image.png]

# Matrix Children Inherited Opacity

When using the CSS `opacity` property on a parent element, all child elements inherit this transparency, which can lead to undesired effects, such as buttons appearing semi-transparent when the parent has a background opacity set.

## Solution

To prevent child elements from inheriting the opacity of the parent, use RGBA color values for the background instead of the `opacity` property. For example, replace:

```css
background: linear-gradient(to bottom, grey, black);
opacity: 0.8;
```

with:

```css
background: rgba(128, 128, 128, 0.8); /* Grey with 80% opacity */
```

This approach allows you to maintain the desired background transparency without affecting the opacity of the child elements, such as buttons.

# Setting the norelease Property for Push Buttons

**Problem:**  
The norelease property for push buttons is not easily found in the editor, leading to confusion about its configuration.

**Solution:**  
To set the norelease property for a push button, ensure that the "tap" mode is selected. This mode exposes the norelease property, allowing for proper configuration.

# Initial User Experience with Open Stage Control

## Problem Description
New users of Open Stage Control may find it unclear how to properly load and display widgets in their sessions. Specifically, there is confusion around the necessity of the "load" parameter in the server configuration, and the distinction between session files and state files. Users may expect that the server loads a session that is then shared with all clients, which is not the case.

## Solution
1. **Loading Sessions**: 
   - Clients can load different sessions independently. It is not mandatory for the server to load a session using the "load" parameter. Users can create and save a session on one device and then load it from the recent sessions menu on another device.
   - To ensure widgets display correctly, users should save their session, then load it on each client device. 

2. **Server Configuration**:
   - The minimum required options for server configuration are the `send` target and the `load` session. However, Open Stage Control can function with zero options specified. 
   - It is recommended to include a brief introductory note in the server configuration documentation to clarify that specifying `send` and `load` is essential, while other options are optional.

3. **Documentation Improvements**:
   - A "Getting Started" section should be added, including:
     - An introduction to the software.
     - A simplified server configuration guide.
     - A step-by-step demo to illustrate the architecture and usage of sessions versus states.
   - Clarification on the definition and purpose of state files should also be included in the documentation.

By implementing these suggestions, the onboarding process for new users can be significantly improved.

# Changing Background Image Dynamically

**Problem Description:**
Users may encounter difficulties when trying to change the background image of a panel dynamically based on slider values. Specifically, issues can arise when implementing conditional statements such as "else if" in the JavaScript code.

**Solution:**
To change the background dynamically based on slider values, ensure the syntax of your JavaScript code is correct. Here is a reliable example:

```javascript
if (@{foo} < 0.1) {
  return "background:lime;";
} else if (@{foo} < 0.5) {
  return "background:orange;";
} else {
  return "background:red;";
}
```

**Note:** Be mindful of spaces in your code, as they can lead to errors. For instance, ensure there is no space between "JS" and the opening curly bracket.

# Set Value to -1 After Updating Switch Widget Values

When dynamically loading values into a switch widget via OSC, the first value may be selected by default after the update. To leave the switch unselected, you can reset its value.

## Solution

To ensure the switch remains unselected after updating its values, send a value of `-1` (or any other value not defined in the switch's values) along with the message that updates the values. This will effectively reset the switch.

Make sure that the switch does not share the same ID as another widget in the session, as this could cause unintended synchronization.

[Attachment: dsYIlvKH2FwvPaFYmUNAsBD2rHV.json]

# Value of Fader Not Visible

Users have reported that the value of a fader is not visible in the beta versions of Open Stage Control on Linux Mint.

## Solution

The built-in input widgets have been removed in the beta versions. To display the value of a fader, you need to create a custom input widget and link it to the fader.

# If-Else Statements in Matrix Properties

## Problem Description
Users may encounter syntax errors when attempting to use if-else statements to set button labels in a matrix for alternating values (e.g., "S" for Solo and "B" for Bypass). The initial approach may involve variable assignments and return statements, which can lead to incorrect syntax.

## Solution
To correctly implement conditional logic for setting button labels in a matrix, use the following approaches:

### Simple Conditional Operator
You can use the conditional (ternary) operator directly within the JSON object:
```json
{
  "label": #{$ % 2 ? "B" : "S"}
}
```
This syntax eliminates the need for variable assignments and return statements.

### Using JS Block
Alternatively, you can define properties using a JavaScript block:
```javascript
JS{{
  var props = {};
  props.lineWidth = 4;
  props.colorWidget = $ % 2 ? "cyan" : "orange";
  props.label = $ % 2 ? "B" : "S";
  props.address = $ % 2 ? "/composition/layers/1/bypassed" : "/composition/layers/1/solo";
  return props;
}}
```

### Addressing Buttons in a Matrix
To address buttons correctly in a matrix where each layer has both a bypass and solo button, use the following logic:
```javascript
var number = Math.floor($ / 2) + 1; // Generates sequence: 1, 1, 2, 2, 3, 3, ...
var action = $ % 2 ? "bypass" : "solo"; 
props.address = "/example/" + number + "/" + action;
```

These methods provide reliable solutions for setting button labels and addresses in a matrix configuration.

# OSC 1.15.7 — Tab Widget Not Visible

**Problem Description:**
In Open Stage Control version 1.15.7, users may find that the "tab" widget is missing from the 'containers' widget menu, despite its presence in the documentation. This raises concerns about creating multiple 'pages' within the interface.

**Solution:**
The "tab" widget is still available but is not listed among the standard widgets. Instead, it can be accessed through the right-click drop-down menu. However, if you are unable to add tabs, ensure that your container does not already contain non-tab widgets. If it does, cut the existing widgets from the container before attempting to add a tab.

[Attachment: filename.ext]

# Hide Scrollbar but Still Allow Scrolling in Container

**Problem Description:**
The goal is to hide the scrollbar in a container while still allowing the content to be scrollable. A previous solution for a modal panel did not work for a standard container.

**Solution:**
You can achieve this by using the following CSS:

```css
inner {
  --scrollbar-size: 0;
  scrollbar-width: none; /* For Firefox */
}

/* For WebKit browsers (Chrome, Safari) */
inner::-webkit-scrollbar {
  display: none; /* Hides the scrollbar */
}
```

Note that compatibility may vary by browser, and CSS hacks may break with future updates. It is advisable to use the browser inspector (F12) for further customization if needed.

# Overlaying Matrix Objects with Transparent Background

**Problem Description**  
When overlaying matrix objects in Open Stage Control, the top matrix object has an opaque background, which prevents the underlying elements from being visible.

**Solution**  
To make the background of the top matrix object transparent, apply the following CSS selector:

```css
:host {
    background: none;
}
```

This will allow the top matrix to overlay without obscuring the elements beneath it.

# Adding an OSC Listener to CSS in a Keyboard Widget

## Problem Description
Users may encounter issues when trying to add an OSC listener to the CSS field of a keyboard widget, specifically when attempting to use a root key value sent from a custom module.

## Solution
To correctly implement an OSC listener in the CSS field, ensure the syntax is accurate. Here is the corrected JavaScript code:

```javascript
var css = '';
// Assuming `k` is the root note value received from OSC
var k = OSC{/rootKey/Value, , false};

css += ".key:nth-child(" + k + ") inner {background-color: #880000}";

return css;
```

Make sure to replace the incorrect brackets and string syntax to avoid errors.

# Variable Resolution Problems

In a large Open Stage Control template, an issue arises where knobs are not displaying correctly when their IDs are dynamically generated using `@{parent.variables...}`. Specifically, a knob intended to be shown as "FXKNOB_A_0" appears as only a few pixels in size when its ID is computed from a variable.

## Problem Description
The knob's ID and properties are computed correctly, but the knob displays incorrectly when using dynamic ID generation. Changing the ID to a static value resolves the issue. There are concerns about performance when using many `@{parent.variables...}` references.

## Solution
1. **Simplify Widget Linking**: The main issue stems from how widgets are linked. When a value is selected, it triggers extensive processing due to many widgets having their IDs dependent on this value. To improve performance, consider simplifying the UI and minimizing dynamic linking.

2. **Use OSC Syntax**: Instead of relying solely on dynamic properties, utilize the OSC syntax to modify widget properties. For example, to set a widget's `visible` property, use:
   ```javascript
   OSC{foo, false, true}
   ```
   This creates a listener on the OSC address `/widget_address/foo`, allowing you to control visibility through OSC messages.

3. **Custom Module for Property Changes**: You can send OSC messages from a custom module to modify properties like `visible`, `interaction`, and HTML properties. For example, to hide a knob with ID `FXKNOB_0`, you can send:
   ```javascript
   receive('/widget_address/foo', 1)
   ```

4. **Cloning Knobs**: If cloned knobs are still displaying incorrectly, ensure that their properties are being set correctly after cloning. If issues persist, consider revisiting the cloning logic or how properties are assigned post-cloning.

For further examples and details, refer to the documentation on custom modules and OSC syntax. 

[Attachment: OpenStageControl4reaper_18.json]  
[Attachment: hCvpub1Y4Nw5WzF0PETZ0PbgZnk.json]

[Attachment: wOiTg70yTGBK6Td54byVzZ6VDwT.json]

[Attachment: lU20Rd5bdhI5BcoWiJVE6RbElvu.js]

[Attachment: bQvuon1wEbf5BQ5HILlk7wT1mNd.json]

# Hide Element/Object Only on Server

**Problem Description:**
The user wants to hide an element or object on the server or touch tablet/screen side while keeping it visible in the host editor. This is specifically for script widgets to facilitate easier editing without the need to remember to hide them after editing.

**Solution:**
To achieve this, you can use CSS media queries based on the screen size or pointer capability. Here are two effective methods:

1. **Hide based on screen size:**
   ```css
   @media screen and (max-width: 1200px) {
       :host {
           display: none; /* Hide the widget if the window is smaller than 1200px */
       }
   }
   ```

2. **Hide based on touch capability:**
   ```css
   @media (pointer: coarse) {
       :host {
           display: none; /* Hide the widget if the device is touch-capable */
       }
   }
   ```

Additionally, consider placing all widgets in the same container or tab to streamline the editing process.

# Open File Access Limited to One Disk

**Problem Description:**
Users may encounter a situation where they can only access a specific disk (e.g., D:/) when attempting to open a session from disk in Open Stage Control. Clicking on the folder icon with two dots does not yield any response.

**Solution:**
This behavior occurs when the server's `remote-root` option is activated. To resolve this issue, ensure that the `remote-root` option is left empty, which allows access to all disks.

# Sending MIDI CCs from an XY Pad

## Problem Description
Users may encounter difficulties when trying to send different MIDI Control Change (CC) messages from the X and Y axes of an XY pad in Open Stage Control. Common errors include "MIDI: invalid address" when attempting to use the default settings of the XY pad.

## Solution
To successfully send MIDI CC messages from an XY pad, follow these approaches:

1. **Using Input Widgets**:
   - Set up two input widgets to send the desired MIDI control changes for the X and Y axes.
   - Reset the XY pad's OSC settings.
   - Configure each input's `value` property as follows:
     - For X-axis: `#{@{pads_id}[0]}`
     - For Y-axis: `#{@{pads_id}[1]}`
   - Here, `pads_id` is the ID of the XY pad. This configuration allows the inputs to listen for updates from the XY pad and send compliant OSC messages.

2. **Direct MIDI Sending**:
   - For a simpler approach, you can use the `onValue` event in the XY pad and input the following code:
     ```javascript
     send('midi:device_name', '/control', 1, 1, value[0])
     send('midi:device_name', '/control', 1, 11, value[1])
     ```
   - This will send CC1 and CC11 with values from the X and Y axes on channel 1.

3. **Alternative Syntax**:
   - You can also use the following syntax for accessing the values:
     - For X-axis: `@{pads_id.value.0}`
     - For Y-axis: `@{pads_id.value.1}`

These methods allow for effective MIDI communication from the XY pad, enabling users to customize their setups according to their needs. 

For further reference, please review the attached documentation for detailed examples and configurations. 

[Attachment: filename.ext]

# How to Show/Hide a Button Based on Another Button or Switch

## Problem Description
Users may want to show or hide a button in Open Stage Control when another button is clicked or based on the value of a switch.

## Solution
To toggle the visibility of a button when another button is clicked, you can use the following approach:

1. **Toggle Button Visibility**:
   - Use the `visible` property of the button you want to show/hide.
   - Set the `onClick` property of the toggle button to change the `visible` state of the target button.

   Example:
   ```json
   {
     "type": "button",
     "name": "Toggle Button",
     "onClick": "buttonName.visible = !buttonName.visible"
   }
   ```

2. **Show/Hide Button Based on Switch Value**:
   - You can also control the visibility of a button based on the value of a switch.
   - Use a conditional expression to set the `visible` property of the button based on the switch's value.

   Example:
   ```json
   {
     "type": "button",
     "name": "Conditional Button",
     "visible": "switchName.value === 'myValue1' || switchName.value === 'myValue2'"
   }
   ```

This allows you to programmatically control the visibility of buttons based on interactions with other widgets. 

For further details, refer to the advanced syntax documentation: [Open Stage Control Documentation](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/).

# Invalid Address Error in Open Stage Control

## Problem Description
When using a matrix to switch visibility in Cubase, an "ERROR MIDI Invalid Address" message appears for each untriggered button. The specific address causing the error is formatted as `/matrix_insp/button_index`.

## Solution
To resolve the "Invalid Address" error, ensure that the address you are sending is valid and correctly formatted. Here is a refined version of the relevant code snippet:

```javascript
props.target = 'midi:OSC';
props.onValue = `
  var lastIndex = getVar('parent', 'Idx');

  if (lastIndex === undefined) {  
    send('/control', 1, (114 + getIndex('this')), 127); // opens inspector tab
  } else {
    // Additional logic for handling other cases
  }
`;
```

Make sure that the addresses you are trying to send exist and are correctly set up in your MIDI configuration. If you are dynamically generating addresses, verify that the generated address is valid and corresponds to an existing target in your setup. 

If the issue persists, check your MIDI device settings and ensure that all necessary connections are established.

# How to Perform Calculations with Inherited Variables in Open Stage Control

**Problem Description:**
Users may need to perform calculations using inherited variables within the `preArgs` property of a button in Open Stage Control. For example, a user wants to calculate a value based on a parent variable.

**Solution:**
You can perform calculations using the following methods:

1. Using the `#{}` syntax:
   ```json
   [
     2,
     #{@{parent.variables.n} + 16}
   ]
   ```

2. Using the `JS{}` syntax:
   ```javascript
   JS{
     return [2, @{parent.variables.n} + 16];
   }
   ```

Both methods will yield the desired result, allowing you to incorporate inherited variables into your calculations effectively.

# Understanding the `set()` Function in Open Stage Control

## Problem Description
Users may encounter issues when trying to use the `set()` function within the value of a button, particularly when using it in JS{{}} or #{} blocks.

## Solution
The `set()` function is only available in scripts, not within JS{{}} or #{} blocks. The first argument of the `set()` function must be a string, meaning that the widget ID should be enclosed in quotes or declared as a variable beforehand.

### Correct Usage Examples:
1. Using a string directly:
   ```javascript
   var value = 1;
   set('text_1', value);
   ```

2. Using a variable for the widget ID:
   ```javascript
   var value2 = 2;
   var widgetId = 'text_1';
   set(widgetId, value2);
   ```

# Issue with onTouch Event Not Sending Data

When using the `onTouch` and `onValue` events in the root tab, the following code was implemented:

```javascript
let mc  = getProp("this", "variables").mc;
if (value == 6) {
  send('/control', mc, 18, 127);
}
```

However, triggering the tab did not result in any data being sent.

## Solution

To resolve this issue, ensure that the widget has a target set for the MIDI port. The correct implementation should specify the MIDI port name in the `send` function. For example:

```javascript
if (value === 7) {
  send('midi:virtual_midi', '/control', 6, 80, 127);
}
```

Without specifying the MIDI port name, the `send` function will not work as intended.

# Syncing an XY Pad with a Mod Wheel in Open Stage Control

## Problem Description
Users want to synchronize an XY pad in Open Stage Control with a physical mod wheel, allowing both to respond to each other. The mod wheel operates in four directions: left/right for pitch bend and up/down for modulation (CC1) and program change (CC16).

## Solution
To mimic the mod wheel's messages with the XY pad, follow these steps:

1. **Configure the XY Pad:**
   - Set the `rangeX` and `rangeY` properties according to your needs.
   - Enable the `spring` property to allow the pad to return to the center when released.
   - Set the `default` property to `[0.5, 0.5]` if using default values for `rangeX` and `rangeY`.

2. **Script for MIDI Messaging:**
   Use the following script in the pad's script property to send the appropriate MIDI messages:
   ```javascript
   var x = value[0]; // X value from the pad
   var y = value[1]; // Y value from the pad

   send('midi:my_configured_port', '/control', CHANNEL, 1, x); // Modulation (CC1)
   send('midi:my_configured_port', '/control', CHANNEL, 16, y); // Program Change (CC16)
   ```

3. **Ensure Correct Data Types:**
   - Make sure that the channel numbers (1 and 16) are not enclosed in quotes, as they should be treated as numbers, not strings.

4. **Debugging:**
   If the setup does not work, check for any errors in the debug console and ensure that all settings are correctly applied.

By following these steps, the XY pad should effectively mimic the functionality of the mod wheel, allowing for synchronized control. 

[Attachment: Capture_2021_01_11_10_31_01_229]
[Attachment: Capture_2021_01_11_10_32_19_448]
[Attachment: Capture_2021_01_11_10_32_29_74]
[Attachment: Capture_2021_01_11_10_32_36_645]
[Attachment: Capture_2021_01_11_11_47_27_382]
[Attachment: Capture_2021_01_11_11_50_47_410]
[Attachment: Capture_2021_01_11_13_24_46_630]

# Switch Text on Button (On/Off)

## Problem Description
Users may want to change the text displayed on a button in Open Stage Control based on its state (e.g., "on" or "off"). 

## Solution
To dynamically change the button label based on its value, you can use advanced syntaxes in the label property. For example:

```javascript
#{@{this} == 1 ? "on" : "off"}
```

This syntax will display "on" if the button's value is `1`, and "off" otherwise. 

For further customization, you can replace the text values with any desired labels, such as "free sync" or others, following the same syntax structure.

# Saving and Loading States in Open Stage Control

## Problem Description
Users want to save and load states directly from the Open Stage Control editor without navigating through menus. They seek a method to implement this functionality, including options for saving states to local storage instead of the browser's cache.

## Solution
To save and load states directly in Open Stage Control, you can use the following scripts in the properties of button widgets:

### Saving State
1. Create a button widget and set its mode to `tap`.
2. In the button's script property, use the following code to save the current state:
   ```javascript
   var state = stateGet("root");
   storage.setItem("my_state", state);
   ```

### Loading State
1. Create another button widget and set its mode to `tap`.
2. In this button's script property, use the following code to load the saved state:
   ```javascript
   stateSet(storage.getItem("my_state"));
   ```

### Notes
- Replace `"root"` with the specific tab name if you want to save the state of a single tab instead of the entire root.
- To exclude certain widgets from being saved and recalled, you will need to implement additional logic in your scripts.
- Saving states to the local drive requires writing a custom module, as there is no official method to do this directly.

For further details on scripting, refer to the Open Stage Control documentation. 

[Attachment: filename.ext]

# Dynamic Use of Port Setting in Open Stage Control

## Problem Description
Users want to configure a single port number for OSC actions that can be applied across all widgets in the UI, both statically declared and those created via custom modules. The goal is to set this port in one location, such as a JSON config file, and have it automatically applied to all relevant widgets.

## Solution
To achieve dynamic port configuration, you can follow these steps:

1. **Create a Variable Widget**: 
   - Set up a variable widget to hold the desired port number.

2. **Define Widget Target**:
   - In the widget settings, define the target as `localhost:@{variable_id}` where `variable_id` is the ID of your variable widget.

3. **Feed the Variable from Custom Module**:
   - In your custom module, set the port value when the session is opened. Use the following code snippet:
     ```javascript
     var port = 5000; // or var port = require('config.js').port;
     app.on('sessionOpened', () => {
       receive('/variable_address', port);
     });
     ```

4. **Access Server Settings**:
   - You can access server settings using:
     ```javascript
     var midiports = settings.read('midi'); // For MIDI ports
     var portSetting = settings.read('send'); // For OSC send settings
     ```
   - Note that `settings` refers to the configuration settings defined in the server configuration.

By following these steps, you can dynamically manage the port number for OSC actions in Open Stage Control, allowing for a more streamlined and efficient setup. 

[Attachment: filename.ext]

# Activating axisLock in multixy with a Button

**Problem Description:**
Users want to activate the axisLock feature in the multixy control to restrict movement to one axis using a button press, similar to the Shift key functionality on a computer. This feature should work seamlessly on both desktop and iPad versions of the Open Stage Control app.

**Solution:**
To achieve this functionality, set the `axisLock` property to `auto` in the next version of Open Stage Control. This will allow the axis to lock according to the first movement detected.

Additionally, you can use a button's value to control the `axisLock` property. Implement this using advanced syntaxes to create a dedicated push button that activates the axisLock feature.

For further details, refer to the [Attachment: filename.ext].

# New Line in Matrix Label Sent from Custom Module

**Problem Description**  
When attempting to create a line break in a string sent from a custom module to a matrix widget using the line feed character (`\n`), the line break does not appear as expected. Instead, an additional backslash is added in the log output.

**Solution**  
The issue was caused by a conflict with the CSS `white-space` property. To resolve the problem, ensure that the CSS does not interfere with line breaks. Once the conflicting CSS was adjusted, the line breaks worked as intended.

# Understanding /EDIT/MERGE vs. /EDIT in Open Stage Control

## Problem Description
When dynamically adding widgets to a panel in Open Stage Control, there is confusion regarding the use of the `/EDIT` and `/EDIT/MERGE` commands. The goal is to add a new widget to an existing array of widgets without removing the current ones. The user initially believed that `/EDIT/MERGE` would allow for this, but it appears to overwrite the existing contents instead.

## Solution
The recommended approach for adding widgets without removing existing ones is to use the following steps:

1. **Retrieve the Current Widgets**: Use the `/GET` command to obtain the current widgets array from the panel.
2. **Modify the Array**: Create a new array that includes the existing widgets along with the new widget you wish to add.
3. **Update the Panel**: Use the `/EDIT` command to send the updated array back to the panel.

As for the distinction between `/EDIT/MERGE` and `/EDIT`, it has been noted that `/EDIT/MERGE` was intended to facilitate such use cases but has not performed as expected. It may be deprecated in the future to prevent further confusion.

For more detailed information, refer to the documentation or community discussions on this topic. 

[Attachment: filename.ext]

# Creating Custom Scripts in Open Stage Control

## Problem Description
A user needed a single widget in Open Stage Control (OSC) to control multiple OSC addresses simultaneously, specifically to adjust the brightness of two layers: `/d3/layer/Ada/brightness` and `/d3/layer/George/brightness`. The user sought guidance on creating custom scripts or modules due to a lack of JavaScript knowledge.

## Solution
To achieve the desired functionality, you can utilize the widget's `script` property to send values to multiple OSC addresses when the widget's value updates. Here is a sample script to implement this:

```javascript
send("/d3/layer/Ada/brightness", value)
send("/d3/layer/George/brightness", value)
```

Place this script in the `script` parameter under the “value” section of the widget. This will ensure that both addresses are controlled simultaneously when the widget's value changes. 

No additional tutorials or articles on creating custom scripts in OSC were identified. 

[Attachment: filename.ext]

# Creating and Deleting Points in Multixy

**Problem Description:**
The user is attempting to dynamically add and remove points in a multixy widget upon touch events. The initial implementation fails to function correctly, and the user seeks clarification on the limitations of modifying points in real-time.

**Solution:**
To address the issue, replace the `sendOsc` function with `send`, as `sendOsc` is not defined. Note that dynamically adding or removing points in the multixy widget is not possible; modifying the number of points requires a complete rebuild of the widget.

If the goal is to place a point where a finger touches the widget without needing to catch an existing point, this cannot be achieved through dynamic point creation. However, it is possible to place the closest point under a finger, provided it does not overlap with another finger's touch. Additionally, it is feasible to identify which point has been touched and released.

For further implementation details or adjustments, consider reviewing the widget's capabilities and limitations in the Open Stage Control documentation.

# Changing Push Button Text Color on Press

**Problem Description:**
Users may want to change the text color of a Push Button when it is pressed, particularly when using the flat theme in Open Stage Control.

**Solution:**
To change the text color of a Push Button when it is pressed, use the following CSS:

```css
/* css: push button */
:host.active .label {
  color: red;
}
```

This code targets the `.label` class of the Push Button when it is in the active state, allowing for visual feedback when the button is pressed.

# Text Indicator with Shared ID Does Not Sync Across Clients

When using a text indicator with a shared ID across different clients, the indicator may not sync correctly. For example, one client may set the text using the following command:

```javascript
set("message", "another tiling/message will be selected in " + curImageTime + " seconds")
```

## Solution

Ensure you are using the latest version of Open Stage Control. A fix for this issue was implemented in version 1.25.5. It is important to note that synchronization between clients is determined by the address and preArgs, not just the shared ID.

If you are on an older version, such as 1.25.2, consider updating to the latest version to resolve the syncing issue.

# Custom Module for Changing Button Labels

## Problem Description
A user is developing a custom module to change the labels of four buttons based on received MIDI CCs. The initial implementation requires repetitive code for handling received messages. Additionally, there is an issue with updating labels on a matrix button, where the intended changes are not reflected correctly.

## Solution
To simplify the code for receiving messages, define a function that encapsulates the `receive` calls. This approach reduces redundancy and improves readability. 

Regarding the issue with updating the matrix button labels, the correct method is to directly modify the children of the matrix. The following example demonstrates the proper usage:

```javascript
receive('/EDIT', 'matrix_1', {
    'props': {
        'label': ["Label A", "Label B"]
    }
});
```

However, note that this only sets the labels for all children to the specified array. To update individual labels, directly reference the children by their IDs, which follow the format `matrix_id/INDEX`.

By implementing these changes, the matrix should display the labels correctly. 

[Attachment: 6WtkLnBSoFokd0U9b9kO0JkfSuU.js]

# Sharing Patch Templates

## Problem Description
Users are looking for ways to share and improve patches for Open Stage Control, specifically regarding functionality like MIDI CC sending from tabs and UI enhancements.

## Solution
1. **UI Enhancements**:
   - Set the `lineWidth` to 0 on some containers to lighten the UI.
   - Instead of placing a panel widget in tabs, directly place the widgets within the tabs for a cleaner layout.

2. **MIDI CC Sending**:
   - Tabs can send MIDI CC messages. The parent of the tab can be configured to send messages when the selected tab changes. This can be achieved by setting the OSC-related properties of the parent or using its script property.

### Attachments
- [Attachment: TTM_OSC_v2.json]
- [Attachment: r0yndDPDzM5UYx6Hz8TEqShaJzg.json]
- [Attachment: test.json]
- [Attachment: jsa06QCht1ljUpHNnbfTT6E6ghL.json]
- [Attachment: TTM_OSC_v3.json]
- [Attachment: nI6lrBcLJMRqypi7zMW09DoNrQ1.json]

# Unlink a Cloned Knob

When using cloned knob widgets in Open Stage Control, moving one knob causes the other clones to move simultaneously. This occurs because the clones share the same `id` property.

## Solution

To unlink the cloned knobs and prevent them from synchronizing, you need to override the `id` property for each clone. This ensures that each knob operates independently.

# CSS host:before Icon Disappears on Toggle Status

## Problem Description
When using a toggle button with a FontAwesome icon created via the `:host:before` pseudo-element, the icon disappears when the toggle status changes to "on". 

## Solution
To resolve this issue, ensure that the icon element has a higher `z-index` than the toggle button's background. Here are the updated CSS rules:

```css
:host {
    background-color: green;
    text-transform: none;
    border: none;
    border-radius: 5rem;
    font-size: 100%; 
}

:host label {
    align-items: flex-end;
    padding-bottom: 3%;
    color: white;
}

:host.on label {
    background-color: red; /* Changed from maroon to red for valid CSS */
}

i {
    color: white;
    font-size: 500%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Set z-index to 1 to ensure visibility */
}
```

By setting the `z-index` of the `<i>` element to `1`, the icon will remain visible when the toggle is activated.

# Save File Widget Functionality

**Problem Description:**
A user is utilizing a load file widget in Open Stage Control, which functions correctly for loading files. However, the user wishes to create a save file widget that allows for naming new files instead of only overwriting existing ones, as the current load file widget does not support text input.

**Solution:**
To enable naming new files, link the load file widget with an input widget. This setup allows users to specify a filename, thereby creating new files instead of being restricted to overwriting existing ones. 

For further details on widget linking, refer to the Open Stage Control documentation.

# Solved: Matrix - Line Breaks in Props

## Problem Description
When attempting to send a label with multiple line breaks from a custom module to a matrix widget using the `/EDIT` command, the line breaks do not appear as expected. The intended syntax for creating a label with two line breaks is:

```javascript
props.label = (
   VARartSpecialName[$] + '\n\n' +
   VARartSpecialKey[$]
)
```

However, when sent from the custom module, the line breaks are not preserved, resulting in:

```javascript
props.label = (
   VARartSpecialName[$] '
   ' VARartSpecialKey[$]
)
```

## Solution
To ensure that line breaks are correctly interpreted when sending the label from the custom module, use the following syntax with an escaped newline character:

```javascript
props.label = (
   VARartSpecialName[$] + '\\n\\n' + 
   VARartSpecialKey[$]
)
```

The additional backslashes (`\\`) are necessary to escape the newline character, preventing it from being converted to an actual line break during processing.

# Scrolling Stutter on iOS Devices with Open Stage Control

**Problem Description**  
When scrolling a page on an iOS device using Open Stage Control, the scrolling is not smooth. This issue does not occur when using a Mac, suggesting it may be specific to iOS devices. 

**Solution**  
To mitigate the scrolling issue on iOS devices, set the panel's `bypass` property to `true`. This will disable synchronization of scrollbars between clients, which is the cause of the stuttering. 

Refer to the attached files for additional context:
- [Attachment: temp.json]
- [Attachment: uHAdlPMG781CYab7PpTvIzFY0uV.json]

# Locking X Value While Changing Y Value in XY Pad

**Problem Description**  
Users may want to lock either the X or Y value of an XY pad while still being able to adjust the other axis. This functionality would allow for more precise control without the need for a steady hand.

**Solution**  
Currently, Open Stage Control does not support locking the X or Y value directly within the XY pad widget. However, a workaround can be implemented using a button to send a "lock" message to an external application, such as Pure Data (Pd). 

1. **Setup a Lock Button**: Create a button in Open Stage Control that, when pressed, sends a "lock" message to Pure Data.
2. **Prevent Updates**: In Pure Data, configure the patch to prevent updates to the synthesis parameter from the locked axis (X or Y) while the lock button is active.
3. **Release Lock**: When the lock button is released, Pure Data should send the previously locked value back to Open Stage Control, which will update the widget and reposition the node accordingly.

This method allows for the desired functionality until a native feature is implemented in Open Stage Control. 

[Attachment: filename.ext]

# Settimeout and Midicommands

## Problem Description
When attempting to scan a MIDI device by sending a program change followed by a SysEx string in a loop, the commands are sent too quickly, causing the hardware to complain about excessive incoming program changes. The goal is to manage the timing of these commands effectively.

## Solution
To resolve the issue, increase the time interval between each `setTimeout` call. This ensures that the SEND commands are spaced out properly, preventing the hardware from being overwhelmed by rapid successive messages. Adjusting the interval allows for better control over the timing of the commands.

# CSS Animations in Open Stage Control

**Problem Description:**
Users may encounter difficulties implementing CSS animations in Open Stage Control (OSC) due to differences in how CSS is processed compared to standard web browsers. Specifically, issues arise when trying to use `@keyframes` and `transform` properties for animations.

**Solution:**
To successfully implement CSS animations in OSC, ensure the following:

1. **Use the Correct Properties:**
   Include the `transform` property before using `translateX` and `scale`. All CSS properties should be in lowercase.

2. **Example Code:**
   Here is a working example of how to define animations using `@keyframes` in OSC:

   ```css
   :host {
     animation: #{@{this} ? 'upndown 0.5s' : 'back 0.3s'} ease-in-out forwards;
   }

   @keyframes upndown {
     from {
       transform: translateX(0%) scale(100%);
     }
     to {
       transform: translateX(60%) scale(120%);
     }
   }

   @keyframes back {
     from {
       transform: translateX(60%) scale(120%);
     }
     to {
       transform: translateX(0%) scale(100%);
     }
   }
   ```

3. **Animation Triggering:**
   You can use conditional logic to trigger animations based on the value of an object. For example, to trigger an animation if the button's value is greater than 3:

   ```css
   animation: #{@{this} > 3 ? 'upndown 0.5s' : 'back 0.3s'} ease-in-out forwards;
   ```

4. **Menu Object Animation:**
   The `menu` widget does not have a simple "on/off" attribute. Instead, OSC adds a class "on" to the menu element when it is activated. You can target this class in your CSS to apply animations accordingly.

By following these guidelines, users can effectively implement CSS animations in Open Stage Control. 

[Attachment: filename.ext] (attachment reference missing)

# Toggle Button Syntax in Open Stage Control

## Problem Description
Users want to configure a toggle button in Open Stage Control to send two different commands: one upon activation and another upon release. Additionally, there is a need to incorporate variables within the address field of the toggle button.

## Solution
To achieve the desired functionality, you can define the address of the toggle button using the following syntax:

```javascript
#{
@{this} == 1 ? "/address_1" : "/address_2"
}
```

Alternatively, you can create a custom module to route your OSC messages. Below is an example of how to implement this:

```javascript
module.exports = {
    oscOutFilter: function(data) {
        // Filter outgoing osc messages
        var {address, args, host, port} = data;

        if (address === '/toggle_address') {
            address = args[0].value === 1 ? '/address_1' : '/address_2';
        }

        // Return data if you want the message to be sent
        return {address, args, host, port};
    }
}
```

### Additional Notes
- If you are using CasparCG, ensure that the Data1 field of the message is set to a value greater than 1. For example, use `on=1` and `off=2`.
- The Prearg can be set to ‘1’, and values can be adjusted as needed.

For further reference, see the attached screenshot that illustrates the setup for playing and stopping a media file using OSC Monitor to verify the messages: [Attachment: osc1.JPG].

# 2D Array in Matrix Button

## Problem Description
When using a dropdown menu to change the label of a matrix button with a 2D array, an issue arises if the first elements of two arrays are identical (e.g., both are "Hz"). This results in an error message indicating that properties of undefined cannot be read, specifically at line 14 of the code.

## Solution
This issue is not a common restriction in JavaScript but rather a result of how the code handles the dropdown selection. To resolve this, ensure that the dropdown selection correctly references the intended array and that the indices used do not lead to undefined values.

Additionally, to reset all buttons to their default positions each time an instrument is selected from the dropdown menu, you can use the following approach:

```javascript
props.script = set('matrix_id/*', 0);
```

This will set all buttons in the specified matrix to their default values. 

For further assistance, refer to the attached file for additional context and code examples. 

[Attachment: 2D-array.json]

[Attachment: qlz3UL5EIRcjaA0CXSoQRBxoQeb.json]

[Attachment: o37AaQbH6dLHn8ofL0vousGkNqu.json]

# Monitoring MIDI Messages in Open Stage Control

**Problem:**
Users may want to monitor MIDI messages in Open Stage Control (OSC) to display real-time information from external MIDI controllers, such as breath controllers, showing values from 0 to 127.

**Solution:**
To achieve visual feedback of an external MIDI controller in OSC, follow these steps:

1. **Connect the MIDI Controller:**
   Ensure that your MIDI controller is properly connected to OSC. You can verify that OSC is receiving messages by enabling the debug option in the server window.

2. **Create a Slider:**
   Add a slider to your OSC session with the following properties:
   - **Interaction:** Set to `false` (this prevents user interaction).
   - **Design:** Set to `compact` (this gives it an indicator appearance).
   - **Address:** Use `/control`.
   - **preArgs:** Set to `[1, 2]` (where 1 is the channel and 2 is the control change number).
   - **Target:** Specify `midi:device_name`, replacing `device_name` with the name of your MIDI device as configured in your server.

By following these steps, you will be able to monitor MIDI messages effectively in Open Stage Control.

# Fader Configuration in Open Stage Control

## Problem Description
Users have questions regarding the configuration of faders in Open Stage Control, specifically about displaying fader values, creating intermediate graduations, linking keys to fader values, and issues with script functionality.

## Solution
1. **Displaying Fader Values**: 
   - The value of the fader is not displayed by default. To show the value, add an `input` widget and link it to the fader using the `linkId` property.

2. **Creating Intermediate Graduations**: 
   - Automatic intermediate graduations are not available. Users must manually enter the values for the desired steps.

3. **Linking Keys to Fader Values**: 
   - To link keys for increasing or decreasing fader values, create a `script` widget with the following configuration:
     ```json
     {
       "event": "keyboard",
       "keyType": "keydown",
       "keyBinding": ["a", "q"],
       "script": "var currentValue = get('fader_1'); var increment = key == 'a' ? 0.1 : -0.1; set('fader_1', currentValue + increment);"
     }
     ```
   - Ensure that the `keyType` property uses "keydown" (all lowercase) to avoid script issues.

4. **Linking Widgets**: 
   - For two widgets to communicate, they must share the same `linkId`, which can be defined arbitrarily by the user.

5. **Debugging Scripts**: 
   - If scripts are not functioning as expected, use `console.log()` within the script to output information to the console for debugging.

6. **Session Testing**: 
   - If issues persist, users can test their configuration with provided session files for troubleshooting.

For further reference, consult the [Scripting - Open Stage Control](https://openstagecontrol.ammd.net/docs/widgets/properties-reference/#linkId) documentation.

### Attachments
- [Attachment: dcFcssBJ6cEt3OvjCqmUUWJADrH.json]
- [Attachment: aiO2oGjAHi87UaMqmqycVcZCvt8.json]

# Resetting the Ball in an XY Control to Its Initial Position

**Problem:**  
Users may want to reset the position of a ball in an XY control back to its initial position after it has been moved.

**Solution:**  
To achieve this, utilize the `spring` property. The return position is defined using the `default` property. For example, you can set it as follows:

```json
"default": [0.5, 0.5]
```

This configuration will ensure that the ball returns to the center of the XY control after being interacted with. 

[Attachment: filename.ext]

# Client Force Reload After Manually Editing JSON OSC Template

**Problem Description:**
Users want to know how to force the Open Stage Control client to reload or refresh after manually editing the JSON OSC template. This is particularly useful for making quick bug fixes remotely, such as when hosting the OSC template on a service like Dropbox.

**Solution:**
To achieve a client refresh after editing the JSON OSC template, you will need to implement a custom module that monitors changes to the file. Once a change is detected, you can use the remote control command `/RELOAD` to trigger the client to refresh.

# Sending OSC Messages with the `send()` Function in Open Stage Control

**Problem Description:**
When attempting to use the `send()` function in Open Stage Control, an error occurs indicating that the "target" is not defined. This happens when trying to switch a button on and off without correctly specifying the required arguments.

**Solution:**
To resolve this issue, ensure that you are using the correct syntax for the `send()` function. The expected arguments include the address, which is mandatory, and the target, which is optional. Here are the correct usages:

1. Directly specify the address and values:
   ```javascript
   send('/note', 4, 0, 127)
   ```

2. Alternatively, you can retrieve the address dynamically using:
   ```javascript
   send(getProp('this', 'address'), 4, 0, 127)
   ```

Make sure to replace the parameters with the appropriate values for your use case. This should eliminate the ReferenceError and allow the function to execute correctly.

# Skipping Certain Widgets When Saving/Opening States in Open Stage Control

## Problem Description
When using Open Stage Control to load states from files, certain widgets such as Play and Stop buttons are being affected, which disrupts their intended behavior. Users are seeking a way to skip specific widgets during state loading to maintain their functionality.

## Solution
Currently, there is no built-in feature to skip specific widgets during state loading. However, the following approaches can be considered:

1. **Modify State Files**: Users can manually edit the `.state` files to remove the unwanted widget states. This method allows for precise control over which widget states are loaded.

2. **Custom Module**: A custom module can be created to filter out unwanted states during the loading process. This involves reading the state file and excluding specific widgets. An example of how to implement this can be found in the provided custom module [Attachment: iI6GZWEGBGpXJwQ6qMQ10IbkdLl.js].

3. **Session Scripting**: Filtering can also be done within the session using the `onValue` script of the save button. This allows for dynamic control over which states are saved or loaded based on specific conditions.

4. **Consider External Factors**: In some cases, external applications (e.g., DAWs like Reaper) may send additional signals that affect widget behavior. It's important to check for such interactions when troubleshooting state loading issues.

For more detailed examples and guidance, refer to the attached files [Attachment: wndhdavTXcmtqSr2uBMXz2A1M5E.json] and [Attachment: 1j3XlfM23793ssQ3MlRIxopu5Pn.json].

# How to Send a String Without Arguments in Open Stage Control

## Problem Description
Some software requires sending strings or addresses without additional arguments. Users may encounter issues when trying to send messages that include unwanted arguments.

## Solution
To send a string without arguments in Open Stage Control, you can use the following methods:

1. **Using a Button in Tap-mode**: 
   - Set the button’s `on` property to `null`. This effectively sends the string without any additional arguments.

2. **Using a Custom Script**: 
   - You can also use a custom script with the following command:
     ```javascript
     send("/address/only/example");
     ```
   - Note that you can omit the `undefined` argument.

Both methods are effective for sending strings or addresses without unwanted arguments.

# Creating a Tab Widget with Custom Module

**Problem Description:**
A user is attempting to create a panel container that includes a tab container and a button within that tab using a custom module. Although the structure appears in the project tree, the tab container is not displayed.

**Solution:**
To resolve this issue, modify the widget configuration by replacing `widgets:` with `tabs:` in the tab container definition. The corrected code should look like this:

```javascript
receive("/EDIT", "root", {
  widgets: [
    {
      type: "panel",
      id: "PANEL_osc",
      label: "1",
      tabs: [  // Change made here
        {
          type: "tab",
          id: "TAB_osc",
          widgets: [
            {
              type: "button",
              id: "Button_osc",
            },
          ],
        },
      ],
    },
  ],
});
```

This adjustment will ensure that the tab container is displayed correctly.

# OSC Communication Issue

## Problem Description
A user is experiencing issues with Open Stage Control (OSC) where the browser fails to communicate with the server. Despite enabling debug mode, no logs are generated when interacting with a simple project containing a single button. MIDI messages are not reaching the loop MIDI ports, and there is no error message when incorrect MIDI addresses are used. The user is on Windows, and all firewall settings have been verified to allow communication.

## Solution
1. **Check Network Accessibility**: Ensure that the server is accessible by testing with the default client, which uses the URL `http://127.0.0.1:port`. This confirms that the server is running properly.

2. **MIDI Configuration**: Verify that the widget's target property and the server's MIDI options are correctly set. 

3. **Python Dependency**: If the log indicates that Python is not found, it may be due to the executable "osc-midi-windows.exe" being blocked by antivirus software. Ensure that this file can be executed without interference. 

4. **Debugging**: If no debug logs are generated, it suggests a communication issue between the client and server. Reassess the server configuration and ensure that all necessary components are functioning correctly.

5. **MIDI Device Listing**: Use the "List MIDI devices" action in the launcher's menu to check if MIDI devices are recognized.

For further reference, the following attachments may provide additional context:
- [Attachment: gene.json]
- [Attachment: szpeGMjybYzVjDJWXjsCqnZlPRJ.json]
- [Attachment: OSC_Config_Gene.config]

# Understanding Variables in Open Stage Control

## Problem Description
There is confusion regarding the interaction between the variables property, set/getVar functions, and the VAR{} syntax in Open Stage Control. Specifically, a user encountered an issue where updating a variable in the "variables" property of a matrix widget did not reflect in other widgets that referenced it, despite using the correct syntax.

## Solution
The VAR{} syntax and the setVar() and getVar() functions operate on custom variables. In contrast, the variables property of a widget is distinct and can be accessed using the @{ } syntax or the getProp() function. Therefore, changes made to the variables property do not automatically update custom variables accessed through setVar() or getVar().

For clarity:
- Use **VAR{}**, **setVar()**, and **getVar()** for custom variables.
- Use the **variables property** and **getProp()** for widget-specific variables.

This distinction is crucial for ensuring that variable updates are reflected correctly across your widgets.

# Sending Multiple OSC Messages with a Single Button in Open Stage Control

**Problem Description**  
Users may want to control multiple applications simultaneously using a single button in Open Stage Control. For instance, sending OSC commands to both Resolume and Gig Performer with one button press can be challenging due to the limitation of sending only one OSC command per widget.

**Solution**  
To send multiple OSC messages from a single button, utilize the script property of the button widget. You can achieve this by writing a script that sends the desired OSC commands. Here’s an example of how to implement this:

```javascript
// target, address, midiChannel, midiAddress, midiValue
send("midi:NAMEOFMIDIPORT", "/control", 1, 1, 1);
send("midi:NAMEOFMIDIPORT", "/anotherControl", 1, 1, 1);
```

Replace `NAMEOFMIDIPORT` with the actual name of your MIDI port and adjust the OSC addresses as needed for your applications. This method allows you to control both Resolume and Gig Performer with a single button press.

# Grafical Subdivision in a Menu Selection

**Problem Description**  
Users have inquired about the possibility of adding gridlines or subtle background colors to menu selections in Open Stage Control to enhance visual clarity.

**Solution**  
To achieve a more visually appealing menu, you can apply background colors to menu items using CSS. Here are the recommended styles:

1. For a subtle background on all menu items, use the following CSS:
   ```css
   .item {
     background: rgba(255, 255, 255, 0.05);
   }
   ```

2. If you want to customize specific items, you can use the `nth-child` selector. For example, to style the first item:
   ```css
   .item:nth-child(1) {
     background: #3b3b3b;
     opacity: 1;
   }
   ```

3. You can further customize the appearance by adjusting the `padding` property and adding borders if desired.

For additional color options and advanced styling techniques, refer to the community post on setting different colors for menu items using `nth-child` selectors.

[Attachment: Harp_v3.zip]  
[Attachment: tK9IGnl5WbbGIid4csOYvlq7Tel.zip]

# Creating a VST Editor with Open Stage Control

## Problem Description
Users are interested in automating the creation of a VST editor in Open Stage Control by utilizing exported parameter names from VST plugins. The goal is to generate a JSON file that can be used to create faders or knobs automatically, based on the parameters defined in the exported VST XML file.

## Solution
To transform a VST XML file into a JSON file that is readable by Open Stage Control, follow these steps:

1. **Download and Use SAVIHOST**:
   - Open a VST plugin using SAVIHOST.
   - Export the parameters in VST XML format from the File menu.

2. **Convert the File**:
   - Rename the exported `.txt` file to a `.json` file.
   - Use a custom script (e.g., written in PowerShell) to process the file and convert it into a format suitable for OSC.

3. **Load into Open Stage Control**:
   - Import the resulting JSON file into Open Stage Control to create faders or knobs based on the VST parameters.

### Example Files
- Exported VST XML files:
  - [Attachment: Diva(x64).vstxml.txt]
  - [Attachment: DUNE x64.vstxml.txt]
  
- JSON output examples:
  - [Attachment: fader_file_out.json]
  - [Attachment: diva_out.json]
  - [Attachment: Sortie 1 fader.json]
  - [Attachment: output.txt]
  - [Attachment: hhJFnVKGFPA4YPuke2KloiW2I2l.txt]

### Additional Notes
- For Mac users, an alternative to SAVIHOST may be required, as it is only available on Windows.
- Custom modules in Open Stage Control can be used to read external files and create faders automatically based on the parameter names and control change (CC) values. 

This approach allows for a streamlined process to create a VST editor interface in Open Stage Control without manually entering each parameter.

[Attachment: rUj20L4ymPeR7GLobcrN8Mfo5UQ.json]

[Attachment: hPj89NXcD06MC4fB6Ia3eIxhqeC.json]

[Attachment: nlaeI0FrybaT68wbAFYw4Fuor6g.txt]

[Attachment: 2GIRoBdtziHjI3Nl7LFD5ZolmQT.txt]

[Attachment: cZb0HYuasa105bQ7snPs8Qfwtm7.txt]

[Attachment: yV8CWL0CQ0Lx7BBwP4JW84IE5X_1.json]

[Attachment: uLxBVHAmcK5QhkbiWj2uRPI8UUT.json]

[Attachment: vrnNKSQHngDRUgyg13E1u3neCAl.txt]

[Attachment: yV8CWL0CQ0Lx7BBwP4JW84IE5X.json]

# Using Parent Variables in a Switch

When attempting to use parent variables in a switch configuration, you may encounter issues with syntax and variable mapping. Below is a confirmed solution to effectively utilize parent variables.

## Problem Description
The initial attempt to use parent variables in a switch's values resulted in errors, particularly when trying to dynamically create keys using the parent variables. Additionally, there were concerns about the order of the switches being displayed incorrectly.

## Solution
To correctly implement parent variables in a switch, follow these steps:

1. **Define the Values Using JavaScript:**
   Use the following JavaScript code to create a values object, ensuring that you concatenate strings properly for keys derived from parent variables:

   ```javascript
   var values = {}

   values[@{parent.variables.LabelFoundA}] = 1
   values[@{parent.variables.LabelFoundB}] = 2
   values[@{parent.variables.LabelFoundC} + " "] = 3
   values[@{parent.variables.LabelFoundD} + " "] = 4
   values[@{parent.variables.LabelFoundE}] = 5
   values[@{parent.variables.LabelFoundF}] = 6

   return values
   ```

   This approach ensures that any numeric keys are treated as strings to avoid display issues.

2. **Ensure Parent Variables Are Correctly Defined:**
   Make sure that the variables you are trying to access are defined in the parent object. For instance, if your switch is nested within a root object, the variables should be set in the `variables` property of the root.

3. **Accessing Properties from a Variable Script:**
   If you want to access properties from a variable script, use the following syntax:

   ```javascript
   @{conf}.foo
   ```

   This retrieves the value of the property `foo` from the object with the ID `conf`.

4. **Getting Keys of an Object:**
   To retrieve the keys of an object for use as labels in a switch, you can use:

   ```javascript
   var keys = Object.keys(@{conf});
   ```

   This will give you an array of keys that you can use as labels.

By following these guidelines, you should be able to effectively utilize parent variables in your switch configurations without encountering syntax errors or display issues.

[Attachment: image]

# Multi-User Interface Configuration in Open Stage Control

**Problem Description:**
When using Open Stage Control for managing audio returns for multiple musicians, changing the page on one user's interface causes all other users' interfaces to change as well. This issue arises when trying to create a unique experience for each user without launching multiple identical instances of the application.

**Solution:**
To prevent the synchronization of selected tabs across different users, you can use the following methods:

1. **Bypass Parent Container:**
   - Set the `bypass` property of the parent container of the tabs to `true`. This will stop the synchronization of the selected tab.

2. **Client Options Configuration:**
   - In the server's `client-options` field, set `clientSync=0`. This completely disables the inter-client synchronization mechanism.

Both methods will allow each user to navigate their interface independently without affecting others.

# Visualizing an MSEG Envelope in Open Stage Control

## Problem Description
Users are seeking a way to visualize an MSEG (Multi-stage Envelope Generator) style envelope in an OSC (Open Sound Control) template. The goal is to create a visual representation of an envelope with potentially seven stages, as the current graph options do not adequately support this functionality.

## Solution
The current method to visualize an MSEG envelope is to use a plot widget to draw the envelope. However, note that while you can display the envelope, you cannot move the points interactively. The drawing is controlled by the `value` property of the plot widget.

For a basic implementation, refer to the provided example file: [Attachment: plot.json].

To manage the rates of the MSEG points, you can assign separate knobs for the x-axis of each point. However, to achieve the desired behavior where each x-axis point shifts along with subsequent points, additional logic or scripting is required. 

For further assistance, you can refer to the attached example of an MSEG attempt: [Attachment: MSEG 3.json] and the behavior representation: [Attachment: uNQD0ibjlqj704nrR2LOYYtleJD.json].

[Attachment: 7G4SrsR2kXpAXf1pmkhf3sdeAnd.json]

# CC Expression/Modulation Issue

**Problem Description:**
Users are experiencing issues with faders not sending Control Change (CC) messages in Open Stage Control, while buttons work correctly. The faders are intended to control parameters such as vibrato, expression, modulation, and release, but no CC messages are received in applications like Cubase or MIDI monitor.

**Solution:**
The issue is likely due to the faders being configured to send CC messages to a MIDI target that is not properly defined or connected. To resolve this:

1. Ensure that the faders are set to send CC messages to the correct MIDI target (e.g., `midi:OSC2`).
2. Verify that the target MIDI connection is properly established in your Open Stage Control session.

By correcting the MIDI target for the faders, the CC messages should be transmitted successfully. 

[Attachment: OSCV1]

# Bar Counter Display in Open Stage Control

## Problem Description
Users want to create a display that shows the current bar count based on a beat counter input from Bitwig, formatted as `/beat/str` (e.g., `000.0.0:00`). The goal is to count measures and reset the display after reaching a specified number of bars (4, 8, or 16).

## Solution
To achieve this, you can use the advanced syntax in Open Stage Control with JavaScript to parse the incoming timestamp and calculate the bar count. Here’s how to set it up:

1. **Create a Text Widget**: Add a text widget to your interface.
2. **Set the Value Property**: Use the following JavaScript code in the value property of the text widget:

```javascript
JS{{
var timestamp = OSC{/beat/str} || "000.0.0:00";
var measures = timestamp.split(".")[0];
var cycle = 16; // Set this to 4, 8, or 16 based on your needs
var barcount = (measures % cycle);
if (barcount == 0) { barcount = cycle; } // Adjust to display the last bar correctly
return barcount;
}}
```

### Explanation:
- The `timestamp` variable retrieves the current beat string.
- The `measures` variable extracts the measure count from the timestamp.
- The `cycle` variable defines how many bars to count before resetting.
- The `barcount` variable calculates the current bar and adjusts it to display the correct value.

### Additional Notes:
- If you want the count to start from 1 instead of 0, you can modify the return statement accordingly.
- Make sure to check the syntax and placement of the JavaScript code in the value property of the text widget.

For further reference, you can consult the following documentation:
- [Advanced syntaxes - Open Stage Control](https://openstagecontrol.ammd.net/docs/advanced-syntaxes/)
- [String.prototype.split() - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)
- [Remainder (%) - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Remainder)
- [JavaScript Variable fallback - Stack Overflow](https://stackoverflow.com/questions/19473522/javascript-variable-fallback)

This solution should provide a reliable way to display the current bar count in Open Stage Control.

# Retrieve Multiple Values with a Single Input Widget

**Problem Description:**
The user wants to retrieve the value of four independent switch widgets using a single input widget. The goal is to have the input widget output only one value at a time, depending on which switch is pressed, instead of retrieving all values simultaneously.

**Solution:**
To achieve this, use the `linkId` property. Here’s how to set it up:

1. Set the `linkId` of each switch to the same value, for example, `switchlink`.
2. Set the `linkId` of the input widget to `<< switchlink`.

This configuration allows the input widget to listen to the switches and only send MIDI data based on the selected switch.

For further reference, a session file demonstrating this setup is available: [Attachment: switchlinks.json].

[Attachment: jdWFSM3vijZuMwcg6QrHueNbC0Q.json]

# Keyboard Receiving OSC Notes

## Problem Description
Users may encounter issues when attempting to send OSC messages to a keyboard widget, resulting in no key responses.

## Solution
To successfully send notes to a keyboard widget, use the following OSC address format:

```
/note
```

To clear all notes, you can implement a loop that sends a note-off message for each MIDI note value. Below is an example code snippet for Sonic Pi:

```ruby
i, last_note = 21, 108
while i < last_note do
    osc "/clavier", i, 0    
    i += 1
end
```

This will effectively send a note-off message for all notes in the specified range.

# XY Pad Functionality in Open Stage Control

**Problem Description:**
Users may encounter issues when trying to replicate the XY pad functionality found in Touch OSC within Open Stage Control. Although other buttons work, the XY pad does not send OSC messages as expected.

**Solution:**
1. **Set the Target Property:**
   Ensure that the target property for the XY pad widget is correctly configured. You need to specify both the IP address and the port number of the receiving application (e.g., Unreal). The format should be:
   ```
   127.0.0.1:9000
   ```
   Replace `9000` with the actual port number that the receiving application listens on.

2. **Server Configuration:**
   In the main configuration window of Open Stage Control, set up the server's send option with the appropriate IP and port. This configuration should apply to all commands, so you do not need to repeat it for each widget.

3. **Debugging:**
   To verify what messages are being sent, enable the server's debug option. This will help you troubleshoot any issues with the OSC messages being transmitted.

By following these steps, you should be able to successfully replicate the XY pad functionality from Touch OSC in Open Stage Control. 

[Attachment: image]

# Using an Event Listener on a Widget's Script Property

## Problem Description
The goal is to execute different actions in a widget's script property based on the last received OSC message value. Specifically, the requirement is to check the value of an OSC message (e.g., `OSC{/note}`) and trigger different code depending on that value when a button is pressed.

## Solution
Instead of using the `OSC{}` block directly in the script property, utilize a variable widget to receive the OSC messages. This allows you to read its value in your scripts using the `get` function. 

Example configuration for the button widget:
```json
{
  "type": "button",
  "id": "trackControl01",
  "script": "
    if (get('variableWidgetId') == 47) {
      // SOME CODE TO BE EXECUTED
    } else {
      // SOME OTHER CODE TO BE EXECUTED
    }
  "
}
```
Replace `variableWidgetId` with the actual ID of the variable widget that receives the OSC messages. This setup enables you to effectively listen for OSC messages and execute conditional code based on their values.

# Preventing Some Points from Being Moved by User in Multixy

**Problem Description**  
In a multixy control, there is a need to allow certain points to be movable while making others insensitive to touch.

**Solution**  
While it is not directly possible to restrict movement of specific points within a single multixy, a workaround involves stacking two multixy controls. One multixy can be configured to be insensitive, allowing the other to remain interactive.

# Debugging the Custom Module

## Problem Description
Users may need assistance locating the custom module in Chrome Developer Tools for debugging purposes.

## Solution
Currently, it is not possible to locate the custom module in Chrome Developer Tools because the server process hosting the custom module and the rendering process for the interface are distinct. 

To aid debugging, consider the following:
- Utilize console logging extensively to track issues.
- Note that the actual custom module filename will be included in stack traces, which can assist in identifying problems.

Future updates may improve debugging capabilities, but for now, rely on the server console for error messages.

# Modifying CC Sent by a 4-Value Switch for Knob Matrix

## Problem Description
The goal is to use a 4-value switch to modify the Control Change (CC) messages sent by an 8-knob matrix. Each switch value corresponds to a different CC value and channel. The initial attempt involved using a button to change the CC sent by the knobs, but a more complex solution is needed to accommodate the switch.

## Solution
To implement the 4-value switch, use the following configuration in the `props` field:

```json
"preArgs": "[#{@{Modes_QC}==1 ? 1 : @{Modes_QC}==2 ? 14 : @{Modes_QC}==3 ? 1 : 0},#{@{Modes_QC}==1 ? 16 + $ : @{Modes_QC}==2 ? 54 + $ : @{Modes_QC}==3 ? 70 + $ : 0}]"
```

This configuration allows you to send different CC values based on the switch state:
- Switch value 1: CC = 16, Channel = 1
- Switch value 2: CC = 54 (channel not specified)
- Switch value 3: CC = 70, Channel = 1
- Switch value 4: CC = 0 (default)

You can also add additional functionality, such as a separate "shift" button, to further enhance the control over the CC messages sent by the knobs. 

For sending the control messages, you can use a script similar to the following:

```javascript
if(get('switch')==1) send('/control', 1, 16 + get('$'), get('knob#{$+1}'));
if(get('switch')==2) send('/control', ...,...,...); // Define for switch 2
if(get('switch')==3) send('/control', 14, 57 + get('$'), ...);
if(get('switch')==4) send('/control', 1, 70 + get('$'), ...);
```

Make sure to replace the ellipses with the appropriate values for switch 2 and any other necessary parameters. 

This approach provides a structured way to modify the CC messages based on the selected switch value. 

[Attachment: qc switch]

# Resetting a Widget to Its Default Value

## Problem Description
Users may want to reset a widget to its default value in Open Stage Control. However, there is no universal message applicable to all widgets for this purpose.

## Solution
To reset a widget to its default value, you can use the following script, provided that the widget's default property is explicitly set:

```javascript
/SCRIPT "set('widget_id', getProp('widget_id', 'default'))"
```

This script retrieves the default value of the specified widget and sets it accordingly. 

If you wish to update every widget that has a default state without listing them individually, consider exploring methods to retrieve a list of all widgets within your script. 

For further assistance, please refer to the documentation or community forums for additional scripting techniques.

# Monitor the Project Cursor Position of Cubase with OSC

To display the current position of the Project Cursor in Cubase on an OSC client, follow these steps:

## Problem Description
Users want to monitor the Project Cursor position (in Bars and Beats) from Cubase on an OSC client. The challenge is to ensure that Cubase can send this information via MIDI or OSC messages.

## Solution
1. **Enable MTC in Cubase**:
   - Set Cubase to send MIDI Time Code (MTC) to Open Stage Control (OSC).
   - In OSC's MIDI configuration, ensure the "mtc" parameter is added to enable MTC messages.

2. **Configure OSC to Receive MTC**:
   - Use the address `/mtc` to receive the MTC messages in OSC. This address represents the OSC message converted from the MIDI event.

3. **Send Bars and Beats Information**:
   - Use the Mackie Control remote device in Cubase to send Bars and Beats information to OSC.
   - When advancing the Project Cursor, OSC will receive Control Change (CC) messages. The number of CC messages may vary based on the bar being advanced to, and the widget in OSC should be configured to handle relative values.

By following these steps, you can successfully monitor the Project Cursor position from Cubase on your OSC client. 

For further details on MTC configuration, refer to the Open Stage Control documentation. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: image4.png]  
[Attachment: image5.png]  
[Attachment: image6.png]  
[Attachment: image7.png]  
[Attachment: image8.png]  
[Attachment: image9.png]  
(attachment reference missing)

[Attachment: wKv0j3COONGBD1goe7Z55y0k8Rl.js]

# Html VAR{text} Undefined Issue

**Problem Description:**
When using the `setVar` function to define a variable 'text' based on a fader's value, the button's HTML displays "undefined" initially. Additionally, when attempting to conditionally render the variable in the HTML, it shows "__VARS.Expire" or "__VARS.Inspire" instead of just "Expire" or "Inspire".

**Solution:**
To correctly display the variable without the "__VARS." prefix, use the following syntax:

```html
<h1>VAR{text, Hello}</h1>
```

Alternatively, if you need to conditionally render the variable with different HTML tags, use this syntax:

```javascript
#{VAR{text} !== undefined ? "<h1>" + VAR{text} + "</h1>" : "Hello"}
```

This ensures that the variable is displayed correctly without any unwanted prefixes.

# Edit Globals Variable at Runtime from Scripts (Target, Port...)

## Problem Description
The user is seeking a method to set the target IP address as the session's default target in Open Stage Control for a project involving a Midas M32 controller. The user prefers not to use a custom module for this task.

## Solution
The simplest solution is to launch the server with the appropriate `send` option to set the target IP address.

# Use of z-layer to Display/Hide Widgets in Open Stage Control

## Problem Description
Users have encountered issues with using the z-index property to display or hide widgets in Open Stage Control, particularly with CSS code that results in a "ReferenceError: values is not defined" error in version 1.x.

## Solution
To correctly implement z-index in Open Stage Control version 1.x, use the following syntax:

```javascript
JS{{
locals.values = [9,11];
locals.tralala = @{control};
locals.selector = locals.values[locals.tralala];
}}

:host{
z-index:#{locals.selector};
}
```

This approach ensures that the values are properly defined and accessed, avoiding reference errors. 

[Attachment: 61X4lm7wWQeYqVHMIpA1USD82sO.json]

# Issues with Invalid Address and Button Order in Open Stage Control

## Problem Description
Users may encounter an "invalid address" error when triggering a button with a script that sends MIDI messages. This issue can arise if the target is not set correctly. Additionally, there may be unexpected changes in button order and IDs within the editor, which do not reflect on other devices.

## Solution
1. **Invalid Address Error**:
   - If a button's target is set, it sends messages to its default address unless the `bypass` property is set to `true`. If the target resolves to `0`, it is invalid for MIDI usage and will produce an error.
   - To resolve this, replace `0` with an empty string (`""`) in the target script. This change will prevent the invalid address error.

   Example:
   ```javascript
   "target": "#{@{b1 Qpistes}==1 ? "midi:OSC" : @{b3 Eq}==1 ? "midi:OSC" : @{b4 Midi}==1 ? "midi:QC" : ""}"
   ```

2. **Unexpected Button Order and ID Changes**:
   - If button order or IDs change unexpectedly in the editor, it may be a bug. If this issue can be reproduced, it is recommended to provide a session file along with step-by-step instructions to help diagnose the problem.

For any persistent issues, consider reaching out for further assistance or troubleshooting.

# One Switch to Change Dropdown Values

## Problem Description
The goal is to replace two dropdowns with a single switch and one dropdown. The switch should dynamically change the values of the dropdown based on its state, and there is a need to display labels for the dropdown values instead of just the values themselves.

## Solution
To achieve this, use the following script in the switch editor:

```javascript
if(value == 1) set("dropdown_values", {"a": 70, "b": 71});
else if(value == 2) set("dropdown_values", {"c": 80, "d": 81});
```

Where `dropdown_values` is a variable widget. 

To display the keys (labels) in the dropdown instead of the values, set the label property of the dropdown to `%key`. 

This configuration will allow the dropdown to show the labels "a", "b", "c", and "d" corresponding to their respective values.

# Linking a Widget's Off/On State to Toggle Tab Visibility

**Problem Description:**
The user wants to link the on/off state of multiple buttons to the visibility of corresponding tabs within a container. When a button is pressed, its associated tab should become visible, and the button should remain in the "on" state until another button is pressed, which should turn off the previous button and show its corresponding tab.

**Solution:**
To achieve this functionality, utilize the "switch" widget in Open Stage Control. The switch widget allows buttons to automatically toggle each other off when one is pressed. Here’s how to set it up:

1. **Create a Switch Widget:**
   - Use the switch widget to group your buttons. Each button will represent a tab.

2. **Assign Unique Values:**
   - Assign a unique value to each button in the switch widget. This value will be used to trigger the visibility of the corresponding tab.

3. **Script for Tab Visibility:**
   - Implement a script that sets the visibility of the tabs based on the button pressed. For example:
     ```javascript
     if (button.value === '1') {
         tab1.visible = true;
         tab2.visible = false;
         tab3.visible = false;
     } else if (button.value === '2') {
         tab1.visible = false;
         tab2.visible = true;
         tab3.visible = false;
     }
     // Continue for other buttons
     ```

Using the switch widget simplifies the logic, as it inherently manages the on/off states of the buttons. 

For further reference, see the attached images for visual guidance:
- [Attachment: Screenshot_2024-04-22_at_1.40.04_AM]
- [Attachment: Screenshot_2024-04-22_at_1.40.14_AM]
- [Attachment: Screenshot_2024-04-22_at_1.40.14_AM]

# Looping Inside a Widget Script

## Problem Description
The user inquired about the possibility of using a loop in the script area of a widget and whether it would cause the UI to hang.

## Solution
To avoid blocking the UI with an infinite loop, use JavaScript's `setInterval` function. This allows the UI thread to run between iterations. Here is an example:

```javascript
setInterval(function(){
  // do something
}, 50); // every 50 ms
``` 

This approach ensures that the UI remains responsive while executing repeated actions.

# MIDI Configuration in Open Stage Control

## Problem Description
Users may encounter difficulties in configuring MIDI settings in Open Stage Control, particularly regarding the correct syntax for MIDI ports and sending MIDI messages.

## Solution
To set up MIDI in Open Stage Control, follow these steps:

1. **Start Open Stage Control**: Launch the application using the command:
   ```bash
   npm start
   ```

2. **Identify MIDI Ports**: Use the command:
   ```bash
   python.exe python\list.py
   ```
   This will display the available MIDI inputs and outputs.

3. **Configure MIDI Ports**: When specifying MIDI ports, use the port number rather than the port name. For example:
   ```
   mon_port_midi:1,1
   ```
   This connects to input port number 1 and output port number 1. You can reference this in a widget's `target` property as:
   ```
   midi:mon_port_midi
   ```

4. **Sending MIDI Messages**: To send a MIDI note, configure the widget with the following parameters:
   ```json
   {
     "address": "/note",
     "preArgs": [1, 60],  // MIDI channel 1, note 60 (C4)
     "on": 100,           // NoteOn velocity
     "off": 0,           // NoteOff on button release
     "target": ["midi:device_name"]  // Replace with your MIDI device name
   }
   ```

5. **Using the Keyboard Widget**: If using the `keyboard` widget, you do not need to code each key individually. However, ensure that the `preArgs` are set correctly, with the first argument being the MIDI channel number.

For further details, refer to the MIDI documentation available at [Open Stage Control MIDI Documentation](https://openstagecontrol.ammd.net/docs/midi/).

[Attachment: image1.png]
[Attachment: image2.png]
[Attachment: image3.png]
[Attachment: image4.png]
[Attachment: image5.png]

# Triggering a Script from a Multixy Module Upon Touch

**Problem Description:**
A user has two multixy widgets: a small one that is always displayed and a larger one that is hidden behind the small widget. The larger widget is brought to the front when a point on the small widget is moved. The user wants to trigger the script that brings the larger multixy to the front as soon as the small multixy is touched, without requiring a point to be moved.

**Solution:**
To trigger an action when the small multixy is touched, you can use the `touch` property in the scripting section. Here is an example of how to implement this:

```javascript
if (touch !== undefined) {
    if (touch === 1) {
        // Your action to bring the big multixy to the front
    }
}
```

This script checks if the multixy is touched and executes the desired action immediately upon touch.

Alternatively, if you prefer a visual approach, you can use CSS to zoom out the control when touched:

```css
:host:active {
    transform: scale(2);
}
```

However, the user ultimately resolved the issue by adding a button next to the small multixy to trigger the action. 

[Attachment: filename.ext] (attachment reference missing)

# How to Limit Screen to Panel Size

To limit the screen to the size of a panel in Open Stage Control, you cannot directly set the window size through the application. However, you can design your panel to fit the window size.

## Solution

1. **Responsive Layout**: Create a panel that adjusts to the window size. This can be achieved by using a responsive layout.
   
   You can refer to the attached example for guidance on creating a responsive layout:
   - [Attachment: responsive_layout.json]
   
   This example demonstrates how to structure your panel to adapt to different window sizes.

[Attachment: 9ONWHtNiIbSxcSqVc4iqR5BlVEr.json]

# Window Loses Focus in Open Stage Control

When using Open Stage Control (OSC) on a PC with applications like Cubase, users may experience an issue where the OSC window takes focus after interacting with it, causing the main application (e.g., Cubase) to lose focus. This results in the need to manually refocus the main application to use keyboard shortcuts.

## Solution

Currently, OSC does not have a built-in feature to automatically refocus another application after a keypress. However, a new function has been added to the script widget that can help manage window focus:

- Use the `unfocus()` function within your OSC project. This function will return focus to the previously focused window but only works with the built-in OSC client, not with external browsers.

### Implementation Steps

1. **Add `unfocus()` to a Script Widget**:
   - You can add the `unfocus()` command in a script widget or in the script property of your existing widgets. This command will execute when the widget's value is updated.

2. **Custom Module for Global Application**:
   - To implement this functionality across your entire project, you can create a custom module that triggers the script whenever an OSC message is sent. Here’s an example of how to set it up:

   ```javascript
   module.exports = {
       oscOutFilter: function(data) {
           var {address, args, host, port, clientId} = data;

           // Send back a message to trigger the widget with "unfocus()" in its script
           receive('/script_widget_address', 1);

           // Return data if you want the message to be sent
           return {address, args, host, port};
       }
   }
   ```

For more detailed guidance on scripting and custom modules, refer to the [Scripting - Open Stage Control](https://openstagecontrol.ammd.net) documentation.

### Note
If you encounter issues where touches on the screen do not send MIDI commands, consider implementing additional logic to handle such cases (attachment reference missing).

# Default Widget Values Do Not Align with Reaper

When configuring Open Stage Control to communicate with Reaper, users may encounter an issue where the output values do not match the expected input values. Specifically, the OSC output may send values that differ from what Reaper is set to receive.

## Problem Description
In a Transport control setup, the OSC output for the `/Record` command is sending values such as:
```
(DEBUG, OSC) Out:  { address: '/Record', args: [ { type: 'f', value: 1 } ] }
(DEBUG, OSC) Out:  { address: '/Record', args: [ { type: 'f', value: 0 } ] }
```
However, Reaper expects to receive:
```
(DEBUG, OSC) In:  { address: '/Record', args: 0 }
```
The challenge is to configure the output values to align with the expected input values.

## Solution
To resolve this issue, ensure that the following settings are correctly configured:

1. **IP Address**: Make sure the IP address in the OSC settings matches the address that Reaper is listening on. If Reaper is running on the same machine, use `127.0.0.1`. Otherwise, use the correct local network IP address.

2. **Widget Properties**: Adjust the button widget properties:
   - Set the **mode** property appropriately (e.g., to "tap" if needed).
   - Specify the **on** and **off** values to match the expected output for Reaper.

Refer to the properties reference in Open Stage Control for detailed guidance on these settings.

By ensuring the correct IP address and configuring the widget properties, the output values should align with what Reaper expects, resolving the issue.

[Attachment: filename.ext]

# Translating v0 Syntax to v1 JavaScript in Open Stage Control

## Problem Description
The user is seeking assistance in converting a v0 syntax code snippet that retrieves address data and passes it to child widgets into the v1 JavaScript syntax.

## Solution
The equivalent v1 JavaScript code for the provided v0 syntax is as follows:

```javascript
var status = OSC{/@{parent.variables.root}/@{parent.variables.n}/feedback/status};
return Object.assign(@{parent.variables}, {"status": status});
```

This solution utilizes `Object.assign` to extend the variables and requires a `return` statement to specify the returned value. Variables must be declared using the `var` statement.

# Changing MIDI Values Based on Menu Selection in Open Stage Control

## Problem Description
Users may want to configure a menu widget in Open Stage Control such that selecting an item from the menu changes the MIDI values sent by another button widget. The challenge is to set up the correct scripting to achieve this functionality, including maintaining the ability to trigger an 'off' value and automatically setting the button state when a new menu item is selected.

## Solution
To implement this functionality, follow these steps:

1. **Define Menu Values**: Set the `values` property of the menu widget as an object where each menu item corresponds to an array of `preArgs` for the button widget. For example:
   ```json
   {
     "Menu Item 1": [3, 1],
     "Menu Item 2": [3, 2]
   }
   ```

2. **Reference Menu in Button's `preArgs`**: In the button widget, set the `preArgs` property to reference the selected value from the menu. Assuming the menu's ID is `menu_1`, you would use:
   ```javascript
   @{menu_1}
   ```

3. **Handling Button States**: To ensure the button is in the 'on' state when a new menu item is selected, modify the menu's script to set the button's state directly instead of sending MIDI messages from the menu. This can be done using:
   ```javascript
   setProp('button_id', 'state', true);
   ```
   Replace `button_id` with the actual ID of your button widget.

4. **Maintaining Off State**: To allow the button to still trigger an 'off' value, ensure that the button's `onValue` script checks the current state and sends the appropriate MIDI message based on the selected menu item.

5. **Comparing Arrays**: When comparing arrays in scripts, use the `join()` method to stringify them for comparison. For example:
   ```javascript
   if (value.join() == [3, 1].join()) {
       // Your logic here
   }
   ```

By following these steps, you can effectively manage the interaction between the menu and button widgets in Open Stage Control, allowing for dynamic MIDI value changes based on user selection.

[Attachment: Screen Shot 2022-05-16 at 5.41.38 PM]

# Toggle Session Tree (Keyboard Command Problem)

**Problem Description:**
The keyboard shortcuts CMD+T (on macOS) and CTRL+T (on Windows) open a new tab in the Google Chrome browser instead of toggling the Open Stage Control (O-S-C) Session tree. Additionally, the "Show in tree" command (shortcut: "T") does not open the Session tree panel first, which would enhance usability.

**Solution:**
To prevent CMD+T and CTRL+T from opening a new tab in Chrome, launch Chrome in app mode. This allows the shortcuts to function as intended within Open Stage Control.

The issue with the "Show in tree" command has been addressed and fixed in the source code.

# Menu Size using Grid Setting

## Problem Description
When using the grid template in Open Stage Control, setting the menu size to a single value (e.g., 1400) results in both width and height being equal. This can lead to issues where the menu is too tall and falls off the bottom of the screen, limiting the display of necessary information.

## Solution
To create a non-square menu, specify the size as an array with different width and height values. For example, use:

```json
size: [1400, 1200]
```

This allows you to set a wider menu than its height, optimizing the use of screen space. 

[Attachment: image.png]

# Range Widget Display Value

**Problem:**
The user wants to display `value[0]` and `value[1]` in a range widget using MIDI data, constrained to a range from 1 to 16, but is unsure how to implement this.

**Solution:**
To display the values in the range widget, use the following syntax in the HTML properties:

```html
#{ @{this}[0] }  ////  #{ @{this}[1] }
```

You can add any necessary mathematical operations inside the `#{}` as needed to ensure the values stay within the desired range.

# How to Return the Number of Widgets in a Panel

To determine the number of widgets in a specific panel in Open Stage Control, you can use JavaScript code.

## Problem Description
Users may encounter issues when trying to count the number of widgets in a panel, leading to confusion about the correct method to achieve this.

## Solution
Use the following JavaScript code snippet to return the number of widgets in a panel:

```javascript
return @{panel_1.widgets.length}
```

### Implementation
- Place this code in the **value** property of a text widget to display the count.
- If using an HTML widget, you must place the code in the **html** field instead of the **value** field, as the latter does not display text.

### Additional Notes
- The code executes whenever the widget's value updates. If placed in a text widget, it may not update automatically unless the widget's value changes.
- For debugging, wrap the code in `console.log` to see the output in the console.

This method allows you to effectively count and display the number of widgets within a specified panel.

# Update of Matrix Props Field

**Problem Description:**
When updating the properties of a Matrix widget in Open Stage Control, users may encounter an issue where changes are not saved if they hit "Save" without leaving the editor field. After saving, closing the application prompts a warning about unsaved changes, and if "No" is selected, the server disconnects, resulting in lost changes.

**Solution:**
To ensure that changes are saved correctly when editing the props property of a Matrix widget, follow these steps:

1. After editing the props property, press **Enter** to exit the editor field. This action confirms the changes.
2. Then, use **Ctrl + S** to save the project.

This sequence is necessary because changes are only submitted when you leave the field. An update is planned to improve this behavior by validating the field upon pressing **Ctrl + S** in future releases. 

If you need to save your work without a running server, consider using the export function.

# Issue with Similar Widgets Interfering in Open Stage Control

**Problem Description:**
When using multiple instances of similar widgets (e.g., `virtual-launchpad` and `virtual-launchpad2`), there is interference in their functionality. Despite being configured to send to different MIDI targets, the widgets are affecting each other's color outputs. This issue arises because the color property is determined by a JavaScript function that does not differentiate between MIDI ports.

**Solution:**
The interference issue has been addressed in the source code of Open Stage Control. Ensure you are using the latest version where this fix has been implemented. 

For further assistance, refer to the attached project file for additional context: [Attachment: lagrantesta.json].

[Attachment: 39Xt3z6XOP29bEFZ5vD8K5qZkly.json]

# Custom Module NPM Package Import in Open Stage Control

## Problem Description
Users have inquired about the ability to import npm packages in custom modules within Open Stage Control, specifically for executing AppleScript using the `node-osascript` package.

## Solution
As of version 1.8.0, Open Stage Control now supports a `requireNative()` function that allows custom modules to load native Node.js packages, including npm packages. This enhancement opens up new possibilities for functionality within custom modules, although it also introduces potential risks when running untrusted code.

For more information, refer to the updated documentation. 

[Attachment: documentation]

# Preventing Tab Synchronization Across Multiple Devices

When using Open Stage Control with multiple devices, switching tabs on one device may cause the other devices to switch to the same tab. 

## Solution

To prevent this synchronization, follow these steps:

1. Set the tab container's `bypass` property to `true`. This applies to the widget that contains the tabs, not the tabs themselves.
2. If issues persist, ensure that you also bypass the “/root” message, as this can affect tab synchronization.

By implementing these changes, you should be able to maintain independent tab selections across your devices.

# Custom Image Movement for Fader Knob

## Problem Description
Users may encounter issues when attempting to replace a fader knob with a custom image in Open Stage Control. The custom image does not move as expected, although the fader value can be manipulated directly through a variable widget.

## Solution
To resolve the issue with the custom image movement for the fader knob, follow these steps:

1. **CSS Configuration**:
   Use the following CSS for the fader knob to ensure proper movement:
   ```css
   class: Fader1;

   .fader_knob {
     top: #{(1 - @{this} / 127) * @{this.height}}rem;
   }
   ```
   Note: Use `rem` instead of `px` for height properties in Open Stage Control.

2. **Alternative Approach with CSS Variables**:
   If the first method does not yield satisfactory results, consider using CSS variables:
   ```css
   class: Fader1;
   --value: #{@{this} / 127};
   --height: @{this.height};

   .fader_knob {
     top: calc((1 - var(--value)) * var(--height));
   }
   ```
   This method allows for more flexibility and can adapt to different sizes as long as the fader has a fixed height.

3. **Centering the Fader**:
   To center the fader on the screen, set the parent container's layout to vertical and justify to center:
   ```css
   layout: vertical;
   justify: center;
   ```

4. **Handling Widget Resizing**:
   If the fader is being resized unexpectedly, adjust the parent's `contain` property to false. Be cautious, as this may cause the fader to be partially visible. Alternatively, reducing the fader's height may help maintain visibility.

For further assistance, you can refer to the attached files for a working example:
- [Attachment: ukgBzqsvI5n7XI0iG5kWuXWqU6r.json]
- [Attachment: 5Rk50ob6o8JbMEVcushsp8i5jjq.css]

# Receive MIDI, Output OSC

**Problem Description:**
Users want to set up a button in Open Stage Control that toggles and outputs a value of 1 or 0 to an OSC target when a specific note-on MIDI message is received. However, widgets cannot send messages in response to incoming messages, necessitating a custom module.

**Solution:**
To achieve this functionality, you can create a custom module that processes incoming OSC messages and sends the appropriate OSC messages based on MIDI input. Below is an example of a custom module that filters incoming OSC messages and sends a toggle message when a specific MIDI note is detected.

```javascript
module.exports = {
    init: function() {
        console.log("Module initialized"); // This will be executed once when the OSC server starts
    },

    oscInFilter: function(data) {
        var { address, args, host, port } = data;

        if (host === 'midi') {
            console.log("MIDI detected via host value!");
            console.log('Message address: ' + address);

            if (address === '/note') {
                var [channel, ctrl, value] = args.map(arg => arg.value);

                // Check for the specific control change
                if (ctrl === 32) {               
                    // Send OSC message to toggle button
                    receive('/SET', 'button_1', value / 127);
                } else {
                    console.log('Other key pressed');
                }
            }

            return; // Bypass original message
        }

        // Return data if you want the message to be processed
        return { address, args, host, port };
    }
}
```

This module will send an OSC message to `/SET` with the value of 1 when a button on the MIDI controller is pressed (sending `/note 1, 32, 127`) and will send a value of 0 when released (sending `/note 1, 32, 0`).

For further reference, you can find the attached files that may assist in your implementation:
- [Attachment: jcWObCfQsvZBZo2JwgrqBx0LCh1.js]
- [Attachment: qY7IAUBx6FKvM5H5pip7hww4zzA.json]

# Convert Incoming Sysex Messages to CC in Open Stage Control

**Problem Description**  
Users want to convert incoming SysEx messages from a MIDI controller (such as a Mackie Control) into Control Change (CC) messages within Open Stage Control. This conversion is necessary for dynamic articulation switching in Cubase without using additional plugins.

**Solution**  
To convert SysEx messages to CC messages, you can implement a custom module in Open Stage Control. Below is a sample code snippet that demonstrates how to achieve this:

```javascript
// Example for track1 with CubaseId ww0001
if (args[0].value.includes('77 77 30 30 30 31')) {
    receive('/track1/visible', 1);
    receive('midi', 'DAWtoOSC', '/control', 127, 0, 0);
} else {
    receive('/track1/visible', 0);
}
```

### Steps to Implement:
1. **Identify the SysEx Message**: Modify the condition in the code to match the specific SysEx message you wish to convert.
2. **Set Up OSC Properties**: Ensure that you have a corresponding button or control in Open Stage Control with the appropriate OSC properties (e.g., `/track1`).
3. **Dynamic Track Management**: Consider using unique identifiers for tracks (e.g., `ww0001` for woodwinds) to maintain consistency even when adding or removing tracks.

This method allows you to manage track visibility and send CC messages based on incoming SysEx data effectively. 

For further details or specific implementations, additional context may be required. Please refer to the relevant documentation or community resources for more advanced configurations. 

[Attachment: filename.ext] (attachment reference missing)

# Multiple Types in preArgs

**Problem Description:**
When attempting to specify multiple types in `preArgs`, only the first type is being sent. For example, using the configuration:
```json
{
  "type": "si",
  "value": "/meters/8 1"
}
```
results in only the string type being transmitted.

**Solution:**
To correctly specify multiple types in `preArgs`, use an array format as follows:
```json
[
  {"type": "s", "value": "/meters/8"},
  {"type": "f", "value": 1}
]
```
This format allows for the inclusion of different data types in a single `preArgs` configuration.

# Modifying an Encoder Widget to Pulse On/Off Values

## Problem Description
Users want to modify an encoder widget in Open Stage Control to trigger two game device buttons to pulse on/off as the encoder is turned. Specifically, one button should pulse when the encoder is rotated clockwise, and another when it is rotated counter-clockwise. The implementation should send MIDI messages with a high velocity value followed by a zero velocity value for each increment of the encoder's rotation.

## Solution
To achieve this functionality, follow these steps:

1. **Bypass OSC Output**: Disable OSC output for the encoder widget.

2. **Use the OnValue Script**: Implement the following script in the "On Value" scripting box of the encoder widget:

   ```javascript
   var bob = value; // Use the value variable directly
   if (bob > 0) {
       send('midi:VirtualMIDI', '/note', 1, 1, 127);
       setTimeout(function() {
           send('midi:VirtualMIDI', '/note', 1, 1, 0);
       }, 30);
   }
   if (bob < 0) {
       send('midi:VirtualMIDI', '/note', 1, 2, 127);
       setTimeout(function() {
           send('midi:VirtualMIDI', '/note', 1, 2, 0);
       }, 30);
   }
   ```

3. **Handling Encoder Release**: To prevent the button from getting stuck on release, add a release message in the `onTouch` script:

   ```javascript
   if (event.type == 'stop') {
       // Send release message
       send('midi:VirtualMIDI', '/note', 1, 1, 0); // For button 1
       send('midi:VirtualMIDI', '/note', 1, 2, 0); // For button 2
   }
   ```

4. **Adjust Release Parameter**: Set the "Release" parameter to 0 to avoid the button getting stuck.

5. **Optimize MIDI2vJoy**: If you experience latency, consider using a more responsive version of MIDI2vJoy, such as MIDI2vJoy2 (v2.2.0), which may improve performance.

This setup should allow the encoder widget to pulse the desired on/off values effectively as it is turned. 

[Attachment: filename.ext] (attachment reference missing)

# Setting Nested Values for a Matrix in Open Stage Control

## Problem Description
Users may want to set nested values for a matrix of buttons in Open Stage Control using a single OSC call, rather than sending individual OSC messages for each button. For example, the desired syntax is:
```
/EDIT myMatrix { "value": [ [0,1,0,1], [0,0,1,1] ] }
```
However, users have encountered difficulties implementing this method.

## Solution
To achieve this, send the value bundle to a script widget and dispatch the values from there. Since sending nested arrays in OSC without using a string format like JSON is unlikely to be possible, you can use the following script:

```javascript
// Assuming received value is a JSON nested array
// "[[0,1,0,1], [0,0,1,1]]"
var values = JSON.parse(value);
for (var i in values) {
  for (var j in values[i]) {
    set('myMatrix/' + i + '/' + j, values[i][j]);
  }
}
```

This script will parse the JSON array and set the values for each button in the nested matrix accordingly.

# Resizing the "Inner Widget"

**Problem:**
The user wants to resize a knob widget to better match its background. While they successfully adjusted the size within a one-knob-matrix using the "padding" field, they seek guidance on how to achieve similar results with a standard knob widget.

**Solution:**
To resize a standard knob widget, you can manually add padding to the canvas. Use the following CSS code:

```css
canvas {
  padding: 20rem;
}
```

This adjustment allows for greater control over the size and appearance of the knob widget.

# Custom Module: Sending Integer Arguments

**Problem Description**  
When developing a custom module to communicate with an ALSA OSC server, there is a need to send messages containing integer arguments. By default, messages are sent with numbers represented as floats, which is not suitable for identifiers like ALSA card IDs.

**Solution**  
To send an integer argument from a custom module, use the following syntax:

```javascript
send('127.0.0.1', 5555, '/address', {type: 'i', value: 1});
```

This command will send the integer `1` to port `5555` as an integer type. 

For further details, refer to the documentation on custom modules in Open Stage Control. 

[Attachment: Custom module - Open Stage Control]

# Adjusting Line Spacing in Open Stage Control

## Problem Description
When setting the font size to 140% with the "wrap" option configured to soft, the distance between lines of text appears too close together.

## Solution
To adjust the spacing between lines, utilize the `line-height` CSS property. This property sets the height of a line box and is commonly used to control the distance between lines of text. 

For example, you can add the following CSS to your style settings:

```css
line-height: 1.5; /* Adjust the value as needed */
```

This will increase the space between lines, improving readability.

# Adding Double Tap and Labeling Points in MultiXY

## Problem Description
Users are interested in implementing a double tap feature in the MultiXY control to reset all points to their original positions. Additionally, there is a request to label each pad point or color them individually, as the default labeling is not sufficient.

## Solution
### Double Tap Feature
Currently, implementing a double tap feature may conflict with the multitouch capability of MultiXY. As a workaround, it is recommended to use a dedicated button to reset the MultiXY control. This can be achieved by assigning a script to the button that resets the points.

### Labeling Points
You can set custom labels for each point in the MultiXY control by using the `points` property. For example:
```json
["Point A", "Point B"]
```
To color each point individually, you can target them using CSS with the following selectors:
```css
.pad-0 {
  --color-fill: red;
  --color-stroke: red;
}
.pad-1 {
  --color-fill: green;
  --color-stroke: green;
}
/* etc */
```
This allows for both labeling and individual coloring of the points. 

[Attachment: filename.ext]

# Changing Label in Matrix Button

## Problem Description
Users may encounter difficulties when attempting to change the label of buttons within a matrix button in Open Stage Control. Additionally, there may be confusion regarding how to access parameters such as the "mode" type (e.g., toggle, push).

## Solution
To change the label and mode of buttons in a matrix, it is recommended to use JavaScript within the `props` property. The following examples illustrate how to achieve this:

### Basic Example
To set the mode and label based on the button's index, use the following code:
```javascript
JS{{
var props = {}
props.mode = "push"
props.label = "button n° " + $ 
return props
}}
```

### Custom Labels Example
For custom labels, you can define an array of labels and assign them based on the button's index:
```javascript
JS{{
var props = {}
var labels = ["joe", "william", "jack", "averell"]
props.mode = "push"
props.label = labels[$] 
return props
}}
```

### MIDI Configuration Example
If you want to include MIDI configuration along with changing the label, ensure the JavaScript object notation is correctly formatted:
```javascript
JS{{
var props = {
  "target": "midi:virtual_midi",
  "address": "/control",
  "preArgs": [3, $ + 24]
}
var labels = ["mute", "solo"]
props.mode = "toggle"
props.label = labels[$]

return props
}}
```

### Final Working Example
Incorporating the MIDI parameters and the label change, the final code would look like this:
```javascript
JS{{
var props = {}
var labels = ["mute", "solo"]
props.mode = "toggle"
props.label = labels[$]
props.target = "midi:virtual_midi"
props.on = 127
props.off = 0
props.address = "/control"
props.preArgs = [3, $ + 24]
return props
}}
```

### Note on Indexing
It is important to note that array indexing in JavaScript starts at 0. Therefore, if you set the `start` property to 1, you may need to adjust your index accordingly (e.g., using `$ + 1`).

For further reference, please see the attached files:
- [Attachment: matrix_label.json]
- [Attachment: jSn5B4dullw0SpT8aKbekIc5Xwp.json]

# Control Fader via MIDI with Soft Takeover

**Problem Description:**
Users want to control a fader in Open Stage Control using a MIDI controller, implementing a "soft takeover" mode. This mode should allow the fader to be influenced by incoming MIDI values only when they are close to the fader's current value. However, accessing the current value of the fader within a custom module is challenging.

**Solution:**
To achieve this functionality, follow these steps:

1. Capture the fader's outgoing messages using the `oscOutFilter` function in your custom module.
2. Store the fader's current value in a variable within the module.
3. Compare this stored value with the incoming MIDI value.
4. Implement logic to update the fader only if the incoming MIDI value is close to the stored value.

This approach will enable the desired soft takeover effect for the fader controlled by the MIDI controller.

# Matrix of Fader Configuration in Open Stage Control

## Problem Description
A user was attempting to create a matrix of compact faders in Open Stage Control, but faced challenges with the addressing format required for the faders. The goal was to generate a 4x4 matrix of faders, each with a specific address pattern.

## Solution
To create a matrix of compact faders with the correct addressing, use the following properties configuration:

```json
{
  "widgetType": "fader",
  "props": { 
    "design": "compact",
    "address": "/track/#_{$+1}/send/#{$+1}/volume" 
  }
}
```

### Key Points:
- The first index in the address should be specified as `#_{$+1}`.
- The second index should be specified as `#{$+1}`.

This configuration will generate the desired matrix of faders with the correct addressing format.

### Additional Information
The user also shared a JSON file related to their project:
[Attachment: y9aD93AfLSsx7l17EcivmXia7Ne.json]

# Correct Syntax for MIDI Outputs in Open Stage Control

**Problem Description:**
Users may encounter syntax errors when attempting to send an array of MIDI ports using the headless node in Open Stage Control. The command may produce an "invalid syntax" error or indicate that certain ports are not in the list.

**Solution:**
To correctly specify MIDI outputs, use the following syntax without brackets or quotes around the MIDI ports:

```bash
--midi cubaseOSC1:cubaseToOSC1,cubaseFromOSC1 cubaseOSC2:cubaseToOSC2,cubaseFromOSC2
```

Ensure that all MIDI ports specified are correctly named and exist in your configuration. If you receive errors about ports not being in the list, verify the spelling of the port names in your setup.

# Advanced Syntax Error in Script Property

When using the scripting property of a button in Open Stage Control, you may encounter the following error message in the console: 

```
script syntax error: using advanced syntaxes in the script property is strongly discouraged and may result in unexpected behaviors.
```

This typically occurs when using the `@{}` syntax within script properties.

## Solution

To resolve this issue, avoid using the `@{}` syntax and instead utilize the `get()` function. Here are two recommended approaches:

1. **Using Concatenation:**
   ```javascript
   const switchValue = get('switch_source_select_v2');
   send('/adm/obj/' + switchValue + '/x', value[0]);
   ```

2. **Using Template Literals:**
   ```javascript
   const switchValue = get('switch_source_select_v2');
   send(`/adm/obj/${switchValue}/x`, value[0]);
   ```

By following these methods, you can eliminate the syntax error and ensure your scripts function correctly.

# Text Matrix Linked to Fader Matrix Only Updating When First Fader is Moved

**Problem Description:**

A user is experiencing an issue where a text matrix displaying values for multiple faders only updates when the first fader is moved. The user has confirmed that the values are changing in the console, but the text matrix does not reflect these changes for all faders.

**Solution:**

To resolve this issue, avoid using the `#{}` syntax within a `JS{{}}` block. Instead, construct the properties as follows:

```javascript
JS{{
var props = {}
props.id = "opacityFaderLabels" + $
props.value = "Layer " + ($ + 1) + "// " + @{opacityFaders.value}[$]
return props
}}
```

Additionally, it is recommended to link each fader and text widget using a `linkId` based on the index (`$`). This method prevents the entire matrix from being rebuilt whenever a value updates.

For limiting decimal places in the text box, consider using an input widget instead of a text widget, or apply the `.toFixed(2)` method to format the values appropriately.

To concatenate a string with the fader's value when using `linkId`, you need to write the text's `value` property to depend on the fader's value directly. This can be achieved by creating a template widget that includes both the slider and text widgets, and defining their IDs based on the container's variables. Refer to the `clones_and_variables.json` example for guidance on implementing this structure.

For further details, see the attached files for examples and additional context: [Attachment: clones_and_variables.json].

# Uncaught RangeError: Maximum call stack size exceeded

When applying specific scripts to controls in the Advanced tab, users may encounter the error: 

```
Uncaught RangeError: Maximum call stack size exceeded
```

This error occurs when the project is reopened after modifying the scripts, leading to issues with controls on the Main tab.

## Solution

The issue is often caused by using the same ID for multiple components. Ensure that each component has a unique ID to avoid this error.

Additionally, it is recommended to avoid using the `@{}` syntax in scripts. Instead, utilize the `get` function for better reliability.

[Attachment: AGWA LX V18.json]  
[Attachment: yY3noEb0OfsYd6s6CxC1ZA3T46w.json]

# Sending MIDI Notes in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to send MIDI note messages using Open Stage Control. Specifically, the correct syntax and parameters for sending MIDI notes are often unclear.

## Solution
To send MIDI notes in Open Stage Control, you can use the following syntax in the `preArgs` field:

```javascript
preArgs: [1, 60]
```

In this example:
- `1` represents the MIDI channel (e.g., channel 1).
- `60` is the MIDI note number (e.g., Middle C).

To send a range of MIDI notes, you can specify the number of keys and the starting note. For example, to send MIDI notes from C3 (MIDI note 48) across 25 keys, you would set it up as follows:

- **Number of keys**: 25
- **Starting note**: 48 (C3)

This configuration will send MIDI note messages from C3 (48) to B4 (72).

Ensure that the MIDI output settings are correctly configured in Open Stage Control to successfully transmit the MIDI notes. 

For additional reference, please consult the MIDI note number chart [here](https://www.inspiredacoustics.com/en/MIDI_note_numbers_and_center_frequencies). 

[Attachment: image.png]

# Value Conversion for MIDI CC in Open Stage Control

**Problem:**
Users want to display values in a specific range (e.g., 0 to 100% or -12st to +12st) while sending MIDI Control Change (CC) messages in the range of 0 to 127.

**Solution:**
To achieve this, you can use JavaScript to convert the MIDI value to the desired display format without altering the actual MIDI range. Here are the formulas for different scenarios:

1. **For a percentage display (0 to 100%):**
   ```javascript
   var val = @{knob_id};
   return Math.round(val / 127 * 100) + '%';
   ```

2. **For a semitone display (-12st to +12st):**
   ```javascript
   var val = @{knob_id};
   return Math.round(val / 127 * 24 - 12) + 'st';
   ```

3. **For a custom range (0.5 to 2.5):**
   To convert a MIDI value from 0-127 to a range of 0.5 to 2.5, use the following formula:
   ```javascript
   var result = val / 127 * 2 + 0.5;
   ```

4. **Limiting to two decimal places:**
   If you need to limit the result to two decimal places, you can modify the code as follows:
   ```javascript
   var result = (val / 127 * 2 + 0.5);
   result = result.toFixed(2);
   return result;
   ```

By implementing these JavaScript snippets in your text widget, you can effectively display the desired value while maintaining the correct MIDI CC range. 

[Attachment: Capture d’écran 2020-10-20 à 22.24.51]

# Accessing and Modifying Values in a Matrix Widget

## Problem Description
Users may encounter difficulties when trying to retrieve a single value from a Matrix widget using advanced syntax or JavaScript. Additionally, there may be questions about how to set a single value in a Matrix from another widget.

## Solution
To retrieve a single value from a Matrix widget, use the following syntax:
```plaintext
#{
@{widgetID}[0 ... 3]
}
```
This allows you to access specific indices within the Matrix.

To set a single value in a Matrix from another widget, utilize the `set()` function in the script properties. The children's IDs in the Matrix are defined as `matrix_id/X`, where `X` is the child's index. Therefore, you can set a value using:
```javascript
set("matrixID/X", value)
```
If you want to assign unique names to each element, you can define the children's IDs using the `props` property of the Matrix and employ the `$` variable in the JS{{}} / #{} syntaxes to reference the children's indices.

For example, you can define the property with a JavaScript block:
```javascript
props: {
  children: [
    { id: "uniqueName1" },
    { id: "uniqueName2" },
    // Additional children
  ]
}
```

For further details, refer to the documentation on scripting: [Open Stage Control Scripting Documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/).

### Attachments
- [Attachment: uEplif05meRhxOzZUNrmH9OtccN.json]
- [Attachment: oV5rdIjoQPBGDtmSF591grRIkcw.json]

# Can No Longer Connect Remotely to OSC Server

**Problem Description:**
Users may experience a "request timed out" error when attempting to connect to an Open Stage Control (OSC) server remotely, despite being able to connect locally through a web browser.

**Solution:**
1. **Check Firewall Settings:**
   - If you are running the OSC server on Windows, ensure that the Windows Firewall is not blocking incoming connections. The firewall may automatically block these connections, especially after updates.
   - To resolve this, go to your firewall settings and allow the OSC application through the firewall.

By following these steps, you should be able to restore remote connectivity to your OSC server.

# Changing the "visible" Property of a Widget with Another Widget

## Problem Description
Users may want to change the "visible" property of a widget based on the value of another widget. This can be done directly or indirectly using conditional statements.

## Solution
To change the "visible" property of a widget based on the value of another widget, follow these steps:

1. **Use a Variable Widget**: Create a variable widget that will hold the value to control the visibility.
2. **Set the Visible Property**: Use the `@{}` syntax to reference the variable in the "visible" property of the target widget.
3. **Update the Variable**: Use the `set()` function to update the variable's value based on your conditions.

### Example Code
```javascript
if (value === 0) {
    set('variable_name', 0); // Set variable to control visibility to FALSE
} else if (value === 1) {
    set('variable_name', 1); // Set variable to control visibility to TRUE
}
```

This approach allows for dynamic control of widget visibility based on user interactions. 

[Attachment: visible_property_example.png]

# Hide Root Navbar Using VAR on Startup of Open Stage Control

**Problem Description:**
The goal is to hide the root navigation bar when the client connects to the server, using a variable. The initial approach resulted in a brief flash of the navigation bar before it was hidden, which is not desirable for a smooth user experience.

**Solution:**
To achieve a seamless hiding of the navigation bar, it is recommended to hide it by default in the root's CSS. You can then show it only when necessary. Here’s how to implement this:

1. **Modify CSS:**
   Set the navigation bar to be hidden by default in your CSS:
   ```css
   inner > .navigation.main {
     display: none; /* Hide by default */
   }
   ```

2. **Use VAR for Toggling:**
   You can still use a variable to toggle the visibility of the navbar. For example, if you want to show it later based on certain conditions, you can adjust the CSS dynamically.

3. **Custom Module Initialization:**
   In your custom module, you can keep the `sessionOpened` event listener to manage the visibility:
   ```javascript
   app.on("sessionOpened", async (data, client) => {
     receive("/SCRIPT", `setVar("root", "displayValue", 1)`) // Adjust as needed
   });

   module.exports = {
     init: function () {
       // Initialization logic if needed
     },
     unload: function () {
       // Cleanup logic if needed
     },
     oscInFilter: function (data) {
       return data;
     },
     oscOutFilter: function (data) {
       return data;
     },
   };
   ```

By implementing these changes, the navigation bar will remain hidden upon startup, providing a smoother experience without the initial flash. 

[Attachment: filename.ext]

# Close Modal after Push Button

**Problem Description**  
Users may want to close a modal after pressing a button within it and return to the homepage. 

**Solution**  
You can achieve this using a script widget. Here is a minimal example:

1. Use a script widget that takes the button's value as input (value property).
2. Set the modal's value to 0 when the script receives a specific value from the button.

Here is a sample script:

```javascript
if (value == 70 || value == 71 || value == 72 || value == 73 || value == 74 || value == 75) {
    set("modal_6", 0);
}
```

In this script, you can replace the button IDs with the appropriate values for your buttons. 

For example, if you have buttons with IDs:
- @{push_3}
- @{push_4}
- @{push_11}
- @{push_12}
- @{push_13}
- @{push_14}

You can add these IDs to the script to ensure that pressing any of these buttons will close the modal.

[Attachment: nz3DY4TGbeuiFu726rD0qU8YmHK.json]  
[Attachment: modalcloser.json]

# Matrix Fader Custom Property Issues

## Problem Description
When working with matrix faders in Open Stage Control, two issues arise:
1. The use of `@{this}` in the HTML property does not function as expected within a matrix.
2. Attempting to add two variables, `cc_add` and `cc`, results in string concatenation (e.g., "1" + "2" = "12") instead of numerical addition.

## Solution
1. The `@{}` blocks are resolved at the matrix level, not at the child level. This means that child elements only receive the resolved result as a property. The current implementation does not allow for direct usage of `@{this}` within matrix elements. 
   
2. Ensure that the values in the `cc` array are treated as numbers, not strings. To perform numerical addition, convert the string values to numbers before adding them. For example:
   ```javascript
   var result = Number(cc_add) + Number(cc);
   ```

Refer to the attached files for additional context and examples:
- [Attachment: matrix_fader.json]
- [Attachment: lZr2fdcqF3PffFszadJudoRR2W3.json]

# How to Add a Variable to a URL in Open Stage Control

To dynamically insert a variable into a URL for image sources in Open Stage Control, you can use the following syntax:

```html
<img src="@{imgPath}undo.svg" class="imageStyle">
```

In this example, `imgPath` is a variable that should be defined with the desired file path, such as:

```javascript
imgPath = "/home/user/Desktop/oscIcons/";
```

This approach allows you to set the file path once, and it will apply to all images that reference this variable, making it easier to manage image sources across multiple widgets.

# Disable MIDI Return on a Widget

## Problem Description
When using a dropdown menu widget in Open Stage Control that sends MIDI values, a MIDI feedback resets the menu to 0, causing associated visibility containers to revert to a hidden state. The goal is to disable the MIDI return for this specific widget to prevent this issue.

## Solution
To prevent the widget from receiving MIDI messages, follow these steps:

1. **Empty the `target` Property**: Remove any value from the widget's `target` property. This ensures that the widget does not match the origin of incoming MIDI messages.

2. **Use the `onValue` Script**: Implement the `onValue` script to send messages manually. This allows you to control the output without receiving MIDI feedback.

3. **Avoid Using Bypass**: Setting the widget to bypass will prevent it from sending any messages, including outputs. Instead, rely on the `onValue` script for functionality.

By following these steps, the dropdown menu will function as intended without being affected by MIDI feedback.

For further debugging, you can enable the server's `debug` option to monitor MIDI and OSC messages. 

**Example Code**:
```javascript
var id = get('variable_id1');
send('/control', id, 1, get('this'));
```

This approach effectively resolves the issue of unwanted MIDI feedback affecting the widget's state.

[Attachment: hZNlA1MX2uoa5Bmep4TBA4d8Y52.json]

[Attachment: hZNlA1MX2uoa5Bmep4TBA4d8Y52_1.json]

# Example of Script Triggered by Value Rather than by LinkId

## Problem Description
Users may want to execute a script based on a widget's value rather than using LinkId. The documentation indicates that the `condition` property can evaluate a script based on the value received by the widget, but there is confusion about how to properly pass this value to the widget.

## Solution
To execute a script based on a widget's value, follow these steps:

1. Set the script's `value` property to reference the widget's value using the syntax `@{widget_id}`. This allows the script to receive the value from the specified widget.

2. The script will only execute when the value of the referenced widget changes. Ensure that the `@{widget_id}` is placed in the `value` property, not within the script itself.

For example:
```json
{
  "type": "script",
  "value": "@{widget_id}",
  "script": "your_script_here"
}
```

This configuration ensures that any change in the value of the widget identified by `widget_id` will trigger the execution of `your_script_here`.

For further details, refer to the documentation on [widgets reference](https://openstagecontrol.ammd.net/docs/widgets-reference/#script).

# How to Group Toggle Buttons in Open Stage Control

## Problem Description
Users may want to create a set of toggle buttons where activating one button turns off the others, similar to a radio button functionality. Additionally, there may be a need to assign separate MIDI notes to each button.

## Solution
The recommended approach is to use a switch widget, which inherently supports the desired behavior. To configure the switch for quantize presets in Cubase, follow these steps:

1. **Set Values Property**: Configure the `values` property of the switch widget with the corresponding MIDI Control Change (CC) numbers for each quantize category:
   ```json
   {
     "1/1": 29,
     "1/2": 30,
     "1/4": 31,
     "1/8": 32,
     "1/16": 33,
     "1/32": 34,
     "1/64": 36,
     "1/128": 37
   }
   ```

2. **Leave OSC Section Empty**: Do not input anything in the OSC section.

3. **Script Property**: In the `script` property, use the following command to send MIDI messages:
   ```javascript
   send("midi:yourMIDIPortName", "/control", 1, value, 127)
   ```

4. **Note on Two-way Communication**: Since these are commands in Cubase, two-way communication between OSC and Cubase is not possible. Changes made in OSC will be sent to Cubase, but not vice versa.

This setup will allow you to visually see which quantize preset is currently active on your touchscreen. 

For further details on MIDI port configuration in Cubase, refer to the instructions provided in the forum (attachment reference missing).

[Attachment: CSLW7ldWmIAt0eVUgLLfTTawSl.json]

# Customizing Button Appearance with CSS

## Problem Description
Users may encounter difficulties when trying to change the appearance of buttons and other widgets using CSS in Open Stage Control. Some CSS properties work well, while others do not, leading to confusion about which styles are applicable.

## Solution
To effectively customize the appearance of widgets, follow these guidelines:

1. **Use Browser Inspector**: Utilize the browser inspector (F12) to analyze the widget structure and determine how it can be styled. This tool helps identify which CSS properties can be applied.

2. **CSS Syntax**: If the text in the CSS editor appears in red, it is not necessarily an error. This may occur because the syntax highlighter does not fully support the inline CSS syntax used in Open Stage Control.

3. **Documentation**: There is no official resource detailing all available CSS properties for styling widgets, as this falls under user customization. Therefore, experimentation and inspection are key to finding effective styles.

By following these steps, you can better understand how to apply CSS to customize your Open Stage Control interface.

# Fullscreen Not Working on iPadOS or iOS (Chrome and Safari)

When attempting to use the fullscreen option on iPadOS or iOS devices in Chrome or Safari, users may find that selecting the fullscreen option does not result in any changes.

## Solution

To enable fullscreen functionality on iOS devices, you must add the Open Stage Control page to your home screen. Follow these steps:

1. Open the link in Safari.
2. Tap the icon with a square and an arrow pointing upwards.
3. Select the "Add to Home Screen" option (a square with a cross inside).

This method allows the application to launch in fullscreen mode as intended. 

For additional context, the fullscreen option in the menu indicates that regular fullscreen is not supported without this step. 

[Attachment: filename.ext]

# Extracts from Custom OSC Panel

## Problem Description
A user has developed a custom Open Stage Control (OSC) panel for Cubase, featuring dynamic controls and automation for expression maps and VST instruments. The user shared screenshots of their setup but did not provide the actual files due to their size.

## Solution
The custom OSC panel includes the following features:

- **Expression Maps Integration**: OSC monitors the folder containing expression maps in Cubase. When changes are made, OSC prompts the user to rebuild the articulation buttons by extracting data from the XML files automatically.

- **Dynamic VSTi Controllers**: The panel updates VSTi controllers based on the selected track, adjusting labels and CC values accordingly.

- **Filtering Options**: Users can filter by Library, Instrument, or Orchestral/Other Section to streamline their workflow.

- **Additional Functions**: The panel also includes a Transpose Function and a MIDI note selector function.

For further details or specific implementations, please refer to the shared screenshots. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: image4.png]  
[Attachment: image5.png]  
[Attachment: image6.png]  
[Attachment: image7.png]  
[Attachment: image8.png]  
[Attachment: image9.png]  
[Attachment: image10.png]  
[Attachment: image11.png]  
[Attachment: image12.png]

# How to Switch Between Panels

**Problem Description:**
Users may want to switch between multiple panels in the same location without using a modal or tabs.

**Solution:**
There are two effective methods to switch between panels:

1. **Using Switch Values:**
   - Define switch values as follows:
     ```json
     {
       "Value 1": 0,
       "Value 2": 1,
       "Value 3": 2
     }
     ```
   - Set the "visible" field of each panel based on the switch value:
     - For the first panel:
       ```javascript
       #{@{switch_id} == 0 ? 1 : 0}
       ```
     - For the second panel:
       ```javascript
       #{@{switch_id} == 1 ? 1 : 0}
       ```
     - For the third panel:
       ```javascript
       #{@{switch_id} == 2 ? 1 : 0}
       ```

2. **Using Tabs:**
   - Right-click on your panel and select "Add Tab."
   - Use `linkId` in the switch properties:
     - For the switch:
       ```
       >>Tab_or_whatever_keyword_you_want
       ```
     - For the panel:
       ```
       <<Tab_or_whatever_keyword_you_want
       ```
   - To hide the tab labels, add the following CSS to the panel:
     ```css
     .navigation { display: none; }
     ```

# Copy Template to New Computer

**Problem Description:**
After upgrading a PC, users may encounter issues when trying to copy and load an Open Stage Control template. Common problems include error messages related to missing packages, such as Xml2js.

**Solution:**
To resolve the issue of missing packages, follow these steps:

1. Open the terminal in the folder containing your custom module.
2. Instead of running `npm install Xml2js`, use the correct package name:
   ```bash
   npm install xml-js
   ```
3. Ensure that you have administrative privileges when running the command, as this may be necessary to install packages successfully.

If you continue to experience issues, please refer to any error messages for further troubleshooting.

[Attachment: IMG_4659]
[Attachment: IMG_4661]

# Calculate Geometry with Percentage of Other Widgets

**Problem Description:**
Users may encounter difficulties when trying to calculate widget positions and sizes using percentages in Open Stage Control. Specifically, there is confusion regarding the syntax for manipulating widget properties, such as positioning a panel relative to a button.

**Solution:**
To calculate positions and sizes using percentages in Open Stage Control, follow these guidelines:

1. **Using `parseInt()` for Calculations:**
   When you need to perform arithmetic operations involving percentages, use `parseInt()` to convert percentage values to integers. For example:
   ```javascript
   left = #{parseInt(@{button.left}) + 30}%
   ```

2. **Setting Position and Width:**
   A more straightforward approach is to directly set the panel's position relative to the button and use CSS properties for offsets:
   ```javascript
   left = @{button.left}
   margin-left: 30%;
   width = #{@{button.width} * 3}
   ```

3. **Understanding CSS Percentages:**
   Be aware that in CSS, percentages for margin and padding are calculated based on the width of the parent element. This may cause unexpected behavior if not accounted for.

By implementing these solutions, you should be able to effectively manage widget positioning and sizing in your Open Stage Control projects. 

[Attachment: filename.ext] (attachment reference missing)

# JavaScript Error in Custom Module

## Problem Description
A JavaScript error occurs in a custom module when certain tracks are selected, resulting in an undefined property error. This issue requires restarting Open Stage Control (OSC) to resolve.

## Solution
The error arises from attempting to access a property of an undefined object. To prevent this, implement error checking in your script. Specifically, modify the code to include a conditional check before accessing the `trackarticulations` property. 

Here is an example of how to handle this:

```javascript
var object = someObjectVariable[someOtherVariable];
if (object !== undefined) {
  var articulations = object.trackarticulations;
  // Now do something with articulations
}
```

Additionally, ensure that the keys in your `instruments` object match the expected values being sent from your DAW. For instance, if the DAW sends a value of 21, ensure that your `instruments` object has an entry for that key. If it does not, you will encounter an error when trying to access `instruments[21].trackarticulations`.

Review the relevant part of your custom module:

```javascript
var instruments = {
  0: {'trackname': 'No Expression Map', 'trackarticulations': ['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',]},
  1: {'trackname': 'Berlin Symphonic Strings - Violins I', 'trackarticulations': ['Melodic Legato','Pattern Legato','','','','','Sustains','Sustains Soft','Sustains Accented','','','','Marcato Long','Marcato Short','','','','','Spiccato','Staccato','Pizzicato','','','','Tremolo','Trills Minor','Trills Major','','','','','','','','','',]},
  2: {'trackname': 'Berlin Symphonic Strings - Violins II', 'trackarticulations': ['Melodic Legato','Pattern Legato','','','','','Sustains','Sustains Soft','Sustains', ... }
  // Ensure all necessary keys are defined
};
```

Make sure to define all keys that your DAW might send to avoid undefined errors. 

[Attachment: jtM4u8kJXVa9Jtr9FW0vcvkSJSs.js]

# Embedding a Video Player in Open Stage Control

## Problem Description
Users want to embed an IFrame of a video player, such as an OBS Ninja live stream, on their Open Stage Control (OSC) page. Initially, there were restrictions that limited the IFrame widget to local networks only, which caused issues when trying to load streams on public servers.

## Solution
To embed a video player in OSC:

1. **Version Requirement**: Ensure you are using Open Stage Control version 1.0.0 or later, as the restriction for local network only has been removed since this version.

2. **Using the IFrame Widget**: 
   - You can utilize the IFrame widget to embed any webpage, including video streams, directly into your OSC interface.
   - If the stream works on `http://127.0.0.1:8080/` but not on your local IP (e.g., `http://192.168.0.186:8080`), verify that the URL is accessible in a regular browser tab.

3. **Error Checking**: If the stream does not load, check for errors in the browser's console (F12) to diagnose any issues.

4. **Opening URLs with a Button**: 
   - You can create a simple HTML link using the HTML property:
     ```html
     <a href="http://some.link">Click here</a>
     ```
   - Alternatively, you can create a custom module that opens the system's browser when an OSC message is sent:
     ```javascript
     var spawn = nativeRequire('child_process').spawn;
     var platform = 'linux';
     var command = {darwin: 'open', win32: 'explorer.exe', linux: 'xdg-open'}[platform];

     module.exports = {
         oscOutFilter: function(data) {
             if (data.address === '/open_browser') {
                 var url = data.args[0].value;
                 spawn(command, [url]);
                 return;
             }
             return data;
         }
     }
     ```

5. **Future Updates**: In the next release, it will be possible to call `openUrl()` directly from a widget's script property, enhancing the functionality for opening URLs.

By following these steps, you can successfully embed a video player and open web pages in Open Stage Control. 

[Attachment: filename.ext] (attachment reference missing)

# Sending OSC Values from Scripts or Variables

**Problem Description:**
Users may encounter difficulty in sending OSC messages using scripts or variables in Open Stage Control, particularly when values are derived from an XY pad.

**Solution:**
To successfully send OSC messages from scripts or variables, it is essential to explicitly call the `send()` function within the script. This ensures that the desired values are transmitted correctly.

For example, if you have an XY pad and want to send its values, your script should look something like this:

```javascript
// Example script to send values from an XY pad
let xValue = getValue('xyPadX'); // Replace with actual path to your XY pad's X value
let yValue = getValue('xyPadY'); // Replace with actual path to your XY pad's Y value
send('/your/osc/address', xValue, yValue);
```

Make sure to replace `'/your/osc/address'` with the appropriate OSC address you intend to use.

[Attachment: XY_Pad.json]  
[Attachment: zkOtuvSEK4AXTs0d8RM1cV43r7G.json]

# AJAX Request with JavaScript in Open Stage Control

## Problem Description
Users may encounter issues when attempting to make AJAX or HTTP requests using JavaScript in Open Stage Control. Common errors include:
- `TypeError: XMLHttpRequest is not a constructor`
- `ReferenceError: require is not defined`

These errors occur because AJAX requests are not permitted in the script context for security reasons.

## Solution
While traditional AJAX requests are not supported, users can achieve similar functionality using an iframe or by utilizing the `httpGet` function available in scripts starting from version 0.48.2.

### Method 1: Using an Iframe
You can send HTTP GET requests by embedding an iframe in your project. An example session file is provided for reference:
[Attachment: iframe_get.json]

### Method 2: Using `httpGet`
As of version 0.48.2, the `httpGet` function can be used directly in scripts to perform HTTP GET requests. For detailed usage, refer to the official documentation.

[Attachment: cP3nCKHWVKoII8NkYbmrvuOuLuO.json]

# Lighting Up Keyboard Widget Keys

**Problem Description:**
Users want to light up keys on the keyboard widget in Open Stage Control based on MIDI note values. They seek guidance on how to link MIDI values to the corresponding keys and how to manage the visual representation of keys, including changing their colors based on their state (e.g., pressed, available).

**Solution:**
1. **Lighting Up Keys:**
   To light up a key, send the same MIDI message to Open Stage Control (OSC) as when the key is pressed, ensuring the velocity matches. If the source of the message is identified as a target of the widget, the key will appear pressed rather than just lit.

2. **Resetting Key States:**
   To reset all keys to an off state, you can retrieve the keyboard's starting value and range using:
   ```javascript
   @{keyboard_1.start}
   @{keyboard_1.keys}
   ```
   This allows you to calculate the MIDI values to reset.

3. **Changing Key Colors:**
   - To manage the color of keys, you can use CSS. For example:
     ```css
     .on {
       background: green;
     }
     .active {
       background: orange;
     }
     ```
   - To differentiate keys that are part of a specific scale, you can use the `:nth-child` selector to target individual keys:
     ```css
     .widget:nth-child(1),
     .widget:nth-child(2) {
       background: red;
     }
     ```
   This changes the color of the first two keys.

4. **Additional Key States:**
   While you cannot add a CSS class directly to a key, you can visually indicate available keys by using CSS selectors to style them based on their index.

For further details on property syntax, refer to the Open Stage Control documentation: [Advanced Property Syntax](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/).

(attachment reference missing)

# Scripting in Open Stage Control Compared to Lemur

## Problem Description
Users transitioning from Lemur to Open Stage Control (OStgC) may wonder about the scripting capabilities of OStgC, especially in relation to their experience with Lemur. They seek guidance on whether to handle complex scripting within OStgC or to utilize Bitwig's JavaScript scripting for more complicated tasks.

## Solution
Open Stage Control utilizes JavaScript for scripting, which provides a powerful and flexible environment for creating complex interactions. Compared to Lemur, OStgC offers enhanced capabilities, particularly with its OSC functionality.

When integrating with Bitwig, users have two main approaches for scripting:
1. **Complex Scripting in OStgC**: This approach involves leveraging OStgC's scripting capabilities to handle intricate logic and interactions, similar to how users may have done in Lemur.
2. **Utilizing Bitwig for Complex Tasks**: Alternatively, users can use OStgC primarily as a control surface and delegate more complex scripting tasks to Bitwig’s JavaScript environment.

Both methods are valid, and the choice depends on the specific requirements of the project and the user's comfort level with each platform. 

Overall, OStgC is considered to be more powerful and is actively developed, with a supportive community available for assistance.

# Sharing Patch Solutions for Open Stage Control

## Problem Description
Users are sharing various patches for Open Stage Control, discussing different approaches to manage parameters and faders. A common issue arises regarding the initialization of variables, which can lead to undefined values until a widget is activated for the first time.

## Solution
To address the issue of variable initialization, the following solution is recommended:

- Use the `VAR{}` syntax with an additional parameter to set an initial value for variables. For example:
  ```javascript
  VAR{foo, 1}
  VAR{foo, green}
  ```
This approach ensures that variables are initialized with a defined value, preventing them from being undefined upon first activation.

### Shared Patches
- **Spat Revolution Patch**: [Attachment: 8ZwoymDhBD74ZBex7sr5xJbocZY.json]
- **Variable Fader Example**: [Attachment: pUYIWNv52CG5FppF1DW3jSS29l9.json]
- **Updated Variable Fader with Ranges**: [Attachment: iFFbfmoOTSKHOagVLkkkE7UlSKn.json]
- **Variable Fader Test**: [Attachment: nbJXdKZK1a2zjrcGRt7y4k3ZceV.json]

# Tap Tempo Button Implementation and Optimization

## Problem Description
A user developed a Tap Tempo Button for Open Stage Control, which includes an averaging algorithm and LED blinking to indicate tempo. However, the user encountered issues with the LED blinking tempo not being adjustable and sought optimization for the code. Additionally, there were inquiries about sending tempo information to a Digital Audio Workstation (DAW) like Cubase.

## Solution
1. **Code Optimization**: The user requested assistance in optimizing their code. They noted that the previous version calculated tempo incorrectly but have since resolved some issues. The latest version of the code is available in the attachment:
   - [Attachment: Tempo_06.json]

2. **Sending Tempo to DAW**: The user confirmed that the Tap Tempo Button can send tempo information to a DAW. However, it was noted that Cubase does not support Open Sound Control (OSC) for transmitting tempo or control commands. Alternatives like Reaper or Digital Performer were suggested for OSC compatibility. For Cubase, users can utilize built-in tools such as Beat Calculator or Time Stretch to adjust tempo.

3. **Attachments for Reference**: Additional versions of the Tap Tempo Button code are provided for further review and optimization:
   - [Attachment: 8Dr6C34iT8IFM3tZPnGy1z72iFQ.json]
   - [Attachment: 2ZuO9LxpfMW3a8ilEItqGxMPlsx.json]
   - [Attachment: tapTempo.json]
   - [Attachment: AvFfiWkQDtWIXl0grhPwdO1KnMK.json] 

For further assistance or specific questions regarding the implementation, users are encouraged to reach out for help with settings or code adjustments.

[Attachment: wjGDbhME5Koc3HxNNvGjqCpzVhE.json]

# Saving, Loading, and Displaying State Files in Open Stage Control

## Problem Description
Users want to implement functionality in Open Stage Control to save the current state of all widgets to the hard disk using a "Save" button, similar to the "Save as..." menu option. Additionally, they want to scroll through saved state files using a knob and display the file name in an input widget. The "Load" button should open the corresponding state file, mimicking the "Open" menu action.

## Solution
To achieve the desired functionality, follow these steps:

1. **Saving State**:
   Use the `stateGet()` function to retrieve the current state and store it in the browser's local storage. For example:
   ```javascript
   var state = stateGet("root");
   storage.setItem("p001", state); // Save state as p001
   ```

2. **Loading State**:
   To load a saved state, retrieve it from local storage and set it using `stateSet()`. For example:
   ```javascript
   stateSet(storage.getItem("p001")); // Load state p001
   ```

3. **Implementing Buttons**:
   Create buttons for saving and loading states. Ensure that the load buttons call the correct state:
   ```javascript
   // Load Button 1
   stateSet(storage.getItem("p001"));

   // Load Button 2
   stateSet(storage.getItem("p002"));
   ```

4. **Custom Module for File Handling**:
   If you need to read files directly from the filesystem, you can create a custom module using Node.js `fs` module. Here's an example:
   ```javascript
   var fs = nativeRequire('fs');
   module.exports = {
       oscOutFilter: function(data) {
           var {address, args} = data;
           if (address === '/file') {
               fs.readFile(args[0].value, 'utf8', (err, data) => {
                   if (err) {
                       console.error(err);
                       return;
                   }
                   receive('/html', data);
               });
               return; // Bypass original message
           }
           return {address, args}; // Return data for further processing
       }
   }
   ```

5. **Displaying the Filename**:
   To display the filename in a text widget after reading a state file, you can set the text widget's value in the callback of the file read operation.

By following these steps, you can effectively save, load, and display state files in Open Stage Control. If you encounter issues, ensure that you are correctly calling `stateSet()` after loading the state from storage. 

For further assistance, refer to the documentation or community resources. 

[Attachment: pix-1]  
[Attachment: pix-2]  
[Attachment: pix-3]  
[Attachment: pix-4]

# Bitwig Parameters - Differentiate Uni/Bi-Polar Knobs

## Problem Description
When using Open Stage Control with Bitwig, there is a challenge in accurately displaying parameter values for uni-polar and bi-polar knobs. The values from Bitwig follow a "0 to Max" format, which can lead to incorrect visual representations of the parameter values, especially for bi-polar parameters.

## Solution
To correctly set the knob origin for bi-polar parameters in Open Stage Control, utilize the `origin` property of the knob. This property defines the starting point for drawing the gauge. 

1. **Change Parameter Names**: You can change the name of any parameter in Bitwig to effectively communicate to Open Stage Control the desired origin for the knob. For bi-polar parameters, set the origin to the middle (e.g., using a name that indicates the range).

This approach allows for proper visual representation of both uni-polar and bi-polar values without requiring complex workarounds.

[Attachment: filename.ext]

# Lag/Delay of Response on Host Computer

Users may experience a constant lag or delay when pressing buttons on a touchscreen interface connected to Open Stage Control. Specifically, taps from the touchscreen may result in a response delay of 50ms-100ms, while interactions from the host computer show no such lag.

## Solution

To reduce latency, it is recommended to use a wired network connection instead of a wireless one. This can significantly improve response times and minimize lag. There are no substantial software adjustments that can be made to alleviate this issue.

# Make a "no release push button" widget act as a normal push button

When using a push button with the "norelease" option set to true, the button may visually indicate that it has been pressed due to external OSC feedback. Users may want to prevent this visual change after the button is pressed.

## Solution

To maintain the original appearance of the button after it has been pushed, you can disable the visual feedback by modifying the CSS. Specifically, you should target the `.on` class in your CSS to prevent the button from changing its appearance.

For further customization, refer to the attached JSON file for an example configuration: [Attachment: h2f8ugk49JXKbnY40daWbHBEPSQ.json].

# Sending the Pressed Switch Number in Open Stage Control

## Problem Description
Users want to send the number of the pressed button within a switch widget in Open Stage Control. While the assigned values for each button can be sent without issue, the goal is to also transmit the actual button number (e.g., Button 1, Button 2, etc.).

## Solution
To achieve this, you can use the following script in the `onValue` property of the switch widget:

```javascript
var values = getProp(this, 'values');
var n;

if (Array.isArray(values)) {
  // If values is written as an array (["a", "b"])
  n = values.indexOf(value);
} else {
  // If values is written as an object ({"label a": "a", "label b": "b"})
  n = Object.values(values).indexOf(value);
}

// Now do something with n
console.log('value pressed n° ' + n);
send('/switch/n', n);
```

This script determines the index of the pressed button and sends it as a message.

# QR Code Does Not Appear Every Time

**Problem Description:**
Users may experience an issue where the QR code does not appear upon the initial startup of Open Stage Control. This can occur when the application is launched, and only the local address (127.0.0.1) is recognized, preventing the generation of the QR code.

**Solution:**
It has been noted that the QR code may not generate if the network list is incomplete during the first startup. A subsequent restart of the application often resolves the issue, allowing the QR code to appear correctly.

To ensure consistent behavior:
1. Close and restart Open Stage Control if the QR code does not appear initially.
2. Verify that all network addresses are recognized upon startup.

If the issue persists, consider checking for updates or changes in the application that may address this behavior.

[Attachment: Bildschirmfoto 2023-06-03 um 08.47.41]
[Attachment: Bildschirmfoto 2023-06-03 um 08.53.30]
[Attachment: Bildschirmfoto 2023-06-04 um 09.35.08]

# Stand-alone vs Built-in Scripts in Open Stage Control

## Problem Description
Users may wonder about the differences between stand-alone scripts and built-in scripts in Open Stage Control.

## Solution
There are two key differences between stand-alone and built-in scripts:

1. **Keyboard Events**: Only stand-alone scripts can be bound to keyboard events.
2. **Widget Touch State**: Only built-in scripts can expose the widget’s touch state.

These distinctions can impact how you implement functionality in your projects.

# Page Doesn't Render with v1.20.0 (RESOLVED)

**Problem Description:**
A JSON file that had been functioning correctly for years did not render in the browser using Open Stage Control v1.20.0. The user experienced a grey bar at the top of the page with no interface elements appearing, despite receiving OSC messages without errors.

**Solution:**
The issue was caused by the uBlock Origin browser extension. Disabling this extension resolved the rendering problem, allowing the interface to appear as expected. 

[Attachment: impication-organ-osc.zip]  
[Attachment: yRtf2NHioxq6Kmo1S44Szp5oz8W.zip]

# Adding MIDI Devices to Open Stage Control

## Problem Description
Users may encounter issues when attempting to add MIDI devices to Open Stage Control (OSC). Specifically, when trying to configure a device, such as the Allen & Heath SQ mixer, the device appears in the OSC MIDI device list but fails to function correctly. Errors may arise due to incorrect syntax or formatting in the MIDI configuration.

## Solution
To successfully add a MIDI device, ensure that you follow these guidelines:

1. **Correct Syntax**: When specifying the MIDI device, use the correct syntax. If the device name contains spaces, enclose the entire string in double quotes. For example:
   ```
   server midi option
   "sq:MIDI Control 1 0,MIDI Control 1 1"
   ```

2. **No Blank Spaces**: Avoid using spaces in the MIDI configuration. For instance, instead of:
   ```
   midi: MIDI Control 1 0: 0,1
   ```
   Use:
   ```
   midi:sq
   ```

3. **Case Sensitivity**: Be aware that while the device name is case-sensitive, the port names used for connections are case-insensitive.

By adhering to these formatting rules, you should be able to successfully add and configure your MIDI devices in Open Stage Control.

For further reference, please consult the MIDI configuration documentation available at [openstagecontrol.ammd.net](https://openstagecontrol.ammd.net).

[Attachment: filename.ext] (attachment reference missing)

# Issue with Switch Data Not Populating on Start of OSC

When initializing a custom module in Open Stage Control (OSC) that reads from an XML file and converts it to JSON, the switch grid may not populate correctly at startup. The issue arises because the data retrieval function may execute before the switch elements are fully created.

## Solution

To resolve this timing issue, you can use one of the following methods:

1. **Using `setTimeout()`**: Wrap the `receive` function call in a `setTimeout()` to delay its execution, allowing the switches to be fully initialized before data is sent.

   ```javascript
   setTimeout(() => {
       receive("/divisiMate_switches", getPresetInfo());
   }, 100); // Adjust the timeout duration as necessary
   ```

2. **Using `app.on("sessionOpened", callback)`**: This method is preferred as it ensures that the data is sent only after the OSC session has been opened, guaranteeing that the switches are ready.

   ```javascript
   app.on("sessionOpened", (data, client) => {
       receive("/divisiMate_switches", getPresetInfo());
   });
   ```

Both methods have been confirmed to work effectively in addressing the issue of switch data not populating at startup. Choose the one that best fits your implementation style.

# Placing a Widget at a Specific Position Overriding Grid Template

## Problem Description
Users may want to position a widget at a specific location within a grid layout in Open Stage Control, even if the grid is not fully filled. The challenge is to override the grid template while maintaining a general layout.

## Solution
To place a widget in a specific position within a grid layout, you can use the following CSS properties in the widget's CSS field:

```css
:host {
    grid-column: 10 / 10;
    grid-row: 10 / 10;
}
```

This code snippet allows you to position the widget at the bottom right corner of a 10x10 grid layout, overriding the default grid template settings.

# Send All and Script Widgets Issue

When using the "send all" feature in Open Stage Control, it does not trigger a script widget to send its computed value. Instead, it sends an empty OSC message with the address property of the script widget, or nothing if the property is empty.

## Solution

The script widget does not maintain a value state related to its script property. The "send all" button only transmits the value states of all widgets without activating inter-widget synchronization mechanisms.

### Workaround

A reliable workaround is to use an input widget instead of a script widget. Set the `editable` property to `false` and place the script within the value property of the input widget. This allows the desired value to be sent when "send all" is triggered.

# Key Binding for Shift + Enter in Open Stage Control

## Problem Description
Users may want to bind the Shift + Enter key combination to execute a script in a script widget. The challenge is to properly configure the `keyBinding` and `onKeyboard` properties to achieve this functionality.

## Solution
To bind the Shift + Enter key combination, set the `keyBinding` property of the script widget as follows:

```json
[
  "shift",
  "enter"
]
```

Then, in the `onKeyboard` property, simply use the following code:

```javascript
shift+enter
```

This configuration will ensure that the script executes when both keys are pressed simultaneously.

# How to Freeze the Visualiser Widget

The visualiser widget in Open Stage Control displays a real-time, scrolling waveform of an audio signal. Users may want to "freeze" the visualiser to stop the scrolling and reduce CPU usage. 

## Problem
Currently, there is no parameter to freeze the visualiser. Setting the framerate to 0 does not achieve this effect, as it behaves the same as framerate 1. Additionally, changing the framerate causes the widget to reinitialize, resulting in the loss of historical data.

## Solution
A "freeze" property has been added to the visualiser widget in alpha version 15. This property allows users to stop the scrolling of the waveform.

You can try this new feature by using the following file:
[Attachment: 9zyudARxtvoIeM0eKAcRdalGZ4A.json]

# Updating Specific Variables in Cloned Controls

## Problem Description
When using cloned controls in Open Stage Control, there is a challenge in updating only specific variables of the cloned control while retaining the original variables from the template. The intention is to override certain properties without redefining all variables, but attempts to do so result in only the overridden variables being recognized, leading to incomplete variable sets.

## Solution
To inherit variables from the parent control while adding or modifying specific ones, you can use the `Object.assign()` method in the `props` section of your cloned control definition. Here is the correct syntax:

```json
{
  "type": "clone",
  "widgetId": "pan_fader_volume",
  "id": "gainVolume",
  "props": {
    "variables": #{Object.assign(@{this.variables}, {name: "Master Gain"})}
  }
}
```

This method allows you to merge the existing variables of the cloned control with new or modified variables, ensuring that you do not lose any original properties while updating only the desired ones. 

For further reference, you can check the attached configuration files for examples:
- [Attachment: clones_and_variables.json]
- [Attachment: clones_and_variables_1.json]
- [Attachment: clones_and_variables_2.json]

# Menu Text Alignment in Open Stage Control

**Problem:**
Users are seeking a method to left-align text within menu items in Open Stage Control.

**Solution:**
To achieve left alignment of text in menu items, you can use the following CSS styles:

1. Set the text alignment and width for the span element within the menu item:
   ```css
   menu .item span {
       text-align: left;
       width: 100%;
   }
   ```

2. Alternatively, you can apply the following styles to the div element within the item:
   ```css
   .item div {
       text-align: left;
       justify-content: left;
   }
   ```

Both methods effectively left-align the text in the menu. Choose the one that best fits your layout needs.

# Matrix Button Toggle with Conditional Address Change

## Problem Description
In a Matrix Button setup, there is a need to define two different `props.address` values based on the button's toggle state. The goal is to send different OSC commands depending on whether the button is on or off.

## Solution
To achieve this functionality, use the following JavaScript code in the matrix properties:

```javascript
JS{{
var props = {}
props.mode = "toggle"
props.label = "Q" + [$+1]
props.on = 1
props.off = 0
props.bypass = true // prevent sending default messages
props.onValue = `
if (value === 1) send('/cue/' + (getIndex() + 1) + '/start', 1)
else send('/cue/' + (getIndex() + 1) + '/panic', 0)
`
return props
}}
```

This code checks the button's value directly instead of relying on CSS class selectors, ensuring reliable behavior. The `getIndex() + 1` function is used to dynamically reference the button's index.

# Menu Widget Returning Integer from Custom Module

## Problem Description
A menu widget is populated with an array of strings from a custom module using an OSC listener. The requirement is to have the menu return an integer value associated with the selected string when an item is pressed.

## Solution
To achieve this, you can define the menu values with corresponding labels and values, or use a mapping approach. Here are the recommended methods:

1. **Using Labels and Values**:
   Define the values with both labels and values as follows:
   ```javascript
   receive('/scaleButtonSwitch/names', {
     labels: ["a", "b", "c"],
     values: [2, 5, 9]
   })
   ```

2. **Using an Object**:
   If there are no duplicate labels, you can use a simple object:
   ```javascript
   receive('/scaleButtonSwitch/names', {
     "a": 2,
     "b": 5,
     "c": 9
   })
   ```

3. **Using a Mapping Approach**:
   If you are defining the values in your custom module, maintain a map to convert strings to integers:
   ```javascript
   var menu_map = {
     "a": 2,
     "b": 5,
     "c": 9
   }

   // Populate menu
   receive('/scaleButtonSwitch/names', Object.values(menu_map))

   // Retrieve associated value when needed (e.g., in oscOutFilter)
   var numeric_value = menu_map[args[0]]
   ```

This will allow you to use the integer values in your custom module as needed.

# OSC Translation to MIDI

**Problem Description:**
The user is attempting to use Open Stage Control to translate OSC messages from a sensor device into MIDI messages for use with DAWs such as Cubase 9.5 and QLAB 4. Despite proper configuration, the MIDI messages are not being recognized by the DAWs.

**Solution:**
To achieve the translation of OSC messages to MIDI in Open Stage Control, you can implement a custom module. Here’s a brief outline of the steps:

1. **Custom Module Creation**: Create a custom module in Open Stage Control that listens for incoming OSC messages.
2. **Send MIDI Messages**: Modify the module to include `send()` calls that send MIDI messages in response to received OSC messages. For example:
   ```javascript
   send('midi', 'my_osc_device', '/control', channel, ctrl, value);
   ```
3. **Testing**: Ensure that your DAW is set up to receive MIDI messages from Open Stage Control.

Additionally, if you are looking for a simpler solution and just need a translator, consider using OSCulator, which can facilitate the conversion of OSC messages to MIDI.

[Attachment: E3B3B6CA-8172-4331-B24F-D90765DC7319]

# Using Script to Control Widgets in Open Stage Control

## Problem Description
The previous version of Open Stage Control included a `keys` widget for controlling faders, but this widget has been removed in the latest version. Users need guidance on how to replicate this functionality using scripts and which widgets to utilize for displaying keys.

## Solution
To achieve similar functionality, you can create buttons to represent the keys and update them using scripts. Refer to the documentation for event-dependent variables to understand how to implement this: [Event-Dependent Variables Documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/#event-dependent-variables).

For a practical example, see the attached file that demonstrates how to set this up: [Attachment: rm2anJ4aDVNYNivcaUF5pKyJf1O.json].

# Simple Set('variable_1', value) Example

## Problem Description
A user is attempting to send a value from a fader to a variable using the script `set('variable_1', value)` in the fader's onValue field. However, the value of `variable_1` does not update when the fader is moved.

## Solution
To ensure the value updates correctly, follow these steps:

1. Use the script `set('variable_1', value)` in the onValue field of the fader.
2. To debug, add a `console.log(value)` statement in the onValue script. This will help confirm whether the fader's value is being captured correctly.
3. Ensure that the console log includes the `value` variable to see the output when the fader is adjusted.

By implementing these steps, the variable should update as expected. 

[Attachment: ucCq8CCftwvZ5fqVhUw8qFWZCBq.json]

# How to Change the Color of the Modal Top Title Bar

To change the color of the top title bar of a modal in Open Stage Control, you can use custom CSS.

## Solution

Add the following CSS rule to your modal's CSS:

```css
.popup .popup-title {
  background: blue; /* Change 'blue' to your desired color */
}
```

### Additional Tips
- To apply the color change to all modals, place the CSS rule in the root element's CSS field.
- You can also include this rule in a theme for broader application.

For further assistance, you may refer to the documentation for additional styling options.

# TypeError: value.match is not a function

When using Open Stage Control, you may encounter the following error in the console:  
`KK1FXNameVariable.onValue javascript error at line 1: TypeError: value.match is not a function`. This typically occurs when the `value` variable is not a string.

## Problem Description
The error arises when attempting to use the `match` method on a variable that is not a string. This can happen if the `value` is interpreted as a different type, such as a number or boolean, rather than a string.

## Solution
To resolve this issue, ensure that the variable is coerced into a string before calling the `match` method. You can modify your JavaScript code as follows:

```javascript
String(value).match(...)
```

This adjustment will prevent the TypeError by ensuring that `value` is treated as a string, allowing the `match` method to function correctly.

Additionally, if you are working with labels that may contain trailing spaces (e.g., '1 ', '2 '), consider changing them to a format without trailing spaces (e.g., '1.', '2.') to avoid similar issues.

For further reference, please see the attached file if available: [Attachment: filename.ext].

# Disabling Sort of Values on Switch Widget

## Problem Description
When saving values in a switch widget, the values are sorted automatically. For example, the values are saved as:
```json
{
  "1": "1",
  "2": "2",
  "4": "4",
  "8": "8",
  "16": "16",
  "32": "32",
  "1/32": "1/32",
  "1/16": "1/16",
  "1/8": "1/8",
  "1/4": "1/4",
  "1/2": "1/2"
}
```
The desired order is:
```json
{
  "32": "32",
  "16": "16",
  "8": "8",
  "4": "4",
  ...
}
```

## Solution
To prevent the automatic sorting of values in the switch widget, add a space before the key in the JSON object. For example:
```json
{
  " 4": "4",
  " 2": "2",
  " 1": "1"
}
```
This method effectively disables the sorting behavior. 

[Attachment: filename.ext]

# Open Stage Control and Ableton Live Integration Issues

## Problem Description
Users have reported issues with looping MIDI events when using Open Stage Control (OSC) to communicate with Ableton Live. Specifically, pressing buttons can trigger rapid looping of clips, causing problems with MIDI feedback. This issue has been observed with various controls, including buttons, encoders, and knobs.

## Solution
To resolve the looping issue, it is recommended to change the OSC address from `/note` to `/control`. This adjustment has been confirmed to eliminate the looping problem for buttons and encoders. 

### Additional Notes
- OSC cannot produce event loops unless explicitly programmed to do so using a custom module.
- Users have also noted that changing the control type from "encoder" to "fader" can prevent looping.
- For further customization and control, users may explore creating custom scripts for Ableton Live or refer to shared resources within the community.

For more detailed examples and scripts, refer to the following attachment:
[Attachment: A0GF5x1Fc32OPY08yKncfUDgES9.json]

# Controlling VCV Rack 2

**Problem Description:**
Users may seek to connect Open Stage Control with VCV Rack to create a custom interface for music production. The goal is to control various synth sections and sequences within VCV Rack using Open Stage Control.

**Solution:**
To effectively control VCV Rack using Open Stage Control, follow these steps:

1. **Interface Creation:** Develop a GUI that integrates with a basic VCV Rack patch, which should include essential components like a mixer and sequencers.
   
2. **Feature Implementation:**
   - Include five different synth sections and a drum section.
   - Allocate 32 controls per section.
   - Implement fine adjustments via a large controller.
   - Allow selection of 8 presets per section using buttons.
   - Enable selection of 11 sequences per section via buttons.
   - Introduce an autofade feature to move controls using a timer.
   - Utilize two joysticks for adjusting knobs in Open Stage Control.
   - Provide a keyboard for editing sequences.
   - Create a grid for editing drum patterns.

3. **Resources:** For a comprehensive guide and code examples, refer to the GitHub repository: [GitHub - herbert-50/VCV-CTL](https://github.com/herbert-50/VCV-CTL).

4. **Demonstration:** A video showcasing the components in action is available for reference.

By following these guidelines, users can successfully create a functional interface for VCV Rack using Open Stage Control. 

[Attachment: video_showing_components.mp4]

# Issue with Keyboard / Range Widgets

## Problem Description
An error occurs with the range widget in Open Stage Control, specifically: 
```
Uncaught TypeError: Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided value is not of type '(CSSImageValue or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or OffscreenCanvas or SVGImageElement or VideoFrame)'.
```
This error is triggered in the `getProp` function of the range widget.

## Solution
The issue has been resolved in version 1.29 of Open Stage Control. Users experiencing this problem should update to the latest official version to eliminate the error.

[Attachment: tMJ8NA5owxazm9rfpp22cD1nLgV_1.json]

# Button Matrix Not Listening on Address

## Problem Description
A button matrix is not receiving values correctly from an OSC address. The matrix is configured to change its size based on stepped knobs, and while the address appears to be correct, the value returned is null. The user attempted to utilize the `html` property within the matrix but encountered issues with undefined values.

## Solution
The following JavaScript code snippet resolves the issue by correctly setting the properties for the matrix button:

```javascript
JS{{
    var props = {};
    props.address = "/eos/cmd/Group/\O\S\C{/ds/" + @{bank_id} + "/" + ($ + 1) + "/num}";
    props.id = "/ds/" + @{bank_id} + "/" + ($ + 1);
    props.label = "\O\S\C{/ds/" + @{bank_id} + "/" + ($ + 1) + "/label}";
    props.mode = "tap";
    props.html = "<span class=group-no>\O\S\C{/ds/" + @{bank_id} + "/" + ($ + 1) + "/num}</span>";
    props.on = null;
    props.bypass = false;
    return props;
}}
```

Additionally, to ensure that the `html` property is treated as a literal string and not executed immediately, escape the OSC syntax as follows:

```javascript
props.html = "\O\S\C{/ds/" + @{bank_id} + "/" + ($ + 1) + "/num}";
```

This adjustment allows the matrix to correctly filter and utilize incoming OSC data. 

For further details or related issues, please refer to the attached documentation. 

[Attachment: filename.ext]

[Attachment: u24TpD8vHioQ5CMBX9oUMT9EXNo.json]

[Attachment: 41doY3Ng106k9udJ0FGRgcc2NE1.json]

# Tab Default Value Configuration

## Problem Description
A user has a panel with three tabs controlled by a switch. They want the switch to default to Value 2 and automatically display `tab_2` when starting a session, without using state management. The default value of the switch is already set to 2.

## Solution
To achieve this, set the default property of the tab's parent. This configuration will ensure that the desired tab is displayed upon session initiation.

# Issue with MultiXY Widget in Version 1.28

## Problem Description
Users are experiencing issues with the MultiXY widget in Open Stage Control version 1.28. Specifically, when attempting to set the number of points using `@{another_widget_id}.length`, the widget fails to appear, and users encounter an error when reopening the session: 

```
Error opening session: Cannot read properties of undefined (reading 'faders')
```

This issue persists even when using the workaround `#{@{another_widget_id}.length || 1}`, leading to the same error upon loading the session.

## Solution
To resolve the issue, use the following expression to set the number of points in the MultiXY widget:

```javascript
#{(@{another_widget_id} || ["A"]).length}
```

This ensures that the widget can handle cases where `another_widget_id` is undefined or has a length of zero. 

Additionally, if problems persist when changing the value of `another_widget_id`, it is recommended to update to version 1.28.4, which addresses these issues.

For further reference, a session file demonstrating the issue is available: [Attachment: 4MTrNrZRKzzvHBOvVHxxFdNinqP.json].

[Attachment: gfCPcFcRwVnBWJG9wCo5SERhnZm.json]

# Using Font Awesome Brands Icons in Open Stage Control

## Problem Description
Users want to utilize icons from the Font Awesome brands icon set within Open Stage Control while maintaining an update-safe method, particularly when using the open-stage-control-bin from the AUR. There is a need to load the Font Awesome brands icons from a CDN instead of downloading files.

## Solution
To load Font Awesome brands icons, you must use a theme file rather than widget CSS or scripts. Here’s how to do it:

1. Create or edit your theme file.
2. Include the Font Awesome CDN link for the brands icons in the theme file.

For example, add the following line to your theme file:

```html
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
```

This method ensures that the icons are loaded correctly and remains update-safe.

# Connection Not Secure

**Problem Description:**
Users may encounter a "connection not secure" warning when attempting to establish a secure web connection using Open Stage Control, particularly on Windows 10. This issue persists across different browsers (Chrome and Firefox) and occurs regardless of whether HTTP or HTTPS is used, even with the 'use-ssl' setting enabled.

**Solution:**
To achieve the most secure connection possible, enable HTTPS with the 'use-ssl' setting. However, be aware that a "connection not secure" warning may still appear. This warning occurs because Open Stage Control generates its own certificate, which is not recognized as secure by browsers since it is not issued by a trusted certificate authority.

# Matrix of Dropdown Menus Only Showing Index as Label

**Problem Description:**
Dropdown menus in a matrix are displaying their index values instead of the intended labels. The `props` field for the matrix is set up, but the labels are not reflecting the chosen values.

**Solution:**
To resolve this issue, you need to manually set the label for the dropdown menus. This can be done by adding the following line to your `props` configuration:

```javascript
props.label = "%key"
```

This adjustment will ensure that the dropdown menus display the correct labels instead of their matrix indices.

# Hide Tab Bar in Open Stage Control

To hide the tab bar (tab header) of a tab container in Open Stage Control, follow these instructions.

## Problem Description
Users may want to hide the tab bar so that only the content of the active tab is visible.

## Solution
You can hide the tab bar by adding the following CSS to your configuration:

```css
.panel > .navigation { 
    display: none; 
} 
.panel { 
    top: -1rem; 
}
```

Additionally, a new value for `tabsPosition` ("hidden") will be available in the next version, which will provide an alternative method to achieve this functionality.

[Attachment: TAB]

# Custom Module Sliders

## Problem Description
Users are seeking guidance on how to configure a fader in a custom module to send multiple MIDI Control Change (CC) messages simultaneously. Specifically, they want to control multiple parameters or channels with a single fader.

## Solution
To set up a fader that sends the same value to multiple CCs, follow these steps:

1. **Fader Configuration**: Set up the fader with the following properties:
   - `address`: Use a custom OSC address (e.g., `/fader`).
   - `perArgs`: An array of CC numbers to which the fader will send messages (e.g., `[1, 11, 12, 13, 14]`).
   - `target`: Use a dummy MIDI port name (e.g., `midi:none`).

2. **Custom Module Code**: Implement the following code in your custom module:

   ```javascript
   module.exports = {
       oscOutFilter: function (data) {
           const { address, args } = data;

           // Check if the address matches the custom address
           if (address === "/fader") {
               const value = args.pop().value; // Get the fader's current value

               // Loop through the CCs and send the value
               args.forEach(cc => {
                   send("midi", "midiPortNameToYourDAW", "/control", 1, cc.value, value);
               });

               return; // Bypass the original data
           }

           return data; // Return original data for other addresses
       }
   }
   ```

3. **Sending to Multiple MIDI Channels**: To send the fader value to multiple MIDI channels, modify the `oscOutFilter` function as follows:

   ```javascript
   oscOutFilter: function(data) {
       const { address, args } = data;

       if (address === "/fader") {
           const value = args.pop().value; // Get the fader's current value
           for (let x = 1; x < 17; x++) {
               send("midi", "OSCMIDICONTROL", "/control", x, 23, value); // Send to channels 1-16
           }
           return; // Bypass the original data
       }

       return data; // Return original data for other addresses
   }
   ```

4. **DAW Configuration**: Ensure that your DAW is set to receive MIDI from all channels. For example, in Kontakt, the track must be enabled to receive any or all MIDI inputs.

### Attachments
- [Attachment: fader_multiCCs_custom_module.json]
- [Attachment: custom-module.js]

[Attachment: 435QkwJ6mKkNDfIFxw5VGFRfESw.js]

[Attachment: 6DsK58NOLFpaGFKxrtzx6QDQBOp.json]

[Attachment: lWqXdWDADBjtD2K1Phug1vNlboe.json]

# Grid Snapping Setting in Open Stage Control

## Problem Description
Users may want to adjust the grid snapping settings for widget movement, specifically to change the snapping distance from 5px to 1px.

## Solution
To achieve 1px snapping, you can disable the grid snapping feature entirely. This can be done from the menu in Open Stage Control.

# Secure Connection Failed

When using the `use-ssl` option in Open Stage Control, users may encounter the error message: 

```
Secure Connection Failed
An error occurred during a connection to 192.168.0.23:8080. You are attempting to import a cert with the same issuer/serial as an existing cert, but that is not the same cert.
Error code: SEC_ERROR_REUSED_ISSUER_AND_SERIAL
```

This issue typically arises after restarting the server.

## Solution

To resolve this problem, remove the Open Stage Control certificate from the Firefox settings. 

Additionally, this issue has been addressed in the upcoming version 1.5.4 of Open Stage Control. 

[Attachment: filename.ext]

# How to Reference the Currently Selected Label from a Switch

## Problem Description
When using a switch object with multiple items, you may want to display the label of the currently selected item in a text object. The following expressions do not yield the desired label:
- `@{switch.value}` returns the integer value.
- `@{switch.label}` returns “undefined”.
- `@{switch.values}` returns “[object Object]”.

## Solution
To retrieve the label of the currently selected switch item, use the following JavaScript code:

```javascript
JS{{
var values = @{switch.values},
    v = @{switch}

return Object.keys(values).find(k => values[k] == v)
}}
```

This code will correctly return the label associated with the currently selected value.

# Updating Custom VAR Works in Built-in Client but Not in Other Clients (Browsers)

**Problem Description:**
When using the `setVar` function to update a variable (e.g., `setVar("button_track_matrix", "height", "180")`), changes are reflected only in the built-in Open Stage Control client, while browser-based clients do not update the variable, keeping the height at 100%.

**Solution:**
Ensure that you are using the latest version of Open Stage Control (1.27.2 or later). A bug related to this issue was recently fixed, which may resolve the problem with variable updates in browser clients. If you are already on the latest version and the issue persists, further investigation may be necessary.

# Continuous Knobs in Open Stage Control

## Problem Description
Users need to implement a rotary widget that can spin continuously and report degrees, particularly for controlling color hue. There have been changes in behavior in recent versions that affect the ability to rotate knobs past 0° or 360°.

## Solution
To create a continuous knob that reports degrees, use the following configuration for the knob widget:

```json
{
  "angle": 360,
  "snap": true,
  "range": {"min": 0, "max": 360}
}
```

In version 1.9.11 and later, ensure to set `"mode": "snap"` for the desired behavior. 

If you are experiencing issues with rotation limits in versions 1.17.0 and above, the previous behavior has been restored in the next version with a new mode called `snap-alt`. Alternatively, consider using the encoder widget, which allows angle exposure via scripting (using `locals.angle`).

For further details, refer to the session file associated with GitHub issue #793. 

[Attachment: filename.ext]

# Conditional OSC Remote Control Messages in Open Stage Control

## Problem Description
Users may want to send OSC remote control messages to slave widgets based on specific conditions, in addition to the regular messages sent by the controlling widget. There is confusion regarding where to place these conditional messages within the editor, particularly whether they should be placed in the CSS field.

## Solution
To implement conditional OSC messages, you can use the `OSC{}` syntax combined with the `#{}` syntax in the widget's CSS field. This allows you to define widget properties that react to OSC messages.

### Example
To hide a widget based on an OSC message, you can set its CSS as follows:

```css
:host {
  #{ OSC{/hide, 0} ? "display:none;" : "" }
}
```

In this example:
- Sending the message `/hide 1` will hide the widget.
- Sending the message `/hide 0` will show the widget.

### Linking Toggles and Tab Containers
If you are using toggles to select tabs within a container, you can link the toggle's value to the tab container's value. This can be done using the `linkId` property or by using the toggle's value in the container's `value` property with the `@{}` syntax.

### Sending Additional OSC Messages
It is not possible to send additional OSC messages in parallel with the usual message from the master widget unless you create a custom module. OSC messages cannot be sent directly from the CSS.

For further details on OSC commands, refer to the documentation linked in the original discussion.

[Attachment: filename.ext] (attachment reference missing)

# How to Use Property Values in CSS with Open Stage Control

## Problem Description
Users may want to utilize property values, such as `colorText`, within the CSS zone of Open Stage Control. Additionally, there are questions regarding setting font sizes for headers and displaying long text.

## Solution
To use a property value in the CSS zone, you can reference it as a CSS variable. For example, to use the `colorText` value for a background color, you should write:

```css
background-color: var(--color-text);
```

For setting font sizes for headers (h1-h6), you can specify the desired size in your CSS, as Open Stage Control resets default styles. For example:

```css
h1 {
    color: red;
    font-size: 150%;
    background-color: var(--color-text);
    padding: 1.5em;
}
```

To ensure that long text is displayed properly, consider using the CSS properties `white-space` and `overflow`. These properties can help manage how text wraps and overflows in your layout. 

[Attachment: image]

# Fader Value to Input Mapping Issue

## Problem Description
A fader with 145 steps, ranging from 0 to 1, is intended to control an input that displays values from -12 to 60. The current formula used in the input's "value" field is:
```javascript
JS{{
return @{fader_1} * 72 - 12
}}
```
However, the output values are incorrect, likely due to floating point precision issues.

## Solution
To resolve the issue, increase the fader's `decimals` property. This adjustment should ensure that the values are calculated correctly and displayed as intended.

# Rearranging Tabs and Hiding Them in Open Stage Control

## Problem Description
In an audio rack effects application with a tabbed interface, there is a need to rearrange tabs dynamically based on preset changes. The challenge is to reflect the correct order of rack items (e.g., Distortion, Compressor, Reverb) and to hide certain tabs when they are not needed, all while minimizing CPU usage to prevent audio crackling.

## Solution
Instead of rearranging tabs directly, you can set up a panel containing all possible tabs and manage their visibility and order through a switch. Follow these steps:

1. **Set Up the Panel:**
   - Create a panel that includes all potential tabs for the rack items.
   - Maintain a reference table that maps each rack item to its corresponding panel number.

2. **Hide Tab Navigation:**
   - In the panel's CSS field, add the following code to hide the tab names and navigation bar:
     ```css
     inner > .navigation {
         display: none;
     }
     ```

3. **Create a Switch:**
   - Add a switch outside the panel with the following script in the script box:
     ```javascript
     set("panel_1", get('this'))
     ```
   - Replace `"panel_1"` with the actual ID of your panel.

4. **Configure the Switch Values:**
   - Update the "values" property of the switch to reflect the order of tabs as needed. For example:
     ```json
     {
         "Distortion": 5,
         "Compressor": 1,
         "Cabinet": 10
     }
     ```
   - This allows you to dynamically change the displayed order of tabs based on the current rack configuration.

This method allows for efficient management of tab visibility and order without the need for rearranging tabs, thus reducing CPU load during operation.

# Better Approach to Range Values with Uneven Steps

## Problem Description
A user is attempting to create a range widget in Open Stage Control to control the range of an instrument, specifically from C-2 to G8, using only base notes. The challenge lies in generating even steps between each of the pips in the range property, as the current implementation results in uneven gaps.

## Solution
To achieve even steps between the pips in the range widget, consider the following approach:

1. **Define the Range**: Establish the full range of notes you want to cover (C-2 to G8).
2. **Calculate Even Steps**: Instead of manually assigning percentages, calculate the required steps based on the total number of notes in the range. For example, if you have 88 keys (from C-2 to G8), you can divide the range into equal intervals.
3. **Use a Formula**: Implement a formula to determine the percentage for each step. For instance:
   - Total range = 88 keys
   - Step size = 100% / (number of steps - 1)
4. **Update the Range Property**: Populate the range property with the calculated percentages and corresponding note values.

Here’s an example of how the range property might look after applying even steps:

```json
{
  "0%": { "C-2": "0" },
  "1.1363636363636365%": { "C#-2": "0.011363636363636364" },
  "2.272727272727273%": { "D-2": "0.022727272727272728" },
  ...
  "100%": { "G8": "1" }
}
```

This method ensures that each step is evenly distributed across the specified range, providing a smoother control experience.

**Note**: For a practical implementation, you may want to refer to the attached session file for further insights on the range widget setup. 

[Attachment: rangeWidgetExample.json]

[Attachment: ix4Ea5iaBMu9bbYTwSw3Kwbu0tp.json]

[Attachment: bRqyT2AB3WQnwt0eeSQmNVDiWeU.txt]

[Attachment: ncVcojNFxRyOCNkPejH6rIrO8JZ.txt]

[Attachment: Agsj6OvCmwglvFQlEiqKuTsLrjX.json]

# Linking an XY Pad with Two Faders in Open Stage Control

## Problem Description
Users may want to link an XY pad to two faders, where one fader controls the Y value and the other controls the X value. However, using the `linkId` property for this purpose does not work as intended, since it creates a 1:1 value binding.

## Solution
To effectively link an XY pad with two faders, follow these steps:

1. **Clear the `linkId` Properties**: Ensure that the `linkId` fields for the XY pad and faders are empty.

2. **Set Value Properties**:
   - For the XY pad, set the `value` property to:
     ```
     [@{fader_x_id}, @{fader_y_id}]
     ```
   - For the X fader, set the `value` property to:
     ```
     #{ @{xy_id}[0] }
     ```
   - For the Y fader, set the `value` property to:
     ```
     #{ @{xy_id}[1] }
     ```

3. **Alternative Scripting Method**: You can also achieve this synchronization using scripting with the `onValue` properties of the widgets:
   - For the XY pad:
     ```javascript
     set('fader_x_id', value[0], {script: false})
     set('fader_y_id', value[1], {script: false})
     ```
   - For the X fader:
     ```javascript
     set('xy_id', [value, get('xy_id')[1]], {script: false})
     ```
   - For the Y fader:
     ```javascript
     set('xy_id', [get('xy_id')[0], value], {script: false})
     ```

This method ensures that all three widgets are synchronized and that default values can be maintained as desired. 

[Attachment: Pad.png]  
[Attachment: xy.png]

# Using Keys in Open Stage Control

## Problem Description
Users may experience confusion regarding the implementation of key events in Open Stage Control, specifically how to increment and decrement values using keyboard keys. Additionally, there may be questions about accessing widget states and using modifiers like Shift.

## Solution
To increment a value by 1 when the "e" key is pressed and decrement it by 1 when the "d" key is pressed, you can use the following code snippet in your keys configuration:

```json
{
  "type": "keys",
  "keydown": {
    "e": "x = 1",
    "d": "x = -1"
  }
}
```

If you want to adjust the increment to 1 instead of 0.1, modify the `keydown` property accordingly.

To check the state of the Shift key, you can use the following JavaScript function in the console:

```javascript
document.onkeydown = (e) => { console.log(`Shift: ${e.shiftKey}`) }
```

The `shift` variable in the `keydown` and `keyup` events will return a boolean value indicating whether the Shift key is pressed.

For adjusting the value of a fader based on the key pressed and the Shift key state, you can use the following syntax:

```javascript
val = (@{fader_3}.range.max - @{fader_3}.range.min) / (@{fader_3}.steps - 1);
x = key == "e" ? val : -val;
shift ? x = x * 2 : x;
@{fader_3} + x
```

Ensure that your widget configuration is correct and that the keys are properly mapped to the desired actions. If the keys do not respond as expected, verify that the widget IDs and ranges are correctly set in your configuration.

[Attachment: keys.json]

# Controlling Value of Widgets

When using the switch widget in Open Stage Control, the default behavior retains the selected option even when navigating between tabs. If you want the widget to reset to an unselected state upon returning to the tab, follow this solution.

## Solution

To achieve the desired functionality, link the switch widget to the tab container by setting the switch's `value` property to `@{root} invalid value`. This configuration allows the switch to monitor the root container's value (indicating the currently selected tab) and ensures that the resulting value is not recognized as valid by the widget.

- **Set the `value` property** of the switch widget to:  
  ```plaintext
  @{root} invalid value
  ```

Make sure to place this code in the `value` property, not in the `values` property, to avoid disrupting the switch's options.

# Controlling Multiple Surfaces on the Same Computer

**Problem Description:**
Users may encounter issues when trying to control a single computer running Open Sound Control (OSC) with multiple devices (e.g., pads) using different templates. The primary concern is that switching tabs on one device causes the same change on all connected devices, leading to unwanted synchronization.

**Solution:**
To prevent synchronization between tabs when using multiple clients, you need to enable the `bypass` option on the tab container. This setting allows each client to operate independently.

1. Locate the tab container in your template.
2. Set the `bypass` property to `true`.

By doing this, each device can switch tabs without affecting the others.

For further assistance, ensure that each client is using a unique identifier in the connection URL, such as:
```
http://server-ip:port?id=x
```
This configuration allows multiple clients to connect to the same session without interference.

[Attachment: Capture d’écran 2022-01-28 à 16.42.07 (2)]

# Customizing Knobs and Faders in Open Stage Control

## Problem Description
Users want to enhance the appearance of knobs and faders in Open Stage Control by utilizing custom images or styles. Specifically, they seek guidance on how to implement these customizations using HTML and CSS, as well as how to manage color changes based on the control's value.

## Solution
While Open Stage Control does not support a canvas widget, you can achieve custom styling for knobs and faders using HTML and CSS properties. Here are the confirmed approaches:

1. **Using HTML and CSS for Faders**: 
   - A basic example for a fader has been provided. You can start with this template to customize your fader's appearance.
   - [Attachment: tmXxJZyuE372vYVmQETIWvlAfyv.json]

2. **Creating Custom Knobs**:
   - Knobs are more complex to implement with HTML and CSS, especially for responsiveness. However, you can use the following transformation for rotation:
     ```css
     transform: "rotate(" + var(--value) + "deg)";
     ```
   - Ensure that you calculate the rotation value correctly, typically ranging from -20 degrees to 150 degrees.

3. **Variable Management**:
   - To manage the rotation variable, you may need to implement JavaScript to calculate the appropriate degrees based on the knob's value.

4. **Additional Visual Elements**:
   - For creating visual indicators like a ring or LED around the knob, you can refer to examples available on platforms like CodePen for inspiration.

5. **Further Resources**:
   - A more advanced example combining both fader and knob functionalities has been shared.
   - [Attachment: AwjSVlmIB2dhXJovOLEogLyjCNN.json]

By utilizing these methods, you can significantly enhance the visual appeal of your knobs and faders in Open Stage Control.

# Changing Many Different Widget Colors With a Knob

When attempting to change the colors of multiple widgets dynamically using `setVar()`, an error may occur stating "maximum call stack size exceeded." This typically indicates that too many `setVar` functions are being executed simultaneously.

## Solution

To efficiently change the properties of over 60 widgets based on a single knob input, follow these steps:

1. **Create a Variable Widget**: Instead of using `setVar()` for each widget, create a variable widget (e.g., named `reverbColor`) and set it to a default color value.

2. **Reference the Variable**: In each widget that requires color changes, use the variable widget reference:
   ```javascript
   @{reverbColor}
   ```

3. **Update the Variable with the Knob**: Set the value of the variable widget when the knob is turned:
   ```javascript
   set("reverbColor", valueHere)
   ```

This approach reduces the number of function calls and improves performance.

[Attachment: 8FCpb1ieXkuYqoYLFALapSWZlym.json]

# JS {{ }} Evaluation in Visible Properties

## Problem Description
The user is attempting to show and hide knobs in Open Stage Control based on a selection of effects (fx). They initially used a variable with array values in a script property but encountered issues when trying to use JavaScript code in the visible property. The user experienced problems with the syntax and functionality of the JS {{ }} block, particularly in returning the correct visibility value.

## Solution
To properly use JavaScript in the visible property, avoid using the @{} syntax. Instead, utilize `getProp()` or `get()` functions. Here’s a summary of the key points:

1. **Avoid @{} Syntax**: In script properties, the @{} syntax should be avoided. Use `getProp()` or `get()` instead.
   
2. **JS {{ }} Syntax**: Ensure there is no space between `JS` and `{{`. For example:
   ```javascript
   JS{{ return 0; }}
   ```

3. **Debugging**: Use the property inspector to display computed values and check the console (Ctrl + K) for parsing errors.

4. **Storing JS Blocks**: Unlike script properties, you cannot duplicate JS {{ }} blocks. Instead, rewrite the code or use clones with variable overrides.

By following these guidelines, the visibility of knobs can be controlled effectively based on the desired conditions.

# How to Create a 3x3 Grid in Open Stage Control

## Problem Description
Users may want to create a grid layout with specific dimensions, such as 3 columns and 3 rows, in Open Stage Control. There may be confusion regarding the use of the `gridTemplate` property and its relation to CSS's `grid-template`.

## Solution
To create a 3x3 grid in Open Stage Control, you can use the following configurations for the `gridTemplate` property:

1. **Basic Grid Definition**:
   - Enter `3` in the `gridTemplate` property to create 3 columns and 3 rows.
   - Alternatively, you can use `repeat(3, 1fr) / repeat(3, 1fr)` to achieve the same layout.

2. **Understanding the `gridTemplate` Property**:
   - The `gridTemplate` property in Open Stage Control functions similarly to the `grid-template` property in CSS.

3. **Adjusting Row Heights**:
   - If you want to define specific fractions for each row, you can use the `fr` unit. For example, to set the first row to take 2 fractions, the second row to take 5 fractions, and the third row to take 1 fraction, you can set the `gridTemplate` as follows:
     ```
     gridTemplate: "2fr 5fr 1fr";
     ```

4. **Column Widths**:
   - To ensure each column takes 1/3 of the total width, you can use:
     ```
     gridTemplateColumns: "1fr 1fr 1fr";
     ```

5. **Cell Count**:
   - If you are repeating 3 rows and 3 columns, ensure that the quantity property in the matrix zone is set to `81` (9 cells per row multiplied by 9 rows).

6. **Vertical Space Adjustment**:
   - Note that vertical auto-adjustment may not occur if the quantity is lower than the set number of cells. You will need to manually adjust the layout if fewer cells are used.

By following these guidelines, you can effectively create and manage a grid layout in Open Stage Control. 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: image4.png]  
[Attachment: image5.png]

# Can't Access Non-Localhost Address on Mac

When starting the Open Stage Control (OSC) server, it is accessible via `http://127.0.0.1:8080`, but attempts to connect using the local IP address `http://192.168.178.62:8080` result in a connection reset error. The server closes the connection, and stopping the server returns a 'Connection refused' message, indicating that the address is correct.

## Solution

OSC is designed to bind to all available interfaces by default. If you encounter connection issues, consider the following:

1. **Firewall Settings**: Check your Mac's firewall settings or any router configurations that may be blocking the connection.
2. **Permissions**: For newer versions of macOS, ensure that the application has the necessary permissions in its `info.plist` file.

Switching to the Node.js version of OSC may resolve the issue, as it has been reported to work more effectively on M1 MacBook Pro devices.

[Attachment: filename.ext]

# MIDI Pitch Bend Issue

## Problem Description
When using a fader that accepts values from 0 to 16383 with a `preargs` value of 1, the returned value for pitch bend messages is not as expected. The output should be in the format `OSC received: { address: ‘/pitch’, args: [ 1, 16383 ] }`, but instead, it returns `[channel, data, data]`. The pitch bend value needs to be converted back to the fader's range.

## Solution
This issue has been identified as a bug in Open Stage Control. It has been resolved in version 0.47.2. Users experiencing this problem should update to this version to ensure proper functionality of MIDI pitch bend messages. 

[Attachment: filename.ext]

# Multiple Browser Clients - Unsyncing Scrolling and Tab Selection

**Problem Description**  
Users want to create a single layout with multiple tabs that allows different clients to view various parts of the layout without syncing scrolling and tab selection. This is particularly useful for scenarios where multiple users need to access different sections of the same control panel.

**Solution**  
To disable the syncing of webpage scrolling and tab selection for specific clients, you can use the following methods:

1. **Disable Client Sync**: 
   - Set the `clientSync` parameter to `0` in the client's URL. For example:
     ```
     http://100.0.0.233:8080/clientsync=0
     ```
   - This will allow the specified client to operate independently from others that do not have this parameter in their URL.

2. **Bypass Property**:
   - If you want to keep other widgets syncing normally while allowing specific tabs to be unsynced, set the tab container's `bypass` property to `true`.

These methods will enable multiple users to interact with different parts of the layout without interfering with each other's views.

# Matrix Fader Color Change at Origin Point

## Problem Description
Users may encounter difficulties in changing the color of a fader matrix based on its children values. Specifically, the challenge lies in accessing the correct value of the matrix's children to apply conditional CSS styling.

## Solution
To modify the color of a fader matrix based on its child values, use the following approach:

1. **Use the Correct Syntax**: Replace `@{this}` with `@_{this}` and `#{}` with `#_{}` in your JavaScript block. This allows the syntax to be evaluated at the child level instead of the matrix level.

2. **Implement a JavaScript Block in Props**: Wrap your properties in a `JS{}` block to ensure consistent evaluation. Here’s an example of how to set this up:

   ```javascript
   JS{
   var props = {}

   // Fill in according to your setup
   props.target = yourTarget      // e.g. "@_{scriptVariable}"
   props.id = yourID              // e.g.  @{parent.id} + "/selection#" + ($)
   props.address = yourAddress     // e.g. "/" + @{parent.id} + "/selection#" + ($)

   // Change range to your needs
   props.range = {"min":-0.35,"max":1}
   props.origin = 0

   // The tricky part, notice the backticks!
   props.css = 
   `#_{ @_{this} <= 0 ? 
   ":host { --color-widget: rgba(255,0,0,1); --alpha-fill-on: .4}" 
   : 
   ":host { --color-widget: rgba(135,246,3,1); --alpha-fill-on: .4}" }`

   // Some additional styling
   props.design = "compact"
   props.horizontal = "true"
   props.lineWidth = "1"

   return props
   }
   ```

3. **Alternative Using Gradient Property**: You can also achieve color changes using the `gradient` property. For example:

   ```json
   {
     "0.0": "red",
     "0.259": "red",
     "0.2591": "blue",
     "1.0": "blue"
   }
   ```

   Here, `0.259` represents the origin point normalized between 0 and 1.

By following these guidelines, you can effectively change the color of a fader matrix based on its child values. 

[Attachment: filename.ext] (attachment reference missing)

# CSS Customisation for Open Stage Control

## Problem Description
Users are seeking guidance on how to customize the appearance of widgets in Open Stage Control using CSS. Specifically, they want to know how to:
1. Target the text in the header bar of a widget without affecting the main area.
2. Resize and change the background color of the header bar of a widget.

## Solution
To customize the header bar of a widget in Open Stage Control, you can use the following CSS rules:

1. **Targeting the Header Bar**: Use the `.label` class to specifically target the header text of a widget. For example, to change the color and background of the header, you can use:
   ```css
   .label {
       color: Red; /* Change text color */
       background-color: white; /* Change background color */
   }
   ```

2. **Targeting the Main Area**: Use the widget's class (e.g., `.panel`) to style the main area separately:
   ```css
   .panel {
       background-color: grey; /* Change background color of the main area */
   }
   ```

3. **Resizing the Header Bar**: To adjust the size of the label area in a Fader widget and align the label in the middle, you may need to add additional CSS rules. Unfortunately, specific properties for resizing the label area are not provided, but you can try:
   ```css
   .fader .label {
       padding: 10px; /* Adjust padding to change size */
       text-align: center; /* Center the text */
   }
   ```

For further customization, you can open your template in a browser and use the developer tools (F12) to inspect elements and determine the appropriate CSS selectors to use.

[Attachment: filename.ext]

# Is /EDIT Still Expensive?

**Problem Description:**
There was a concern regarding the performance of the /EDIT command in Open Stage Control, specifically whether it is still a CPU-intensive operation. The documentation previously warned about the potential performance impact, leading to questions about its current optimization status.

**Solution:**
The /EDIT command has been optimized to update widgets in place when only dynamic properties are modified. This change has been in effect for some time, and the documentation will be updated to reflect this improvement.

To identify which properties are considered dynamic, refer to the widget reference. Properties marked with a bolt icon are dynamic. Additionally, in the editor, clicking on a property label will display a descriptive popup that provides this information.

# Hide Navigation Class But Not Children Navigation Classes

## Problem Description
The goal is to hide the main navigation panel while keeping the child navigation panels visible. The initial attempt using the following CSS resulted in hiding all navigation panels, including children:

```css
.navigation {
  display: none;
}
```

## Solution
To hide only the outermost navigation panel, use the following CSS selectors:

```css
inner > .navigation {
  display: none;
}

/* Alternatively, specify the host */
:host > inner > .navigation {
  display: none;
}
```

This approach correctly targets the direct child of the element, allowing child navigation panels to remain visible.

# Connect to a MIDI Device on Mac

To connect to a MIDI device, such as the "Lumi Key Block," on a Mac, follow these steps:

1. Open the **Audio MIDI Setup** application.
2. In the **MIDI Studio**, locate the "Lumi Key Block" in the **List MIDI Devices**.
3. Assign the device according to its input and output numbers, similar to how you would configure OSC (e.g., OSC:1,0).

Make sure to define all necessary ports in the IAC Device if required.

[Attachment: Bildschirmfoto 2022-12-26 um 18.40.19]  
[Attachment: Bildschirmfoto 2022-12-26 um 22.06.52]

# Receive and OSC Not Working in INIT Function

When attempting to update labels and other widgets in the INIT function, issues arise because the INIT function is called when the server starts, before any clients are connected. This results in the absence of expected outcomes.

## Solution

To properly update labels and widgets upon server startup, utilize the `app.on('sessionOpened', ...)` event. This ensures that the function is called only after a client has connected. Here’s an example of how to implement this:

```javascript
app.on('sessionOpened', (data, client) => {
    functionForInit(xxx, yyy);
});
```

This approach allows you to effectively manage updates to your interface elements after the necessary connections are established. 

[Attachment: filename.ext]

# Unique ID and Value Duplication in Open Stage Control

## Problem Description
When duplicating a track in Open Stage Control, the new track shares the same value as the original track, despite changes made to the main panel container. This raises the question of whether each controller must be customized individually.

## Solution
To ensure that duplicated tracks have unique values, you can utilize the panel's `variables` property. Here’s how to implement it:

1. **Define Variables**: Set a variable in the panel's properties:
   ```json
   {
     "n": 1
   }
   ```
   This variable can be used to define the IDs of the children:
   ```json
   @{parent.variables.n}
   ```

2. **Incrementing Variables**: When duplicating the panel, increment the variable to ensure all children receive unique IDs. If you are using a clone widget, you can override the `variables` property with:
   ```json
   {
     "variables": {"n": 2}
   }
   ```

3. **Using Paste Action**: Alternatively, you can use the paste action "ID + 1" to automatically increment IDs when pasting copied widgets.

4. **Dynamic Text Updates**: If you need to update text values dynamically based on the variable, use:
   ```json
   @{knob_@{parent.variables.n}}
   ```

5. **JavaScript Integration**: If you are using JavaScript for properties, ensure you are using the correct syntax. For example:
   ```javascript
   props.preArgs = [3, $ + @{43 + @{parent.variables.n}}]
   ```
   Note that you do not need to nest `#{}` within `JS{{}}`.

For practical examples, refer to the attached files:
- [Attachment: 1AxB8HxC8VYIPWOfiqmSO2cZ38H.json]
- [Attachment: 7Mg7SQzrCjfVXcgBZgZnOjietCD.json]

# Using Matrix Button to Toggle Visibility

**Problem:**
A user wants to use a button from a matrix to control the visibility of a panel in Open Stage Control. They are unsure how to reference the button's value correctly.

**Solution:**
To toggle the visibility of a panel using a matrix button, you can retrieve the button's value with the following syntax:

```
@{matrix_id/$}
```

Here, `matrix_id` is the ID of your matrix, and `$` represents the button's index. This method works only within the `props` property in JavaScript (`{{}}`) and property references (`#{} blocks`). 

By default, the widgets inherit from the matrix's `id` and `osc` properties, with the `id` and `address` being appended with `/$`. Ensure that you have not manually set the `id` in the matrix's properties for this to function correctly. 

For more detailed information, refer to the Properties reference in Open Stage Control documentation.

# Buttons / Switches to Imitate Cubase's Toolbox

## Problem Description
The user is attempting to create a set of 14 buttons in Open Stage Control that function like a toggle switch, where activating one button deactivates all others. The user is facing issues with button values not updating correctly when one button turns off another, particularly with background images not reflecting the correct state.

## Solution
To achieve the desired functionality where one button turns off all others, you can use the following script for each button:

```javascript
// Assuming button names are b1, b2, ..., b14
if (value == 1) {
    set("b*", 0, {sync: false});
}
```

This script will set all buttons to 0 (off) when one is activated. 

### Background Image Update
For the background image to change correctly based on the button state, use the following CSS in the button's CSS field:

```css
#{@{this}==1 ? "background:url(Images/imageON.png)" : "background:url(Images/imageOFF.png)"};
```

### Additional Notes
- If you encounter issues with buttons not staying active when using MIDI targets, ensure that your MIDI ports are mapped correctly to avoid sending back the same message that triggers the button again.
- For further assistance, refer to the provided example file: [Attachment: hseiEY7k4swby3sa7rYeTGM01lt.json].

# Traversing - Sliding Finger from Blank Area onto a Button

**Problem Description:**
Users have inquired about the ability to touch a blank area on the screen and then slide their finger onto a button without lifting their finger, with the expectation that the button would activate. There was uncertainty whether this behavior was restricted by Windows touch screen functionality.

**Solution:**
Currently, the gesture must begin with a widget interaction; therefore, sliding from a blank area onto a button does not activate the button. However, this functionality is expected to change in version 1.29. In that version, users will be able to start the gesture anywhere within the traversing container (or a parent container that also supports traversing gestures), allowing for the desired interaction.

# Issue with JavaScript Object Value Conversion in Open Stage Control

When working with JavaScript objects in Open Stage Control, a common issue arises where values are unintentionally converted to numbers instead of retaining their original string format. This can occur when iterating over object keys and assigning values incorrectly.

## Problem Description
In a scenario where an object is defined as follows:

```javascript
obj = {
  "test1#xxx": "00 00",
  "test2#yyy": "01 54",
  // ...
}
```

When using `Object.keys(obj).forEach()` to iterate over the keys, the value associated with each key may be converted to a number, which can lead to loss of formatting (e.g., "00 09" may be received as 9). This happens because the `forEach` function is designed to take only one argument, which is the current key, not the value.

## Solution
To avoid this conversion and ensure that the original string values are retained, use the following approach:

```javascript
Object.keys(obj).forEach(function(key) {
  if (key.includes('#xxx')) {
    tempObj[key] = obj[key]; // Access the value directly from the object
  }
});
```

By directly accessing `obj[key]`, you ensure that the value remains a string and is not converted to a number. This method preserves the intended formatting when sending data via OSC.

This solution is effective for maintaining the integrity of string values in JavaScript objects within Open Stage Control.

# Changing CSS of a Widget Using set() Command

**Problem Description:**
A user inquired about the possibility of using the `set()` command in a script to change the CSS of a widget. They expressed that while they could inherit from an input widget to change its value, it felt cumbersome.

**Solution:**
The user discovered that they could achieve the desired effect by using the `JS{{ }}` syntax directly in the CSS field of the widget. This method allows for dynamic CSS changes without the need for cloning widgets.

# Strange UI Scaling When Viewed Through Android Kiosk App

**Problem Description:**
When accessing an OSC session through the Fully Kiosk Browser app on a 2019 Samsung Galaxy Tab A, the user experiences UI scaling issues that render the interface unusable. In contrast, the UI displays correctly when accessed via the Chrome browser on the same device.

**Solution:**
The issue was resolved by updating the Chrome version on the tablet to the latest version available in the Play Store. After the update, the OSC session rendered correctly in the Fully Kiosk Browser app.

# Resizing Panel Containing One Button and One Image

**Problem Description:**
A user has a button widget and an image widget used as a background, both placed in a panel with the same geometry. The user wants to resize both widgets simultaneously by resizing the panel, but is unable to do so effectively.

**Solution:**
To ensure that both the button and image widgets resize together with the panel, set the following properties for both widgets:

- Set `top` to `0`
- Set `left` to `0`
- Set `width` to `100%`
- Set `height` to `100%` 

This configuration will allow both widgets to adjust their size in relation to the panel.

# Virtual Keyboard for Touchscreen in Open Stage Control

## Problem Description
Users may require a virtual keyboard for input widgets on a touchscreen device, particularly when no physical keyboard is available. The need for a more user-friendly interface when typing into inputs and textareas has been expressed.

## Solution
A virtual keyboard has been developed and will be included in the next release of Open Stage Control. This keyboard is designed specifically for desktop clients and allows users to type into input fields and textareas, though it does not emulate a physical keyboard.

### Features and Improvements
- The keyboard size can be adjusted to better fit the user's interface, particularly for larger touchscreen displays.
- An additional entry at the top of the keyboard reflects the content of the input widget, enhancing usability, although it currently lacks a cursor indicator.

For further details, please refer to the upcoming beta release for these features. 

[Attachment: Vorschlag]

# Cannot Get DoubleTap to Work in a Matrix of Faders

When attempting to implement a double-tap feature to reset faders in a matrix configuration, the functionality may not work due to incorrect property naming.

## Solution

Ensure that the property name is correctly defined as `doubleTap` (all lowercase) instead of `DoubleTap`. Property names are case-sensitive in Open Stage Control.

Here is the corrected configuration:

```json
{
  "design": "compact",
  "horizontal": "false",
  "lineWidth": 0,
  "doubleTap": "true",
  "origin": 0.5,
  "default": 0.5
}
```

This adjustment should enable the double-tap functionality to reset each fader to its default value in the matrix of faders.

# Sending Messages with multixy Widget

## Problem Description
Users have reported difficulties in sending individual messages for each XY point using the multixy widget in Open Stage Control. The goal is to send different control messages for each point on the multixy pad.

## Solution
To achieve this, you can utilize the `onValue` property to send messages based on the values of each point. Here’s a structured approach:

1. **Define Local Variables**: In the `onCreate` property, initialize local variables to store the previous values of each XY point.

    ```javascript
    locals.storedXY1 = [0, 0];
    locals.storedXY2 = [0, 0];
    locals.storedXY3 = [0, 0];
    ```

2. **Implement Value Checking**: In the `onValue` property, check if the current values differ from the stored values. If they do, send the appropriate messages.

    ```javascript
    let xy1 = [value[0], value[1]];
    let xy2 = [value[2], value[3]];
    let xy3 = [value[4], value[5]];

    // Check if the arrays are not equal, if true, send messages
    if (JSON.stringify(locals.storedXY1) !== JSON.stringify(xy1)) {
        // Send messages for point 1
        send("midi:BMT", "/control", 1, 1, Math.round(xy1[0] * 127)); // x1
        send("midi:BMT", "/control", 1, 2, Math.round(xy1[1] * 127)); // y1
        locals.storedXY1 = xy1; // Update stored value
    }

    if (JSON.stringify(locals.storedXY2) !== JSON.stringify(xy2)) {
        // Send messages for point 2
        send("midi:BMT", "/control", 2, 3, Math.round(xy2[0] * 127)); // x2
        send("midi:BMT", "/control", 2, 4, Math.round(xy2[1] * 127)); // y2
        locals.storedXY2 = xy2; // Update stored value
    }

    if (JSON.stringify(locals.storedXY3) !== JSON.stringify(xy3)) {
        // Send messages for point 3
        send("midi:BMT", "/control", 3, 5, Math.round(xy3[0] * 127)); // x3
        send("midi:BMT", "/control", 3, 6, Math.round(xy3[1] * 127)); // y3
        locals.storedXY3 = xy3; // Update stored value
    }
    ```

This method allows you to send different control messages for each XY point on the multixy pad effectively. 

For further learning on programming for Open Stage Control, consider exploring the official documentation and community resources to enhance your skills and contribute back to the community.

[Attachment: filename.ext]

# Editing Proportions of Icons in Open Stage Control

**Problem Description:**
Users want to adjust the size of icons in the "label" field to scale proportionally with the overall widget size. Initial attempts to use CSS viewport units for font size did not yield the desired results.

**Solution:**
To achieve proportional scaling of icons, you can set a fixed width and height for the root widget. This approach prevents issues with auto-sizing when enabling the editor. Use the following CSS code:

```css
font-size: #{parseInt(@{this.width} * 0.1)} /* adjust 0.1 as needed */
```

This code allows the font size to be calculated based on the width of the widget. Adjust the multiplier (0.1) to achieve the desired icon size. Note that this method may require some scripting for each button if you want to use the button's size as a reference. 

For further adjustments or if issues persist, consider revisiting the widget's layout settings. 

[Attachment: 1.png]  
[Attachment: 2.png]  
[Attachment: 3.png]  
[Attachment: 4.png]  
[Attachment: 5.png]

# Using Gradient Colors in Open Stage Control Widgets

## Problem Description
Users may want to apply a linear gradient color to the `colorWidget` in Open Stage Control, similar to how it can be applied to `colorFill`. An example gradient is `linear-gradient(red 0% 30%, green 30% 100%)`.

## Solution
Currently, the `colorWidget` does not support linear gradients as it utilizes CSS colors rather than CSS background images. However, the `fader` widget does have a gradient property that can be used to achieve a similar effect. 

For level indicators, consider using the `fader` widget instead of the `colorWidget` for a more elegant solution. 

[Attachment: Снимок экрана 2025-06-03 в 19.38.07]

# Sending MIDI Messages with Delay in Open Stage Control

## Problem Description
When attempting to send MIDI messages in a loop, there is a need to introduce a delay between each message to ensure that the messages are sent successfully. The initial approach using `setTimeout` does not work as expected, resulting in only one message being sent.

## Solution
To send MIDI messages with a delay between each message, you can use the following code structure:

```javascript
for (var i = 0; i < 500; i++) {
  setTimeout(function(index) {
    send('midi:SessionKiano', '/note', 1, 72, 1);
  }, i * 10, i); // 10ms delay per iteration
}
```

### Explanation:
- The `setTimeout` function is used to schedule the execution of the `send` function.
- The delay is calculated by multiplying the iteration index `i` by the desired delay (10 milliseconds in this case).
- The third argument of `setTimeout` passes the current index to the callback function, ensuring that the correct value of `i` is used when the function executes.

### Note:
Be cautious with the total delay; for 500 iterations at 10 milliseconds each, the total time will be 5000 milliseconds (5 seconds). Adjust the delay as necessary based on your requirements.

# Changing the Origin of a Matrix Button Layout

When creating a 4x4 matrix of buttons in Open Stage Control to send MIDI notes, you may want to change the origin point from the default top-left to the bottom-left. 

## Problem Description
The default layout for matrix buttons starts from the top-left corner. Users may want to adjust this to have the origin at the bottom-left corner instead.

## Solution
While there is no built-in feature to reverse the grid layout's order, you can achieve the desired effect by calculating a reversed index. Use the following JavaScript code snippet to adjust the button indices accordingly:

```javascript
var index = 14 - $;
```

Alternatively, you can define a custom array for the button indices to map them to your desired layout:

```javascript
var indices = [12, 13, 14, 15, 8, 9, 10, 11, 4, 5, 6, 7, 0, 1, 2, 3];
index = indices[$];
```

This approach allows you to customize the button layout effectively. 

[Attachment: Capture d’écran 2020-11-27 à 13.41.35]

# Specifying Button Colors in Higher-Level CSS

## Problem Description
When attempting to define button styles at a higher level in CSS, the use of `@{this}` refers to the panel rather than the individual buttons. This makes it challenging to apply different styles based on the on/off state of the buttons without duplicating code.

## Solution
To manage button styles effectively from a higher-level CSS, you can utilize CSS classes that represent the button's state instead of relying on `@{this}`. Here’s a recommended approach:

1. Define default styles for the buttons in the `.button-container` class:
   ```css
   .button-container {
     /* Default styles */
     --color-widget: transparent;
     --color-text: white;
     --color-text-on: black;
   }
   ```

2. Use a specific class for the active state of the buttons:
   ```css
   .button-container.on {
     /* Styles when the button is on */
     --color-widget: #4793AF;
   }
   ```

3. Apply the color properties directly in your button styles as needed.

This method allows you to maintain a clean and manageable codebase without duplicating styles for each button. If you encounter issues with CSS variables (like `--color-widget`), you can revert to using standard color properties directly.

# Reset Session Window to Main Monitor on Multi-Monitor Setup

When using Open Stage Control on a multi-monitor setup, you may encounter an issue where the session window does not appear on the main monitor after editing on a secondary monitor. This can happen if the secondary monitor is disconnected or turned off.

## Solution

To reset the session window to the main monitor, you can follow these steps:

1. **Remove or Edit the Configuration File**:
   - Navigate to the configuration file located at:
     ```
     C:\Users\username\AppData\Roaming\open-stage-control\Config\config.json
     ```
   - You have two options:
     - **Remove the file**: This will reset all window positions.
     - **Edit the file**: Open it and delete the "client" entry under "geometry" to keep the launcher’s last configuration while resetting the window positions.

This should resolve the issue and allow the session window to appear on the main monitor.

[Attachment: filename.ext]

# Why Can't I Add a Tab?

When attempting to add sub-tabs to existing tabs in Open Stage Control, users may encounter an issue where the "add tab" option is not available when right-clicking on a tab.

## Problem Description
Users are unable to add sub-tabs to tabs that are already in a container containing non-tab widgets. The option to add a tab does not appear in the context menu.

## Solution
You cannot add a tab in a container that already contains non-tab widgets. To create additional tabs, you must ensure that the container is solely composed of tabs. 

If you wish to create a custom navigation layout with multiple rows of tabs, consider hiding the tab navigation and using a switch widget to sync with the container, allowing for a tailored navigation experience.

[Attachment: nDisplay_MOVE_trackpad.json]  
[Attachment: iNYztBzApZAU5Y1C8X9snKZ18x3.json]

# Fader Button Width

## Problem Description
Users have reported that the handle of faders is too small and are seeking a way to increase its size.

## Solution
Currently, there is no option to adjust the size of the fader handle. However, a future version of Open Stage Control will introduce a `knobSize` property that will allow users to customize the size of the fader handle.

# Displaying ID and Value on Widgets

## Problem Description
Users are unable to automatically display the ID and value of widgets, such as faders, in Open Stage Control. The built-in label or input fields are no longer available in the latest version, leading to confusion on how to achieve this functionality.

## Solution
To display the ID and value of a fader or similar widget, you need to use a text widget or an input widget and synchronize it with the fader. The synchronization mechanism is documented in the Open Stage Control documentation.

### Steps to Implement:
1. **Create a Text Widget**: Use a text widget to display the desired information.
2. **Synchronize with Fader**: Use the syntax `@{widgetID}` to dynamically display the fader's value. Note that you do not need to include `.value` in the syntax.
3. **Manage Z-Order**: If the text widget is obscured by the fader, you can reorder the widgets using the project tree panel to adjust their z-index. The last widget in the tree list has the highest z-index.
4. **Use New Lines**: To format the display properly, you can use a new line (Shift + Enter) in the text widget to separate the name and value.

### Additional Tips:
- When copying and pasting widgets, remember to rename the text widget IDs to avoid shared values across multiple instances.
- A more intuitive template widget implementation is being considered for future updates to simplify this process.

For further details, refer to the documentation on widget synchronization. 

[Attachment: filename.ext] (attachment reference missing)

# Dynamically Change Switch Label

## Problem Description
The goal is to dynamically change the labels of a switch using incoming OSC messages. Initial attempts to use the OSC syntax for labels did not yield the desired results.

## Solution
To dynamically change the switch's labels, you can use the following configuration in the "values" field of the switch:

```json
{
    "labels": [ "OSC{/fx/1/name, ---}", "OSC{/fx/2/name, ---}", "OSC{/fx/3/name, ---}" ],
    "values": [ 1, 2, 3 ]
}
```

This setup allows you to send OSC messages to update the labels of the switch dynamically. Each label can be replaced with the corresponding OSC address that retrieves the desired name. 

Additionally, if you want to change the content of the switch's `values` property dynamically, you can use the following JavaScript:

```javascript
return OSC{/fxParBankLbl_1} || {
    "key a": 1,
    "key b": 2
}
```

You can send a different object in string form to the address `/fxParBankLbl_1`, for example:

```
/fxParBankLbl_1 '{"foo": 1, "bar": 2}'
```

This approach provides flexibility in updating switch labels based on incoming OSC messages.

# Fixed Height of Buttons in a Matrix

**Problem Description:**
Users may encounter issues with setting a fixed height for buttons in a matrix within Open Stage Control. Despite configuring properties such as `props.height`, `props.expand`, and `props.contain`, buttons may still expand to fill the entire matrix.

**Solution:**
To achieve a fixed height for buttons in a matrix, ensure the following configurations:

1. Set the button properties correctly:
   ```javascript
   var props = {};
   props.height = $ == 0 ? 60 : 25; // Adjust height based on condition
   props.visible = $ > 2 && $ < 7 ? @{button} : 1; // Control visibility
   return props;
   ```

2. Use the following additional properties:
   ```javascript
   props.expand = false; // Prevent expansion
   props.contain = false; // Not applicable for button widgets
   props.scroll = true; // Enable scrolling if necessary
   ```

3. Add the following CSS rule to ensure buttons display correctly:
   ```css
   inner, .widget {
     display: block; // Ensures buttons do not stretch
   }
   ```

By implementing these settings, buttons in the matrix should maintain their specified height without expanding unnecessarily. 

[Attachment: filename.ext]

# Optimizing OSC - Avoiding Widget Duplication

**Problem Description:**
When using Open Stage Control (OSC), accumulating a large number of widgets can lead to performance issues, such as slow response times and connection interruptions. Specifically, duplicating widgets for similar functions can exacerbate these problems, especially when managing multiple tabs and buttons.

**Solution:**
To optimize your OSC setup and avoid widget duplication, consider the following approach:

1. **Use a Single Button and Switch:**
   Instead of creating multiple buttons for similar functions across different tabs, utilize one button and one switch to manage the behavior of your interface. This reduces the total number of widgets and enhances performance.

2. **Implement Conditional Logic:**
   In the script property of the button, use conditional statements to determine the action based on the switch's value. Here is an example script:

   ```javascript
   if (value === 0) return; // Prevents duplicate OSC messages

   if (get('switch_id') === 1) {
       // Action for switch position 1
   }

   if (get('switch_id') === 2) {
       // Action for switch position 2
   }
   ```

3. **Avoid Clones and Visibility Changes:**
   Refrain from using widget clones or changing visibility properties frequently, as these can also slow down OSC performance.

By implementing these strategies, you can significantly enhance the efficiency of your OSC sessions while maintaining functionality.

[Attachment: Screenshot 2021-10-24 at 14.20.49]
[Attachment: Screenshot 2021-10-24 at 14.24.25]

# OSC to Keystroke Conversion

**Problem Description**  
Users may want to convert OSC (Open Sound Control) messages into keystrokes to trigger actions, such as launching programs via AutoHotkey (AHK). 

**Solution**  
To achieve this, follow these steps:

1. **Install AutoHotkey (AHK)**:
   - Download and install AHK from the official website.

2. **Create an AHK Script**:
   - Use the example scripts provided in the AHK installation folder as a starting point.

3. **Modify the Script for OSC**:
   - Load the OSC2AHK DLL and set up the OSC listener. Below is a sample script structure:

   ```ahk
   #NoEnv
   SendMode Input
   SetWorkingDir %A_ScriptDir%
   Gui +LastFound
   hWnd := WinExist()

   global oscTypeNone := 1
   global oscTypeInt := 2
   global oscTypeFloat := 4
   global oscTypeString := 8
   global oscTypeAll := 0xffffffff

   ; Load DLL and open network port for OSC (7001)
   DllCall("LoadLibrary", "Str", "OSC2AHK.dll", "Ptr")
   DllCall("OSC2AHK.dll\open", UInt, hWnd, UInt, 8000)

   ; Add listener for OSC messages
   DllCall("OSC2AHK.dll\addListener", AStr, "/test1", UInt, 0x1001, UInt, oscTypeInt + oscTypeFloat)
   OnMessage(0x1001, "msghandlerTest1")

   msghandlerTest1(oscType, data, msgID, hwnd) 
   {
       if (oscType = oscTypeInt) 
       {
           Send, ^!x  ; Sends Ctrl + Alt + X keystroke
       }
       ; Handle other data types if necessary
   }
   ```

4. **Triggering Keystrokes**:
   - Replace the `msgbox` line in the `msghandlerTest1` function with the desired keystroke command. For example, `Send, ^!x` sends the Ctrl + Alt + X keystroke when an OSC message with the address `/test1` is received.

5. **Testing**:
   - Ensure that your OSC messages are correctly formatted and sent to the specified port. Test the script to confirm that it triggers the keystrokes as expected.

By following these steps, you can successfully convert OSC messages into keystrokes using AutoHotkey.

[Attachment: OSC2AHK.dll]

# Using Open Stage Control with Touchscreen on macOS

**Problem Description:**
Users have reported difficulties in using Open Stage Control (OSC) with external touchscreen displays on macOS. Specifically, they experience limitations where only one widget can be activated at a time, similar to mouse functionality, despite having multitouch capabilities enabled through Touchbase UPDD.

**Solution:**
Open Stage Control supports multitouch screens; however, proper configuration on macOS may be necessary to enable this functionality. Here are the recommended steps:

1. **Browser Configuration**: It may be beneficial to use a browser that supports multitouch gestures. Consider installing a specific extension that enhances touch support.
   
2. **TUIO Interface**: Refer to the TUIO interface documentation provided by Touchbase for guidance on setting up multitouch functionality:
   - [TUIO Documentation](http://support.touch-base.com/Documentation/50584/Browser-TUIO-interface)

By following these steps, users should be able to utilize multitouch features effectively with Open Stage Control on their external touchscreen displays. 

[Attachment: filename.ext] (attachment reference missing)

# Menu Widget and Sending OSC

**Problem:**
When using a menu widget to send OSC messages, an error occurs: (ERROR, MIDI) invalid address (/menu_quantize). The send function works correctly to change settings in Cubase, but the error message persists.

**Solution:**
The error is caused by the widget's default message. To resolve this, enable the widget's `bypass` property. This will prevent the default message from being sent, eliminating the error.

For further details, refer to the documentation on [General mechanics - Open Stage Control](attachment reference missing).

# Length of Switch Within a Prop

To determine the total number of values in a switch property for use in CSS n-selectors within a JavaScript loop, you can utilize the following methods.

## Solution

1. **Using `getProp()` in a Script Property**:
   ```javascript
   const switchLen = Object.keys(getProp("switch_id", "values")).length;
   ```

2. **Using `@{}` Syntax in a JS{} Block**:
   ```javascript
   var n = Object.keys(@{switch_id.values}).length;
   // Use n as needed
   ```

This approach allows you to dynamically obtain the length of the switch values without manually specifying each selector.

# Knobs with Centre Zero

When using the default or compact knob style in Open Stage Control, the value ranges from 0 CCW (counter-clockwise) to 127 CW (clockwise). This configuration can lead to a value trace that starts from 0, which may not be ideal for applications like panning.

## Solution

To adjust the knob so that the value trace represents the pan position from the center, you can set the `origin` property. This allows the knob to have a center position of 64, effectively eliminating the trace from 0 to the center.

[Attachment: image.png]

# Launcher GUI Window / Property Field: Right-Click and Select-All Issues

**Problem Description:**
Users have reported issues with the Open Stage Control Launcher GUI where the following functionalities are not working:
- The "Select All" command (Command + A) on macOS does not function.
- The right-click (Control + Click) context menu does not appear.

**Solution:**
- The "Select All" functionality has been confirmed to work in version 1.9.6 of the Open Stage Control Launcher GUI.
- For the right-click context menu, it is noted that the menu primarily offers copy and paste options, which can be accessed using keyboard shortcuts (Command + C for copy and Command + V for paste). 

No further fixes for the right-click issue are currently available. 

[Attachment: filename.ext] (attachment reference missing)

# Dynamic Variable Assignment in Scripting

**Problem Description:**
A user was attempting to dynamically reference variables in JavaScript to set a widget's color in Open Stage Control. The initial approach using string concatenation did not yield the expected results, returning the variable name instead of its value.

**Solution:**
The user successfully resolved the issue by using an object to store the color values. The following code snippet demonstrates the effective method:

```javascript
var obj = {
    "1": "#ff0025", // Red
    "2": "#0099ff", // Blue
};
var key = CardCol;
setVar('KK' + MasterSlot + 'Macro' + parameter1, 'Col', obj[key]);
```

This approach allows for dynamic access to the color values based on the `CardCol` variable, ensuring the correct color is set for the widget.

# Priming a Button from a Custom Module

## Problem Description
The goal is to change the appearance and status of a button in Open Stage Control based on conditions in a custom module. The button should visually indicate that it is ready to be pressed to trigger an OSC update when certain conditions are met, such as changes in expression maps.

## Solution
To achieve this, you can use the following approach:

1. **Set Up the Button**: Ensure your button is configured with an OSC address that can be triggered by your custom module.

2. **Receive OSC Messages**: Use the `receive()` function in your custom module to update the button's state. For example:
   ```javascript
   receive('/button_address/primed', 1);
   ```

3. **Define Button Appearance**: Use the `VAR{}` syntax to define the button's appearance based on the variable set by the OSC message. For example:
   ```javascript
   VAR{primed} ? "background:#171C20" : "display:none;"
   ```

4. **Reset the Variable**: Make sure to reset the variable when the button is pressed or when the condition changes to avoid unintended behavior.

5. **Example Implementation**:
   ```javascript
   function primeUpdateBtn() {
       console.log("EXPRESSION MAP UPDATED - CHANGE STATUS OF BUTTON IN OSC TO PROMPT A REBUILD OF OSC BUTTONS");
       receive('/rebuildMapBtn/primed', 1); // Update the button state
   }
   ```

By following these steps, the button should visually change to indicate it is primed for user interaction, and pressing it will trigger the desired OSC update. 

Make sure to test the implementation thoroughly to confirm that the button behaves as expected.

# Keep "Menu" Widget Popup in Viewport

When using the "Menu" widget in Open Stage Control, users may encounter an issue where the popup menu does not remain within the viewport, particularly when positioned at the top left of the screen. This can prevent users from selecting the first or second items in the menu.

## Solution

To ensure that the menu popup stays within the viewport, follow these steps:

1. Select the **Menu** widget.
2. Navigate to the **Inspector** panel.
3. Under the **Style** section, adjust the following settings:
   - Set **menuAlignV** to **top**.
   - Set **menuAlignH** to **left**.

These adjustments will allow the menu to function correctly and remain visible within the viewport. 

[Attachment: image]

# Adding Icons or Images to Tabs in Open Stage Control

To add icons or images to tabs in Open Stage Control, you need to apply CSS styles targeting the tab elements from the parent container. The following steps outline the process:

## Problem Description
Users often find that standard CSS commands for adding background images do not work directly within the tabs' scope. Instead, they need to target the tab buttons from the parent CSS.

## Solution
1. **Targeting Tab Backgrounds**:
   Use the following CSS selector to change the background color of a specific tab:
   ```css
   .panel > .navigation .tablink:nth-child(1) a {
       background: red;
   }
   ```

2. **Changing Background Color for Active Tabs**:
   To change the background color of an active tab, use the additional class `.on` that is applied to active `.tablink` elements:
   ```css
   .panel > .navigation .tablink.on:nth-child(1) a {
       background: red;
   }
   ```

3. **Adding Icons**:
   To add icons, you can set a background image in the same way:
   ```css
   .panel > .navigation .tablink:nth-child(1) a {
       background-image: url('\Icons\cross.png');
   }
   ```

Make sure to adjust the CSS selectors based on your specific panel structure, which can be inspected using the browser’s developer tools. 

For further customization, you can also modify the icon or its filter when the tab is active by using the `.on` class in your CSS.

# Change Items Order in Vertical Panel

## Problem Description
In version 1.0 of Open Stage Control, users are unable to sort items in a vertical panel using the previous method of `flex-direction: column-reverse;`, which worked in version 0.49.

## Solution
To achieve the desired item order in a vertical panel, use the following CSS:

```css
inner {
  flex-direction: column-reverse;
}
```

This adjustment reflects the changes in the HTML structure of the new panel widget.

# Changing Button Background Images Based on State

**Problem Description:**
Users may encounter difficulties in changing a button's background image based on its state (on/off) in Open Stage Control. The initial attempt may involve using CSS with conditional statements, but issues often arise from syntax errors or the use of absolute paths.

**Solution:**
To successfully change the button's background image based on its value, follow these guidelines:

1. **Correct Syntax**: Ensure that your CSS syntax is correct. For example, make sure you have all necessary brackets closed. The correct format should look like this:
   ```css
   {
     @{this} == 1 ? 
       "background:url(Images/Outil_Ciseaux_On.png)" : 
       "background:url(Images/Outil_Ciseaux_Off.png)"
   }
   ```

2. **Use Relative Paths**: Instead of using absolute paths (e.g., `E:\Images\OSC\`), use relative paths. Place the `Images` folder in the same directory as your session file and reference it like this:
   ```css
   background:url(Images/Outil_Ciseaux_On.png)
   ```

By following these steps, you should be able to change the button's background image successfully based on its state.

[Attachment: filename.ext] (attachment reference missing)

# Making a Widget Enlarge on Touch

## Problem Description
Users want to replicate the circular menu behavior, where a widget enlarges when touched and returns to its normal size upon release. This is particularly useful for adjusting values on smaller touch screens.

## Solution
While there is no official support for this feature, a workaround can be implemented using CSS. Here are the steps:

1. Set the slider's CSS to:
   ```css
   :host:active {
     transform: scale(2);
   }
   ```
2. Adjust the slider's sensitivity to `0.5` (which is equivalent to `1/scale`).

**Limitations:** This method may not work on touch devices and the slider will not overflow its parent’s boundaries.

Additionally, an alternative solution involves using a JSON configuration file that includes:
- A small fader
- A larger fader whose visibility is controlled by a variable widget
- A variable widget updated using the small fader's scripting

You can find the example configuration in the attached file: [Attachment: 2QfaPcq3YhnADy4317qU57nInpa_1.json].

# Sending Packed Data from Multiple Widgets

**Problem Description:**
The goal is to send a packed set of data (xyz) from three faders using the `send()` function in Open Stage Control. The initial attempt involved using an external script, but there were syntax issues.

**Solution:**
To send the values from the three faders, use the following syntax within the script of the widget that contains the faders:

```javascript
var xget = get('spat_position_xget');
var yget = get('spat_position_yget');
send('/adm/obj/1/xyz', xget, yget, value);
```

Ensure that this script is triggered when the widget is interacted with (touched). This approach will successfully send the packed data.

# Issue with Widget Synchronization Across Different Panels

**Problem Description:**
Users may encounter issues with widget synchronization in Open Stage Control when widgets share the same ID but are located in different panels with distinct OSC addresses. This can lead to unintended behavior where adjusting one widget affects another, despite their different OSC configurations.

**Solution:**
Currently, there is no built-in feature to desynchronize widgets that share the same ID. However, a workaround is to utilize the `comment` property to store the address suffix. Configure the OSC address as follows:

```
@{parent.address}/@{this.comments}
```

This approach allows you to maintain the desired OSC address structure without hardcoding each knob's OSC address while avoiding synchronization issues.

[Attachment: rT3Mlh11Uf0GpAZzPlm4kWCG6QM.json]

# Highlighting a Line in HTML Frame

## Problem Description
Users want to highlight a specific line in the HTML Frame, particularly for a playlist, to send the selected track's ID to their software via OSC. Additionally, there is a request for an auto-scroll feature to automatically display full track names without manual scrolling.

## Solution
The HTML widget currently does not support interaction or an auto-scroll feature. However, you can achieve similar functionality using a switch widget configured as a playlist with custom CSS. 

1. **Use a Switch Widget**: Create a switch widget to serve as your playlist. You can format the values to be sent via OSC.
   
   Example configuration can be found in the attached file:
   - [Attachment: ndpdoIJqguqZhH2ZmskOLVIz77y.json]

2. **Highlighting a Track**: To highlight a specific track, you can change the switch's value by sending an integer corresponding to the track's ID. Ensure that the switch's values are set up as "TRACK NAME": INT pairs. 

3. **Sending Track ID**: You can send the ID of the current track to the Value field of the switch to highlight it effectively.

This approach allows you to manage track selection and highlighting within the limitations of the current HTML Frame capabilities.

# Page Layout on Different Devices

## Problem Description
Users may have questions about how Open Stage Control (OSC) handles layouts on various devices, particularly regarding screen size, orientation, and the ability to create multiple layouts.

## Solution
1. **Responsive Design**: OSC can support responsive design, allowing layouts to adapt to different screen sizes. This is similar to how many HTML pages function. For guidance, refer to the documentation on responsive design.

2. **Screen Size and Orientation**: The size and resolution of the screen do not pose issues. OSC will behave as if the client window is resized on a desktop application, regardless of whether the screen is HD or 4K.

3. **Layout Switching**: While fading between two different layouts is not possible, you can create two layouts within separate panels. Use CSS media queries to display the appropriate layout based on the screen width.

4. **Multiple Pages**: You can create multiple pages within OSC. If a panel (including the root widget) is empty, you can add tabs instead of widgets, allowing for easy navigation between different interfaces. 

For further details, consult the relevant sections in the OSC documentation.

# Open Stage Control and Bome MIDI Translator Pro Integration Issue

## Problem Description
Users have reported issues with Open Stage Control (OSC) when attempting to translate MIDI signals to keystrokes using Bome MIDI Translator. While OSC is set up correctly and MIDI connections are functioning, the outgoing keystrokes do not execute in applications such as Cubase or Notepad.

## Solution
One confirmed solution involves using AutoHotkey (AHK) as an alternative to Bome MIDI Translator. AHK can effectively receive OSC messages and send keystrokes with adjustable timing, which may resolve the issue of keystrokes not being recognized by other software.

### Steps to Implement AHK Solution:
1. **Install AutoHotkey**: Download and install AutoHotkey from the official website.
2. **Download OSC2AHK DLL**: Obtain the OSC2AHK extension from the Eleton Git Server.
3. **Use the Following AHK Script**:
   ```ahk
   #SingleInstance, Force
   SendMode Input
   SetWorkingDir, %A_ScriptDir%
   Gui +LastFound
   hWnd := WinExist()

   global oscTypeNone := 1
   global oscTypeInt := 2
   global oscTypeFloat := 4
   global oscTypeString := 8
   global oscTypeAll := 0xffffffff

   OnExit("exithandler")

   DllCall("LoadLibrary", "Str", "x64\Debug\OSC2AHK.dll", "Ptr")

   OnMessage(0x1002, "msghandlerFloat")

   success := DllCall("OSC2AHK.dll\open", UInt, hWnd, UInt, 9003)
   if (success != 0)
       msgbox, Failed to open port!

   DllCall("OSC2AHK.dll\addListener", AStr, "/finalekeys", UInt, 0x1004, UInt, oscTypeString)
   OnMessage(0x1004, "msghandlerString")

   return

   msghandlerString(wParam, lParam, msg, hwnd) {
       if (wParam = oscTypeInt) {
           msgbox ("No String!")
           return
       }

       VarSetCapacity(theStr, 20)
       theStr := DllCall("OSC2AHK.dll\getStringData", str, theStr, UInt, 20, UInt, lParam, AStr)

       SetKeyDelay, 50, 50
       ControlSend, AfxFrameOrView100u1, %theStr%, Finale
   }

   exithandler() {
       ExitApp
       return

   Esc::
   ExitApp
   ```

4. **Adjust Key Delay**: Modify the `SetKeyDelay, 50, 50` line to change the timing of the keystrokes if necessary.
5. **Configure ControlSend**: Change the `ControlSend` parameters to match the target application (e.g., Cubase) and update the OSC address accordingly.

This method allows AHK to listen on port 9003 and send keystrokes based on OSC messages received, which can help in executing keystrokes in applications that were previously unresponsive.

For further details on AHK syntax and functionality, consult the [AutoHotkey documentation](https://www.autohotkey.com/docs/AutoHotkey.htm).

**Note**: If you prefer to continue using Bome, ensure that all settings are correctly configured and consider checking for updates or community support for specific troubleshooting related to Bome MIDI Translator.

[Attachment: OSC2AHK.dll]

# Adding an Overlay with Text Widgets to the Controller

## Problem Description
Users may encounter difficulties when trying to overlay text labels on knobs in Open Stage Control. The goal is to label each knob while maintaining functionality without obscuring the controls. Issues arise with visibility and interaction when using absolute positioning and z-indexing, particularly when switching between different viewport sizes.

## Solution
To effectively overlay text labels on knobs without losing functionality, consider using the knob's HTML property to insert the labels directly. This approach avoids complications with absolute positioning and ensures that the labels do not interfere with touch events.

### Implementation Steps:
1. Use the following HTML to create the label:
   ```html
   <div class="label">1</div>
   ```

2. Apply the following CSS to position the label correctly and prevent it from catching touch events:
   ```css
   .label {
     position: absolute;
     text-align: center;
     width: 100%;
     left: 0;
     top: 50%;
     line-height: 0;
     pointer-events: none;
   }
   ```

This method allows you to utilize the available space effectively while ensuring that the knobs remain fully functional.

### Example Session
For reference, an example session demonstrating this setup can be found in the attached file:
[Attachment: knob_label.json]

Additionally, the original device file is available for testing:
[Attachment: virtual-launchcontrolxl.js]

[Attachment: xSLuVjyyd4aQfZBS8BRCc7S8Vqk.js]

[Attachment: dwvhJLKjzGEmKjszjtav25dRIRv.json]

# Storing and Loading States in Open Stage Control

## Problem Description
Users are seeking a method to create, save, and load presets in Open Stage Control. A specific issue arises when loading states from disk that are not located on the C drive, which triggers a continuous loop in the application. Additionally, there is confusion regarding the correct implementation of OSC messages for state management.

## Solution
To effectively manage saving and loading states, follow these guidelines:

1. **Custom Module**: Utilize a custom module for saving and loading states. A repository with an example implementation is available [here](https://github.com/jean-emmanuel/osc-state-example).

2. **Loading States**:
   - Use the following commands to load states:
     ```javascript
     send('IP', '/STATE/OPEN', '@{StateName}.state')
     send('IP', '/STATE/SET', '@{StateName.state}', false)
     ```
   - Ensure that these commands are sent to the clients from the custom module using `receive()`, rather than sending them externally.

3. **Debugging Loop Issue**: If you encounter a loop when loading states from non-C drives:
   - Verify that the state object being sent is valid.
   - Check the implementation against the provided example to ensure proper syntax and logic.

4. **State Navigation**: You can implement buttons to navigate through states (e.g., next and previous) using the following sample code:
   ```javascript
   // state Next button
   else if (address === '/state/next') {
       const currentStateName = args[0].value;
       const slotNames = Object.keys(states);
       const currentIndex = slotNames.indexOf(currentStateName);
       // Logic to determine next state
   }
   ```

By following these steps and utilizing the provided resources, you can effectively manage presets in Open Stage Control. For further assistance, refer to the updated repository with comments for additional context and examples. 

[Attachment: image.png]

# Matrix Controlling Other Widgets

## Problem Description
When using a button matrix to control faders, pressing one button sets the faders to specific values. However, subsequent button presses, even from a different matrix, also trigger the same fader values, indicating an issue with script triggering.

## Solution
To prevent cross-script triggering, add `{script: false}` to the `set()` calls in the button scripts. Modify the script in the matrix properties as follows:

```javascript
props.script = `
if (value)  {
  set('matrix_samplerRack01/*', 0, {script:false})
  set('matrix_samplerRack02/*', 0, {script:false})
  set('matrix_samplerRack03/*', 0, {script:false})
  set('matrix_samplerRack04/*', 0, {script:false})
}
`
```

This adjustment ensures that the button presses do not inadvertently trigger scripts from other buttons. 

[Attachment: dvyChSvIFmSTEc8poYmjIF5hoZp.json]

# Morph Between Values in Open Stage Control

## Problem Description
Users may want to morph a knob between two values based on a timing mechanism, but may have difficulty finding existing discussions or solutions.

## Solution
To achieve a smooth transition between two values for a knob, you can utilize the fader's transition value animation feature. Refer to the detailed implementation in the following discussion: [Fader - transition value animation - #2 by jean-emmanuel]. 

Make sure to check the specifics in the referenced discussion for step-by-step guidance.

# Syntax to Change Dropdown/Switch via OSC/Scripting

## Problem Description
Users may encounter issues when trying to select a dropdown or switch item using OSC or scripting. Specifically, sending float values to the widget does not yield the expected results due to float precision issues. For example, sending a value like `0.96` may not select the correct entry because it translates to a slightly different float value.

## Solution
To successfully select a dropdown or switch item via OSC, ensure that you send the value as a double instead of a float. Use the OSC typetag `"d"` for doubles. 

Here’s an example of how to send a value correctly:
```javascript
send('127.0.0.1:8080', '/Test', {type: "d", value: 0.96});
```

If you're controlling a slider via OSC and want to ensure that the correct double value is sent, you can implement a simple solution using an if/else statement to map incoming float values to hard-coded double values. Here’s an example:
```javascript
if (value < 0.03) {
    set('ChoirSaturnType3', 0);
} else if (value < 0.07) {
    set('ChoirSaturnType3', 0.04);
} else if (value < 0.10) {
    set('ChoirSaturnType3', 0.07);
} // Continue for other ranges...
```

Alternatively, a more concise approach is to round the value to two decimal places:
```javascript
set('ChoirSaturnType3', Math.round(value * 100) / 100);
```

This method simplifies the process and ensures that the correct values are sent and recognized by the widget. 

[Attachment: filename.ext]

# Controlling Widgets with Specific UDP OSC Input Ports

## Problem Description
Users may want to control multiple buses in a mixer independently using Open Stage Control, but face challenges due to identical OSC addresses for controls across different buses. Each bus can be addressed by its own UDP sending and listening ports, and the goal is to manage these controls in a single JSON or OSC session while differentiating incoming commands based on their respective ports.

## Solution
To achieve independent control of each bus, a custom module can be created to filter OSC messages based on their originating UDP port. The following code can be used as a starting point for the custom module:

```javascript
// Custom module: select this file in the server's "custom-module" option

module.exports = {
    oscInFilter: (data) => {
        // Add an address prefix to incoming messages depending on the origin port
        if (data.port === BUS_INPUT_PORT) data.address = '/busInput' + data.address;
        if (data.port === BUS_OUTPUT_PORT) data.address = '/busOutput' + data.address;
        
        return data;
    },

    oscOutFilter: (data) => {
        // Remove address prefixes from outgoing messages
        if (data.address.includes('/busInput/')) data.address = data.address.slice(9);
        if (data.address.includes('/busOutput/')) data.address = data.address.slice(10);

        return data;
    }
}
```

### Implementation Steps
1. Replace `BUS_INPUT_PORT` and `BUS_OUTPUT_PORT` with the actual port numbers used by the mixer.
2. If the mixer sends a message that identifies which bus it is communicating with, you can use that information to dynamically associate port numbers with the corresponding buses.
3. Ensure that widgets in Open Stage Control have their addresses prefixed accordingly to match the modified addresses in the `oscInFilter`.

This method allows for the differentiation of OSC messages based on their source ports, enabling independent control of multiple buses within a single session.

[Attachment: filename.ext]

# Double Tap Scripting in Open Stage Control

**Problem Description:**
Users may want to implement a feature where double tapping a slider sets its value to a specific number, such as resetting it to 100. 

**Solution:**
Double tap functionality is not managed through scripting in Open Stage Control. Instead, when the `doubleTap` property is true, the widget will automatically set to the value defined in the `default` property. 

For example, to set a slider to 100 on double tap, you should configure the `default` property of the slider to 100. 

No additional scripting is required. 

[Attachment: filename.ext] (attachment reference missing)

# Solved: Toggle Button: Receiving On or Off State from Cubase

## Problem Description
Users want to connect a toggle button in Open Stage Control (OSC) to the cycle function in Cubase, ensuring that the OSC button reflects the on or off state of the cycle button in Cubase.

## Solution
To achieve two-way communication between OSC and Cubase, follow these steps:

1. **MIDI Port Configuration**:
   - Create two virtual MIDI ports using a tool like loopMIDI. Name them `toOSC` and `fromOSC`.

2. **OSC MIDI Server Configuration**:
   - In OSC, set the MIDI server configuration to:
     ```
     osc:toOSC,fromOSC
     ```

3. **Cubase MIDI Remote Setup**:
   - In Cubase, create a new MIDI Remote Controller Surface using the two MIDI ports created above.

4. **Button Configuration in OSC**:
   - Create a button widget in OSC and configure it as follows:
     - Set the OSC button properties:
       - `on` to 127
       - `off` to 0
       - `mode` to `toggle`
   - If using Cubase 12 MIDI-Remote, set Value Mode to `Jump`.

5. **MIDI Remote Mapping in Cubase**:
   - Right-click the Record button in Cubase and select "Pick for MIDI Remote Mapping".
   - Tap the button in OSC to map it, then select it in the Mapping Assistant window and hit "Apply Mapping".

By ensuring that both MIDI ports are set up correctly, OSC will receive the state changes from Cubase, allowing the cycle button in OSC to react accordingly.

This setup has been confirmed to work effectively for users utilizing Cubase 12 with MIDI Remote. 

[Attachment: image]

# Scripting Field: Making Numbers Dependent on Widget ID

**Problem Description:**
Users may want to automate the scripting field of widgets in Open Stage Control based on the widget's ID. The goal is to perform mathematical operations using the numeric part of the widget ID.

**Solution:**
To achieve this, you can use the following JavaScript code in the scripting field of your widget:

```javascript
// Get the widget's ID and extract the numeric part
var num = getProp('this', 'id').replace(/[^0-9]/g, '');

// Convert the extracted string to a number and perform calculations
let myString1 = parseFloat(num) - 1;
let myString2 = parseFloat(num) + 63;

// Conditional statements based on the value
if (value === 127) {
    send('/note', 4, myString1, 127);
} else {
    send('/note', 4, myString2, 127);
}
```

This code snippet retrieves the widget ID, extracts the numeric part, and allows you to perform mathematical operations based on that number. Adjust the conditional logic as needed for your specific use case.

# Clone Props Changes Values of All Clones

When cloning a panel in Open Stage Control, changes to the properties of cloned widgets may unintentionally affect the original panel and other clones. This occurs due to the synchronization mechanism that links widgets with the same ID.

## Problem Description
In a panel with the following variables:
```json
{
  "ssid": 1,
  "color": "red"
}
```
A textarea and a color widget are set to reference these variables:
- Textarea: `@{parent.variables.ssid}`
- Color Widget: `@{parent.variables.color}`

When a clone of the panel is created with the following properties:
```json
{
  "variables": { "color": "blue", "ssid": 2 }
}
```
Only the color of the clone changes to blue, but the text in the original and all clones displays the value `2`. The desired behavior is for only the cloned text to change.

## Solution
To resolve this issue, ensure that the IDs of the widgets in your cloned panel are unique. This prevents the synchronization mechanism from linking cloned widgets with the same ID. For example, you can use the `ssid` in the text widget's ID:
```plaintext
strip_text_@{parent.variables.ssid}
```
By doing this, each clone will maintain its own state without affecting others.

# Knob Sensitivity in Open Stage Control

## Problem Description
Users have reported that knobs in Open Stage Control are overly sensitive. There is a request for a way to adjust the sensitivity of knobs, potentially through a widget that could dynamically set the sensitivity of other widgets. Additionally, it has been noted that the sensitivity property of knobs only functions in vertical mode, raising questions about whether this is intended behavior.

## Solution
Currently, users can manage knob sensitivity by using two fingers or by holding the Ctrl key while dragging. There is no built-in option to adjust sensitivity on the fly through a widget. However, it has been confirmed that the issue with sensitivity only responding in vertical mode is intended behavior, but a fix is planned for a future release to address this limitation. 

For now, users should utilize the existing methods for managing sensitivity until the update is available.

# Button Labeling in Open Stage Control

## Problem Description
Users may want to label a button differently than using the "id" property, particularly to change the button's text based on its toggle state.

## Solution
To change a button's label dynamically based on its value, you have two options:

1. **Using Advanced Syntax**:
   Set the label property with the following expression:
   ```javascript
   #{ @{this} == @{this.on} ? 'on' : 'off' }
   ```
   This will display 'on' when the button is active and 'off' when it is not.

2. **Using Scripting**:
   Define a variable for the label and modify it based on the button's state. In the label property, use:
   ```javascript
   VAR{label, defaultLabel}
   ```
   Then, in the onValue property, implement the following script:
   ```javascript
   if (value === getProp(this, 'on')) {
       setVar(this, 'label', 'ON');
   } else {
       setVar(this, 'label', 'OFF');
   }
   ```

By using either of these methods, you can effectively change the button label according to its toggle state.

# OSC Server Architecture Optimization

**Problem Description**  
Users implementing an OSC server/client in Python may experience sluggish performance, particularly with high-frequency message types like xy pads. A common issue arises from the message parsing frequency, which can be set too low, leading to message queue bottlenecks.

**Solution**  
To enhance performance, adjust the message parsing frequency and optimize the server architecture. The following recommendations are provided:

1. **Increase Parsing Frequency**: Instead of parsing messages every 5 ms, reduce this to every 1 ms. This allows for more efficient handling of incoming messages.

   Example code snippet:
   ```python
   import time
   while True:
       # Main loop
       while message_in_queue():
           parse_message()
       time.sleep(0.001)
   ```

2. **Simplify the Implementation**: Remove unnecessary components such as Python queues if the underlying UDP backend already manages message queuing. Use a direct threaded loop to handle incoming messages instead of relying on a timer.

   Example implementation:
   ```python
   from threading import Thread
   from time import sleep
   from .OSC3 import OSCServer

   class LiveOSCBridge(ControlSurface):
       def __init__(self, c_instance):
           super(LiveOSCBridge, self).__init__(c_instance)
           self.server = OSCServer(('127.0.0.1', 9001))
           self.server.addMsgHandler('default', self._osc_handle_messages)
           self.running = True
           self.thread = Thread(target=self._osc_main_loop)
           self.thread.start()

       def _osc_main_loop(self):
           while self.running:
               self.server.handle_request()
               sleep(0.001)

       def _osc_handle_messages(self, addr, tags, data, source):
           if addr in self.action_map:
               # Dispatch the message to the appropriate callback
               self.action_map[addr](data)
   ```

By implementing these changes, users should experience improved responsiveness and performance in their OSC server applications.

# Knob Color Change on Value Change

**Problem:**
Users want to change the color of knobs in Open Stage Control when they receive input from a MIDI controller. Specifically, they want the knobs to blink or change color to indicate interaction, but the initial attempts using `setVar()` do not produce the desired effect.

**Solution:**
To successfully change the color of a knob when its value changes, follow these steps:

1. In the knob's `colorWidget` property, set the following:
   ```
   VAR{colorWidget, auto}
   ```
   This creates a custom variable named `colorWidget` with a default value of "auto".

2. In the `onValue` field, use the `setVar()` function to change the color:
   ```javascript
   setVar("this", "colorWidget", "#f28018")
   ```

By implementing these changes, the knob will update its color based on interactions from the MIDI controller.

# How to Make One Container Follow the Scrolling of Another Container

**Problem Description:**
Users may want to synchronize the scrolling of two containers in Open Stage Control, where one container's scrolling should follow the other. This is particularly useful in scenarios where a panel contains multiple lanes with headers and data areas, similar to an editor window in a Digital Audio Workstation (DAW). The challenge is to achieve this synchronization without displaying multiple scrollbars, which can be visually confusing.

**Solution:**
Currently, there is no built-in feature to synchronize scrolling between two containers. However, a workaround can be implemented using scripting to transmit the scrolling status through the value of a panel widget.

1. **Use Panel Widget Value:**
   - Utilize the value property of the panel widget to transmit the scrolling status. This allows you to script the behavior such that when one container is scrolled, the other follows.

2. **Hide Scrollbar in Slave Panel:**
   - To avoid confusion with multiple scrollbars, you can hide the scrollbar of the slave panel using CSS. Add the following CSS to the container:
     ```css
     inner {
       overflow: hidden;
     }
     ```
   - Alternatively, you can use:
     ```css
     :host {
       --scrollbar-size: 0;
     }
     ```
   - Note that the second option allows scrolling with the mouse wheel but may not work in Firefox.

By implementing these steps, you can create a synchronized scrolling effect between two containers while maintaining a clean user interface without unnecessary scrollbars.

# Syntax for Scripts and Properties in Open Stage Control

## Problem Description
Questions arose regarding the use of '@{}' statements in properties and the correct formatting for XY scripts in Open Stage Control.

## Solution
1. **Use of '@{}' Statements in Properties**:
   - '@{}' statements are acceptable in properties, but they should not be used in scripting properties.

2. **Formatting an XY Script**:
   - For setting XY values, the correct format is as follows:
     ```javascript
     var id = getProp('this', 'id')
     set(id + 'X', value[0])
     set(id + 'Y', value[1])
     ```

# Change Tab Size (Height) and Fill Color in Open Stage Control

## Problem Description
Users may want to adjust the height and font size of tabs in Open Stage Control, as well as change the fill color of the active tab. The default settings may not meet their preferences, and attempts to modify these properties using the colorfill option may only affect the underline of the tab.

## Solution
To change the tab size and fill color, you can use custom CSS applied to the parent widget that contains the tabs. Here’s how to do it:

1. Locate the parent widget of the tab in the project tree.
2. Apply the following CSS in the style field of the parent widget:

   ```css
   inner > .navigation {
       height: 50rem; /* Adjust height as needed */
   }
   inner > .navigation .on {
       background: black; /* Change to desired active tab color */
   }
   ```

Make sure to edit the parent widget, not the tab itself, to see the changes take effect.

# Force Open on a Second Monitor

**Problem Description:**
Users may experience issues with Open Stage Control (OSC) opening on the primary monitor instead of a secondary monitor, even after dragging the application to the desired screen. This behavior can be inconsistent, and while some applications remember their last position, OSC may not do so by default.

**Solution:**
In the latest release (v1.0.1), OSC has been updated to remember the last used screen when the OSC window is closed. This means that the application should now open on the correct monitor where it was last used. However, the GUI may still open at its default size and location. 

To ensure the GUI window remembers its last closed position, users are encouraged to update to the latest version of OSC. This improvement should enhance the usability of OSC on multiple monitors.

For additional functionality, users have noted that using OSC in a Chrome window saved as an app retains the desired position and size, which may be a temporary workaround until further enhancements are made to the standalone application.

[Attachment: filename.ext]

# Embedding JavaScript in CSS Property for SVG Backgrounds

## Problem Description
The user seeks to dynamically change the background color of an SVG embedded in CSS using JavaScript. The initial setup involves using inline CSS to define an SVG as a background image for LED widgets, with a specific color determined by a JavaScript block that references a variable containing color values.

## Solution
To achieve dynamic color changes in the SVG background, you can embed a JavaScript block in the CSS property similarly to how it is done for the SVG background image. However, it is recommended to avoid embedding large SVG data directly in the CSS, as this can increase the session size unnecessarily.

### Recommended Approach:
1. **Use External SVG Files**: Save the SVG file separately next to your session file and load it by its filename. This keeps your session lightweight.
   
2. **Dynamic Colorization**: You can still use JavaScript to change the color of the SVG. For example, you can define the color in a JavaScript block that references a variable containing color values.

3. **SVG Widgets**: Consider using SVG widgets directly for better management and performance.

### Example Configuration:
```json
{
  "type": "led",
  "colorWidget": "JS{{\nvar velocityReceived = OSC{/note};\nvar colors = @{colorsArrayA}\nreturn colors[velocityReceived] || \"#E0E0E0\";\n}}"
}
```

Variable definition:
```json
{
  "type": "variable",
  "id": "colorsArrayA",
  "value": {
    "1": "#990000",
    "2": "#dd0000",
    "3": "#ff0000"
  }
}
```

### Additional Resource:
- An example SVG widget configuration is available in the attached file: [Attachment: 9JgInbfgqvrZRZAHeVRVjjZyvOC.json].

# Large Text in Input Getting Cutoff

When using Open Stage Control, users may encounter an issue where large text in input fields gets cut off.

## Solution

To resolve this issue, add the following CSS property to your configuration:

```css
canvas {
  height: 100%;
}
```

This adjustment should help ensure that the input fields display the full text. Additionally, a fix for the vertical offset between focused and unfocused states is expected in the next release.

[Attachment: Screenshot_2023-07-03_15-42-53]

# Sending MIDI Data on All Channels

**Problem:**
Users may want to send MIDI data on all MIDI channels, but there is no built-in option for "omni out" in Open Stage Control. 

**Solution:**
While Open Stage Control does not support omni out natively, you can achieve this functionality by using a custom module. Below is a minimal custom module that converts channel 0 into a broadcast channel, sending messages to channels 1 through 16.

```javascript
module.exports = {
    oscOutFilter: function(data) {
        var {address, args, host, port} = data;

        if (host == 'midi' && args[0].value == 0) {
            // If message is MIDI and channel is 0
            for (var i = 0; i <= 16; i++) {
                args[0].value = i; // Change channel
                send(host, port, address, ...args);
            }
            return;
        }
        return data;
    }
}
```

This custom module allows you to broadcast MIDI messages across all channels, facilitating easier track switching in your DAW.

# Aligning Text at the Bottom of a Button

To align the label text of a button to the bottom, you can use the following CSS:

```css
label {
  align-items: flex-end;
}
```

If you want to align the button label to the left, use this CSS instead:

```css
label {
  justify-content: start;
}
```

These solutions should help you achieve the desired text alignment for button labels.

# How to Set MIDI Options When Running Open Stage Control with Node

**Problem Description:**
When attempting to set MIDI ports using the command `node open-stage-control --midi "mp1:virtual"`, an error occurs indicating that the Python `rtmidi` library is not found: 
```
(ERROR, MIDI) error while loading python-rtmidi library (running with python 3.13.3):
No module named 'rtmidi'
```

**Solution:**
To resolve this issue, it is recommended to use a Python virtual environment and install the necessary `python-rtmidi` library. Follow these steps:

1. Use Python 3 instead of Python 2:
   ```bash
   python3 get-pip.py
   ```

2. Create a virtual environment:
   ```bash
   python3 -m venv venv
   ```

3. Activate the virtual environment:
   ```bash
   source venv/bin/activate
   ```

4. Install the `python-rtmidi` library:
   ```bash
   python3 -m pip install python-rtmidi --upgrade
   ```

By following these steps, you should be able to configure MIDI options successfully when running Open Stage Control with Node. 

For additional guidance, refer to the MIDI configuration documentation for Open Stage Control. 

[Attachment: filename.ext] (attachment reference missing)

# Sending MIDI Program Changes to Cubase

When using Open Stage Control (OSC) with Cubase, a common issue arises due to the difference in how program change values are indexed. Cubase starts program change values at 1, while OSC starts at 0. This discrepancy means that OSC sends out PC0, but Cubase receives it as PC1.

## Solution

To address this issue, you can implement a workaround by filtering outgoing MIDI messages using a custom module. Use the following code snippet to adjust the program change value:

```javascript
if (address === '/program') {
    args[0].value -= 1;
}
```

Additionally, a new feature called `midi pc_offset` was introduced in version 0.46.0 of Open Stage Control. This option allows you to set an offset for program change messages, aligning them with Cubase's implementation. For more details, refer to the [Open Stage Control MIDI setup documentation](https://openstagecontrol.ammd.net/docs/midi/#setup).

Note: If you experience issues with MIDI information not appearing in the console or the OSC value showing the original program change value instead of the offset, these are expected behaviors. The offset is applied only during the conversion between OSC and MIDI. 

[Attachment: filename.ext]

# Using Open Stage Control with Bitwig

## Problem Description
Users are exploring how to integrate Open Stage Control with Bitwig, particularly in relation to creating custom controllers and managing VST parameters. There are inquiries about sharing JSON files, mapping VST parameters, and the technical aspects of hardware integration.

## Solution
1. **Creating Custom Controllers**: Users can utilize hardware like Teensy LC microcontrollers to read encoders and design PCBs to match screen sizes for custom controllers in Bitwig.

2. **JSON File Sharing**: It is encouraged to share JSON files for others to use as templates. For example, a user shared their JSON file named "OpenStageControl4Bitwig - Copie de travail.json" [Attachment: A7Br6bOt3w4vXUDiqGTMrCQfUeV.json].

3. **Mapping VST Parameters**: To retrieve the names of VST parameters in your JSON, you must map them within each device in Bitwig. This mapping is already done for Bitwig effects but needs to be done manually for other VSTs.

4. **Resources for Configuration**: For configuring control panels in Bitwig, refer to the official user guide: [Userguide | Bitwig](https://www.bitwig.com/en/userguide.html).

5. **Limitations**: Note that if using a second PC to drive the touchscreen, certain functionalities may not be available.

For further assistance, feel free to ask specific questions regarding your setup or issues encountered.

# Creating a Tonnetz Keyboard with Hexagonal Buttons

## Problem Description
Users want to create a Tonnetz keyboard using hexagonal buttons in Open Stage Control. The challenge is that hexagonal button shapes are not natively supported, and users are looking for ways to implement this functionality, including using CSS and images.

## Solution
To create hexagonal buttons, you can utilize the CSS `clip-path` property. Here’s how to achieve this:

1. **Hexagonal Button Shape**: Use the following CSS to create a hexagonal shape for your buttons:
   ```css
   clip-path: polygon(50% 2%, 98% 26%, 98% 74%, 50% 98%, 2% 74%, 2% 26%);
   ```

2. **Container CSS**: Instead of applying the `clip-path` to each button individually, you can apply it to a container that holds all buttons:
   ```css
   .button-container {
       clip-path: polygon(50% 2%, 98% 26%, 98% 74%, 50% 98%, 2% 74%, 2% 26%);
   }
   ```

3. **Removing Borders**: To remove the border around the buttons, set the `lineWidth` property to `0` in your button settings.

4. **Grid Management**: You can toggle the grid visibility using `Ctrl+G` (or `Cmd+G` on Mac) to help with alignment.

5. **Additional Resources**: For more shapes and examples of using `clip-path`, you can refer to [CSS Tricks](https://css-tricks.com/almanac/properties/c/clip-path/) and [Clippy](https://bennettfeely.com/clippy/).

6. **JSON Configuration**: You can find a sample configuration for a full range hexagonal keyboard in the attached file:
   [Attachment: tonnetz keyboard.json].

By following these steps, you can effectively create a Tonnetz keyboard with hexagonal buttons in Open Stage Control.

[Attachment: vE5rWOxB6yrQRIHzJ8jjFxtEoHX.json]

# Unhandled Promise Rejection in Open Stage Control

## Problem Description
Users have encountered an "Unhandled Promise Rejection" error while trying to display expression maps in Open Stage Control when using the Mackie protocol with Cubase. The issue arises when specifying the file path to the `.expressionmap` file in the custom module.

## Solution
To resolve the "Unhandled Promise Rejection" error, ensure that you use `.catch()` in the process that references any function utilizing a Promise object. This will help handle any potential errors that may occur during the execution of the Promise.

Example:
```javascript
somePromiseFunction()
  .then(result => {
    // Handle successful result
  })
  .catch(error => {
    console.error("Error occurred:", error);
  });
```

By implementing proper error handling, you can avoid unhandled promise rejections and ensure smoother operation within your OSC setup.

[Attachment: filename.ext]

# Sending OSC Message When Tab is Selected

**Problem:**  
OSC messages cannot be sent when a tab becomes active in Open Stage Control.

**Solution:**  
To send OSC messages when a tab is selected, configure the parent widget of the tab. The root widget should be set up to send messages based on its `value`, which represents the index of the selected tab, starting from `0`.

# Set Multixy Points Amount from External Application

**Problem Description:**
When sending position data for a single point to Open Stage Control via OSC, there is a need to dynamically adjust the number of points in the multixy control. This adjustment is necessary to ensure that OSC updates correctly as the number of points increases.

**Solution:**
To set the number of points in a multixy control from an external application, utilize the methods available for the multixy's `points` property. This allows you to define and update the number of points before sending the position data.

For more information on how to implement this, refer to the documentation on the multixy's points property. 

[Attachment: filename.ext]

# Passing JSON Object to Module

**Problem Description:**
A user wants to pass a JSON object stored in globals to a custom module in Open Stage Control and trigger Save or Reload actions when starting a new session. The user has defined a JSON object in the `globals.scenes` variable but is unsure how to connect it with the module to utilize SaveJSON functionality.

**Solution:**
To facilitate communication between the custom module and the clients using OSC messages, follow these steps:

1. **Define the JSON Object:**
   Ensure your JSON object is properly defined in the `globals`:
   ```javascript
   globals.scenes = [];
   globals.InitScenes = function() {
       for (let i = 1; i <= 8; i++) {
           var scene = { "id": "s" + i, "value": "" };
           globals.scenes.push(scene);
       }
   };
   ```

2. **Use `oscOutFilter` in the Custom Module:**
   Implement the `oscOutFilter` function in your custom module to catch messages sent by clients. This is where you can handle incoming OSC messages.

3. **Send Messages to Clients:**
   Use the `receive()` function within your custom module to send messages back to clients. This function generates a message as if it was just received, allowing you to trigger actions based on the JSON object.

4. **Refer to Examples:**
   Review the example provided in the GitHub repository for further insights into how to structure your module and handle OSC messages:
   [GitHub - jean-emmanuel/osc-state-example](https://github.com/jean-emmanuel/osc-state-example)

By following these steps, you can effectively manage the JSON object and integrate it with your custom module in Open Stage Control.

# Using the Scripts Widget in Open Stage Control

## Problem Description
Users want to know how to use the script widget to ensure that when one toggle button is activated, another toggle button is deactivated, preventing both from being on simultaneously.

## Solution
To achieve this functionality, you can use the following methods:

### Method 1: Direct Value Property Setting
You can set the value properties of the toggle buttons directly without needing a script. Use the following JavaScript expressions for each button:

- For **button_2**:
  ```javascript
  JS{{
  return @{button_1} == 1 ? 0 : 1
  }}
  ```

- For **button_1**:
  ```javascript
  JS{{
  return @{button_2} == 1 ? 0 : 1
  }}
  ```

### Method 2: Using a Script
In version 0.46.2 and later, you can create a script widget to manage the toggle states. Follow these steps:

1. Create a script widget.
2. Set its `value` property to link it to the buttons’ values:
   ```
   @{button_1} @{button_2}
   ```
3. Set its `script` property with the following code:
   ```javascript
   JS{{
   var widget = id == "toggle_1" ? "toggle_2" : "toggle_1",
       newValue = get(id) == 1 ? 0 : 1;

   set(widget, newValue);
   }}
   ```

These methods will ensure that only one toggle button can be active at a time. For further examples and discussions on scripts, you can refer to the following resources:
- [Open Stage Control Discussions on Scripts](https://openstagecontrol.discourse.group/search?q=scripts%20category%3A7)
- [GitHub Issues Related to Scripts](https://github.com/jean-emmanuel/open-stage-control/issues?q=is%3Aissue+script+is%3Aclosed)

# Responsive to Screen Size

## Problem Description
Users may want to display the dimensions of the screen within a text widget in Open Stage Control. Additionally, there is a need to center and squarify a widget based on screen size.

## Solution
To display the screen dimensions in a text widget, use the following script:

```javascript
let width = globals.screen.width;
let height = globals.screen.height;
set('text_id', `width: ${width}px, height: ${height}px`);
```

For centering and squarifying a widget, apply the following CSS properties:

```css
width: 50vw;
height: 50vw;
top: calc(50% - 25vw);
left: calc(50% - 25vw);
```

Alternatively, you can use a vertical and horizontal layout as shown in the attached example:

[Attachment: vwtc62jKfR7cZIWbMxkUuhqdyp3.json]

Note that the browser's global `screen` variable is not directly accessible due to the isolated context in which user scripts run. Instead, Open Stage Control provides screen information through the `globals` variable.

For further reference, see the attached example:

[Attachment: is06ZYBjXaz2UW8qGfyhEfuWVth.json]

# Big Matrix Child CSS Syntax

**Problem Description:**
A user is attempting to simplify a complex JavaScript conditional statement that sets CSS properties based on the value of a variable `$`. They are also trying to apply specific styles to certain child elements in a matrix but are encountering issues with the CSS selectors affecting all widgets instead of the intended ones.

**Solution:**
1. **Simplifying CSS Conditions:**
   Instead of using a long conditional statement, you can utilize an array to check for specific values. For example:

   ```javascript
   var INDEX = [1, 116, 123, 149, 152, 167, 231, 249, 270, 284];
   props.css = INDEX.includes($) ? 'font-size:160%;background:grey;' : 'background:blue';
   ```

2. **Using CSS Selectors:**
   To target specific child elements, use the `.widget` class with the `:nth-child` pseudo-selector. For example:

   ```css
   .widget:first-child,
   .widget:nth-child(16),
   .widget:nth-child(23),
   .widget:nth-child(49),
   .widget:nth-child(72) {
       /* Apply desired styles here */
       color: red;
       font-size: 180%;
       margin-left: 12px;
   }
   ```

3. **Inspecting Elements:**
   To see the classes assigned to elements, use the browser's developer tools (F12). This will allow you to inspect the elements and verify the classes applied to them.

By following these guidelines, you can effectively manage CSS for specific elements within your matrix while keeping your JavaScript concise and maintainable.

# Displaying Multiple Variables in a Text Widget

**Problem Description**  
Users may want to display two different variables in a single text widget, one above the other.

**Solution**  
To display two variables in the same text widget, you can use the following method:

1. In the properties of the text widget, enter the variables on separate lines by using `Shift + Enter`:
   ```
   @{fader_1}
   @{fader_2}
   ```

For additional customization of the text widget, such as removing the color and border shading, you can apply the following CSS rules:

```css
:host {
  --glass-opacity: 0;
  border: 0;
  padding: 0;
  background: transparent;
}
.text {
  background: transparent;
  border: 0; /* needed if inside a strip/panel */
  box-shadow: none;
}
```

If you require more control over the layout, consider using the HTML widget instead of the text widget.

# Displaying Variable Values in Text Widgets on Initialization

When initializing a session, you may encounter an issue where a text widget label does not display the expected value if it relies on a variable (e.g., `VAR{TRLbl1}`). Instead, it may show as 'undefined' until a script is executed to populate the variable.

## Problem
The default value for the text widget does not take effect when the value field is set to a variable. As a result, the label remains undefined on startup.

## Solution
To ensure that a variable displays a value upon initialization, use the `VAR{}` syntax with a second argument. This allows you to specify a default value that will be used until the variable is updated by a script.

For example:
```javascript
VAR{TRLbl1, 'default_value'}
```
This will display 'default_value' in the text widget until the variable is updated.

For further reference, see the section on advanced syntaxes in the Open Stage Control documentation.

[Attachment: 25gtVsRyMPRxe8AGqLu6Gc5KRla.json]

# Dealing with Array & Multiple Entry - Store/Recall Process

## Problem Description
The user is attempting to implement a store and recall process for values from a multixy widget in Open Stage Control. The goal is to store multixy values in separate variable widgets based on the state of a matrix widget used in button mode. The user is facing issues with the JavaScript syntax and logic for both storing and recalling values from an array of variable names.

## Solution
### Storing Values
To store values from the multixy widget based on the state of the matrix widget, use the following corrected code:

```javascript
const NameStore = ["Env_1", "Env_2", "Env_3", "Env_4", "Env_5", "Env_6"]; // Variable names

for (var i = 0; i < NameStore.length; i++) {
  if (get('Mx_EnvSel')[i] === 1) { 
    set(NameStore[i], get('this'));
  }
}
```

### Recalling Values
For recalling values from the stored variables, the following code should be used:

```javascript
set("multixy_ADSR", get(EnvStore[get('this') - 1]));
```

### Additional Notes
- Ensure that the variable `this` is correctly referenced, as it refers to the calling widget's ID.
- When using the `touch` event, the code should be structured as follows to ensure values update only when the multixy is touched:

```javascript
if (touch !== undefined) {
  for (var i = 0; i < NameStore.length; i++) {
    if (get('Mx_EnvSel')[i] == 1) {
      send('/ADSR', i + 1, get('this'));
      set(NameStore[i], get('this'));
    }
  }
}
```

### Matrix Widget Configuration
To configure the matrix widget to behave like a switch with multiple entries:
1. Change the widget type from button to switch.
2. Adjust the properties to create a layout that allows for multiple switch buttons.

If the layout is not displaying as expected (e.g., showing two buttons inside a button), ensure that the matrix properties are correctly set to allow for six individual buttons.

For further assistance, refer to the attached configuration file: [Attachment: pvaK2HTa8aUzrK0GoD0aX2Syijl.json].

# Clearing a Canvas with a Button in Open Stage Control

## Problem Description
You want to clear a canvas in Open Stage Control using a button. The initial approach resulted in an error stating that `ctx.clear` is not a function. 

## Solution
To clear the canvas, use the `ctx.clearRect()` method instead of `ctx.clear()`. Here’s how to implement this:

1. **Button Configuration**: Set the button's `onValue` to send a clear command to the canvas. Use the following command:
   ```javascript
   set('canvas_id', ['clear', 0, 0])
   ```
   Ensure that `canvas_id` corresponds to your canvas widget's ID.

2. **Canvas Drawing Logic**: Update your `onDraw` function to handle the clear command. Here’s an example of how to structure your `onDraw`:
   ```javascript
   ctx.clearRect(0, 0, width, height); // Clear the canvas
   ctx.save();
   ctx.strokeStyle = 'chartreuse';
   ctx.lineWidth = 2;

   for (var i = 0; i < locals.queue.length; i++) {
       var cmd = locals.queue[i][0],
           x = locals.queue[i][1] * width,
           y = locals.queue[i][2] * height;

       if (cmd === 'moveto') {
           ctx.beginPath();
           ctx.moveTo(x, y);
       } else if (cmd === 'clear') {
           ctx.clearRect(0, 0, width, height); // Clear the canvas here
       } else {
           ctx.lineTo(x, y);
           ctx.stroke();
       }
   }

   locals.queue = []; // Clear the queue after processing
   ctx.restore();
   ```

3. **Queue Management**: Ensure that your queue is populated correctly. You should push incoming values into `locals.queue` like this:
   ```javascript
   locals.queue.push(value);
   ```

4. **Value Length**: Set the expected value length to 3 to accommodate the command and coordinates.

By following these steps, you can successfully clear the canvas using a button in Open Stage Control.

[Attachment: draw2.json]  
[Attachment: bUifaPwYOIBkuiV2o05gKwFOI0N.json]

[Attachment: uxyQdyoM3ql5qgnsPRJ4BPJiYWn.json]

# Convert Sysex to ASCII

**Problem Description:**
When converting Sysex to ASCII, the output includes unwanted Unicode characters (e.g., `\u002`) that generate spaces and sometimes truncate the text inconsistently. The conversion code used is as follows:

```javascript
var input  = args[0].value.split(' ').splice(9, 27); // HEX => make array (substrings), cut out what we need and back to one string
input.pop();
input = input.join(" ");

// HEX to ASCII
var trackname = '';
for (var n = 0; n < input.length; n += 3) {
    trackname += String.fromCharCode(parseInt(input.substr(n, 2), 16));
}
```

**Solution:**
To resolve the issue, remove any hyphens in the track name and filter out the '02' values from the Sysex data before conversion. This will help prevent the generation of unwanted spaces and ensure the track name is correctly formatted.

# Mapping Fader Values to dB

## Problem Description
Users may want to display specific values on a fader, such as showing 0 dB at a value of 108. This requires mapping the fader's output to a desired range, such as between 0% to 50% and 50% to 75%.

## Solution
To achieve the desired mapping of fader values to dB, you can use JavaScript in the value property of the fader. Here are two approaches depending on the mapping type:

1. **Linear Mapping**:
   If the mapping is linear, you can use the following code:
   ```javascript
   JS{{
   return 20 + @{HPF} * 380;
   }}
   ```

2. **Logarithmic Mapping**:
   If the mapping is logarithmic, you will need to incorporate mathematical functions to convert the values appropriately. You can use the `logScale` function for this purpose.

Make sure to adjust the code based on how the X32 maps values on its side. 

For further details, refer to the mapping float value to frequency (Hz) or dB topic. 

[Attachment: filename.ext] (attachment reference missing)

# Encoder and XY Pad Configuration in Open Stage Control

## Problem Description
Users may encounter issues when trying to increment values using an encoder and extract float values from an XY pad in Open Stage Control. Specifically, the encoder may not increment values as expected, and there may be difficulties in sending separate float values from an XY pad.

## Solution

### Encoder Value Increment
To increment values using an encoder without involving a fader, you can use the following script in the encoder's script property:

```javascript
var min = 0,
    max = 30,
    index = locals.index || 0; // load index

// increment index
index = Math.min(max, Math.max(min, index + value));

// save index
locals.index = index;

// send index
send("127.0.0.1:4444", "/index", index);
```

This script ensures that the index does not exceed the defined minimum and maximum values.

### Sending Separate Float Values from XY Pad
To extract and send the float values from an XY pad, use the following script in the XY pad's script property:

```javascript
send("127.0.0.1:4444", "/x", value[0]);
send("127.0.0.1:4444", "/y", value[1]);
```

This allows you to send the X and Y values separately.

### Constant Increment on Button Hold
To continuously increment a slider value while a button is held down, implement the following script:

```javascript
var increment = 1,
    timeBetweenIncrements = 100; // ms

if (value === 1) {
    setInterval(() => {
        set("fader_1", get("fader_1") + increment);
    }, timeBetweenIncrements);
} else {
    clearInterval();
}
```

### Note on Script Syntax
Avoid using the `@{}` syntax in scripts. Instead, use `get()` or `getProp()`. The reason for this is that the code in the script property is compiled twice, which can affect performance. Using `get()` or `getProp()` ensures that the script runs efficiently during value updates.

For more information on scripting in Open Stage Control, refer to the documentation on [Scripting - Open Stage Control]. 

[Attachment: filename.ext]

# Understanding Submodules in Open Stage Control

## Problem Description
There is confusion regarding the proper triggering of functions between a main module and its submodules in Open Stage Control. The user has implemented a structure where submodules are loaded into a main module, but encounters issues when trying to execute specific functions based on OSC messages. Particularly, the user reports that while some OSC messages trigger the expected functions, others do not, leading to uncertainty about the flow of execution and function calls.

## Solution
To resolve the issues with function triggering between the main module and submodules, consider the following points:

1. **Return Statements**: Ensure that return statements do not prematurely exit the function. In the provided code, the logic inside the `else if(address === '/removePin')` block contains return statements that prevent further execution. Review and adjust the flow to allow for all necessary code to run.

2. **Message Handling**: Understand that messages sent using the `send()` function will not be processed again by the custom module. This means that if you send a message from within a submodule, it will not trigger further processing in that submodule.

3. **Function Calls**: If you need to call a function in the main module from a submodule, ensure that you are correctly referencing the function. Direct calls may not work as expected; consider using OSC messages to communicate between modules.

4. **Debugging**: Use console logs effectively to trace the flow of execution. This can help identify where the logic may be failing or where messages are not being sent as expected.

By addressing these points, you should be able to achieve the desired interaction between your main module and submodules, allowing for effective handling of different OSC messages.

[Attachment: filename.ext] (attachment reference missing)

# Store the Highest Value of Incoming OSC Value (per Channel)

## Problem Description
Users want to display the peak level of a meter in Open Stage Control, which receives OSC values from software like Reaper. The goal is to show the peak value in decibels (dB) in the label field of the parent strip, with incoming values ranging from 0 to 1.

## Solution
### Method 1: Using a Script Widget
1. Set the default value of the strip to 0.
2. Use the following JavaScript code in a script widget to update the label when the incoming value exceeds the previous peak:

   ```javascript
   JS{{
   if (@{this} > 0.9) {
     return "color:red";
   }
   }}
   ```

3. Adapt the formula for converting the value to dB to match the requirements of Reaper.

### Method 2: Custom Module for Filtering OSC Messages
A more effective approach is to create a custom module to filter incoming meter messages and calculate the peak values. Use the following code:

```javascript
// This will hold peak values
var peaks = {}

// Conversion utility
function dB(v) {
    return 20 * Math.log(v) / Math.log(10); // Corrected formula for dB conversion
}

module.exports = {
    oscInFilter: function(data) {
        var {address, args} = data;

        if (address == '/meter') {
            var strip = args[0].value,
                val = args[1].value;

            // If received value > stored peak value
            if (val > (peaks[strip] || 0)) {
                // Store new peak value
                peaks[strip] = val;
                // Send peak value to the GUI
                receive('/peak', strip, dB(val));
            }
        }

        return {address, args};
    }
}
```

### Additional Notes
- You can implement a timer to reset peak values periodically or reset them based on specific events (e.g., PLAY or STOP).
- If the OSC address format is `/track/[number]/vu`, use regex to extract the track number:

   ```javascript
   var trackVuMatch = address.match(/\/track\/([0-9]+)\/vu/);
   if (trackVuMatch) {
       var strip = trackVuMatch[1];
   }
   ```

- Ensure that the dB conversion function returns floating-point numbers for accuracy.

### Attachments
- [Attachment: 30U6zuV9FyKGBUK0m2XjvzP4ntn.json]
- [Attachment: wzn6OX7Q1G3bzwtm0pybl2ULm2N.json]

# Background Size of Button

When attempting to resize a background image on a button in Open Stage Control, users may encounter issues where the image does not display as expected or the properties do not apply correctly.

## Problem Description
Using the shorthand `background` property can override previous declarations, leading to unexpected results. For example, the following code may not work as intended:

```css
background: url(mountain.jpg);
background-repeat: no-repeat;
background-size: 300px 100px;
```

In this case, the image may appear, but the size and repeat properties will not take effect.

## Solution
To properly set the background image and its properties, use the `background-image` property instead of the shorthand `background`. Here’s the correct approach:

```css
background-image: url(mountain.jpg);
background-repeat: no-repeat;
background-size: 300px 100px;
```

Additionally, note that not all background properties can be set using shorthand. The following properties should be defined separately:

- `background-color`
- `background-image`
- `background-repeat`
- `background-attachment`
- `background-position`
- `background-size`

By following this method, you can ensure that all properties are applied correctly without being overridden.

# Retrieve Widget's Computed Rect Inside Grid

When using Open Stage Control, you may encounter an issue where the dimensions of a widget within a grid are based on the parent container rather than the widget itself. This can lead to discrepancies when trying to calculate sizes for labels or icons.

## Problem Description
When attempting to retrieve the height and width of a widget inside a grid using `@{this.height}` and `@{this.width}`, the values reflect the grid's dimensions rather than the actual size of the widget. This can result in unexpected behavior, particularly when trying to dynamically adjust font sizes based on these dimensions.

## Solution
To address this issue, consider the following approaches:

1. **Specify Grid Dimensions**: If possible, define specific `template-rows` and `template-columns` for the grid. This allows for more control over the size of child widgets.

2. **Use CSS for Responsive Sizing**: Instead of relying solely on JavaScript functions, leverage CSS properties such as:
   - `clamp()`: This function allows you to set minimum, ideal, and maximum sizes for attributes, making it easier to manage responsive designs.
   - Viewport units (`vh` and `vw`): These units can be used to size elements relative to the viewport dimensions.
   - `calc()`: This function enables the combination of different units for more complex sizing.

By utilizing CSS for responsive sizing, you can reduce the amount of CSS required for individual buttons while maintaining flexibility in design.

For further information on CSS functions, refer to the following resources:
- [clamp() - MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/clamp)
- [CSS values and units - MDN](https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units)

# Creating Custom GUI Components in Open Stage Control

**Problem Description:**
Users may want to create custom GUI components, such as a window displaying a signal routing graph with interactive nodes and edges that respond to OSC messages. However, there is uncertainty regarding the feasibility of developing such components within Open Stage Control.

**Solution:**
Currently, it is not possible to create custom widgets without modifying the source code and building the application. The closest available option is the patchbay widget found under containers, although it may not meet all requirements for complex interactions.

# Using Google Fonts in Open Stage Control

## Problem Description
Users may want to know how to import a Google Font and use it as a font-family in Open Stage Control.

## Solution
You can import a Google Font by using the `@import` rule in a theme CSS file, which is loaded with the server's theme option. Here’s how to do it:

1. Go to the Google Fonts website and select the desired font.
2. Copy the `@import` URL provided by Google Fonts.
3. Open your theme CSS file.
4. Add the `@import` statement at the top of your CSS file.
5. Set the font-family in your CSS rules as needed.

Example:
```css
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

body {
    font-family: 'Roboto', sans-serif;
}
```

This will apply the Google Font to your Open Stage Control interface.

# Setting Unique IDs for Matrix Children Widgets in Open Stage Control

## Problem Description
When using a matrix widget to manage a variable number of track widgets through fragments, there is confusion on how to set unique IDs for the children widgets. The issue arises when trying to add variables to the matrix's properties, which do not propagate down to the fragment container and subsequently to the track widgets.

## Solution
To correctly set unique IDs for the children widgets in a matrix, you need to override the `props` property of the fragments. Use the following structure:

```json
{
  "file": "track.json",
  "props": {
    "variables": {
      "n": #{$}
    }
  }
}
```

This configuration allows the variable `n` to be applied to each fragment widget within the matrix, ensuring that each child widget receives a unique ID.

### Widget Structure
The widget hierarchy is as follows:
- root
  - matrix
    - fragment (track.json)
      - panel
        - all track widgets

### Checking Widget Structure
To verify the widget structure, you can inspect the HTML using developer tools. Each widget instance will have a class of `widget` and a `data-widget` attribute that links it to the corresponding widget.

### Example Configuration
An example of the modified matrix properties would look like this:

```json
{
  "props": {
    "file": "track_new.json",
    "props": {
      "variables": {
        "n": #{$}
      }
    }
  }
}
```

This adjustment ensures that the correct file is referenced and that the variable `n` is embedded in the properties for proper functionality.

[Attachment: 37KO7laY6L2a6sc32mSzlMQqoBh.json]  
[Attachment: irFaTtuTPc7Dyj6S6R2er1NHMMr.json]  
[Attachment: zbvNwugKyDsNzhOm6vwXEYnBtuZ.json]

# Creating a JavaScript Object from OSC Message

**Problem Description:**
When attempting to create a JavaScript object from an OSC message, the object created from the message (testObj1) does not function as expected, while a manually declared object (testObj2) does. The OSC message is retrieved as a string, which leads to issues when trying to parse it into an object.

**Solution:**
To resolve this issue, ensure that the OSC message is formatted correctly as a JSON string before parsing it. Here is the working solution:

1. Retrieve the OSC message and parse it correctly:
   ```javascript
   var oscMsg = get('switchesObjectArray'); // Retrieve the OSC message
   var oscObj = JSON.parse(oscMsg); // Parse the string into an object
   ```

2. Access the required properties:
   ```javascript
   var type = oscObj[value][0]; // Get the type of MIDI message
   var selector = oscObj[value][1]; // Get the selector value
   var valueStart = oscObj[value][2]; // Get the starting value
   ```

3. Send the appropriate MIDI messages based on the type:
   ```javascript
   var g_channel = get('g_midiCh'); // Get the global MIDI channel
   var g_octaveOffset = get('g_octaveOffset'); // Get the octave offset

   if (type === 'Note On') {
       send('midi:OSC-Midi', '/note', g_channel, selector, valueStart);
       send('midi:OSC-Midi', '/note', g_channel, selector, 0);
   } else if (type === 'Controller') {
       send('midi:OSC-Midi', '/control', g_channel, selector, valueStart);
   } else if (type === 'Program') {
       send('midi:OSC-Midi', '/program', g_channel, (valueStart - 1)); // Adjust for Logic's 0-based index
   } else if (type === 'Pitch Bend') {
       send('midi:OSC-Midi', '/pitch', g_channel, valueStart);
   } else if (type === 'Aftertouch') {
       send('midi:OSC-Midi', '/channel_pressure', g_channel, valueStart);
   } else if (type === 'Poly Aftertouch') {
       send('midi:OSC-Midi', '/key_pressure', g_channel, selector, valueStart);
   }
   ```

This approach ensures that the OSC message is properly parsed into an object, allowing for the correct retrieval of properties and sending of MIDI messages. 

[Attachment: Screenshot 2024-01-31 at 12.42.42 AM]
[Attachment: Screenshot 2024-01-31 at 12.45.14 AM]

# Defining a Global Variable in Open Stage Control

## Problem Description
To declare a variable array, such as `colors`, globally across an Open Stage Control project file, users often face challenges due to the static nature of JSON. The goal is to avoid declaring the variable for each widget that uses it, especially when dealing with numerous widgets.

## Solution
A reliable method to achieve this is by creating a "variable" widget to hold the array. You can then retrieve this variable anywhere in your project using the inheritance syntax:

```json
@{variablewidget_id}
```

### Example Implementation
1. Create a variable widget with the following structure:
   ```json
   {
     "type": "variable",
     "id": "colors-array",
     "value": {"1": "#990000", "55": "#990000"}
   }
   ```

2. When retrieving the value in other widgets, use:
   ```json
   "colorWidget": "JS{{\n\nvar velocityReceived = OSC{/note};\nreturn colors[velocityReceived] || \"#E0E0E0\";\n\n}}"
   ```

### Note on JSON Syntax
Ensure that the value in the variable widget is formatted correctly as a JSON object. Avoid using escape characters unnecessarily, as this can lead to parsing issues. Using `JSON.stringify()` can help maintain the correct format when needed.

This approach allows for a clean and efficient way to manage global variables across multiple widgets in Open Stage Control.

# Issue with doubleTab in Fader Matrix

When using a matrix of faders to send OSC commands for controlling DMX lights, the `doubleTab` property is not functioning as expected. The configuration used is as follows:

```json
{
  "id": "channel_#{$+1}",
  "address": "/DMX/channel_#{$+1}",
  "design": "compact",
  "doubleTab": true,
  "snap": true,
  "range": { "min": 0, "max": 255 }
}
```

While all other properties work correctly, the `doubleTab` feature fails to operate within the matrix.

## Solution

The issue arises from a typographical error in the property name. The correct property is `doubleTap` (with a "p"), not `doubleTab`. Correcting this typo resolves the issue, allowing the double-tap functionality to work as intended.

Make sure to update your configuration to:

```json
{
  "id": "channel_#{$+1}",
  "address": "/DMX/channel_#{$+1}",
  "design": "compact",
  "doubleTap": true,
  "snap": true,
  "range": { "min": 0, "max": 255 }
}
```

# Restricting Movement of Single Multixy Pads

**Problem Description:**
Users may want to restrict the movement of specific multixy pads while allowing others to remain unrestricted. For example, a user wishes to permanently limit the movement of the first and last pads on the x-axis while controlling EQ and filters.

**Solution:**
Currently, there is limited per-pad customization available in the multixy widget. However, a workaround can be implemented using the `axisLock` property. The following script can be used in the `onTouch` event:

```javascript
// onTouch script
if (event.handle === 0 || event.handle === getProp(this, 'points').length - 1) {
  setVar(this, 'aLock', event.type === 'start' ? 'x' : '')
}
```

This script restricts the widget's interaction to the x-axis when the first or last pad is touched. Note that holding the Shift key will still allow overriding this restriction. 

This solution is effective for users who are not interacting with multiple filters simultaneously.

# How to Retrieve the Current Tab Index from a Tab Widget

## Problem Description
Users may need to determine the index of the current tab within a tab widget, specifically the index of the tab object rather than the selected tab on the container.

## Solution
To retrieve the index of the current tab, you can use the following methods:

1. **In Scripting Properties**: Use the method `getIndex()`. This will return the index of the current tab.

2. **In General Properties**: If you are not within a script, you can use the expression `#{getIndex()}` to obtain the current active tab index.

These methods provide a reliable way to access the tab index as needed.

# Accessing Globals from a Custom Module in Open Stage Control

## Problem Description
Users may want to call methods stored in the globals object from a custom module. However, the custom module runs in a different context from the client/widget scripts, which complicates direct access to the globals object.

## Solution
To access methods in the globals object from a custom module, use OSC (Open Sound Control) messages for communication between the clients and the custom module. This approach allows for effective interaction without direct variable sharing.

# Open Recent Menu Issue on Mobile Devices

## Problem Description
The Open Recent menu in Open Stage Control is not functioning properly on mobile devices (iPhone with Safari/Chrome, Android with Chrome). When attempting to select a file from the list, the first item is opened automatically, regardless of where the user touches. This issue does not occur on tablets or desktop browsers.

## Solution
This issue has been addressed in the source code. Ensure you are using the latest version of Open Stage Control to benefit from the fix.

# Error in the Launcher Console

When running the following script in Open Stage Control:

```javascript
var nbar = get('i1')
var obar = get('this')
var diff = Math.abs(nbar - obar)

if (diff < 6 && nbar < obar) {
    send('midi:SessionKiano', '/note', 7, 44, 1) // FAIL. If this is here, I get an error in the launcher console.
    console.log(diff + " \(nbar smaller\)") // prints the expected value
}
```

an error occurs in the launcher console:

```
(ERROR) A JavaScript error occurred in the main process:
TypeError: Cannot read property '0' of undefined
    at Object.send (/Applications/open-stage-control.app/Contents/Resources/app/server/src/server/osc/index.js:227:1)
```

This is followed by pop-up messages indicating that the connection to the server has been interrupted and then restored.

## Solution

The issue arises because the widget used for the script lacks a `typeTags` property, which is necessary for sending messages. To resolve this:

1. Use a different widget that is designed to send messages.
2. Alternatively, in recent updates, widgets without `typeTags` have been allowed to send messages, which may resolve the issue without needing to change the widget.

However, note that widgets do not send messages in response to incoming messages by design. If you require this functionality, you will need to implement a custom module. For more information on creating custom modules, refer to the documentation: [Custom Module Examples](https://openstagecontrol.ammd.net/docs/custom-module/examples/#reply). 

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
[Attachment: image4.png]

# Scope of setVar

## Problem Description
The user is attempting to show/hide widgets using buttons in Open Stage Control and is confused about the functionality of the `setVar` method. They are unsure whether `setVar` modifies local widget variables, the `this.variables` object, or global variables. Additionally, they are experiencing issues with setting the `visible` property using the `set` command.

## Solution
The `setVar` method allows the use of custom variables in properties with a specific syntax. These variables are not stored in a standard JavaScript object like `locals`. However, scripts can access them using the `getVar` function. It is important to note that using the `VAR{}` syntax to create a variable is not mandatory.

For controlling widget visibility, ensure that you are using the correct syntax and that the properties are set appropriately. If issues persist, verify that the visibility property is being referenced correctly in your configuration.

# Recording Movements / Automation in Open Stage Control

**Problem Description:**
Users are interested in the ability to record and playback fader and knob movements within Open Stage Control, similar to automation features found in other software like Lemur. The goal is to enable a straightforward process where users can press record, manipulate a fader, and then playback the recorded movements.

**Solution:**
While this feature is not natively supported in Open Stage Control, it can be implemented using a custom module. Below is a basic implementation example provided by a community member:

```javascript
class Automation {
    constructor() {
        // osc message store
        this.events = [];
        // record state
        this.recordStartTime = 0;
        this.recording = false;
        // play state
        this.playStartTime = 0;
        this.playing = false;
        this.playbackCursor = 0;
        // looping state
        this.looping = false;
        // playback process
        this.interval = 10;
        this.intervalCallback = null;
    }

    startRecording() {
        // clear osc message store
        this.events = [];
        // enable recording
        this.recording = true;
        // save timestamp
        this.recordStartTime = Date.now();
    }

    stopRecording() {
        // stop recording
        this.recording = false;
    }

    startPlaying() {
        // start or restart playback
        if (this.playing) this.stopPlaying();
        this.playing = true;
        // save timestamp
        this.playStartTime = Date.now();
        // start playback process
        this.intervalCallback = setInterval(this.processEvents.bind(this), this.interval);
    }

    stopPlaying() {
        // stop playback
        this.playing = false;
        // reset playback cursor
        this.playbackCursor = 0;
        // stop playback process
        clearInterval(this.intervalCallback);
    }

    setLooping(v) {
        // set looping state
        this.looping = !!v;
    }

    addEvent(data) {
        if (!this.recording) return;
        // store osc message with relative timestamp
        this.events.push({
            timestamp: Date.now() - this.recordStartTime,
            data: data
        });
    }

    processEvents() {
        // playback process
        // compute elapsed time
        var playtime = Date.now() - this.playStartTime;

        while (this.playing) {
            // retrieve event at playback cursor
            var event = this.events[this.playbackCursor];

            if (!event) {
                this.stopPlaying();
                return;
            }

            // retrieve osc message data and timestamp
            var {data, timestamp} = event;

            if (playtime >= timestamp) {
                // if elapsed time is greater than relative timestamp
                // send osc message at playback cursor
                // (implementation for sending the data would go here)
                this.playbackCursor++;
            }
        }
    }
}
```

This code provides a framework for recording and playing back movements. Users can expand upon this basic structure to suit their specific needs.

# Displaying Debug Messages in the Client Console

**Problem Description**  
There is a need to display messages in the client-side JavaScript console alongside or instead of the server console in Open Stage Control.

**Solution**  
To display custom debug messages in the client console, you can use the remote control command `/LOG` within the custom module's `oscInFilter` or `oscOutFilter`. Here is an example implementation:

```javascript
module.exports = {
  oscInFilter: (data) => {
    receive('/LOG', `MSG IN: ${data.address}, ${data.args.map(a => a.value).join(', ')}`);
    return data;
  }
}
```

This code will log incoming OSC messages to the client console, allowing for easier debugging.

# Sharing a Simple Patch for Beginners

## Problem Description
A user has shared a simple patch designed for beginners, which includes features such as switch label tricks, increment buttons, and a simple grid template.

## Solution
The shared patch can be accessed through the following attachment:

- [Attachment: lKqVIgyTC5okJFAiwJAtdqItJcq.json] 

This patch serves as a learning resource for users looking to enhance their skills in Open Stage Control.

# Targeting Tab Labels with SVG Images

**Problem Description:**
Users may want to replace tab labels with SVG images in Open Stage Control. However, targeting tab labels can be challenging, and specific CSS selectors are needed based on the tab's position.

**Solution:**
To target tab labels and use images instead of text, follow these steps:

1. **Identify the Tab Position:**
   - Use the following classes based on the tab's position:
     - Right: `class="navigation tabs-right"`
     - Left: `class="navigation tabs-left"`
     - Top: `class="navigation tabs-top"`
     - Bottom: `class="navigation tabs-bottom"`

2. **Inspect the Selector:**
   - Launch Google Chrome and use Developer Tools (Option + Command + C on Mac) to inspect the tab.

3. **Example CSS Code:**
   - Use the following CSS examples to set background images for each tab:

```css
/* Tab 1 */
.navigation.tabs-top.main > :first-child {
    width: 500px;
    height: 500px;
    background-image: url('/Users/userName/Documents/borat.webp');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    color: white;
    font-size: 100px;
}

/* Tab 2 */
.navigation.tabs-top.main > :nth-child(2) {
    width: 500px;
    height: 500px;
    background-image: url('/Users/userName/Documents/borat_2.webp');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: black;
    font-size: 100px;
}

/* Tab 3 */
.navigation.tabs-top.main > :nth-child(3) {
    width: 1280px;
    height: 765px;
    background-image: url('/Users/userName/Documents/borat_3.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: green;
    font-size: 100px;
}

/* Tab 5 */
.navigation.tabs-left > :first-child {
    width: 500px;
    height: 500px;
    background-image: url('/Users/userName/Documents/borat_4.webp');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    color: white;
    font-size: 100px;
}

/* Tab 6 */
.navigation.tabs-left > :nth-child(2) {
    width: 500px;
    height: 500px;
    background-image: url('/Users/userName/Documents/borat_5.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: white;
    font-size: 100px;
}
```

By applying these CSS rules, you can effectively replace tab labels with images in Open Stage Control.

# Menu and Script Configuration in Open Stage Control

## Problem Description
Users may need to react to selections made in a radial menu by updating values in other widgets, such as matrix buttons or text fields. The previous method of using "children" is replaced with the "<<" and ">>" syntax, which can be confusing for new users.

## Solution
To implement conditional behavior based on menu selections, utilize the `script` property of the menu widget. You can write a script directly without the JS wrapper. Here is an example:

```javascript
if (value == 1) {
  // Perform action for selection 1
  set('widget_1', 1);
} else if (value == 2) {
  // Perform action for selection 2
} 
// Add more conditions as needed
```

For more details on available variables and functions, refer to the [Open Stage Control scripting documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/).

# Customizing Jean Emmanuel's MCU Template for Cloned Matrixes

**Problem Description:**
The user customized Jean Emmanuel's MCU template to include an `lcd_display` within the `mixer_strip`, allowing it to be cloned in the `strip_matrix` with an ascending count. However, they encountered difficulties in adjusting the `lcd_dispatch` to address the individual LCD displays correctly.

**Solution:**
To resolve the issue, the user moved the `lcd_dispatch` into the `mixer_strip` and modified its address and script field accordingly. This adjustment enabled proper communication with the individual LCD displays.

For reference, the relevant code snippet for handling the SysEx messages is as follows:

```javascript
// SYSEX
} else if (address === '/sysex') {
    var [value] = inArgs;
    for (var ID = 1; ID < 30; ID++) {
        if (value.includes("f0 00 00 66 14 " + ID + " ")) { // Mackie LCD text
            var d = value.split(" ").slice(6).map(x => parseInt(x, 16)), // hex to int
                pos = d[0], // first byte -> position
                text = d.slice(1).map(x => String.fromCharCode(x)); // rest -> updated characters

            text.pop(); // drop sysex closing byte

            action = 'lcd_' + (ID - 10);
            outArgs.push(pos, ...text);
        }
    }
}
```

This solution effectively addresses the problem of individual LCD display communication within the customized MCU template.

# Using Different OSC Messages for Different Root Tabs

## Problem Description
When creating multiple root-level tabs in Open Stage Control, there is a need to assign different OSC messages to each tab. The default behavior sends messages with addresses like `/root` followed by values (0, 1, 2, etc.), which does not allow for unique addresses per tab (e.g., `/Menu1`, `/Menu2`). Additionally, there is interest in implementing bidirectional communication, where incoming OSC messages can trigger the corresponding menu tab based on its address.

## Solution
To achieve unique OSC addresses for each tab, you can utilize the root's script property. For one-way communication, use the following script to send messages based on the selected tab:

```javascript
send('/Menu' + value) // where value corresponds to the tab index
```

For bidirectional routing, you will need to create a custom module. Refer to existing examples for guidance on implementing this functionality.

# Changing Widget Values Across Different Sessions

**Problem Description:**

Users may want to change a widget's value in one session from another session while connected to the same Open Stage Control server. This scenario typically involves two clients, such as an Android phone and a Windows tablet, each running different session files.

**Solution:**

The `set()` function only operates within a single client session. However, if both clients are connected to the same server and the widgets do not have the `bypass` option enabled, they will synchronize automatically.

If the widget you wish to modify does not exist in both sessions, you will need to implement a custom module to facilitate this interaction. 

Note: The correct terminology for the files in use is "session files," not "templates."

# Fallback if OSC{} Not Populated

## Problem Description
The Matrix widget fails to render when the `preArgs` contains OSC references that have not yet been populated with data. Specifically, the following configuration results in issues:

```json
[
  0,
  "#{OSC{/scenes/numbers}[]}",
  "#{OSC{/scenes/names}[]}"
]
```

When the data is pasted after OSC has sent it, the widget renders correctly. A solution is needed to specify a fallback if the array returns undefined.

## Solution
To implement a fallback for undefined OSC data, use the following syntax:

```javascript
#{ (OSC{/foo} || [])[$] }
```

This code checks if the OSC reference returns a value; if not, it defaults to an empty array, ensuring that the Matrix widget can render without errors.

# Loading JSON in Custom Module

## Problem Description
When attempting to load a JSON file in a custom module using the `loadJSON` function, an error occurs. The custom module code is as follows:

```javascript
var my_data = loadJSON('./data.json')

module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;
        return {address, args, host, port};
    },
    
    oscOutFilter: function(data) {
        var {address, args, host, port, clientId} = data;
        return {address, args, host, port};
    },
}
```

The JSON file is located at a Google Drive link, and the user is unsure how to access the data from the loaded JSON.

## Solution
The error encountered while loading the JSON file may be due to the presence of a Byte Order Mark (BOM) at the beginning of the file. To resolve this issue:

1. **Remove the BOM**: Use a text editor that allows you to save the file without the BOM. Alternatively, an update to the `loadJSON` function is planned to ignore the BOM.

2. **Accessing Data**: Once the JSON file is successfully loaded, you can access the data using standard JavaScript object notation. For example, if your JSON structure contains arrays, you can iterate through them using loops or array methods.

For further reference on handling JSON errors in Node.js, consult this [Stack Overflow discussion](https://stackoverflow.com/questions/42698380/node-js-syntaxerror-unexpected-token-in-json-at-position-0).

[Attachment: data.json]

# Anchoring Widget Positions in Open Stage Control

## Problem Description
Users may want to anchor a widget's position relative to another widget's position to create a responsive layout, such as sub-menu buttons on tab widgets. Manual positioning can lead to inconsistencies, especially on different screen sizes or touch screens.

## Solution
To achieve a responsive layout, use vertical, horizontal, or grid panels instead of attempting to anchor modal widget button positions directly. 

1. **Use a Grid Panel**: Create a grid layout for your widgets. For example, set `layout` to `grid` and define `gridTemplate` to organize your widgets effectively.
   
   Example CSS:
   ```css
   /* CSS for velocity tab panel */
   :host {
     grid-area: a;
     grid-column: 1 / -1;
   }
   /* CSS for SET hamburger menu */
   :host {
     z-index: 99;
     grid-area: a;
     height: 26rem !important; /* Adjust height as needed */
   }
   /* CSS for SEL hamburger menu */
   :host {
     z-index: 99;
     grid-area: g;
     height: 26rem !important; /* Adjust height as needed */
   }
   ```

This method allows for better positioning across various screen sizes, anchoring widgets to the corners of the grid layout.

# Flow Template for Cubase, Vienna Ensemble Pro, and Open Stage Control

## Problem Description
A user has developed a commercial product called Flow, which integrates Cubase, Vienna Ensemble Pro, and Open Stage Control. The product serves as a comprehensive orchestral template that allows users to manage tracks, instruments, articulations, and other controls efficiently.

## Solution
Flow is designed to provide a ready-to-use orchestral template for composing and producing music. It features integration with Spitfire Audio and Orchestral Tools libraries, and it is open for users to customize with additional libraries. The template is built using JavaScript for custom functionality, allowing for tailored window and panel management.

For more information, you can refer to the following resources:
- [Attachment: Artificial_harmonics]
- [Attachment: Flow_the_biggest_orchestral_template_for_Cubase]
- [Attachment: introduction_video]

# Presentation Control Timer Implementation

**Problem Description:**
The user is attempting to create a presentation control interface that includes buttons for navigating slides and a timer that can count down or count up. They are unsure how to implement JavaScript for the timer functionality and where to place the scripts within Open Stage Control.

**Solution:**
To implement a timer in Open Stage Control, follow these steps:

1. **Create a Custom Module:**
   - Use a custom module to write your JavaScript code. This is where you will handle the timer logic.

2. **Use `setInterval()`:**
   - Utilize the `setInterval()` function to update the timer at regular intervals (e.g., every second). This function will allow you to execute a piece of code repeatedly at specified intervals.

3. **Access Current Time:**
   - Use the `.timeNow()` method from the Date prototype to retrieve the current time. Store the initial time when the timer starts, and calculate the elapsed time during each interval.

4. **Update Widget Text:**
   - Update the text of the widget displaying the timer value each time the interval function executes.

5. **Timer Controls:**
   - Implement buttons for starting, pausing, and resetting the timer. Ensure that these buttons trigger the appropriate functions in your custom module.

For a practical example, refer to the provided JSON files for guidance on structuring your project:
- [Attachment: TimerClicker.json]
- [Attachment: nw4EpC0DVoGrTbUCp2GY31voOJ5.json]

# Split XY Widget into Two OSC Messages

## Problem Description
When using an XY pad to interface with SuperCollider, there is a need to send and receive x-axis and y-axis values through separate OSC addresses. The current implementation allows sending values correctly, but when receiving a single value (e.g., only the x-axis), the widget displays incorrect coordinates due to the cached value of the other axis being undefined.

## Solution
To resolve the issue, you can implement the following strategies:

1. **Provide Default Values**: Modify the OSC blocks to include default values for both axes. For example:
   ```javascript
   [ OSC{/xy_x, 0}, OSC{/xy_y, 0} ]
   ```

2. **Ensure Initialization**: Make sure to send at least one value for both axes to fully initialize the XY widget's value. This prevents undefined values from causing discrepancies.

3. **Use Variable Widgets**: Instead of relying solely on OSC receivers, consider using variable widgets to manage the separate axis values. This allows for clearer updates and avoids issues with cached values. An example configuration can be found in the attached file:
   [Attachment: xy.json]

By implementing these strategies, you can achieve reliable two-way communication between the XY widget and SuperCollider.

[Attachment: 2M83wisDwAXBNTa2VvLq9vqqRVJ.json]

# Visibility of Menu Label

**Problem Description:**
The general label on a menu button in Open Stage Control is not displayed when the menu has no assigned value or when the value is outside the specified range.

**Solution:**
In version 1.15.7, the label will be displayed even when the value is undefined. You can implement this by using the following expression:

```javascript
#{@{this} === undefined ? "Default label" : "%value"}
```

This allows you to set a default label when the value is not defined.

[Attachment: menuLabelNotShown.json]  
[Attachment: 2fEYmIBcYD5JWWumIReP2XPKbOh.json]

# CSS Setting for Button Interaction

**Problem Description:**

A button in a panel should be pressable only when a modal's value is not '00 00'. The button is intended to be visually greyed out when it is not pressable. While the interaction property correctly prevents button interaction, the CSS filter for greyscale is not being applied as expected when loading presets.

**Solution:**

To ensure the button is visually greyed out when it is not pressable, use the following CSS:

```css
:host.no-interaction { filter: grayscale(1); }
```

This rule will apply a greyscale filter when the `no-interaction` class is present, indicating that the button is not interactable. 

Make sure that the interaction property is correctly set up as follows:

```javascript
#{@{parent.variables.stomp}Sel} !== '00 00'
```

If the button is not greyed out when loading a preset with '00 00', verify that the `no-interaction` class is indeed applied to the button or one of its parent elements. Use the browser's inspector (F12) to check the class status.

If issues persist, ensure that the syntax for the interaction property is correct and that there are no copy-paste errors. 

For further assistance, consider providing a session with detailed steps to reproduce the issue or a video demonstration if applicable. 

(attachment reference missing)

# Use of the settings.write Function

## Problem Description
The user inquired about using the `settings.write` function to add custom properties to the settings file and access them across all components within a session without persistence. They encountered an error stating that `settings.write` is not a function.

## Solution
The `settings.write` function is not currently exposed in the custom module. Instead, it is recommended to create a simple module to store your settings. If persistence is required, you can utilize Node's `fs` module to write to the filesystem.

Here’s an example of how to create a shared settings module:

```javascript
// settings.js
module.exports = {}

// module-a.js
var settings = require('./settings.js')
settings.x = 1
require('./module-b.js')

// module-b.js
var settings = require('./settings.js')
console.log(settings.x)
```

This approach allows you to share settings across different modules effectively.

# Changing Icon on Matrix Widget Based on On/Off State

## Problem Description
A user is attempting to change the label icons of a matrix widget (type toggle) based on the on/off state. They successfully implemented this functionality in a standalone toggle widget using the following code in the label field:

```javascript
#{
@{this} == 1 ? "^lock" : "^unlock"
}
```

However, they are struggling to achieve the same result within a matrix widget, as they believe they need to use the `[$]` syntax to find the matrix index.

## Solution
The solution requires creating a template widget that behaves as desired and then using a matrix of cloned widgets that replicate this template. The following steps outline the process:

1. **Create a Template Widget**: Design a toggle widget that includes the conditional label code.
2. **Clone the Template**: Use a matrix to create clones of the template widget. The `[$]` syntax will be used to increment the IDs of the cloned widgets.
3. **Adjust Matrix Properties**: Ensure that the "props" item in the matrix's "props" property is correctly configured.

A minimal session demonstrating this setup can be found in the attached file: [Attachment: clone-matrix.json].

This method allows each button within the matrix to reflect its own state correctly.

[Attachment: fwDCCmZWqUyWqU7PyEoqembhfHr.json]

# How to Disable Interaction of Multixy Immediately While Touching

## Problem Description
When setting the interaction property of a multixy widget to false using a custom variable, the interaction remains active while the pads are being touched and moved. The interaction only stops after the user lifts their touch, which is not the desired behavior.

## Solution
Currently, it is not possible to disable interaction immediately while touching the multixy. However, a workaround involves using the `event.preventDefault` method in the `onTouch` property of the parent panel. Here’s how to implement this:

1. In the parent panel's `onTouch` property, set:
   ```javascript
   event.preventDefault = get("var");
   ```
   This allows you to control the interaction using a variable.

2. To avoid using a variable widget, you can send a message from your custom module to change the state of the widget:
   ```javascript
   // custom module
   receive('/SCRIPT', `setVar('container_id', 'foo', 1)`);
   ```

3. In the container's `onTouch`, use:
   ```javascript
   event.preventDefault = getVar(this, 'foo');
   ```

This method allows for a more elegant solution without cluttering the project with variable widgets.

**Note:** Continuous touch event handling to switch between multixy widgets is not currently supported. The interaction will require the user to lift their touch before the new multixy can register the touch event.

For further reference, please see the attached file for additional context and examples. [Attachment: filename.ext]

# LED Blinking in Toggle Widget

## Problem Description
Users may encounter issues when attempting to make a toggle widget blink like an LED based on its value. The initial attempts using the `.led` class selector do not yield the desired blinking effect.

## Solution
To achieve a blinking effect on a toggle widget, use the following approach:

1. **CSS Adjustment**: Instead of using the `.led` class, utilize the `.toggle:after` pseudo-element. This change is necessary because the toggle widget does not contain any elements with the `.led` class.

2. **Set LED Property**: Ensure that the toggle widget's `led` property is set to `true` to enable the blinking effect.

Here is an example of how to implement this in your CSS:

```css
.toggle:after {
    /* Add your blinking animation styles here */
}
```

By following these steps, the toggle widget should blink correctly when its value changes. 

For further assistance, refer to the documentation or community posts related to this topic. 

[Attachment: filename.ext]

# How to Access Widget Values Using Parent Variables in Open Stage Control

When using widgets inside a panel with their IDs set to `@{parent.variables.n}/widgetName`, you may encounter difficulties accessing the values of these widgets. This issue arises particularly when the parent widget has variables defined, such as:

```json
{
  "name": "foo"
}
```

The goal is to display the value of a widget (e.g., `fader_1`) in another widget (e.g., a text widget) using the parent variable.

## Problem
Attempting to access the value of a widget using the syntax `@{parent.variables.n}/fader_1` results in the display of the widget's ID instead of its value. Other attempts, such as using JavaScript expressions, also fail.

## Solution
The correct syntax to access the widget value is:

```
@{@{parent.variables.n}/fader_1}
```

However, it is important to note that using a name with a dot (e.g., `"name": "player.1"`) can cause issues. It is recommended to avoid using dots in variable names to ensure proper functionality.

For further reference, see the attached session file: [Attachment: 661kVi4QzLrKb64VLxFG6lXnNg4.json].

# Receive OSC Args Array: Selecting Strings

## Problem Description
Users may encounter difficulties when trying to select individual strings from an OSC args array received in Open Stage Control. For example, using the method `OSC{/live/song/get/track_names}.split(",")[0]` may not yield the expected results.

## Solution
To select strings from an OSC args array reliably, follow these steps:

1. **Use a Variable Widget**: Create a variable widget with the address `/live/song/get/track_names`. This will store the received array.
   
2. **Accessing Values**:
   - To dispatch the strings, use the `onValue` property of the variable widget:
     ```javascript
     set('widget_id', value[0])
     ```
   - Alternatively, use the advanced syntax to access the values where needed:
     ```javascript
     #{ @{variable_id}[0] }
     ```

By utilizing these methods, you can effectively manage and select individual string values from the OSC args array. 

[Attachment: Screenshot 2025-03-21 at 12.14.10 AM]

# One-click Way to Send Snapshots in Open Stage Control

## Problem Description
Users are looking for a more efficient method to send a snapshot of their entire session in Open Stage Control, ideally with a single button click to save and recall the state, rather than going through multiple menu options.

## Solution
You can achieve a one-click snapshot recall by using the following methods:

1. **Trigger Menu Actions via Script**: Utilize the `toolbar()` function to trigger menu actions from a script.
   
2. **State Management**: Use `stateGet`, `stateSet`, and `storage` to save and load the widget states to and from the browser's cache.

3. **Custom Module**: Implement a custom module that uses remote control commands for more advanced control.

These methods allow for a more streamlined approach to managing session snapshots in Open Stage Control.

# Canvas Widget Resize/Layout

## Problem Description
When creating custom widgets using the "canvas" widget, users often need to perform layout computations based on the canvas's width and height. The absence of an "onResize" scripting function necessitates checking for size changes within the "onTouch" and "onDraw" functions, leading to a cumbersome approach for layout management.

## Solution
A proposed solution is to implement an `onResize` property that would automatically trigger layout computations when the widget size changes. Additionally, it may be beneficial to extend this functionality to include an `onLayoutChange` event that activates when any CSS variables or properties affecting the layout are modified. This would streamline the layout management process for canvas widgets.

# Quick Press Functionality from Fader

## Problem Description
The goal is to implement a fader with three functionalities: dragging to set a value, double-tapping to reset to a default value, and a quick press (less than 10ms) to change a variable. The user has attempted to achieve this using JavaScript but is facing difficulties, particularly with event handling.

## Solution
To implement the quick press functionality, use the `onTouch` event instead of `this.addEventListener`, as the underlying DOM element is not accessible. Store persistent values using the `locals` object. Here’s a refined code example:

```javascript
if (event.type === 'start') {
  locals.touchStartTime = Date.now();
} else {
  var delta = Date.now() - locals.touchStartTime;
  if (delta < 100) { // Adjust the threshold as needed
    set('Controls', 3); // Change the variable when quick pressed
  }
}
```

This approach allows you to effectively track the duration of the touch and execute the desired action based on the timing. Adjust the threshold as necessary for your specific use case.

# Custom Module for Cubase Users

## Problem Description
Users are seeking a dynamic solution for integrating Cubase track names and articulations into Open Stage Control without the need for hard coding or additional plugins. There is a need for a method to link expression maps to tracks effectively.

## Solution
A custom module named `Cubase_touch.js` has been developed to facilitate the dynamic integration of Cubase with Open Stage Control. The key features include:

- **Dynamic Track Names**: Track names from Cubase are automatically reflected in OSC without manual coding.
- **Articulation Management**: Articulations can be pulled dynamically from JSON files, which must be converted from expression maps.
- **Folder Scanning**: JSON files can be loaded in a single operation by scanning the content of a specified folder.

### Example Code
The following code snippet demonstrates how to load JSON expression maps and extract articulations:

```javascript
const fs = nativeRequire('fs');
const path = nativeRequire('path');

const dir = __dirname + '/../json/cubase_expression_maps';

const maps = {};
const articulations = {};

// Load JSON expression maps
fs.readdir(dir, (err, files) => {
    if (err) { throw err; }
    files.forEach(file => {
        if (path.extname(file) === 'json') {
            maps[path.basename(file)] = loadJSON(file);
        }
    });

    // Extract articulations
    for (var inst in maps) {
        try {
            articulations[inst] = maps[inst].InstrumentMap.member[0].list.obj.map(x => x.string[1].value);
        } catch (err) {
            console.error(`Failed to extract articulations from ${inst}.json:`);
            console.error(err);
        }
    }

    console.log('Extracted articulations:\n');
    console.log(articulations);
});
```

### XML Integration
To potentially skip the JSON conversion step, users can install a Node library to handle XML files directly. This can be done by running the following command in the custom module's directory:

```bash
npm install xml2json
```

After installation, XML files can be accessed and converted to JSON format using the following code:

```javascript
const fs = requireNative('fs');
const xml2json = requireNative('xml2json');

var xmlFile = fs.readFileSync('./data.xml', 'utf-8');
var json = JSON.parse(xml2json.parse(xmlFile));
```

This approach allows for more flexibility in managing expression maps and articulations within Open Stage Control.

[Attachment: Cubase_touch.js]

# Execution of Script in Open Stage Control

## Problem Description
Users may encounter issues when executing scripts tied to push buttons in Open Stage Control. Specifically, scripts may execute unexpectedly when linked to faders, and there may be confusion regarding the proper use of conditions and variable syntax within scripts.

## Solution
1. **Script Execution on Button Press**: 
   - When a script is executed, it can be triggered by various events such as:
     - Same-ID synchronization
     - LinkId synchronization
     - Updates to its value property
     - OSC messages
   - Ensure that the script is placed in the correct property designated for scripts.

2. **Using Conditions**:
   - To execute a script only when a specific value is received (e.g., `value == 1`), ensure that the condition is correctly set in the condition field. If the script runs on boot, consider using a default value to prevent execution until the desired condition is met.

3. **Variable Syntax**:
   - The syntax for using variables within the `@{}` container does not allow for dynamic interpretation during script parsing. Instead, use the `get(id)` function, which is planned for inclusion in future releases, to retrieve widget values dynamically.

For more detailed information on script execution and conditions, refer to the discussion on script triggers and the upcoming `get(id)` function.

[Attachment: filename.ext] (attachment reference missing)

# Calling a REST API in Open Stage Control

To call a REST API, such as one provided by a WordPress website, you can utilize a custom module in Open Stage Control. This allows you to load native Node.js modules and perform various operations, including making HTTP requests.

## Solution

1. **Create a Custom Module**: Use a custom module to handle REST API calls. This module can intercept outgoing messages and bind widgets to REST calls.

2. **Example Code**: Below is a barebone example of how to implement a GET request using the `https` module:

   ```javascript
   const https = nativeRequire('https');

   function get(url, callback) {
       https.get(url, (resp) => {
           let data = '';

           resp.on('data', (chunk) => {
               data += chunk;
           });

           resp.on('end', () => {
               callback(data);
           });

       }).on("error", (err) => {
           console.log("REST Error: " + err.message);
       });
   }

   module.exports = {
       oscOutFilter: function(data) {
           var {address, args, host, port, clientId} = data;

           if (address === '/rest') {
               // Use the first argument as the request URL
               get(args[0].value, (data) => {
                   console.log('REST response');
                   console.log(data);
                   // Handle the response as needed
               });
           }

           // Return data if you want the message to be sent
           return {address, args, host, port};
       }
   }
   ```

This approach allows you to fetch JSON data and utilize it within your Open Stage Control session.

# Menu Widget and Tabs Configuration

## Problem Description
Users need assistance with configuring the menu widget in Open Stage Control to show/hide tab elements and automatically navigate to a specific tab on startup. They also want to know how to hide all tabs except one at startup.

## Solution
To control tab visibility and selection using a menu widget, follow these guidelines:

1. **Tab Selection**: The selection of tabs is determined by the value of the parent container:
   - 0 = first tab
   - 1 = second tab
   - etc.

2. **Hiding Tabs**: A tab can be completely hidden by setting its `visible` property to `false`.

3. **Changing Tab Selection with a Menu**:
   Use the `script` property of the menu to set the tab selection. For example:
   ```javascript
   if (value == "some_menu_value") {
       set("tab_parent_id", DESIRED_TAB_INDEX);
   }
   ```
   If the menu values are ordered numbers, you can directly use:
   ```javascript
   set("tab_parent_id", value - 1); // assuming lowest value is 1
   ```

4. **Tab Visibility Based on Parent Value**:
   You can make each tab's visibility depend on the parent’s value:
   - For Tab 1:
     ```javascript
     #{@{parent} == 0}
     ```
   - For Tab 2:
     ```javascript
     #{@{parent} == 1}
     ```

5. **CSS Alternative**: Another approach is to hide the panel’s tab navigation using CSS and use text widgets as labels in the tabs, making tabs visible only when selected.

6. **Example Session File**: A session file demonstrating both cases is available:
   [Attachment: tab_menu.json]

### Relevant Properties:
- **Case 1**:
  - `menu_1.script`
  - `tab_1.visible`, `tab_2.visible`, etc.
  
- **Case 2**:
  - `menu_2.script`
  - `panel_2.css`

### Menu Labels:
To use descriptive labels instead of numeric values in the menu, set the menu's `label` to "%key" and define its `values` as follows:
```json
{
  "osc": 1,
  "seq": 2,
  "etc": 3
}
```

### Example Script for Menu:
Here’s a corrected example for the menu script:
```javascript
if (value == "OSC") {
    set("panel_2", 0); // Correct syntax
} else if (value == "SEQ") {
    set("panel_2", 1); // Adjust as needed
}
```

This setup allows for dynamic tab management based on user interactions with the menu widget.

[Attachment: dtgcne3ohNVMCxACUjtFJc93m7H.json]

[Attachment: cEzTrymOnOZdGp0HwWnaw2VlrHS.json]

# Modifying Numerous IDs at Once

**Problem Description:**
The user wants to change multiple widget IDs from a format like `c1`, `c2`, `c3` to `a1`, `a2`, `a3`. Attempts to use JavaScript methods such as `id.replace('c','a')` or checking with `id.includes('c')` in a script widget were unsuccessful.

**Solution:**
Direct modification of widget IDs using scripts is not supported due to the design of Open Stage Control. Instead, consider the following methods:

1. **Text Editor Search and Replace:**
   - Open the session file in a text editor and perform a search and replace operation to change `c` to `a`.

2. **Remote Control Command:**
   - Use the remote control command `/EDIT` to programmatically change IDs. However, this method is not recommended due to potential issues. An example of the command is shown below:
   ```javascript
   for (var i=1; i<4; i++) {
     send('127.0.0.1:8080', '/EDIT', 'c' + i, {id: 'a' + i});
   }
   ```

This approach allows for batch modification of IDs but should be used with caution.

# Scripting to Trigger Events Outside Open Stage Control

**Problem Description:**
Users may want to know if Open Stage Control (OSC) scripting can perform functions on the host computer, such as rebooting the PC, running batch files, or opening web pages.

**Solution:**
It is possible to achieve this by writing a custom module and utilizing native Node.js modules with the `nativeRequire()` function. This allows you to execute various operations that Node.js supports, effectively enabling you to perform actions on the computer outside of OSC.

# Sending OSC Messages to Different IPs for Widgets

**Problem Description:**
The user wants to configure multiple widgets in Open Stage Control to send OSC messages to one primary IP address while having a specific widget send messages to a different IP address only. The goal is to avoid filling in the target field for each widget individually.

**Solution:**
To achieve this configuration, utilize the `ignoreDefaults` property for the specific widget that should send messages only to the secondary IP address. By setting `ignoreDefaults` to true, this widget will not send messages to the primary IP address, allowing it to send exclusively to the designated secondary IP.

Refer to the attached image for visual guidance. 

[Attachment: sniper|642x500]

# Continuous Scroll Value Retrieval in a Scrollable Matrix

**Problem Description:**
The user needs to adjust the top position of a button based on the continuous scroll value of a matrix. The function `getScroll('this')` only returns the scroll value when it changes, not continuously.

**Solution:**
The `getScroll('this')` function operates as expected when invoked by the matrix itself. However, continuous retrieval of the scroll value is not supported for matrices, as they maintain an array of values for their children rather than holding a scroll state.

For achieving different actions based on touch coordinates on a button, refer to the button's `onValue` property and utilize `locals.touchCoords` for precise interaction handling.

[Attachment: filename.ext]

# Creating Toggleable Tabs in Open Stage Control

**Problem Description:**
Users may want to implement a tabbed interface within their Open Stage Control projects, allowing them to switch between different layouts and sets of parameters by pressing buttons.

**Solution:**
Tabs can be created in any panel widget or the root widget that does not already contain regular widgets. To create multiple tabs efficiently, follow these steps:

1. **Using the Project Tree:**
   - If you have existing widgets, select all of them.
   - Cut the selected widgets.
   - Add a new tab to your panel.
   - Paste the widgets into the newly created tab.

This method allows for a seamless transition between different layouts and functionalities within your project.

# Creating a Multi-Button Switch with Repeated Labels

## Problem Description
When coding a multi-button switch in Open Stage Control, users may encounter difficulties due to the restriction that multiple entries cannot share the same label in the values field, even if they have different values. This limitation can complicate the creation of buttons with identical displays, as users may resort to adding spaces to differentiate them. A more efficient approach is needed to handle repeated labels while ensuring that the correct value is sent based on the button's position.

## Solution
To create a multi-button switch with repeated labels, you can utilize the new syntax introduced in a recent release. Instead of trying to differentiate labels with spaces, you can define your button labels and their corresponding values using an object structure. Here’s how to do it:

```js
{
  "labels": ["a", "b", "b", "c"],
  "values": [0, 1, 2, 3]
}
```

In this structure:
- The `labels` array contains the display strings for the buttons, allowing for repetitions.
- The `values` array contains the corresponding values that will be sent when each button is pressed, based on their index.

If you encounter layout issues with the editing field displaying all values on a single line, ensure that your syntax is correct. If you prefer each item to be on a separate line for easier editing, wrap your object in a `#{} block`:

```js
#{
{
  "labels": [
    "a",
    "b"
  ],
  "values": [
    0,
    1
  ]
}
}
```

This will format the sub-arrays with each item on a new line, improving readability during editing. 

By following this approach, you can efficiently manage multi-button switches with repeated labels without the need for manual spacing adjustments.

# How to Make a Responsive UI in Open Stage Control

## Problem Description
Users may seek guidance on how to create a responsive user interface (UI) in Open Stage Control.

## Solution
To create a responsive UI, refer to the following resource that provides tips on responsive sizing in CSS:

- [Responsive Sizing Documentation](https://openstagecontrol.ammd.net/docs/customization/css-tips/#responsive-sizing) 

This documentation will guide you through the necessary steps to implement responsive design effectively.

# XY Pad Scripting Issues and Solutions

## Problem Description
When attempting to set the CC# of an XY pad from a variable on another widget, the following error occurs: "wrong number of arguments." The code provided only sends two arguments instead of the required three for the `/control` command.

## Solution
To resolve the argument error, ensure that the `/control` command includes all three required arguments: channel, CC number, and value. The corrected code should look like this:

```javascript
send('midi:OSCMIDI', '/control', 1, getVar("send_value_x1", "ccNum"), x)
send('midi:OSCMIDI', '/control', 1, getVar("send_value_y1", "ccNum"), y)
```

Additionally, to set default position values for both x and y when using the XY pad, use array notation in the `default` property of the XY widget:

```javascript
default: [64, 64]
```

For the behavior of the dot in the XY pad to jump to the clicked position, enable the `snap` property in the XY settings by setting it to `true`. This allows the dot to move to the location of the click.

By implementing these changes, the XY pad should function correctly without errors.

# Using External JSON Files in Open Stage Control

## Problem Description
Collaborating on a single JSON file in Open Stage Control can be challenging, especially when multiple users need to update content simultaneously. This can lead to overwriting each other's changes. The goal is to reference an external JSON file for content in a container, allowing for dynamic updates without modifying the main configuration file.

## Solution
It is possible to achieve this using a custom module in Open Stage Control. You can load an external JSON file and use its content within your application. Here’s how to do it:

1. **Load the External JSON File**: Use the `loadJSON` function to load your external JSON file. For example:
   ```javascript
   var widgetData = loadJSON('widget-data.json');
   ```

2. **Handle Session Open Events**: Use the `app.on('sessionOpened', ...)` function to send the loaded data to the client when a session is opened:
   ```javascript
   app.on('sessionOpened', function(data, client) {
       receive('/EDIT', 'widget_id', JSON.stringify(widgetData), {clientId: client.id});
   });
   ```

3. **Example Implementation**: If you have a file named `testme.json`, you can implement it as follows:
   ```javascript
   var widgetData = loadJSON('testme.json');

   app.on('sessionOpened', function(data, client) {
       receive('/EDIT', 'testpanel', JSON.stringify(widgetData), {clientId: client.id});
   });
   ```

4. **Client ID**: The `client.id` is automatically assigned when a client connects to the Open Stage Control session. If you are running a single client, you can omit the `clientId` parameter.

For further details, refer to the following resources:
- [Custom Module Documentation](https://openstagecontrol.ammd.net/docs/custom-module/custom-module/)
- [Remote Control Documentation](https://openstagecontrol.ammd.net/docs/remote-control/#edit-id-properties-options)

This approach allows for dynamic content management and facilitates collaboration without the risk of file conflicts. 

[Attachment: widget-data.json]

# macOS: Zoom Issues in Open Stage Control

## Problem Description
Users have reported difficulties with zooming in the session editor on macOS, particularly when using a trackpad. The issues include:

- Excessive sensitivity when zooming with `Command + Scroll`, leading to extreme zoom levels.
- Inability to reset the zoom level to 100% after accidental zooming.
- `Command + "+"` and `Command + "-"` do not work on some keyboards (e.g., French).
- Zooming affects the entire UI rather than just the main window.

## Solution
1. **Resetting Zoom Level**: 
   - Use `Command + 0` to reset the zoom level in the main window. This should also reset the zoom level in the built-in editor, as confirmed by users after restarting the application.

2. **Zooming Functionality**:
   - The zooming behavior can be adjusted by limiting the zoom effect to the main window, which may alleviate some issues.

3. **Browser Testing**:
   - Users have confirmed that `Command + "+"`, `Command + "-"`, and `Command + "0"` work correctly in browsers like Safari and Chrome, indicating that the issue is specific to the Open Stage Control application.

4. **Future Improvements**:
   - Adjustments will be made to improve the sensitivity of zooming with trackpads and to ensure that the zoom functionality behaves more consistently across different platforms.

For further details, refer to the video demonstrating the zooming issue: [Attachment: O-S-C_zoom-issue.MOV].

# Switch Changes Dropdown's Values - Need to Call Back Last Value

## Problem Description
When using a switch to change a dropdown's values for selecting Quantize / Quantize-Insertion values, switching from "Q" to "Q Insertion" resets the dropdown to 0 (or undefined). The goal is to memorize the last selected values and retrieve them upon switching.

## Solution
To resolve this issue, follow these steps:

1. **Use `get()` Instead of `@{}`**: In your scripts, replace all instances of `@{}` with `get()`. This change is crucial for accessing the values correctly.

2. **Update the Scripts**:
   - In the dropdown's inspector, modify the script to:
     ```javascript
     if(get("switch_Q") == 1) set("mémo_Q", value);
     else if(get("switch_Q") == 2) set("mémo_Q_Insert", value);
     ```

   - In the switch's inspector, update the script to:
     ```javascript
     if(value == 1) {
         set("dropdown_values", {
             "1/1": 80, "1/2": 81, "1/4": 82, "1/8": 83,
             "1/16": 84, "1/32": 85, "1/64": 86, "1/128": 87
         });
         set("color", 'blue');
         set("dropdown_Q", get("mémo_Q"));
     } else if(value == 2) {
         set("dropdown_values", {
             "1/1": 70, "1/2": 71, "1/4": 72, "1/8": 73,
             "1/16": 74, "1/32": 75, "1/64": 76, "1/128": 77
         });
         set("color", 'yellow');
         set("dropdown_Q", get("mémo_Q_Insert"));
     }
     ```

3. **Alternative Solution**: Instead of using scripts, consider creating two separate dropdowns for the different sets of values. Control their visibility based on the switch's state:
   - For the first dropdown:
     ```javascript
     dropdown1.visible: #{get("switch") == 1}
     ```
   - For the second dropdown:
     ```javascript
     dropdown2.visible: #{get("switch") == 2}
     ```

By implementing these changes, the dropdown should retain the last selected values when switching between options. 

[Attachment: yJmtloIjUr7DXb2Xns3lNYujOMD.json]

# Sending Multiple Messages Inside a Matrix

## Problem Description
Users want to configure buttons in a matrix to send multiple MIDI messages upon being pressed. The challenge is to set up the properties correctly to enable this functionality, including toggling button states.

## Solution
To send multiple messages from buttons in a matrix, utilize the `onValue` script directly. Here’s a structured approach:

1. **Define Button Actions**:
   Use the `getIndex(id)` function to determine which button was pressed and send the appropriate messages.

   ```javascript
   var index = getIndex(id);
   if (index === 0) { // First button
       send("midi:my_midi_device", "/control", 1, 15, 2);
       send("midi:my_midi_device", "/control", 1, 47, 67);
       send("midi:my_midi_device", "/control", 1, 15, 2);
       send("midi:my_midi_device", "/control", 1, 47, 3);
   } else if (index === 1) { // Second button
       send("midi:my_midi_device", "/control", 2, 36, 5);
       send("midi:my_midi_device", "/control", 2, 12, 3);
       send("midi:my_midi_device", "/control", 2, 24, 10);
       send("midi:my_midi_device", "/control", 2, 17, 27);
   }
   ```

2. **Toggle Button States**:
   To achieve a toggle effect where pressing a button again deselects it, set the following in the properties:

   ```javascript
   props.onValue = `set('matrix_widget/*', 0, {sync:false})`;
   ```

   This will ensure that all buttons are unselected when one is pressed, maintaining exclusive selection.

3. **Matrix Properties**:
   Ensure your matrix properties are set correctly:

   ```javascript
   var props = {};
   var labels = ["CHECK"];
   var colors = ["purple"];

   props.mode = "toggle";
   props.label = labels;
   props.colorWidget = colors;
   props.address = "/control";
   props.target = "midi:my_midi_device";

   return props;
   ```

By following these steps, you can effectively configure your matrix buttons to send multiple MIDI messages and toggle their states as needed.

# Issue with @{} in JS{{}} Not Working as Expected

## Problem Description
There is confusion regarding the use of the `@{}` syntax in JavaScript within Open Stage Control, particularly when attempting to retrieve values from container widgets. 

## Solution
Container widgets do not hold any values, except for modals (where the value indicates whether it is opened) and panels that contain tabs (where the value indicates the active tab index). This limitation can be misleading, and it may require clarification in the documentation for better understanding.

# Adding Colour Variables to Custom Module in Open Stage Control

## Problem Description
The goal is to implement a color variable in a custom module that changes the color of widgets based on the names of tracks in Reaper. Since Reaper does not provide a dedicated OSC address for track colors, a workaround is needed to reference track names and apply corresponding colors to the widgets, such as faders.

## Solution
To achieve this, you can define a dictionary that maps track names to their respective color codes in your custom module. Here’s a step-by-step approach:

1. **Define a Color Dictionary**:
   Create a JavaScript object that associates track names with CSS color codes.
   ```javascript
   var colors = {
     "track name 1": "#FF0000",
     // Add more track names and their corresponding color codes
   };
   ```

2. **Retrieve Color Codes**:
   Implement a function similar to `articulationFilter` within the `oscInFilter` that retrieves the color code for each track based on its name.
   ```javascript
   // Ensure trackname and tracknumber are defined
   var colorcode = colors[trackname];
   receive("/color/track_" + tracknumber, colorcode);
   ```

3. **Apply Colors to Widgets**:
   Use the retrieved color codes in the widgets' CSS or color properties. This can be done using the OSC syntax documented in the Open Stage Control documentation.

4. **Default Color Handling**:
   If the track name does not match any entry in the color dictionary or if there are not enough tracks, set the widget color to a default value (e.g., black).

By following these steps, you can successfully implement colored faders and other widgets in your OSC project that respond to track names from Reaper.

[Attachment: custom-module.js]  
[Attachment: 2020-01-19_20-24.json]

[Attachment: hht09ESJchuFYSrqzIwHc0TG7Ym.js]

[Attachment: 33s3WPmvBFXWJCRgjuJNS10K2bs.json]

# Assigning Received String Array Elements to Menu Items

**Problem Description**  
The user needs to assign elements from a received string array, sent via OSC from Unreal, to menu items in Open Stage Control. The goal is to enable the selection of a menu item and send the selected item back to Unreal.

**Solution**  
To directly assign the received string array to the menu's values property, use the following advanced syntax:

```javascript
JS{{
var dataFromUnreal = OSC{/data_address}
// javascript processing if needed
return dataFromUnreal
}}
```

If no processing is required for the data from Unreal, you can simplify the assignment by setting the property directly to:

```
OSC{/data_address}
```

This approach allows the menu widget to dynamically reflect the array data received from Unreal.

# OSC Communication for Automation of Faders

## Problem Description
The user is experiencing difficulties in sending automated fader values from Open Stage Control to another software (Unity) after successfully receiving messages from Ableton. They need to resend specific feedback values (such as peak level meters) to Unity but are uncertain about how to implement this functionality.

## Solution
To resend feedback values from Open Stage Control to another software, you can create a custom module. Below is an example of how to set this up:

```javascript
var unityHost = '127.0.0.1'; // Replace with the IP address of the Unity machine if necessary
var unityPort = 6666; // Replace with the appropriate port for Unity

module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        if (address === '/peak_level') { // Adjust the address to match the relevant messages
            // Send the first value of the message to Unity
            send(unityHost, unityPort, '/peak', args[0].value);
        }

        return {address, args, host, port};
    },
}
```

This code snippet listens for incoming OSC messages with the address `/peak_level` and sends the first argument of that message to Unity at the specified host and port. Adjust the address and values as needed for your specific use case.

# How to Force Word Wrap Locations in Labels

To control line breaks in labels within Open Stage Control, you may encounter issues where text is automatically wrapped in an undesired manner. 

## Problem Description
You may want to force specific line breaks in labels, such as:
```
automatic
word wrap
```
However, using HTML line break tags like `<br>` does not work in the label field. This can lead to labels appearing unattractive when they are wrapped automatically.

## Solution
1. To manually enter new lines, use **Shift + Enter**.
2. If this does not work, check the CSS property for the label. If it is set to `white-space: normal;`, it will interpret line breaks as whitespace. Change it to:
   ```css
   white-space: pre-wrap;
   ```
This adjustment will allow for proper line breaks in your labels, resolving the issue.

# Sharing Simple Templates for Beginners

## Problem Description
A user created a simple template for controlling Ableton Live, which includes features such as play, stop, record, loop, metronome, four faders, mute, record, clones, CSS, and MIDI implementation.

## Solution
The provided template can be useful for beginners looking to control Ableton Live with Open Stage Control. 

### Attachment
- [Attachment: Ableton_SimpleCtrl.json]
- [Attachment: sxVaDVQBcJtqBxFLCmJlfX18cJZ.json]

# Using socket.io for Remote Widget Triggering

## Problem Description
The user wants to control local OSC (Open Sound Control) via a remote socket.io server.

## Solution
It is possible to achieve this by using node modules from a custom module with the `nativeRequire()` function. This allows your server to communicate with the OSC server module. Alternatively, you can send OSC messages directly.

# OSC IN Not Triggering Widget's OSC OUT

**Problem Description:**
When using Open Stage Control to manage a control panel for DMX washes and LED strips, OSC messages sent to the application are not triggering the expected OSC output for QLC+. Although the HTTP GET script for WLED is functioning correctly, the OSC message does not activate the corresponding OSC output.

**Solution:**
Widgets in Open Stage Control do not automatically respond to incoming OSC messages. To achieve the desired functionality, you need to create a custom module that explicitly handles incoming OSC messages and triggers the appropriate actions, including sending OSC outputs.

For further assistance, refer to the documentation for creating custom modules. 

[Attachment: filename.ext]

# Referencing an OSC Value in a Script

**Problem Description:**
A user needed to extract a specific part of a string received from an OSC message. The original script was designed to display the text after the second colon in a string format like "Dr-I:UsP1:BDAttc". However, when attempting to use an OSC message as the source, the script returned "undefined".

**Solution:**
To correctly capture and reference the OSC message string in the script, change the event from `OnCreate` to `OnValue`. This ensures that the script triggers and updates the text when the OSC message value changes.

Here is the revised script:

```javascript
// Function to extract the second part of the string
function getSecondPart(str) {
    return str.split(':')[2];
}

// Use the function in OnValue event
var slotValue = getProp('variable_1', 'value');
setVar("text_3", 'Lbl', getSecondPart(slotValue));
```

By implementing this change, the script will now correctly update with the desired value from the OSC message.

# Sending Separated Values from Pad XY to Widget Variables

**Problem Description:**
Users may encounter issues when attempting to send separated values from a Pad XY widget to two different widget variables. The initial approach using advanced syntaxes in the script field may not function as expected.

**Solution:**
To correctly assign the X value from a Pad XY widget to a variable, use the following simplified script in the `onValue` field:

```javascript
var x = value[0];
set('liveTranslation_X', x);
```

This method avoids advanced syntaxes and ensures proper functionality. For more information on scripting in Open Stage Control, refer to the [Scripting - Open Stage Control](https://openstagecontrol.ammd.net) documentation.

# Linking Two Keyboard Widgets in Open Stage Control

## Problem Description
Users may encounter issues when trying to link two Keyboard widgets in Open Stage Control. The goal is to have both keyboards reflect the same key state when one is toggled, but unexpected behavior may occur, such as one keyboard deselecting the other.

## Solution
To link two Keyboard widgets together, assign both keyboards the same `linkId` property. However, due to a known bug, this may not function as intended in certain versions. As a workaround, you can use the following script in the `onValue` property of the first Keyboard widget:

```javascript
var kb_id = getProp(this, 'id'),
    target_kb_id = 'keyboard_2',
    key_value = get(id),
    target_key_id = id.replace(kb_id, target_kb_id);

set(target_key_id, key_value);
```

This script retrieves the ID of the current widget, determines the corresponding key in the second keyboard, and sets its value to match the first keyboard.

If issues persist, restarting the Open Stage Control application may resolve unexpected behavior.

[Attachment: cMXld3ZvjxGoZRoXJRSdeIGld0d.json]

# Matrix VAR Not Updating from Custom Module

## Problem Description
A user is attempting to set up a dynamic matrix of faders that can read data from a custom module in real-time. The goal is to update the fader labels based on values received from a DAW. The user has encountered issues where the fader labels do not update as expected, despite using local variables and OSC listeners.

## Solution
To ensure that the fader labels update correctly, follow these steps:

1. **Correct Variable Syntax**: When defining the variable for the fader label, use the following syntax:
   ```javascript
   text: `VAR_{faderLabel, NA_${$}}`
   ```
   This ensures that the variable is interpreted correctly by the matrix.

2. **Assign Unique IDs**: Each cloned container must have a unique ID to properly set its variable. Modify the properties to include:
   ```javascript
   props.id = 'ctn_' + $;
   ```

3. **Set Variable from Custom Module**: Use the following command in your custom module to set the variable for the fader label:
   ```javascript
   setVar('ctn_1', 'faderLabel', 'your_value_here');
   ```

By following these adjustments, the fader labels should update correctly based on the values received from the custom module.

[Attachment: matrixFadersExamplev1_DMD.json]  
[Attachment: j3Vzk2dep1khZNjTBu5CjdCjGxA.json]

# Setting Up Faders for Kontakt in Open Stage Control

**Problem Description:**
Users have reported issues with setting up volume faders in Open Stage Control (OSC) for Kontakt. While faders for Cubase reflect changes made within the DAW, the faders for Kontakt do not show feedback when adjusted directly in Kontakt. This results in a lack of two-way communication between Kontakt and OSC.

**Solution:**
1. **MIDI Output Configuration:**
   - Ensure that MIDI output is enabled in Kontakt. This allows Kontakt to send automation data to OSC.
   - Refer to the documentation for instructions on how to enable MIDI output in Kontakt.

2. **Using Quick Controls in Cubase:**
   - Assign the Kontakt fader to a Quick Control in the MIDI Remote Control settings of Cubase.
   - Set the Quick Control to "Jump Mode" (R and T settings).
   - In Kontakt, use the automation panel to set the desired fader to "Host Automation" (drag and drop it to the instrument UI).

3. **Assigning Quick Control in Cubase:**
   - In the left zone of the Cubase project menu, enable the Quick Control section if it is not visible.
   - Assign the Quick Control set in the previous step to the corresponding host automation number for Kontakt. You can use the "Learn" feature in the Quick Control section for quicker setup.

By following these steps, you should be able to achieve two-way communication between Kontakt and OSC, allowing for fader feedback in both applications.

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]

# Switch Value with Decimal Ordering

**Problem Description:**
When using a switch with numeric values in Open Stage Control, the values do not maintain ascending order due to their numeric nature. This issue arises when the values are used to set another widget.

**Solution:**
To ensure that the values maintain ascending order, prepend or append a whitespace (or any non-numeric character) to the numeric labels in the switch. Here is the modified script:

```javascript
JS{
var n = @{switch_gmAngleModulo}
        if(n == 2){
                return{
                " 180": 180,
                " 90": 90,
                " 60": 60,
                " 45": 45,
                " 36": 36,
                " 30": 30,
                " 25.71": 25.71,
                " 22.5": 22.5,
                " 20": 20
                }
        }
        if(n == 3){
                return{
                " 120": 120,
                " 60": 60,
                " 40": 40,
                " 30": 30,
                " 24": 24,
                " 20": 20,
                " 17.14": 17.14,
                " 15": 15,
                " 13.33": 13.33
                }
        }
}
```

This adjustment will help maintain the desired order of values when used in conjunction with other widgets.

# Understanding the * Type in Widgets Reference Page

In the Widgets reference page, some properties are indicated with the type *. This signifies a wildcard, meaning these properties can accept a variety of types. There are three specific cases to consider:

1. **On/Off/Back/Forth**: The type is flexible and can be defined by the user based on what the widget sends.
2. **Default/Value**: This depends on the specific widget and must match the widget’s value type (e.g., a number for sliders).
3. **Variables**: These can be arbitrary, but they default to an object type.

This wildcard allows for greater flexibility in defining widget properties.

# MIDI Learn Button Functionality in Open Stage Control

## Problem Description
Users may want to create a button in Open Stage Control that can listen for incoming MIDI messages and automatically save the received message to the button's properties, similar to the MIDI learn functionality found in digital audio workstations (DAWs).

## Solution
To implement a MIDI learn feature for a button, you can use a custom module with the following approach:

1. **Enable Learning Mode**: Create a variable to indicate whether the learning mode is active.
2. **Catch Messages**:
   - Use the `oscOutFilter` function to capture the message from the "learn" button, updating the learning mode variable.
   - Use the `oscInFilter` function to listen for incoming MIDI messages. If learning mode is enabled, utilize the `receive` function to modify the session dynamically using remote control commands or to feed an OSC listener.

This solution requires some familiarity with JavaScript to effectively implement the custom module. For further details, refer to the custom module documentation in Open Stage Control. 

Consider learning JavaScript to better understand the implementation process and enhance your ability to customize Open Stage Control features.

# Input Widget: Opening Numeric Virtual Keyboard on Android Client

**Problem Description:**
Users of the Android client (specifically on devices like the Samsung Galaxy S6 running Android 7) want the numeric virtual keyboard to open when tapping on "Input" widgets. There are concerns about the behavior of the keyboard when the numeric property is enabled, particularly regarding text selection.

**Solution:**
A property has been added to enable the numeric keyboard when the "Input" widget is tapped. To address the issue of text selection behavior when the numeric property is set to true, a workaround can be implemented. Use the following code snippet:

```javascript
setTimeout(function() {
    set('this', undefined, {send: false});
}, 1000);
```

This code will reset the input after a brief delay, allowing for the desired keyboard behavior without the previous autoselection issue. 

[Attachment: Samsung S6 screenshot (the current virtual keyboard)]  
[Attachment: Samsung S6 screenshot (wanted keyboard)]  
[Attachment: GIF - Android phone screen recording]

# Default Values for Faders, Range, and XY-Pads

## Problem Description
Users may need to set default values for widgets such as faders, range sliders, and XY-Pads in Open Stage Control. While setting default values for faders is straightforward, the syntax for range widgets and XY-Pads can be unclear.

## Solution
To set default values for range widgets and XY-Pads, you must provide an array of two values, as these widgets return an array. For example, if you want to set default values for an XY-Pad with a range between 0 and 1, you can use the following syntax:

```json
[
  0.4,
  0.3
]
```

For further assistance, you can utilize the `onValue` property in scripting to log the widget's value using:

```javascript
console.log(value)
```

This will help you understand that range and XY-Pad widgets return an array of two values, while other widgets, like toggle buttons, return a single value (0 or 1).

# Is it possible to "reach" touchCoords with a button?

**Problem Description:**
The user wants to know if it's possible to emulate a click on a button using touch coordinates in Open Stage Control. They have a button with three zones that interact with Cubase and are looking for a way to set the button's value based on touch coordinates from another button.

**Solution:**
It is not possible to emulate a click directly. However, you can use the `setVar()` function to modify variables defined by touch coordinates in the button's script. To do this from another button's script, pass the target button's ID as the first argument to `setVar()` instead of using "this".

# New Keyboard Widget Value Examples

## Problem Description
Users are seeking clarification on the value possibilities for the keyboard widget in version 1.21.1 of Open Stage Control. There is confusion regarding the value property, specifically the types of arrays that can be used to set the values of keys.

## Solution
The keyboard widget accepts two types of values:

1. **Single Key Value**: You can use a `[note, value]` array to set the value of a single key. For example, to turn on note 48, you can use the following script:
   ```javascript
   set('keyboard_id', [48, 1]) // where 1 indicates the key is turned on
   ```

2. **All Keys Value**: You can provide an array of values, where each item corresponds to the state of each key on the keyboard. This array represents the stored values for all keys.

These functionalities allow for dynamic interaction with the keyboard widget, facilitating scripting and real-time updates.

**Note**: There is a suggestion for a feature that would allow keys pressed on an external keyboard to light up on the widget without considering the velocity value, but this feature is still under consideration and has not yet been implemented. 

[Attachment: filename.ext]

# Selecting Multiple Widgets in Open Stage Control

## Problem Description
Users may find it cumbersome to select multiple widgets within a panel in Open Stage Control. The default method requires holding the `Ctrl` key to select each widget individually. A more efficient way to select multiple widgets is desired.

## Solution
To select multiple widgets at once, follow these steps:

1. **Select All Siblings**: Click on one widget and press `Ctrl + A` to select all sibling widgets within the same panel.
   
2. **Expand Selection**: You can also expand your selection by holding the `Shift` key and dragging over the list of widgets in the project tree.

These methods provide a more efficient way to manage multiple widgets without needing to select them one by one.

For additional functionality, consider the following suggestions:
- Implement a feature where dragging a selection box with the mouse selects all widgets that are enclosed or touching the box.
- Allow filtering in the project tree to select widgets based on their names (e.g., typing "solo_button_" to select all buttons starting with that prefix).

These enhancements could improve the user experience significantly. 

[Attachment: gif_example.gif] (attachment reference missing)

# Connection Issue and Session Optimization

**Problem Description:**
Users may experience connection interruptions and slow performance when loading large sessions in Open Stage Control, particularly when the session contains numerous tabs and images. A specific case involved a modal with multiple nested tabs, leading to performance issues and a large session file size.

**Solution:**
To optimize large sessions and improve performance, follow these steps:

1. **Remove Base64 Images:**
   - Replace all base64 images with regular image files stored in a folder next to the session file. This reduces the session file size significantly.

2. **Use Relative Image URLs:**
   - When linking images in CSS, use relative paths. For example, if your images are in a folder named "imagesfolder" next to the session file, use:
     ```css
     background-image: url("imagesfolder/myimage.png");
     ```
   - Avoid using absolute paths that include your local file system structure.

3. **Consolidate CSS Rules:**
   - Move all CSS rules that apply to multiple widgets into a theme file. This helps maintain a cleaner and more manageable codebase.

4. **Avoid Widget Duplication:**
   - Instead of duplicating widgets across tabs, consider reusing the same widget and modifying its behavior based on a switch selector. This can be achieved using advanced syntaxes, scripting, or custom modules.

5. **Hide Modal Tabs:**
   - If you encounter issues with hiding modal tabs, ensure your CSS is correctly targeting the elements. For example:
     ```css
     .popup-title {
         display: none;
     }
     ```
   - Verify that there are no conflicting styles that might prevent the tabs from being hidden.

By following these optimization strategies, you can enhance the performance of your Open Stage Control sessions and reduce connection issues.

[Attachment: session_link]

# SOLVED: Setting prop quantity of button matrix with custom var resets buttons

**Problem Description:**
When using a custom variable in the quantity field of a matrix of cloned buttons, all buttons reset, losing their colors and labels previously set by custom variables. This issue arises when the quantity is changed, leading to performance issues when using a custom variable in the visible field instead.

**Solution:**
A patch is being developed to prevent the loss of custom variable states when adjusting the matrix's content or quantity. In the next version, changing the quantity will preserve the state of the matrix's children that are not removed by the quantity change. 

[Attachment: filename.ext]

# Linking a Module's CSS to Another's Script

**Problem:**
A user needs to access the touch state of a multixy script to modify the z-index of another module, which is controlled through its CSS field.

**Solution:**
To connect the two entities, follow these steps:

1. Create a variable widget in your Open Stage Control interface.
2. Use the `set()` function in the multixy script to change the value of the variable widget.
3. Reference the variable in the CSS field of the other module using the syntax `@{variable_id}`.

This approach allows you to dynamically link the touch state to the CSS properties of another module.

# How to Set the Value of a Switch via a Custom Module

To set the value of a switch in Open Stage Control using a custom module, you can utilize the `receive()` function to send an OSC message directly to the client.

## Solution

Use the following syntax:

```javascript
receive('/switch_address', preArg1, preArg2, value)
```

This method is preferred as it directly communicates with the widget's address, making it more efficient. Avoid using the `send()` function to send messages to OSC's own port, as this unnecessarily prolongs the message's route.

# Receive MIDI Feedback for Button State in Open Stage Control

## Problem Description
Users want to receive feedback on toggle buttons in Open Stage Control (OSC) when controlling functions in Cubase. Specifically, when a button is toggled in Cubase, the corresponding button in OSC should reflect this change.

## Solution
To achieve MIDI feedback from Cubase to OSC, follow these steps:

1. **Setup Generic Remotes**: Configure generic remotes or use the remote MIDI API in Cubase to send data to a designated port that OSC listens to. For this example, we will use the port named `oscDataFromCubase`.

2. **Listen for OSC Messages**: In your OSC custom module, implement a function to filter incoming OSC messages. Use the following code snippet:

    ```javascript
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        if (port === "oscDataFromCubase") {
            receive("/toggleButtonMute", args[0].value);
        }

        // Return data if you want the message to be sent
        return {address, args, host, port};
    },
    ```

3. **Configure OSC Template**: In your OSC template, set up an OSC listener for the button value. Use the following format:

    ```
    OSC{/toggleButtonMute, 0}
    ```

   This will listen for messages sent to the address `/toggleButtonMute`, which you defined in the custom module.

4. **MIDI Data Transmission**: Ensure that the button in the OSC template sends MIDI data back to Cubase, allowing it to update the button state based on user interactions.

This setup may require additional configuration to ensure correct communication between Cubase and OSC, particularly with the Cubase Remote API.

[Attachment: filename.ext] (attachment reference missing)

# Extracting Values from an Array to Create Another Array

**Problem Description:**
The goal is to create a new array of indices by removing specific values from an existing array of indices. The initial array consists of 336 button indices, and there is a smaller array containing indices of folder buttons. The challenge is to achieve this without manually copying or typing numbers.

**Solution:**
A more straightforward way to achieve this is by using JavaScript's array methods. The following code demonstrates how to create the desired array of indices by filtering out the unwanted values:

```javascript
const indexRep = [0, 6, 12, 33, 60, 61, 63, 84, 103, 118, 133, 142, 149, 152, 155, 164, 191, 209, 230, 244, 272, 291, 297, 304, 312, 317];

// Creates an array of indices from 0 to 335 and filters out the indices in indexRep
const tousIndex = Array(336).fill(0) // Creates an array with 336 zeros
    .map((el, i) => i) // Maps each zero to its respective index
    .filter(i => !indexRep.includes(i)); // Filters out indices present in indexRep

console.log(tousIndex); // Outputs the final array of indices
```

This approach utilizes `Array.fill()`, `map()`, and `filter()` methods to efficiently create the desired array without the need for nested loops or manual deletions.

# Sessions/Clients Communication in Open Stage Control

## Problem Description
In a scenario where multiple iPads are connected to the same server, each iPad operates with distinct sessions that control different parts of a program and send separate OSC messages. A requirement arose to display a modal dialog on one iPad while posting a different modal on the other iPads, without affecting the main program or OSC communication. The challenge lies in the fact that widget IDs and variable namespaces are treated as separate across client sessions, complicating the synchronization of modal dialogs.

## Solution
The recommended approach to achieve the desired behavior is to utilize a common OSC address for the modal dialogs. By creating a shared OSC address, such as `/internal/modal_posted`, all modals can synchronize their states across different clients. This method allows for the activation of modals on all clients without needing to manage individual IDs or variables.

Additionally, if more complex behavior is required, implementing a custom module on the server can help manage client sessions and their interactions. Below is a sample code snippet to illustrate how to track connected clients and manage modal dialogs:

```javascript
// Keep track of connected clients vs loaded session
var clientSession = {}

app.on('sessionOpened', (data, client) => {
    clientSession[data.path] = client.id
})

module.exports = {
    oscOutFilter: function(data) {
        var {address, args, host, port, clientId} = data

        if (data.address === '/message/that/triggers/confirm/modal') {
            // Activate modal in every client
            receive('/internal/modal_posted', 1)

            // Optionally handle different modals for different clients
            for (var session in clientSession) {
                var id = clientSession[session]

                if (session.includes('sessionA.json')) {
                    receive('/internal/modal_posted', 1)
                } else {
                    // Different modal for other clients
                    receive('/screen/lock', 1)
                }
            }

            // Bypass the OSC message
            return
        }

        return data
    }
}
```

This solution ensures that modal dialogs are synchronized across all clients while maintaining the flexibility to customize behavior based on specific client sessions.

# Saving "Memorize" States to File in Open Stage Control

**Problem Description:**
Users want to persistently save the state of their panels (such as faders, program changes, and buttons) in Open Stage Control, as the current "memorize" functionality only retains states in RAM for the session. Upon restarting, these states disappear. The goal is to save and load states from specific files for multiple panels.

**Solution:**
To achieve persistent state saving and loading, users need to utilize JavaScript and custom modules in Open Stage Control. Here are the steps:

1. **Learn JavaScript**: Basic knowledge of JavaScript is required to implement the functionality.
   
2. **Use Custom Modules**: Implement a custom module to handle state saving and loading. This module should be loaded using the server's `custom-module` option, where you can specify the state file.

3. **Refer to Documentation**: For detailed guidance on creating and using custom modules, refer to the Open Stage Control documentation [here](https://openstagecontrol.ammd.net/docs/custom-modules).

4. **Example Code**: You can start with the provided example in the attachment [Attachment: state-cm.js].

5. **State File Management**: Create separate files for each panel to save and load their respective states.

For further assistance, refer to the discussion on storing and loading states [here](https://openstagecontrol.ammd.net/docs/storing-loading-states).

[Attachment: setGetState.json]  
[Attachment: meFyYU8I3NReqc9sWMa6mo5KPcK.json]

# Modifying Knob Color in a Matrix Based on Value

## Problem Description
In a matrix, the objective is to adjust the green color of knobs dynamically based on their value, specifically to be twice the knob's value (to reach a maximum of 254). Attempts to implement this using the `get()` function or the `@{}` syntax resulted in complications, particularly in the context of matrix properties.

## Solution
To achieve the desired effect of modifying the knob's color based on its value, utilize the following approaches:

1. **Using the `@{}` Syntax**:
   You can directly set the `colorWidget` property in the matrix using the `@{}` syntax. For example:
   ```json
   {
     "range": { "min": 0, "max": 127 },
     "colorWidget": "rgba(0, #_{@_{this}} * 2, 0, 1)"
   }
   ```

2. **Using JavaScript Block**:
   If you prefer to use a JavaScript block, you can define your properties within a `JS{{}}` block. However, keep in mind that `get()` only works within the `script` property. Here’s how you can set it up:
   ```javascript
   JS{{
   var props = {};
   let Index = parseInt($) + 1;
   props.id = "couleur_" + Index;
   props.range = {"min": 0, "max": 127};
   props.colorWidget = "rgba(0, get('KQC#{$+1}') * 2, 0, 1)";
   return props;
   }}
   ```

3. **HSL and HSLA Alternatives**:
   You can also use HSL or HSLA color formats for a similar effect:
   ```json
   {
     "range": { "min": 0, "max": 127 },
     "colorWidget": "hsl(102, #_{@_{this}}%, 50%)"
   }
   ```
   or
   ```json
   {
     "range": { "min": 0, "max": 127 },
     "colorWidget": "hsla(102, #_{@_{this}}%, 50%, 0.9)"
   }
   ```

### Notes
- Advanced syntax blocks can be passed to children without being resolved at the matrix scope by adding an underscore before the opening bracket (e.g., `#_{}`).
- Ensure to understand when to use `@{}` for properties and when to use `JS{{}}` for scripting, as they serve different purposes in the context of matrix properties.

For further reference, see the attached example file demonstrating these concepts: [Attachment: matrix_advanced_syntax.json].

[Attachment: wYPJ8cftkDJ8QIzFRDGcIkRPlcs.json]

# Adding an Image to an Encoder in Open Stage Control

## Problem Description
Users may want to add an image to an encoder in Open Stage Control that rotates as the encoder is turned. This requires a method to link the encoder's value to the image's rotation.

## Solution
To achieve this, follow these steps:

1. **Retrieve the Rotation Angle**: Use the `onValue` script to get the encoder's rotation angle. Normalize this angle and store it in a custom variable:
   ```javascript
   // rotation angle is available as locals.angle
   setVar(this, 'angle', locals.angle / 360);
   ```

2. **Update CSS for Image Rotation**: In your CSS, use the normalized angle to rotate the image. Replace the `@{this}` statements with:
   ```css
   background-image: url(../assets/encoder.png);
   transform: rotate(#{VAR{angle}}deg);
   ```

3. **Set the Variable in the Encoder's Script**: In the encoder's script, set the variable for rotation:
   ```javascript
   var index = locals.angle; // Use locals.angle directly
   set("variable_1", index);
   ```

This setup will allow the image to rotate based on the encoder's position. Ensure that you adjust the variable handling as necessary to avoid unintended values.

By following these steps, you can successfully implement an image that rotates with the encoder in Open Stage Control. 

[Attachment: encoder.png]

# Getting Track Names from Logic Using Mackie Control Protocol

## Problem Description
Users have encountered difficulties retrieving track names from Logic Pro using the Mackie Control Protocol. The main issues include:
1. The starting position for slicing track names varies based on the track number, leading to incorrect extraction.
2. The ending of track names is inconsistent due to the presence of the phrase "channel strip," which needs to be removed.

## Solution
To correctly extract track names from Logic Pro, follow these steps:

1. **Slice the Track Name**: Use the following code snippet to handle varying track name lengths:
   ```javascript
   // Update text widget
   let trackName = locals.text.slice(72, 101).join("");
   trackName = trackName.replace(/^"|\s+$/g, ""); // Remove leading quotes and trailing spaces
   trackName = trackName.replace(/ channel strip$/, ""); // Remove "channel strip" at the end
   set("lcd_MODIFIED", trackName);
   ```

2. **MIDI Setup**: Ensure that the Mackie Control Pro is added as a control surface in Logic with the appropriate MIDI IN/OUT ports configured.

3. **Character Limit**: Be aware that track names should not exceed 31 characters to ensure proper display.

By implementing this code and setup, users should be able to successfully retrieve and display track names from Logic Pro on their Open Stage Control interface.

[Attachment: Mackie lcd.json]  
[Attachment: LogicTrackName.json]  
[Attachment: jscVGd4g3p12oThR6wglb6gKLGS_1.json]

[Attachment: 9PBK8zcCJAnzZVwmnRzfUiiVAo4_1.json]

# Hiding a Tab's Label Area in Open Stage Control

**Problem:**
Users may want to hide the label area of tabs in a panel, especially when switching between tabs using external controls, making the tab names unnecessary.

**Solution:**
To hide the tab's label area, add the following CSS to the container:

```css
.panel > .navigation {
  display: none;
}
.panel {
  top: -1rem;
}
```

Note that hiding the root navigation will disable the sidepanel toggle, but the sidepanel can still be accessed using the F10 key.

# XY Pad Receiving Variables from Another Widget

**Problem Description:**
Users may encounter issues when trying to set up an XY pad in Open Stage Control that receives variable values from other widgets. Specifically, the goal is to have buttons set specific values to variables (`varPadX`, `varPadY`) when toggled, and then use these variables to send MIDI Control Change (CC) data.

**Solution:**
1. **Correct Variable Assignment:**
   Instead of using `set('varPadX', xValue = 1)`, which is confusing, use:
   ```javascript
   set('varPadX', 1)
   ```

2. **MIDI Sending Correction:**
   Modify the MIDI sending command to ensure it has the correct number of arguments. The correct format for sending MIDI data should only include three arguments after the `/control` command:
   ```javascript
   send('midi:osc', '/control', 1, padx, x)
   send('midi:osc', '/control', 1, pady, y)
   ```
   Remove the second-to-last argument to comply with the expected format.

By implementing these changes, the XY pad should function correctly, receiving values from the buttons and sending the appropriate MIDI CC data.

[Attachment: whJVpvNX0OSI6rBOQ23dKi0k7G0.json]

# How to Connect External Devices (Smartphones, Tablets, etc.) to Open Stage Control

**Problem Description:**
Users may encounter issues when trying to connect external devices, such as tablets or smartphones, to Open Stage Control. Common symptoms include receiving error messages like "ERR_CONNECTION_REFUSED" when attempting to access the server from these devices, despite being on the same network as the computer running Open Stage Control.

**Solution:**
1. **Use the Correct IP Address:**
   - When the server starts, it provides two addresses:
     ```
     http://127.0.0.1:8080
     http://192.168.1.20:8080
     ```
   - Use the second address (the one that is not `127.0.0.1`) on your external device, as `127.0.0.1` is the localhost address and only works on the computer running the server.

2. **Check URL Protocol:**
   - Ensure that you are using the correct protocol in the URL. It should start with `http://`. If it appears as `https://`, it may cause connection issues unless the `use-ssl` option is enabled.

3. **Firewall and Network Settings:**
   - Verify that no firewall software or network settings are blocking access to the computer from your local network.

4. **Network Configuration:**
   - Ensure that the external device is connected to the same network as the computer running Open Stage Control. If there are multiple routers or access points, confirm that the device is on the correct network.

5. **Troubleshooting:**
   - If you continue to experience issues, consider resetting your network settings or checking for any additional routers that may be affecting the connection.

By following these steps, you should be able to successfully connect your external devices to Open Stage Control. 

**Note:** If you encounter persistent issues, check for any additional network configurations that may be affecting connectivity. 

[Attachment: filename.ext]

# Optimizing Widget Management in Open Stage Control

## Problem Description
When working with large templates in Open Stage Control, there is a need to optimize memory and CPU usage, especially when hundreds of widgets are created dynamically through OSC listeners. Users are uncertain whether to continue using OSC listeners or to store widgets in memory and utilize the `/EDIT` command to modify their properties.

## Solution
1. **Use OSC Listeners**: It is advisable to utilize OSC listeners to manage widget updates. This method allows for efficient communication between the client and server without significant network overhead.

2. **Utilize the `/EDIT` Command**: The `/EDIT` command can be employed to modify existing widgets or their content dynamically. For instance, you can populate a modal widget when it opens and clear it when it closes.

3. **Regulate Widget Count**: To enhance performance, consider regulating the number of widgets displayed in the client. Show widgets only when necessary and remove them when not in use. This approach minimizes resource consumption.

4. **Cloning Objects**: Using cloned objects can also improve performance, as it reduces the need to create new widget instances repeatedly.

By following these strategies, you can effectively manage widget performance in Open Stage Control while maintaining a responsive interface.

[Attachment: filename.ext] (attachment reference missing)

# Reducing Syntax in Matrix Props Field

**Problem Description**  
When configuring the `props` field of a matrix in Open Stage Control, a user seeks a more efficient way to determine the `colorStroke` property based on multiple index values. The initial approach using multiple logical OR conditions becomes cumbersome with many entries.

**Solution**  
To simplify the syntax, you can utilize the `includes()` method with an array of index values. Here’s how to implement it:

```javascript
const indexes = [0, 6, 12, 18, 24, 30, 36, 42, 48, 54, 60];
props.colorStroke = indexes.includes($) ? 'white' : 'red';
```

This approach checks if the current value `$` is present in the `indexes` array and assigns the `colorStroke` property accordingly. This method is efficient and scalable for larger sets of values.

# Displaying Local IP Address in Open Stage Control

**Problem Description:**
Users may want to display the local server's IP address in the Open Stage Control UI. Additionally, there may be a need to list multiple IP addresses when multiple network interfaces are in use.

**Solution:**
To display the server's URL (IP address) in an info text field, use the following JavaScript syntax in the text's value property:

```javascript
#{globals.url}
```

If you need to retrieve multiple IP addresses from the server, you can use a custom module. The function `settings.appAddresses()` will return an array of HTTP addresses. You can then send this array to a widget using the `receive()` method.

[Attachment: filename.ext]

# Using One Fader to Control Multiple Faders

**Problem Description:**
Users may want to control the values of multiple faders using a single fader to create a dynamic audio mixing experience. For example, adjusting a "Distance" fader should inversely affect the values of other faders representing different microphone inputs.

**Solution:**
You can achieve this by utilizing Open Stage Control's OSC capabilities. Here’s a summarized approach:

1. **Set Up the Faders:**
   - Create your individual faders for "Close," "Main," and "Room" microphones.
   - Create a custom "Distance" fader.

2. **Implement Scripting:**
   - In the `onValue` script of the "Distance" fader, invert the current value to control the "Close" mic. This can be based on the maximum CC value (e.g., 127).
   - Use the `linkId` property to connect the "Distance" fader to the other faders. Assign a unique name to the `linkId` of the "Distance" fader (e.g., `>>` for master) and use `<<` for the other faders (making them slaves).

3. **Example Session:**
   - A session file demonstrating this setup is available: [Attachment: mic_distance.json].
   - This file includes the necessary configurations to implement the described functionality.

By following these steps, you can effectively control multiple faders with a single fader in Open Stage Control.

[Attachment: imclLmefEI1gGADwXAuSVr3nQCM.json]

# Using Open Stage Control with a Redundant Rig Setup

**Problem Description:**
When setting up a redundant computer system for live performances, users may want to utilize Open Stage Control on an iPad to control an Ableton setup. However, Open Stage Control requires a server to run on one of the computers, which undermines the redundancy of the setup. Users are exploring alternatives to maintain a reliable control interface without relying on a primary computer.

**Solution:**
The server for Open Stage Control cannot run directly on an iPad. A reliable workaround is to use a Raspberry Pi as a dedicated OSC server. This allows the iPad to connect to the Raspberry Pi, maintaining the functionality of the control interface while preserving the redundancy of the rig.

# Structuring a Timer with Clones in Open Stage Control

## Problem Description
When implementing a timer within a cloned looper control in Open Stage Control, there are concerns regarding variable clashes, structuring of if statements, and canceling the `setInterval` timer from an external button. The current implementation works inconsistently, and there is a need for a more reliable structure.

## Solution
1. **Variable Isolation**: Variables declared with `var` in scripts are isolated to their respective scripts, so there is no risk of variable clashes between clones.

2. **Structuring If Statements**: The current structure of the if statements is generally acceptable. However, ensure that the logic for handling the timer and the conditions for changing the control's state are clear. For example, if you want the interval to continue running after reaching the `GoGrey` threshold, ensure that the conditions are ordered correctly.

3. **Canceling the Timer**: To cancel the `setInterval` timer from an external button:
   - Implement a script widget that listens for specific values from buttons. For example:
     ```javascript
     if (value == 'turnGrey') {
       // Start setInterval
     } else if (value == 'cancelGrey') {
       // Clear setInterval
     }
     ```
   - Each button should send a specific value (e.g., "turnGrey" to start the timer and "cancelGrey" to stop it).

4. **Debugging**: Utilize `console.log()` statements to debug and understand the flow of your script. For example:
   ```javascript
   console.log(getProp('this', 'id') + ' says: starting loop');
   ```

5. **Example Implementation**:
   ```javascript
   if (value == 1) {
     // Set timer to 0
     set(getProp("parent", "id") + "Timer", 0);
     var GoGrey = (get("MaxTime") - 60);
     
     // Start LOOP TIMER
     var timerId = setInterval(function() {
       var parent = getProp("parent", "id");
       var CurrentTime = get(parent + "Timer");
       set(parent + "Timer", CurrentTime + 1);
       
       if (CurrentTime > GoGrey) {
         set("Looper" + getProp("parent", "variables").n + "ActiveColor", "#666");
       }
       if (CurrentTime == get("MaxTime")) {
         clearInterval(timerId);
       }
     }, 1000);
   } else {
     set(getProp("parent", "id") + "Timer", 0);
   }
   ```

By following these guidelines, you can create a more reliable timer within your cloned looper controls in Open Stage Control. 

[Attachment: filename.ext]

# Switching Between Tabs with a Menu

**Problem Description:**
Users want to know how to use a menu widget in Open Stage Control to switch between tab elements and control their visibility.

**Solution:**
To achieve tab switching with a menu widget, follow these steps:

1. **Using the Menu Widget:**
   - The menu widget can be configured to show or hide tab elements and navigate to the selected tab automatically.

2. **Setting Tab Visibility on Startup:**
   - To hide all tabs except one at startup, configure the visibility settings of the tab elements accordingly.

3. **Triggering Buttons with the Menu:**
   - You can also set the value of any widget, including buttons, using the menu widget in a similar manner.

For detailed implementation, refer to the Open Stage Control documentation on widget configuration. 

[Attachment: filename.ext]

# Toggle Widget Visibility with Dropdown

**Problem Description:**
Users may want to change a widget's visibility and interactivity based on a value selected from a dropdown menu in Open Stage Control. The exact syntax and implementation details can be unclear.

**Solution:**
There are two reliable methods to achieve this:

1. **Using Advanced Syntax in the Visibility Property:**
   You can directly write a JavaScript condition in the visibility property of the widget. Here’s an example:
   ```javascript
   JS{
   if (@{dropdown_id} === 0) {
     return false;
   } else {
     return true;
   }
   }
   ```

2. **Using Scripting and Custom Variables:**
   Create a custom variable to control visibility. Set the variable in the visibility property and manage it through the dropdown's `onValue` script. Here’s how to do it:
   - In the visibility property, write:
     ```
     VAR{visible, true}
     ```
   - In the dropdown's `onValue` script, use:
     ```javascript
     if (value === 0) {
       setVar('widget_id', 'visible', false);
     } else {
       setVar('widget_id', 'visible', true);
     }
     ```

Both methods provide effective ways to control widget visibility based on dropdown selections.

# Pointer Events Control Based on Toggle Button Value

**Problem:**
A fader is set to be non-reactive using CSS (`pointer-events: none;`). However, there is a need to toggle its interactivity based on the value of a toggle button.

**Solution:**
You can achieve this by using the advanced property syntax in your CSS. Here’s how to implement it:

```css
.fader {
  JS{{
    // @{toggle_id} returns the value of the widget with id "toggle_id"
    // and updates automatically
    if (@{toggle_id} == 0) return "pointer-events:none;";
  }}
}
```

This code will make the fader non-reactive when the toggle button is off and reactive when it is on.

# Global Variable JSON Filename

**Problem:**  
Users need a way to retrieve the filename of the currently loaded JSON file in Open Stage Control to simplify the process of using `loadJSON(global...)`. If the JSON filename changes, it requires manual updates in the code.

**Solution:**  
You can obtain the filename of the currently loaded JSON file using the following code snippet:

```javascript
app.on('sessionOpened', (data, client) => {
    var sessionPath = data.path;
});
```

This will allow you to dynamically access the session path whenever a session is opened.

# Loading Multiple Images into the Image Widget

**Problem Description:**
Users may want to overlay multiple images with transparency in the Image Widget, but the widget does not support loading multiple image paths directly, such as through an array or combined paths.

**Solution:**
To achieve the effect of overlaying multiple images, you can use HTML and CSS. Here’s a basic implementation:

```html
<!-- HTML -->
<div class="overlay"></div>
```

```css
/* CSS */
.overlay {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  background: /* specify your images or colors here */;
}
```

This method allows you to layer images or colors dynamically by adjusting the CSS properties.

# Accessing Widget Properties from the Console

**Problem Description**  
Users may wonder if the console in Open Stage Control is solely for outputting logs or if it can also be used for testing code, specifically to access the current value of a widget.

**Solution**  
The console functions similarly to a widget's `onValue` script and supports various scripting functions. To access the value of a widget, use the following command:

```javascript
get('mywidget')
```

Note that advanced syntaxes, such as `@{}`, are not supported in the console.

# Creating and Filling a Global Array

**Problem:**
Users may encounter issues when attempting to fill a global array within a script widget in Open Stage Control. Specifically, the `.push()` method may not function as expected within a loop.

**Solution:**
Ensure that you are using standard quotes and properly declaring your loop variable. Here’s a corrected example:

```javascript
global.someArray = ["black"]; // Use standard quotes
for (var i = 0; i < 10; i++) { // Declare the variable 'i'
    global.someArray.push("black");
}
```

By addressing these issues, the script should work correctly and populate the global array as intended.

# Determination of Multixy Behavior Style for Compressor

**Problem Description:**
Users are seeking to organize the behavior of a compressor control interface in Open Stage Control. Specifically, they want to implement a behavior where the first control point follows the law \( y = x \) and the second control point is fixed at \( x = 1 \). Additionally, there are issues with initializing variables in the compressor setup.

**Solution:**
1. **Behavior Implementation:**
   - Use JavaScript or CSS to elegantly manage the behavior of the compressor controls.
   - Ensure that the "ratio" widget is placed after the multixy widgets to avoid initialization issues.

2. **Initialization Fix:**
   - A simple solution was found that minimizes the need for scripts and calculations, effectively resolving the initialization problem.

3. **Example Files:**
   - Users can refer to the following example files for guidance:
     - [Attachment: comp_example.json]
     - [Attachment: comp_21.json]
     - [Attachment: svg4H5bREygXkN9fxYRkFeaefdI.json]
     - [Attachment: 3BXcgBl6A11a2iRUdHkEXm3mF1.json]
     - [Attachment: wDVROqC0FYB5BJBDubZK7vGxPHG.zip]
     - [Attachment: tBTwMcdzQ26cpzVZEyQfjc96iYX.json]

These resources should assist in setting up the compressor behavior as intended.

[Attachment: niIoa8ol7VesZ9dbKHisbJQmQZJ.json]

# Run External File from Button

**Problem Description:**

Users may want to configure a button in Open Stage Control to load a file (e.g., a .txt file) from a specific folder.

**Solution:**

As of version 1.8, Open Stage Control allows the use of native Node.js modules from the custom module, enabling the loading of files. To implement this functionality, you will need to utilize Node.js capabilities. Here’s a brief overview of the steps:

1. Use the `nativeRequire()` function to access Node.js modules.
2. Refer to the Node.js documentation for reading files: [Reading Files with Node.js](https://nodejs.dev/learn/reading-files-with-nodejs).

Additionally, you can use the "file" widget type under "basics." This widget opens a file browser when clicked and sends the selected file's path (if it has at least one target). You can then use this path in your custom module as demonstrated in the provided example.

For a minimal example of how to wait for a widget to send a file path and return the content, please refer to the example provided in the forum (attachment reference missing).

# Launcher GUI: Zoom Functionality Issue

**Problem Description:**
Users may experience issues with zooming in and out of the launcher GUI using the "command" + "+" or "command" + "-" keyboard shortcuts.

**Solution:**
The zoom functionality can be achieved using the following methods:
- Use **Ctrl + Scroll** or **Command + Scroll** to zoom in and out.
- This issue has been resolved in version **1.9.6**. Ensure your application is updated to this version for improved zoom functionality.

# OSC Switching Tabs Quicker (Delays)

**Problem:**
Users have reported significant delays when switching between tabs in Open Stage Control (OSC), particularly as the session file grows larger. This lag may be caused by redundant CSS and multiple root widgets within the session.

**Solution:**
1. **Reduce Redundant CSS:**
   - Consolidate repeated CSS rules into a single theme file. This will decrease the overall size of the session file and improve performance.
   - Use CSS custom classes for styling instead of embedding styles directly in each widget.

2. **Optimize Widget Structure:**
   - Ensure that only one root widget exists in the session. Multiple root widgets can lead to increased processing time when switching tabs. Remove any unnecessary root widgets, especially those created through copy-pasting.

3. **Eliminate Dummy Widgets:**
   - Replace dummy buttons used for backgrounds with CSS background properties. This will free up space and reduce processing overhead.

4. **Further Optimization:**
   - After implementing the above changes, continue to look for opportunities to streamline the session file. Aim to use class declarations instead of individual styles for widgets to further reduce file size.

By following these steps, users can significantly improve the responsiveness of their OSC sessions. 

**Attachments:**
- [Attachment: Dillons OSC v1.1.json]
- [Attachment: Dillons OSC v1.3.json]
- [Attachment: THEME_DMD.css]

# Fader Value Synchronization with MIDI CC

**Problem Description:**
Users want to synchronize a fader in Open Stage Control to receive and reflect MIDI Control Change (CC) messages, specifically CC119, from a DAW like Cubase. The goal is to ensure that the fader updates its position based on the incoming MIDI CC values.

**Solution:**
To achieve this, follow these steps:

1. **MIDI Remote Settings:**
   - If using C12 MIDI Remote, set the control Value Mode to "Jump" (default is "Scaled").

2. **Create Virtual MIDI Ports:**
   - Create two virtual MIDI ports, for example, "fromOSC" and "toOSC".
   - Connect the Cubase MIDI output to "toOSC" and the input to "fromOSC".

3. **Server MIDI Configuration:**
   - In the server MIDI configuration properties, add the following line:
     ```
     oscMIDI:toOSC,fromOSC
     ```

4. **Fader Properties:**
   - In the fader properties, set the target to:
     ```
     midi:oscMIDI
     ```

5. **Generic Remote Configuration (if applicable):**
   - If using Generic Remote, ensure the command flags are set to R (Receive) and T (Transmit).
   - Map the desired parameter in Cubase to ensure it sends/receives the correct MIDI messages.

6. **MIDI Sends:**
   - For monitoring MIDI messages generated from a VST, ensure the VST has an option to send MIDI out.
   - Use MIDI tracks in Cubase and set one "MIDI Sends" output to OSC. This option is not available in Instrument Tracks and must be added to each MIDI track.

7. **Quick Control Mapping:**
   - Alternatively, map the GUI control of your VST to a quick control for dynamic updates when selecting different tracks.

By following these steps, the fader in Open Stage Control should synchronize correctly with the MIDI CC messages from Cubase, allowing for effective control and feedback. 

[Attachment: image]

# How to Change Clone's Properties Dynamically

When trying to change properties of a cloned widget dynamically based on another widget's value, you may encounter issues with syntax.

## Problem Description
You need to dynamically update some properties of a clone widget that refers to another widget's value. Using the syntax directly may not yield the expected results due to formatting issues.

## Solution
To correctly set properties dynamically, ensure that the values are properly quoted. Here are two reliable methods:

1. **Enclose the @{} block in quotation marks**:
   ```json
   {
     "colorWidget": "red"
   }
   ```

2. **Use a JavaScript block to define the properties**:
   ```javascript
   JS{{
     return {
       colorWidget: @{widget_id}
     }
   }}
   ```
   In this context, the @{} block is treated as a JavaScript variable, which automatically adds quotation marks around strings.

**Note**: Writing `@{widget_id}` is equivalent to `@{widget_id.value}`.

For further reference, you can check the computed value in the inspector by clicking on "props". This will help you verify the correct syntax and values being used.

[Attachment: jrHyzuqR4joorngKj25iEm7rwM1.json]

# Clogging the OSC Message Buffer

### Problem Description
When sending a high volume of OSC messages over UDP, such as during XY movements, the message buffer may become clogged, leading to delays in processing on the receiving end. This raises concerns about the efficiency of OSC compared to MIDI, as well as potential solutions to mitigate the issue.

### Solution
1. **Increase UDP Buffer Size (Linux)**: If you are using a Linux system, consider increasing the system's UDP buffer size. This can help accommodate a higher volume of messages without clogging the buffer.
   
2. **Separate OSC Ports**: Another approach is to open a secondary OSC port dedicated to sending clock data. This can help isolate the clock messages from other data, reducing the likelihood of message congestion.

3. **Message Processing**: Ensure that the messages are being processed efficiently on the receiving end. For instance, if using a synchronous processing method (such as in an Ableton Live Remote Script), this may contribute to delays. Testing is recommended to identify if clock messages are dropped during high traffic from other controls (e.g., faders).

By implementing these solutions, you can improve the reliability of OSC message transmission and processing.

# Display a List in a Text Field

**Problem:**
A user wants to replace the displayed value of a knob in Open Stage Control with a specific list of values. The knob is set to a speed sync with a range of {min: 0, max: 9} and steps set to 10.

**Solution:**
To achieve this, set the knob's script property as follows:

```javascript
var division = ["8/1", "4/1", "2/1", "1/1", "1/2", "1/4", "1/8", "1/16", "1/32", "1/64"];
set("text_id", division[value]);
```

For additional details on scripting, refer to the documentation: [Open Stage Control Scripting](https://openstagecontrol.ammd.net/docs/widgets/scripting/).

# Fix Modal Popup Position Relative to Modal

## Problem Description
Users have reported issues with the positioning of modal popups relative to their trigger buttons. The popups can jump around on different screen sizes, and there is a desire for the ability to position the popup relative to the modal without needing constant adjustments.

## Solution
Using a simple panel widget instead of a modal can resolve the positioning issue. The visibility of the panel can be controlled by a toggle button, allowing for precise placement without the overlay effect of a modal. 

Here are two example sessions demonstrating this approach:
- [Attachment: fake_modal.json]
- [Attachment: fake_modal_overlay.json]

In version 1.7.0-beta3, a feature was added to allow the relative positioning of popups, although it only affects the popup's position, not its size. 

For further customization, users can implement CSS properties such as `-webkit-backdrop-filter` for blur effects on overlays, which can enhance the visual experience. 

For additional functionality, consider using a button for the overlay widget that links its visibility to the modal widgets, allowing multiple modals to trigger the blur effect simultaneously. 

Example of this implementation can be found in:
- [Attachment: fake_modal_overlay.json]
- [Attachment: vzLQWjfjGuUPTGqWkNDgyXgval.json]

[Attachment: 4XAJVVObkJe16RKOCCvQ8MGLFoE.json]

[Attachment: 5qPWgrwWsmEPixcMW2pK0CBiZ32.json]

# Hidden Text Border

**Problem Description:**
Users may encounter an issue where text borders are not disappearing despite attempts to set `border-style` to `none` or `hidden`. 

**Solution:**
To remove borders from text in a widget, apply the following CSS rule to the element with the class "text":

```css
.text {
  border: none;
}
```

If borders persist, use the browser's inspector tool (F12) to identify the element causing the border and adjust the relevant CSS properties accordingly.

# Listeners, Get and Updating a Fader from Received Messages

## Problem Description
Users may encounter difficulties in receiving and displaying volume values from an external source using Open Stage Control. Specifically, when sending an OSC message to request a volume value (e.g., `get/volume`), it can be challenging to dynamically update a fader or text widget with the received value.

## Solution
To successfully receive and display volume values, follow these steps:

1. **Understanding Received Messages**: When you receive messages, they may contain multiple arguments. For example:
   ```
   (DEBUG, OSC) In: { address: '/live/track/get/volume', args: [ 1, 0.8500000238418579 ] }
   ```
   Here, the first argument (1) is likely the track number, and the second argument (0.8500000238418579) is the volume value.

2. **Using `preArgs` Property**: To ensure that your widget correctly interprets the incoming messages, utilize the `preArgs` property. This property allows you to specify static arguments that must precede the value argument. For example, if you want to receive messages only for track number 1:
   - For a fader or text widget, set the following:
     - **Address**: `/live/track/get/volume`
     - **preArgs**: `1`
   This configuration ensures that the widget only responds to messages where the first argument is 1.

3. **Handling Multiple Static Arguments**: If your messages contain more than one static argument, format the `preArgs` property as a JavaScript array. For example:
   ```javascript
   preArgs: [1, "A"]
   ```

4. **Polling for Updates**: If the external source (e.g., Ableton) does not automatically send updates, you may need to implement a polling mechanism. This can involve sending a `get` message at regular intervals (e.g., every few milliseconds) to request the current volume value.

By following these guidelines, you should be able to effectively receive and display volume values in Open Stage Control.

[Attachment: filename.ext]

# Program Change Button Configuration

**Problem Description**  
Users have encountered difficulties in sending program change messages to VSTs that utilize bank and sub-bank selections instead of the standard MIDI range of 0-127. The challenge lies in correctly formatting the MIDI messages to achieve the desired program change.

**Solution**  
To successfully send a program change message along with the necessary bank select messages, follow these steps:

1. **Send Bank Select Messages**: Use Control Change (CC) messages to select the bank and sub-bank. The following commands should be executed in sequence:
   ```javascript
   send(get("variable_midi_out_port"), "/control", 3, 0, 0);   // CC0 for bank select
   send(get("variable_midi_out_port"), "/control", 3, 32, 0);  // CC32 for sub-bank select
   ```

2. **Send Program Change Message**: After setting the bank and sub-bank, send the program change message:
   ```javascript
   send(get("variable_midi_out_port"), "/program", 3, 0);      // Program change
   ```

3. **Use `get()` Instead of `@()`**: It is recommended to use `get()` to retrieve the MIDI output port variable, ensuring better compatibility in scripts.

By following these steps, you should be able to configure a button that sends the correct MIDI messages for program changes to your VST.

For additional information on MIDI messages, refer to the Open Stage Control documentation: [MIDI messages - Open Stage Control](https://openstagecontrol.ammd.net/docs/midi/midi-messages/).

**Note**: If you encounter issues with specific VSTs, it may be necessary to consult their documentation or support resources for any unique requirements regarding MIDI communication. 

[Attachment: helm_synth_image.png] (attachment reference missing)

# Touch Events for Button and Other Widgets

## Problem Description
There is currently no availability of specific touch events (touch start/end, offsetX, offsetY) on widgets like buttons and sliders in Open Stage Control. Users need to manipulate states based on touch coordinates when a finger is released, which is not directly supported. The only available method is to use the `locals.touchCoords` variable, which only provides coordinates at the moment of the press event.

## Solution
While the button widget does not support touch end events directly, you can utilize the `locals.touchCoords` variable to get the touch coordinates during the press event. However, detecting out-of-bounds touches (when a button is pressed and released outside its area) is not currently possible with this method.

As of the latest updates, the feature to access touch coordinates upon release is being considered for future implementation. 

For now, if you need to handle touch events more effectively, consider overlaying a canvas widget on top of buttons to capture touch events, although this is a workaround rather than a direct solution. 

[Attachment: filename.ext]

# Issue with /EDIT Command in Open Stage Control

**Problem Description:**
Users have reported difficulties in using the `/EDIT` command to modify properties of elements in Open Stage Control. While the `/EDIT/UNDO` command functions correctly, the syntax for `/EDIT` does not seem to work as expected, leading to confusion about the correct formatting of OSC messages.

**Solution:**
To successfully use the `/EDIT` command, ensure that you are sending the command with the correct syntax. The command should be structured as follows:

```
/EDIT <element_id> <json_string>
```

Where:
- `<element_id>` is the identifier of the element you wish to edit (e.g., `fader10`).
- `<json_string>` is a JSON formatted string containing the properties you want to modify (e.g., `{"color":"red"}`).

When sending this command from a terminal, it is essential to wrap the JSON string in single quotes to preserve the brackets. For example:

```
/EDIT fader10 '{"color":"red"}'
```

Additionally, enabling the debug option in Open Stage Control will allow you to see the received messages, which can help in troubleshooting any issues.

# Improving Session Response Times in Open Stage Control

## Problem Description
Users have reported experiencing slower response times (lag) in Open Stage Control when working with templates that contain a large number of widgets. Specifically, the dynamic buttons created to reduce the number of widgets have been noted to perform slower than static buttons, leading to significant lag, particularly on less powerful devices. 

## Solution
To enhance performance and responsiveness when using dynamic buttons, consider the following strategies:

1. **Reduce Widget Count**: Instead of having multiple static buttons, consolidate them into a single dynamic panel that updates properties based on user interactions. This approach minimizes the total number of widgets and can improve performance.

2. **Use Performance-Safe Properties**: Ensure that the properties you are updating dynamically are marked as performance-safe in the documentation. These properties are optimized for efficiency and should be prioritized in your design.

3. **Optimize Dynamic Updates**: When updating properties of dynamic buttons, ensure that you are only updating those that need to change. Avoid unnecessary updates to properties that remain constant.

4. **Profile Your Session**: Use profiling tools to identify bottlenecks in your session. This can help you understand which parts of your template are causing the most lag and allow you to target those areas for optimization.

5. **Test on Different Hardware**: Performance can vary significantly across different devices. Test your session on various hardware to gauge responsiveness and make adjustments as necessary.

6. **Limit the Number of Dynamic Buttons**: If performance issues persist, consider limiting the number of dynamic buttons or breaking down your interface into smaller, more manageable sections that can be loaded as needed.

By implementing these strategies, you should be able to improve the efficiency and responsiveness of your Open Stage Control sessions.

[Attachment: static-dynamic-differences.json]  
[Attachment: Panel-directions]

[Attachment: hXxYwZ9jndO8k2lR9im0GiV0v6i.json]

# Hidden Toolbar Icon and Fullscreen Configuration

## Problem Description
Users want to hide the toolbar icon and enable fullscreen mode when opening the client.

## Solution
To hide the toolbar icon, you need to create a theme file that specifies the CSS selectors for the elements you wish to hide. You can find the appropriate selectors by using the browser inspector (press "F12") to inspect HTML elements.

To enable fullscreen mode when launching the built-in client, enable the "fullscreen" option in the server settings. Note that this feature is not available for remote desktop clients. However, mobile clients can add the server's URL to their home screen, which allows them to launch the application in fullscreen mode.

Additionally, there is now a property within the 'root' widget called `hideMenu`, which can be found under Style > Root Style. This property can also be used to hide the menu.

[Attachment: filename.ext]

# Difference Between nativeRequire and require in Open Stage Control

## Problem Description
Users often encounter confusion regarding the use of `nativeRequire` and `require` in Open Stage Control (OSC). Specifically, there is uncertainty about when to use each function, as `require` may throw errors while `nativeRequire` is necessary for certain modules.

## Solution
- **nativeRequire**: This is Node.js's original `require` function. It is used specifically in OSC for loading Node modules installed via npm or native Node modules such as `fs` or `net`. 

- **require**: This is an OSC-specific function that mimics Node's `require` but is limited to local files. It treats imported files as custom modules, providing additional functions and enabling autorestart.

### Guidelines for Usage
- Use `nativeRequire` for:
  - Node modules installed via npm located in the custom module directory.
  - Native Node modules (e.g., `fs`, `net`).

- Use `require` for:
  - Your own custom files.

### Additional Notes
- When requiring a module, ensure to include the file extension. For example, use:
  ```javascript
  const main = require('../EnsembleTest.js');
  ```
- Be cautious of circular dependencies, as they can lead to `null` returns when the modules cannot be resolved. To handle circular dependencies, consider using a `setTimeout` callback to delay the loading of the main module:
  ```javascript
  var main;
  setTimeout(() => {
    main = require('module_that_required_this_file_first.js');
  });
  ```

This guidance should help clarify the appropriate contexts for using `nativeRequire` and `require` in Open Stage Control.

[Attachment: shLOq5e4fVi7awd5021NWYVvJb4_1.js]

[Attachment: 1jgS4gark0VnVpcEFbMdUm21ABX_1.js]

[Attachment: vQjB21jHEU9aGUCSQALo0vdy0Sn_1.js]

[Attachment: eQvzrd3DtTwzVUeR4tbQCMh6QJt_1.zip]

[Attachment: nP5c6HdFmqFOWlGvWQjRkGSWNhI_1.js]

[Attachment: gyalj6lRjyRzTheN9UC47WNkuuv_1.js]

[Attachment: xX1NkSZpI4OXjKEXLvMAfYmJiYo_1.js]

[Attachment: goHXLiftUMqyXppWwq9KGKknoMg_1.js]

# Mapping MIDI Surface to OSC

**Problem Description:**
A user has successfully mapped a Korg nanoKONTROL2 MIDI surface to an identical layout in Open Stage Control (OSC). However, they want to trigger OSC float values when a slider is moved or a button is pressed on the MIDI surface. Attempts to use the `send()` function in the slider's script field have failed, although moving the slider on the client does send out OSC messages.

**Solution:**
To achieve the desired functionality, a custom module is required. The `send()` function will not work for events triggered by MIDI surface interactions because these do not initiate user interactions recognized by OSC. 

Custom modules allow for more complex interactions and can handle incoming messages from MIDI surfaces, enabling the sending of OSC messages in response. This approach avoids potential feedback loops that could arise from allowing widgets to send messages upon receiving input. 

For further implementation, consider reviewing the Open Stage Control documentation on creating custom modules. 

[Attachment: midi_mapping.json]  
[Attachment: nxTQZQ16BNA2RgVyxSsIHxHSXd3.json]

# Sending clientID to OSC port

**Problem Description:**
Users may want to send the clientID alongside OSC messages to a port, particularly when controlling applications like SuperCollider from multiple devices. The challenge is to filter incoming messages based on the clientID without creating separate configuration files for each client.

**Solution:**
To append the clientID to all outgoing OSC messages, you can use a custom module in Open Stage Control. Implement the following code:

```javascript
module.exports = {
  oscOutFilter: function(data) {
    data.args.push({
      type: 's',
      value: data.clientId
    });
    return data;
  }
}
```

**Note:** Ensure that all clients have unique IDs to avoid conflicts.

# Modal Widget Starts Open

## Problem Description
The modal widget in Open Stage Control starts with the window open by default, which is not the desired behavior. The user wants the modal to open only when the icon labeled "players circle" is clicked. Despite attempts to resolve the issue, the modal continues to open automatically.

## Solution
The issue is caused by a non-null value in the modal's value property. To resolve this, check the modal's configuration and ensure that the value property is set to null or is not defined. This will prevent the modal from opening automatically.

For further assistance, review the attached configuration files:
- [Attachment: temp.json]
- [Attachment: tUS2ueGM7e0X3qn5agdSJJjdxGK.json]
- [Attachment: tUS2ueGM7e0X3qn5agdSJJjdxGK_1.json]

# Script Query and Possible Bug

## Problem Description
When using a push widget with `norelease=true`, a script widget sends out control messages that are triggered twice: once on push and again on release, indicating that `norelease` is being ignored. Additionally, the correct syntax for sending a MIDI note is unclear, specifically regarding the required velocity argument. Lastly, changing the ID of the push widget after the script widget has been created causes the script to break.

## Solution
1. **Double Triggering Issue**: The behavior of the push widget sending control messages twice is likely a bug. This issue will be addressed in version 1 of Open Stage Control.

2. **MIDI Note Syntax**: To send a MIDI note, you need to include a third argument for the note velocity. The correct syntax is:
   ```javascript
   send(false, '/note', 1, 24, velocity);
   ```
   Replace `velocity` with the desired value (e.g., 127 for maximum velocity).

3. **Script Widget ID Change**: Changing the ID of the push widget after the script widget has been created is known to cause the script to break. This is a bug that will be fixed in version 1.

4. **Hiding Scripts**: Currently, hiding scripts by using CSS (`css: ':host {display:none;}'`) is an acceptable solution. In version 1, scripts will always be hidden, and all widgets will have a built-in script bound to their value, which will improve organization and usability.

For further improvements, consider creating a hidden panel to manage scripts more elegantly in the future.

# Meter Color Gradient Brighter

## Problem Description
Users may find the meter color gradients in Open Stage Control too dark and wish to brighten them. Attempts to manually enter RGB values have been unsuccessful, as only color string values are accepted according to the documentation.

## Solution
To adjust the brightness of the meter color gradients, modify the CSS variable `--gauge-opacity`. This variable controls the opacity of the gauge, allowing for a brighter appearance.

# XY Pad Sending out Multiple CCs

When using the XY pad in Open Stage Control, users may encounter an issue where multiple MIDI Control Change (CC) messages are sent, which can lead to unexpected results in DAWs like Cubase.

## Solution

1. **Empty the Target Field**: Ensure that the target field of the XY pad is empty. This prevents the sending of incomplete messages alongside the intended message defined in the script.

2. **Enable Debug Option**: Activate the server's debug option to monitor the messages being sent by Open Stage Control. This will help identify any unintended messages.

3. **Test Without Custom Module**: If a custom module is being used, test the setup both with and without it to determine if the module is causing the issue.

[Attachment: XY Sending multiple CCs]

# Fastest Way to Update Fader Values from Module

**Problem Description:**
When developing a server/client application to control ALSA devices, specifically the Focusrite Scarlett 18i20, there is a need to efficiently update multiple fader values (around 20 or more) multiple times per second.

**Solution:**
The recommended approach is to use the `receive()` function in the module. To optimize performance, send all meter values in a single message (e.g., to the address `/meters`). On the client side, utilize a script widget to listen for this message and update the fader values accordingly.

Here’s an example script to efficiently handle updates:

```javascript
// onCreate
locals.n_faders = 10;
locals.lastValues = Array(locals.n_faders).fill(0);

// onValue
if (value.length === locals.n_faders) {
  for (var i in value) {
    if (value[i] !== locals.lastValues[i]) {
      locals.lastValues[i] = value[i];
      set('meter_fader_' + i, value[i]);
    }
  }
}
```

This method reduces the number of messages sent by only updating faders when their values change, enhancing overall efficiency.

# Inheriting Width or Height from a Parent Using "Auto" or Percentage

When attempting to inherit width or height from a parent container set to "auto" or a percentage, the returned value is often "auto" or the percentage itself (e.g., 100%). This behavior can hinder calculations based on these values. For instance, if a root or container is set to "auto" width and you want a widget inside it to occupy half of that width using the expression `#{ @{parent.width} / 2 }`, it returns "null" because a string cannot be divided by an integer. A similar issue occurs with percentage values.

## Solution

To resolve this, you can use the `parseInt` function to convert the string value to a numeric value. For example, the expression `#{parseInt(@{parent.width}) / 2}%` will work correctly.

Additionally, it is recommended to utilize vertical/horizontal/grid layouts for containers whenever possible. This approach allows child widgets with the `expand` property set to `true` to share the available space, while those with `expand` set to `false` can have their sizes defined in percentages. Combining vertical and horizontal layouts with a mix of expanded and fixed-size children can create responsive interfaces effectively.

# Read from TXT/XML File to Button (Send TXT to Resolume)

**Problem Description:**
The user is attempting to send text information from a TXT/XML file to a text block in Resolume using Open Stage Control. While they can create a text widget that sends data to Resolume, they are unable to read the contents of the file directly through the file widget, which only sends the file path.

**Solution:**
To achieve the desired functionality, a custom module is required to read the contents of the file. The built-in widgets in Open Stage Control cannot perform file reading operations on their own. 

1. **Create a Custom Module:**
   - Utilize Node.js capabilities within Open Stage Control.
   - Use the `fs` module to read the file contents. Example functions include `fs.readdirSync` and `fs.readFile`.

2. **Example Code Snippet:**
   ```javascript
   const fs = require('fs');

   // Function to read file contents
   function readFile(filePath) {
       return fs.readFileSync(filePath, 'utf8');
   }
   ```

For detailed examples and guidance on writing custom modules, refer to the Open Stage Control documentation: [Custom Module Examples](https://openstagecontrol.ammd.net/docs/custom-module/examples/).

**Note:** Ensure to handle file paths and permissions correctly when implementing the custom module. 

[Attachment: resol1.png]
[Attachment: resol2.png]
[Attachment: resol3.png]
[Attachment: resol4.png]
[Attachment: resol5.png]

# Error UDP / Maxmsp

**Problem Description:**
An error occurs when using Open Stage Control with Max/MSP, indicating that the header of an OSC packet did not contain a valid OSC address or a #bundle string. The error message is as follows:
```
(ERROR, UDP) Error: The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: list
```

**Solution:**
The issue is caused by sending an invalid message from Max/MSP. To resolve this, modify the way messages are sent to ensure they contain a valid OSC address or a #bundle string. After making the necessary adjustments, the error should be resolved.

# Setting Widget Color from RGB Array in Open Stage Control

**Problem Description:**
Users may want to set the color of widgets in Open Stage Control using RGB values received via OSC messages, such as:
```json
{ address: '/color1', args: { r: 171, g: 86, b: 61, a: 1 } }
```

**Solution:**
To set widget colors based on RGB values received from OSC messages, follow these steps:

1. **Use a Variable Widget:**
   - Create a variable widget to store the RGB values. Set its default value to something like:
     ```json
     {r: 100, g: 100, b: 100}
     ```

2. **Generate CSS Color:**
   - In the `colorWidget` property of any other widget, use the following JavaScript syntax to convert the variable's RGB values into a valid CSS color:
     ```javascript
     JS{
       var {r, g, b} = @{color1}
       return `rgb(${r},${g},${b})`
     }
     ```

3. **Sending OSC Color Messages:**
   - To send RGB values from a widget, use the following script:
     ```javascript
     var rgba = {r: 171, g: 86, b: 61, a: 1}
     send('/test', {type: 'r', value: rgba})
     ```

By implementing these steps, you can effectively manage widget colors using RGB values received via OSC in Open Stage Control. 

[Attachment: image.png]

# Issue with preArgs Adding a Blank Space

When using a Menu widget in Open Stage Control, the `preArgs` property can sometimes include an unintended blank space. This issue arises when the label and the `preArgs` property utilize the same code to display the selected key of the menu.

### Problem Description
The following JavaScript code is used to retrieve the selected key:

```javascript
var values = @{this.values},
v = @{this};
return Object.keys(values).find(k => values[k] == v);
```

This code may result in a blank space being added to the `preArgs` property, which can cause issues in custom modules. The source of the blank is not from the keys themselves, as they do not contain any spaces.

### Solution
To resolve this issue, it is recommended to use the `trim()` function to eliminate any leading or trailing spaces from the value returned by the code. This will ensure that the `preArgs` property does not include any unintended blank spaces. 

Implement the following adjustment in your code:

```javascript
var values = @{this.values},
v = @{this};
return Object.keys(values).find(k => values[k] == v).trim();
```

This modification will prevent any blank spaces from being included in the `preArgs` property.

# Modal Widget Sending OSC Messages

**Problem:**  
The modal widget in Open Stage Control is sending OSC messages unexpectedly.

**Solution:**  
The modal widget sends OSC messages because it has a value that represents its state (open or closed). If you want to prevent the modal from sending these messages, you can use the "Bypass" option.

# How to Create Tabbed Pages in Open Stage Control

Creating a user interface with tabbed pages in Open Stage Control involves using panels and tabs effectively. Below are the steps to achieve this.

## Problem Description
Users have difficulty understanding how to create a UI with tabbed pages, particularly how to utilize the `verticalTabs` parameter and the process of adding tabs.

## Solution
1. **Create a Panel**:
   - Right-click in the project tree (left panel) and select **Containers > Panel**.

2. **Add Tabs**:
   - Right-click inside the newly created panel and select **Add Tab**. If the panel is not empty, you will need to cut existing widgets (select them and press `Ctrl + X`) before adding a tab.

3. **Organize Widgets**:
   - After adding a tab, you can paste the cut widgets into the new tab. Each tab can contain its own set of widgets, allowing for a distinct layout similar to a web browser.

4. **Using the Project Tree**:
   - Utilize the project tree to manage and add tabs effectively.

By following these steps, you can create a tabbed layout where each tab functions independently with its own widgets. 

For further assistance, refer to the documentation or community forums for additional tips and tricks.

# Disguise Camera Control Layout for Open Stage Control

## Problem Description
A user has created a layout for controlling disguise cameras using Open Stage Control (OSC) and is seeking feedback and sharing the layout for others to use. The layout simulates camera tracking and is designed to run on an iPad in full-screen mode. The user is also looking for ways to improve the template and offers to share a simple disguise project setup for testing.

## Solution
The layout allows users to control the XYZ coordinates of cameras, as well as pan, tilt, roll, and zoom functionalities. Users can define multiple cameras and switch between them while saving all values per session. 

### Key Features:
- **Camera Control**: Adjust XYZ values and camera settings.
- **Multiple Cameras**: Switch between different cameras with saved settings.
- **Debugging**: Enable debug on the server to monitor OSC messages or use software like Protokol from Hexler to track OSC messages and values.

### Displaying Values:
To display specific values from an XY pad in a text widget:
- Use `@{xy_1}` to return both X and Y values.
- Use `#{@{xy_1}[0]}` to display only the X value.
- Use `#{@{xy_1}[1]}` to display only the Y value.

### Attachments:
- [Attachment: aZ74he4dnYrPXMJWXFKK23Wzrzn.json]
- [Attachment: zjt4g5XRYhLoHvLqst61KMa7TSe.json]

# Cloning, Pasting, and Decoupling Widgets in Open Stage Control

## Problem Description
Users often seek clarification on the differences between cloning, pasting (with ID + 1), and parameter overriding in Open Stage Control. They also inquire about the decoupling process for widgets, particularly composite widgets, and the functionality of send and receive functions in custom modules.

## Solution
1. **Cloning vs. Pasting (ID + 1)**:
   - Cloning and pasting (ID + 1) have minimal differences in terms of resource usage; cloning may be slightly more resource-intensive, but this difference is generally negligible.

2. **Understanding Widget Relationships**:
   - **Pasting (ID + 1)**: Use this method for creating similar widgets that are completely decoupled.
   - **Cloning**: This method creates fully coupled widgets.
   - **Cloning with Parameter Overriding**: This approach allows widgets to maintain a similar appearance while sending or reacting to different OSC messages.

3. **Decoupling Widgets**:
   - For simple widgets, decoupling can be achieved by overriding the ID parameter in the properties. However, this can be complex as it involves setting both the ID and widgetId parameters.
   - For composite widgets, the common practice is to define arbitrary variables in the container's variables.

4. **Understanding ID References**:
   - The ID referred to in the documentation indicates the ID property (the second property in the inspector). If synchronized widgets share the same ID, they do not send OSC/MIDI messages.

5. **Send and Receive Functions**:
   - The send and receive functions in custom modules both send messages to client widgets. 
   - The functions `sendOsc` and `receiveOsc` serve a similar purpose but are specifically designed for OSC messaging.

For further clarification, users may refer to the documentation or community resources for more detailed examples and use cases. 

[Attachment: screenshot-2021-12-31-14:18:07]

# Rotating and Mirroring Widgets in Open Stage Control

## Problem Description
Users may want to rotate a widget or an element inside a button, such as an arrow, to create a mirror image (e.g., turning an up arrow into a down arrow). There is a need for guidance on how to apply CSS transformations to specific elements within widgets.

## Solution
To achieve rotation or mirroring of a widget element in Open Stage Control, you can utilize the CSS transforms feature. Here’s how to do it:

1. **Access the CSS Property**:
   - Each widget has a "css" property that can be edited using the inspector, found under the "style" category. This allows you to add custom styles using CSS.

2. **Apply CSS Transformations**:
   - To rotate an element, you can use the following CSS code:
     ```css
     transform: rotate(180deg); /* Adjust the degree as needed */
     ```
   - To create a mirror image, you can use:
     ```css
     transform: scaleX(-1); /* Flips the element horizontally */
     ```

3. **Targeting Specific Elements**:
   - If you want to apply the transformation only to the label (e.g., an arrow) within a button, you can modify the label's CSS directly. Refer to the provided example in the attachment:
     - [Attachment: rotate_label.json]

4. **Additional Resources**:
   - For a comprehensive list of available icons and symbols that can be used in buttons, you may need to refer to external icon font libraries. Note that compatibility may vary based on what is installed on the user's system.

By following these steps, you can effectively rotate and mirror elements within your Open Stage Control widgets.

[Attachment: 7hvPtg6qYcGENrA4qzuo04El0BL.json]

[Attachment: us3Klvk1PQVeijqdXJ2svsBuzhq.json]

# Script Widget Behavior in Open Stage Control

## Problem Description
When using buttons to send values to a script widget, the intention is to chain shortcuts, allowing one button to trigger others. However, adding a `preArg` to a button prevents the script widget from receiving any values. The OSC messages sent from the button to the script are received, but the script only executes when the `preArgs` match for both widgets. This behavior raises questions about whether it is a bug or intended functionality.

## Solution
To resolve this issue, consider the following approaches:

1. **Use the `set()` Function**: Instead of sending OSC messages, utilize the `set()` function in the button's script property. This allows for seamless communication between widgets without the complications introduced by OSC messages.

   ```javascript
   set('/script', 'value');
   ```

2. **Adjust the Script Widget's Value Property**: Set the value property of the script widget to `OSC{/script}`. This configuration ensures that the script executes every time it receives a value, allowing for chaining of commands.

3. **Handle Consecutive Button Presses**: If using the `OSC{/script}` method, ensure to set the button mode to `push` to handle consecutive presses. You may need to ignore the "off" value that gets sent.

By implementing these solutions, you can effectively manage button interactions and achieve the desired chaining of key commands within Open Stage Control.

# XY Pad: Sending "Release" Message and Touchpad Behavior

## Problem Description
Users may want to configure an XY pad in Open Stage Control to send a "release" message when the control dot is released. Additionally, there is interest in modifying the behavior of the XY pad so that it acts like a laptop touchpad, allowing for continuous swiping without the dot jumping to the finger position.

## Solution
1. **Sending a "Release" Message**: 
   - It is possible to send a "release" message when the control dot is released by using scripting.

2. **Touchpad Behavior**:
   - The default behavior of the XY pad allows it to act like a touchpad, unless the `snap` property is set to `true` or if a parent container has the `traversing` property set to `true`.
   - To achieve a touchpad-like experience where the dot is not visible and can be swiped endlessly:
     - Disable the `spring` property to prevent the dot from returning to a default position.
     - Set the `sensitivity` to a low value (e.g., 0.1) to allow for more fluid movement.
     - Adjust the XY ranges to be very high.
     - Make the dot invisible for a cleaner interface.

These configurations will help users achieve the desired functionality with the XY pad in Open Stage Control.

# Don't Send Off Message

**Problem Description:**
Users may expect that setting the off value of a button widget to "null" would prevent any message from being sent upon release. However, this is not the case, as the MIDI output still sends values in both states.

**Solution:**
Setting the off value to "null" will send a message with no argument, not prevent a message from being sent entirely. To avoid sending a message on release, use the "tap" mode for the button instead.

# Sending OSC Messages Based on Widget Value in Scripts

## Problem Description
When attempting to send an OSC message within a script based on the current value of a widget, the message address returns as undefined. For example, using the following code:
```javascript
send('/@{this}/init', value)
```
or
```javascript
send('/@{this.value}/init', value)
```
results in an output indicating the address is undefined:
```
(DEBUG, OSC) Out: { address: ‘/undefined/init’, args: [ { type: ‘s’, value: ‘bar’ } ] } To: 127.0.0.1:8000
```
This issue does not occur when using other widget properties, such as `this.left`.

## Solution
To resolve this issue, do not use the `@{}` syntax in scripts. Instead, utilize the `get()` function to retrieve the widget's value. The correct implementation is as follows:
```javascript
send('/' + get('this') + '/init', value)
```
This approach ensures that the OSC message is sent with the correct address based on the widget's current value. 

For further details on this behavior, refer to the documentation on circular references: [Circular References Cases](https://openstagecontrol.ammd.net/docs/widgets/advanced-syntaxes/#circular-references-cases).

[Attachment: filename.ext]

# Accessing JSON Data on Mac

**Problem Description:**
Users of the Flow template experience issues when accessing the filesystem to load JSON data on macOS, while it works correctly on Windows. The problem may be related to file permissions or path formatting differences between the two operating systems.

**Solution:**
The issue is often caused by the way file paths are specified in macOS compared to Windows. Specifically, the presence of a folder in the path can lead to access problems on macOS. 

To resolve this issue:
1. Ensure that the file paths are correctly formatted for macOS, using forward slashes (`/`) instead of backslashes (`\`).
2. Verify that the JSON file is correctly referenced without unnecessary folder indicators in the path.

By adjusting the file path format and ensuring proper access, the JSON data should load correctly on macOS.

For further guidance on importing data, refer to the installation guide: [Import Data](https://artificialharmonics.com/docs/flow-2-installation-guide/#import-data). 

[Attachment: filename.ext]

# Custom JavaScript Functions in Open Stage Control

## Problem Description
Users have reported difficulties in defining global utility JavaScript functions that can be accessed across different widgets in Open Stage Control. Specifically, there are challenges in ensuring that these functions are correctly parsed and executed.

## Solution
To define and use global JavaScript functions in Open Stage Control, follow these guidelines:

1. **Define the Function Using the `globals` Object**:
   Place your function definition within a `JS{}` block to ensure it is executed properly. For example:
   ```javascript
   JS{{
   globals.launchpadLedColorsA = function(velocityReceived) {
       var colorsArrayA = {
           "1": "#990000",
           "2": "#dd0000",
           "3": "#ff0000",
       };
       return colorsArrayA[velocityReceived] || "#E0E0E0";
   };
   }}
   ```

2. **Set the Script Widget Properties**:
   - Ensure the script widget's `event` property is set to `"once"` so that the function is executed when the session loads.
   - The script widget should be placed before any other widgets that call the function to ensure it is parsed first.

3. **Calling the Global Function**:
   When calling the global function in another widget, use the full reference:
   ```javascript
   JS{{
   globals.launchpadLedColorsA(2);
   }}
   ```

4. **Check for Syntax Issues**:
   Ensure there are no syntax errors, such as extra spaces in the `JS{}` block, and include a return statement in your function if necessary.

By following these steps, you should be able to successfully define and call global JavaScript functions within your Open Stage Control projects.

### Additional Notes
- If you encounter issues where the function is not recognized, ensure that the function is defined and executed before any calls are made to it.
- Review your JSON files for proper configuration if problems persist. 

[Attachment: global-js-function.json]
[Attachment: css-osc-listener.json]
[Attachment: svg.json]

[Attachment: 7iiPX6N8UShHrlJ9u3rNUujyftt_1.json]

[Attachment: 7iiPX6N8UShHrlJ9u3rNUujyftt.json]

[Attachment: sqv2q7gfcwJBDEqEz8afsyLRzEt.json]

[Attachment: iuAYuYhUUg8zc034tpMfCCmayRi.json]

# Multiple Row Tabs in Open Stage Control

## Problem Description
Users may encounter difficulty in creating multiple rows of tabs within Open Stage Control. Attempts to use `flex-wrap` in the `.panel > .navigation` or related elements may not yield the desired result, as tabs remain on a single row.

## Solution
To achieve multiple rows of tabs, apply the following CSS to the `.panel > .navigation ul`:

```css
.panel > .navigation ul {
    display: flex;
    flex-wrap: wrap;
}
```

This configuration allows the tabs to wrap onto multiple rows as more tabs are added. 

For further details, refer to the documentation draft available at [Attachment: osc_multirowtabs.png].

# Forming OSC Addresses and Parent Inheritance in Open Stage Control

## Problem Description
When creating a sequencer in Open Stage Control, users may want to structure OSC messages for sliders in a way that reflects their parent panel. Specifically, the desired OSC address format for sliders is "/PX/SX", where PX is the panel identifier and SX is the slider identifier. However, the "auto" option does not inherit the parent address correctly.

## Solution
To have sliders inherit their direct parent’s address, use the following syntax in the OSC Address field of the slider:

```
/@{parent.address}/SX
```

This will ensure that each slider's OSC address is correctly formatted based on its parent panel.

For creating multiple widgets efficiently, consider using clones or a matrix of clones instead of copy-pasting individual widgets. This method can streamline the process significantly. Refer to the example file [Attachment: clones_and_variables.json] for guidance.

# Merging Two JSON Files in Open Stage Control

## Problem Description
Users may need to merge two JSON session files in Open Stage Control but find that there is no direct option to do so. The context menu options available do not include a straightforward method for adding tabs or merging sessions.

## Solution
Merging two session files cannot be done automatically in Open Stage Control. However, users can manually copy and paste widgets between sessions. Here’s how to do it:

1. **Open the Source Session**: Start by opening the session that contains the widgets you want to copy.
2. **Copy Widgets**: Select the widgets you wish to copy and use the copy function.
3. **Open the Destination Session**: Next, open the session where you want to paste the copied widgets.
4. **Paste Widgets**: Use the paste function to add the copied widgets to the destination session.

**Note**: Copy-pasting works only when using the server's GUI. It is not possible to copy widgets between sessions opened in different web browser tabs. For better workflow, consider using a container (like a panel) to group multiple items for copying.

[Attachment: 89763847_1097113460657930_6570409487310520320_n]

# Button Border Alignment Issue

When attempting to apply a `border-bottom` CSS style to buttons, users may encounter alignment issues where the border does not match the dimensions of the button widget.

## Solution

To resolve this issue, ensure that the `border-bottom` style is applied to the `label` element of the button, rather than the `:host`. This adjustment will align the border correctly with the button's dimensions. 

[Attachment: Screenshot 2025-01-18 at 12.09.13 PM]  
[Attachment: Screenshot 2025-01-18 at 10.20.50 PM]  
[Attachment: Screenshot 2025-01-18 at 10.21.12 PM]

# MIDI Feedback Loop Problem

When using Open Stage Control with a DMX lighting system that supports MIDI, users may experience erratic behavior when rapidly moving faders. This issue manifests as the OSC fader jumping uncontrollably and flooding the MIDI loop, particularly when sending and receiving MIDI data simultaneously.

## Solution

To resolve this issue, consider the following approaches:

1. **Limit MIDI Data Transmission**: Modify the fader's behavior to send MIDI data only when the fader is released, rather than during every small movement. This can prevent excessive MIDI messages from being sent and reduce the likelihood of a feedback loop.

2. **Adjust MIDI Settings**: 
   - Ensure that you are sending the correct type of MIDI messages (e.g., Control Change (CC) messages).
   - Experiment with the `steps` property by setting it to a value like 128 to control the frequency of messages sent.

3. **Custom JavaScript Module**: If necessary, implement a custom module using JavaScript to filter or manage incoming MIDI messages. This allows for more control over how the hardware responds to MIDI input.

4. **Disable MIDI Feedback**: If the feedback loop persists, consider turning off MIDI feedback in the lighting software. This may stabilize the system, allowing for manual control through OSC without the complications of feedback.

By implementing these strategies, users can achieve smoother operation when integrating Open Stage Control with MIDI-enabled DMX lighting systems. 

(attachment reference missing)

# Using OSC with Two PCs

**Problem Description:**
The user is attempting to control Bitwig installed on one PC from a second PC over Wi-Fi using Open Stage Control on Linux Mint. The second PC provides two addresses: 127.0.0.1:8080 and 192.168.1.192:8080, but the user is unsure which address to configure in Bitwig and whether additional software is needed.

**Solution:**
The recommended approach is to run the Open Stage Control server on the same machine as Bitwig and use the address 127.0.0.1 for communication between the two applications. For access from any device on the same network, use the local network address (e.g., 192.168.1.192).

Ensure that:
- Bitwig sends messages to port 8080 (the default listening port for Open Stage Control).
- Bitwig receives messages on the other port configured in Open Stage Control.

Adjust the port settings in Bitwig accordingly to establish proper communication.

[Attachment: Capture d’écran du 2025-06-07 15-59-12]

# Creating OSC Controls in a Web Browser

## Problem Description
The goal is to create a project using a Raspberry Pi to host a captive Wi-Fi portal that serves an HTML page with a user interface (UI) for controlling an instrument via OSC (Open Sound Control). The challenge is to find examples or methods for developing the controls UI that can communicate with an OSC bridge.

## Solution
Open Stage Control is a suitable solution for this project as it functions as a web server capable of serving a UI and sending/receiving OSC messages. 

### Steps to Implement:
1. **Installation**: 
   - Install the armv7l deb package for Raspberry Pi.
   - Alternatively, follow the guide for running Open Stage Control with Node for lower memory and CPU usage.

2. **Start the Server**:
   - Launch the server in headless mode using the command line option `--no-gui`.

3. **Client Access**:
   - Any device on the same network that can run Firefox or Chromium can connect as a client.

4. **Resources**:
   - Refer to the [documentation](https://openstagecontrol.ammd.net/docs/) for further guidance on setup and usage.

By following these steps, you can create an interactive OSC control interface accessible to users connecting to your Raspberry Pi's Wi-Fi hotspot.

# Packaging Custom Modules

## Problem Description
There is a need to package custom modules that rely on other npm packages for ease of use by end users. This raises the question of whether users need to install Node.js and npm or if there is a more efficient method for distribution.

## Solution
Including the `node_modules` folder within the package is a viable solution, provided there are no native modules requiring platform-specific compilation. This approach simplifies the installation process for end users, eliminating the need for them to run `npm install`.

# Capturing Multiple OSC Return Messages with Open Stage Control

When interacting with the Non Session Manager (nsm) using Open Stage Control, you may need to handle multiple OSC return messages. For example, when you send the command `/nsm/server/list`, nsm responds with multiple messages containing the names of available sessions.

## Problem Description
You want to send a command to nsm and receive multiple responses to populate a list with session names.

## Solution
To process incoming OSC messages and capture multiple responses, you can create a custom module. Below is a basic example of how to implement this functionality:

```javascript
// Initialize list
var sessionList = []

module.exports = {

    oscOutFilter: function(data) {
        var {host, port, address, args} = data

        if (address === '/nsm/server/list') {
            // Reset list when OSC client sends '/nsm/server/list'
            sessionList = []
        }

        return {host, port, address, args}
    },

    oscInFilter: function(data) {
        var {host, port, address, args} = data

        if (address === '/reply') {
            if (args[0].value === '/nsm/server/list') {
                // Add session name to the list when receiving a reply
                sessionList.push(args[1].value)

                // Perform actions with the updated list
                // For example, feed an OSC listener or update the client interface
                // receive('/EDIT', ...)
                // or query something else from NSM with send()
            }
        }

        return {host, port, address, args}
    }
}
```

This module initializes a session list and updates it upon receiving replies to the `/nsm/server/list` command. You can then use the `sessionList` for further processing or display.

# Menus Display Issue When Uploading a Session

When opening a session, all menu options are displayed simultaneously instead of the expected behavior.

## Solution

This issue is a known bug that will be addressed in the next release. In the meantime, you can work around it by modifying the tab container's value property. Set it to:

```
#{@{view_switch} || 0}
```

instead of:

```
@{view_switch.value}
```

The removal of the `.value` suffix is important as it changes the way the property is interpreted.

---

# Volume Knob Movement Issue

The volume knob does not move smoothly and appears to move in steps when adjusted.

## Solution

The issue may be caused by the `unfocus()` call in the knob's `onValue` script. To resolve this, either remove the `unfocus()` call or move it to the `onTouch` event so that it does not execute on every value change. 

---

[Attachment: fgVpNxxnRAridhznjg3OJs8zKAF.json]

# Interface Too Large on Mobile

When using Open Stage Control on mobile devices, users may encounter issues where only a portion of the user interface is visible, and scaling options do not resolve the problem.

## Solution

1. **Viewport Resolution**: Understand that the screen resolution differs from the viewport resolution recognized by the browser. For example, the Pixel 3a has a viewport resolution of 411x823.

2. **URL Parameter**: Appending `?zoom=0.38` to the server's URL can adjust for the device's pixel ratio, but this may result in elements appearing too small.

3. **Responsive Design**: The most effective solution is to make your interface responsive. Utilize percentage (`%`) for layout elements and viewport width (`vw`) for font sizes in the root settings. This approach ensures that the interface adapts to various screen sizes effectively.

For further guidance on making your interface responsive, refer to the topic: Auto Responsive to Screen Size.

# Scripting Help: "Tap" Button Type to Play Entire GIF

## Problem Description
The goal is to create a button in Open Stage Control that plays a GIF animation when tapped and retains its 'on' state until the GIF completes one full playthrough. The challenge is to avoid using a 'Toggle' button, which keeps the GIF playing until toggled off, or a 'Push' button, which requires holding down the button for the duration of the GIF.

## Solution
To achieve this functionality, follow these steps:

1. **Set Up the Button:**
   - Use a button configured in 'tap' mode.
   - Set the `onValue` to `1` and `offValue` to `0`.

2. **Use a Variable for CSS Background:**
   - Utilize a `VAR{}` block in the `css` property to manage the button's background image.
   - Initially set the background image to a still image (the first frame of the GIF).

3. **Implement the onValue Script:**
   - In the `onValue` script, set the background image to the animated GIF.
   - Use `setTimeout()` to revert the background image back to the still image after the GIF's duration.
   - To prevent interaction during the GIF playback, you can disable the button temporarily.

4. **GIF Duration:**
   - Use a tool like [gifduration.herokuapp.com](https://gifduration.herokuapp.com) to determine the total duration of the GIF for accurate timing in `setTimeout()`.

5. **Code Example:**
   ```javascript
   // Example code snippet
   var gifDuration = 2000; // Replace with actual GIF duration in milliseconds
   var stillImage = "path/to/still-image.jpg";
   var animatedGif = "path/to/animated-gif.gif";

   // onCreate
   function onCreate() {
       this.css = {
           backgroundImage: stillImage
       };
   }

   // onValue
   function onValue(value) {
       if (value === 1) {
           this.css.backgroundImage = animatedGif + "?t=" + Date.now(); // Reload GIF
           setTimeout(() => {
               this.css.backgroundImage = stillImage;
           }, gifDuration);
       }
   }
   ```

6. **Updated Approach:**
   - An updated method involves reloading the GIF each time by appending a unique query to the image URL, which requires Open Stage Control version 1.16.1 or later.

For a complete example, refer to the attached files:
- [Attachment: 4abF9AT0agEF9bkAKKRmq8ewZDZ.json]
- [Attachment: 9DdLzb6h7aKj7iKkoKUcrBwi307.zip] 

This solution should effectively allow the button to play the GIF fully upon tapping and revert to its original state without requiring continuous interaction.

[Attachment: 2YneLx1n92wkShKVEhlcxHcAova.zip]

# Keeping the Session Alive

When no clients are connected to a session in Open Stage Control, all session data appears to be lost. This issue arises particularly when using the `--no-gui` option. For instance, when starting a session with the command:

```bash
open-stage-control --no-gui --load mySession.json
```

and interacting with a toggle button in a web browser (e.g., localhost:8080), the button state resets to Off upon reloading the page. However, if the session is opened in two browser tabs, the button state is preserved when one tab is reloaded.

## Solution

To maintain the session state, you can implement a custom module to save and restore the client state. An example of this approach is available [here](attachment reference missing). 

A simple implementation could involve using the following code snippet:

```javascript
app.on('sessionOpened', (data, client) => {
    send('localhost', 18080, '/client_connected');
});
```

This allows your application to refresh all states when it receives the `/client_connected` signal. 

While the Auto-save client state custom module may not suffice in scenarios where states need to be sent before any client connects, creating a lightweight HTTP "fake" client to run alongside the server could be a potential solution. This would enable caching of states, especially useful when running the server on a headless Raspberry Pi without the default Open Stage Control GUI.

# Error: Unknown MIDI Output Despite Correct Configuration

When attempting to send MIDI output in Open Stage Control, users may encounter an "unknown MIDI output" error, even when the MIDI device name and input/output settings appear correct.

## Solution

1. **MIDI Device Naming**:
   - Ensure that the MIDI device name does not contain spaces. For instance, rename the IAC Driver to "IAC" without any spaces in the Audio MIDI Setup on macOS. This prevents errors related to device recognition.
   - Device names in Open Stage Control can be customized and do not need to match the names listed in the MIDI device list. However, ensure that the port numbers are correctly defined to bind the name to the actual MIDI device.

2. **Using PreArgs**:
   - When specifying `preArgs`, ensure that the values match the expected format. If the fader becomes unresponsive when `preArgs` is set, double-check that the values are correctly defined and correspond to the data being received.

3. **Sending Events**:
   - If the accelerometer data is received but not sent out as MIDI, ensure that the event triggering mechanism is correctly set up in your custom JavaScript. The fader should be configured to send MIDI messages when it receives data from the accelerometer.

By following these steps, the "unknown MIDI output" error can be resolved, and MIDI data can be successfully sent from Open Stage Control. 

[Attachment: unknown-midi.png]  
[Attachment: Screen Shot 2020-04-22 at 01.05.31.png]

# Virtual MIDI Cables in Open Stage Control

## Problem Description
Users have reported issues with virtual MIDI cables when integrating Open Stage Control with Ableton Live on both Windows and Mac platforms. Common problems include MIDI overloads, feedback loops, and bindings not functioning correctly, particularly for mute, solo, and arm buttons.

## Solution
For Mac and Linux users, you can create virtual MIDI ports directly from Open Stage Control by modifying the MIDI configuration. Use the following format:

```plaintext
device_name:virtual
```

This method reduces overhead and resolves MIDI feedback issues, allowing for better performance with bindings.

Currently, there is no equivalent solution for Windows users. 

For further assistance, consider exploring different MIDI drivers that may improve performance. 

[Attachment: filename.ext]

# Bitwig Clip Launcher Issue

**Problem Description:**
When using Open Stage Control with the drivenbymoss script to create a clip launcher for Bitwig, an error occurs when attempting to control more than an 8x8 grid. The error message is: "OSC Crashed, Index 9 out of bounds for length 8." This issue arises when adding a channel with a track value greater than 8.

**Solution:**
To resolve this issue, you can adjust the bank size parameter in the controller settings to allow for a larger grid. This adjustment enables control over more than 8 channels of clips on a single page. 

If you encounter similar limitations, consider implementing a button to swap clip pages as a temporary workaround. 

[Attachment: filename.ext]

# Pasting Widgets - Colors Changing After Pasting

When pasting widgets from one tab to another in Open Stage Control, the appearance may change due to inherited CSS styles, resulting in a different frame or color.

## Solution

To maintain the original appearance of the widgets:

1. Check the CSS styles applied to the original tab or the widget's ancestors.
2. Copy the relevant CSS styles to the new tab where you are pasting the widgets.
3. Specifically, for ColorWidget and ColorFill in the style inspector, set both options to `false` to achieve the desired appearance.

Note: While setting values to `false` may work, it is not a valid color value.

# Updating OSC with Custom Files

When updating Open Stage Control (OSC), users may want to retain custom modifications made to themes or HTML files without manually copying them over after each update.

## Solution

To simplify the update process while preserving custom files, you can create a script that automatically copies your modified files to the appropriate directories after each OSC update. 

**Note:** Be aware that this method may encounter issues if the files you have modified are also changed in the new release.

# OSC Node Headless Mode: Using a Default Config File

## Problem Description
Users may want to run OSC Node in headless mode and include a specific configuration file using command-line options. The question arises whether it's necessary to specify each client setting individually or if a configuration file can be referenced directly.

## Solution
To run OSC Node in headless mode with a specific configuration file, use the following command:

```bash
node "path\to\osc" --config-file "path\to\settings.config"
```

For a complete list of available command-line options, you can use the `--help` flag in the terminal or refer to the documentation, where all options are documented. 

[Attachment: filename.ext]

# OSC Remote Control on an iPad

**Problem Description:**
When using Open Stage Control (OSC) on an iPad via Safari, users experience an issue with overscroll, where dragging a finger across the screen causes the entire screen to scroll. This behavior is particularly problematic as it disrupts the intended use of the interface.

**Solution:**
Currently, there is no reliable method to disable the overscroll feature on iOS devices. However, users can minimize overscroll by ensuring that no content extends beyond the main screen. If all content fits within the screen boundaries, overscroll should not occur. 

Additionally, it is recommended to avoid having multiple scrollable elements in the same area of the screen, as this can create confusion regarding which element's scroll takes priority. While there is a scroll locking feature available within panels, it does not apply to the root or tabs. 

For a more controlled experience, consider using smaller windows inside the main interface that intentionally allow scrolling. 

For further improvements, users have expressed interest in having more comprehensive scroll control options across all interface elements, including root and tabs, to accommodate devices with varying aspect ratios. 

[Attachment: filename.ext]

# Switching Control Between Two Switches

**Problem Description:**
Users want to configure two switches in Open Stage Control such that activating one switch turns off the other, preventing any overlap in their states.

**Solution:**
To achieve this functionality, you can use scripting in the properties of each switch. Follow these steps:

1. For **Switch 1**, enter the following script in its properties:
   ```javascript
   set('switch_2_id', '', {sync:false})
   ```
   Replace `switch_2_id` with the actual ID of Switch 2.

2. For **Switch 2**, enter the following script in its properties:
   ```javascript
   set('switch_1_id', '', {sync:false})
   ```
   Replace `switch_1_id` with the actual ID of Switch 1.

The empty string `''` is used to reset the switch to its initial state where no value is selected.

Ensure that you are placing these scripts in the correct properties of the switches. If the switches become unavailable, double-check the IDs and the script syntax. 

For reference, here are the example configurations:
- Non-working configuration: [Attachment: zA1QXvPdXgVCGz0duB4wSFXUwpc.json]
- Working configuration: [Attachment: cNDkVZFNRqNTEwbCATw0h2ntHi3.json]

# Triggering MIDI Notes with an XY Pad

## Problem Description
The goal is to create an interface using an XY pad that sends a MIDI note when touched, and holds the note for as long as the touch is maintained. There is a need for a script that can be implemented in the OnTouch section of the XY pad to achieve this functionality.

## Solution
To implement this, you can use the following script in the OnTouch parameter of the XY pad:

```javascript
let channel = 1;
let note = Math.round(value[0]);
let velocity = Math.round(value[1]);

if (event.type === "start") {
    send("midi:YOURMIDINAMEHERE", "/note", channel, note, velocity);
}

if (event.type === "stop") {
    send("midi:YOURMIDINAMEHERE", "/note_off", channel, note, 0);
}
```

### Notes:
- Replace `YOURMIDINAMEHERE` with the actual MIDI device name you are using.
- Ensure that the XY pad is configured to output values between 0-127.
- This script will send a note on message when the XY pad is touched and a note off message when the touch is released, allowing the note to sustain while the touch is maintained.

### Alternative Approach
If you want to handle note off messages differently, you can also consider using the `onValue` parameter for sending the note on message and the `onTouch` parameter for handling the note off messages. However, the above solution is the most straightforward for achieving the desired behavior.

[Attachment: filename.ext] (attachment reference missing)

# httpGet Error in Button onValue Event

**Problem Description:**
When using the `httpGet` function in a button's `onValue` event, an error occurs indicating an issue with the URL. The user is unable to retrieve data from the specified local server.

**Solution:**
1. **Check URL Accessibility:** Ensure that the URL (`http://127.0.0.1:3001`) is accessible via a web browser. If it is not accessible, the `httpGet` function will fail.
   
2. **Use Correct Protocol:** If Open Stage Control is running over HTTPS, you must use an HTTPS URL. In this case, since the server is confirmed to be HTTP, ensure that Open Stage Control is not running in SSL mode.

3. **Testing Environment:** If using a remote client, ensure that the actual server IP is used instead of `localhost` or `127.0.0.1`, as these will not resolve correctly from a remote client.

4. **Firewall Settings:** Check your firewall settings to ensure that they are not blocking the connection to the specified port.

By following these steps, you should be able to resolve the `httpGet` error when used in the button's `onValue` event.

# Custom Module Send Additional Data in oscOutFilter

## Problem Description
The user was attempting to send an additional return port using the `oscOutFilter` method in a custom module for Open Stage Control. The goal was to send OSC messages to multiple ports without modifying each command individually.

## Solution
Instead of trying to return an array of ports in the `oscOutFilter` method, the user realized that they could utilize the `sendOSC()` function to achieve the desired outcome. The correct implementation would be:

```javascript
sendOSC({ address, args, host, port: "cubaseOSC_Network" });
```

This approach allows sending OSC messages to the additional port without the need for extensive modifications to existing commands.

# Index in preArgs

**Problem Description:**
How to include the index of a widget in the `preArgs` property in Open Stage Control.

**Solution:**
To achieve this, use the following code:

1. In the `onCreate` event, set the index variable:
   ```javascript
   setVar(this, 'index', getIndex())
   ```

2. In the `preArgs` property, reference the index variable:
   ```javascript
   [
     1,
     VAR{index}
   ]
   ```

This method successfully retrieves the widget's index and incorporates it into the `preArgs`.

# Button Interaction Remains Active Despite Configuration

**Problem Description:**
Users may encounter an issue where button interaction remains active even after attempting to disable it using the expression `#{@{button_srcOptRvbEnable} == true}`. This issue persists regardless of whether a checkbox is used for the same purpose.

**Solution:**
To successfully disable button interaction, ensure that the editor is disabled. The interaction will remain active when the editor is enabled, as this allows for widget selection.

# Pausing Commands in Open Stage Control Scripts

## Problem Description
Users often need to execute multiple commands in sequence with pauses in between, triggered by a single button press. The challenge is to implement a delay between commands effectively.

## Solution
To introduce pauses between commands in Open Stage Control, utilize the `setTimeout` function. This function allows you to schedule commands to execute after a specified delay. 

### Example Implementation
Here’s how to implement a sequence of commands with pauses:

```javascript
set("CommandA", 0);
setTimeout(() => { set("CommandB", 1); }, 5); // 5 ms delay
setTimeout(() => { set("CommandC", 8); }, 10); // 10 ms delay
setTimeout(() => { set("CommandD", 2); }, 15); // 15 ms delay
```

### Important Notes
- Each `setTimeout` call must have a unique ID if you are using the ID parameter.
- The delay is expressed in milliseconds, and precision may vary since Open Stage Control is not designed for real-time execution.
- For longer pauses, adjust the delay values accordingly. For example, to pause for 1 second between commands:

```javascript
send('midi:OSC', '/control', 15, 122, 127);
setTimeout(() => {
  send('midi:OSC', '/control', 15, 124, 127);
}, 1000); // 1 second delay
```

By following this approach, you can effectively manage command execution timing within your scripts in Open Stage Control.

# CSS ::After Pseudo-element, Button Unclickable Issue

When using the `::after` pseudo-element in CSS, the button may become unclickable due to the pseudo-element overlaying the button. 

## Solution

To resolve this issue, avoid using `::after` directly on the `:host` selector, as it may conflict with the widget's editing state. Instead, use the `::before` or `::after` pseudo-elements on the `.label` class. Here’s an example of how to implement this:

```css
:host {
  background: linear-gradient(rgb(32, 56, 71), rgb(13, 135, 199)) top left / cover no-repeat;
  background-color: rgb(13, 135, 199);
  border-radius: 10px;
  width: 50vw;
  height: 50vw;
  position: relative;
}

.label {
  align-items: flex-end;
  padding-bottom: 0em;
  font-size: 75%;
  color: white;
}

.label::after {
  filter: invert(1);
  content: "";
  width: 100%;
  height: 100%;
  left: 0;
  right: 0;
  position: absolute;
  background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTI0IDEydjZsOC04LTgtOHY2Yy04Ljg0IDAtMTYgNy4xNi0xNiAxNiAwIDMuMTQuOTIgNi4wNSAyLjQ4IDguNTJsMi45Mi0yLjkyYy0uODktMS42Ny0xLjQtMy41Ny0xLjQtNS42IDAtNi42MyA1LjM3LTEyIDEyLTEyem0xMy41MiAzLjQ4bC0yLjkyIDIuOTJjLjg5IDEuNjcgMS40IDMuNTcgMS40IDUuNiAwIDYuNjMtNS4zNyAxMi0xMiAxMnYtNmwtOCA4IDggOHYtNmM4Ljg0IDAgMTYtNy4xNiAxNi0xNiAwLTMuMTQtLjkyLTYuMDUtMi40OC04LjUyeiIvPjxwYXRoIGQ9Ik0wIDBoNDh2NDhoLTQ4eiIgZmlsbD0ibm9uZSIvPgoJCgkKCTxtZXRhZGF0YT4KCQk8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnJkZnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CgkJCTxyZGY6RGVzY3JpcHRpb24gYWJvdXQ9Imh0dHBzOi8vaWNvbnNjb3V0LmNvbS9sZWdhbCNsaWNlbnNlcyIgZGM6dGl0bGU9IlVwZGF0ZSwgQXV0b3JlbmV3LCBSZWZyZXNoLCBSZWxvYWQiIGRjOmRlc2NyaXB0aW9uPSJVcGRhdGUsIEF1dG9yZW5ldywgUmVmcmVzaCwgUmVsb2FkIiBkYzpwdWJsaXNoZXI9Ikljb25zY291dCIgZGM6ZGF0ZT0iMjAxNi0xMi0xNCIgZGM6Zm9ybWF0PSJpbWFnZS9zdmcreG1sIiBkYzpsYW5ndWFnZT0iZW4iPgoJCQkJPGRjOmNyZWF0b3I+CgkJCQkJPHJkZjpCYWc+CgkJCQkJCTxyZGY6bGk+R29vZ2xlIEluYy48L3JkZjpsaT4KCQkJCQk8L3JkZjpCYWc+CgkJCQk8L2RjOmNyZWF0b3I+CgkJCTwvcmRmOkRlc2NyaXB0aW9uPgoJCTwvcmRmOlJERj4KICAgIDwvbWV0YWRhdGE+PC9zdmc+Cg==') no-repeat center 15% / 35%;
}
```

Note: There may be a bug where the `position: absolute;` property needs to be toggled for the icon to register its position correctly. This may require manual adjustment when creating new buttons or CSS code. 

[Attachment: example.gif]

# Create Button to Toggle OSC Fullscreen

**Problem Description:**
Users want to create buttons in Open Stage Control (OSC) to execute commands from the application menu, such as toggling fullscreen or enabling the editor. There were issues with the fullscreen functionality not activating fully when triggered by a button.

**Solution:**
In version 1.2.1, toolbar access via scripting was introduced, allowing users to toggle fullscreen mode using the `toolbar()` function. 

To correctly implement the fullscreen toggle, use the following code:

```javascript
if (value === 0) {
    toolbar(4); // Activates fullscreen mode
}
```

Note that the `toolbar(4)` command should be used when the button value is 0 to ensure fullscreen is activated properly. 

For reference, the previous example was outdated and has been fixed. 

[Attachment: example-phone-screen-recording.mp4]

# OSC Listener Not Functioning

The issue arises when attempting to send OSC messages to update a label in a custom module. The address used for the OSC message is incorrectly formatted.

## Problem Description
The custom module has a function intended to send an OSC message to update a label, but the label does not update as expected. The address is defined as an object instead of a string.

## Solution
Change the address in the `receiveOsc` function call from an object to a string. The correct format should be:

```javascript
var rootKeyLabel = '/rootKey/Label';

function addrootKeyLabel(keyboardText) {
    console.log("Address that rootKeyLabel is sent to is", rootKeyLabel);
    receiveOsc({
        address: rootKeyLabel,
        args: [
            { type: 's', value: keyboardText }
        ]
    });
    console.log("Key Name sent to Panel by addRootKeyLabel is", keyboardText);
    return;
}
```

This modification will ensure that the OSC listener functions correctly and updates the label as intended.

# Sending Text from a File to a Widget in Open Stage Control

## Problem Description
A custom module is reading a text file and logging its contents to the console when a button is pressed with the OSC address `/Hello`. The goal is to send this text back to a text widget in Open Stage Control.

## Solution
To send the text read from the file to a text widget, use the `receive` function to simulate an incoming OSC message. Here’s how to implement it:

1. Read the text from the file as you currently do.
2. Use the `receive` function to send the text to the desired widget.

Here is an example of how to modify your existing code:

```javascript
var fs = nativeRequire('fs');

module.exports = {
    oscOutFilter: function(data) {
        var { address, args, host, port } = data;

        if (address === '/Hello') {
            fs.readFile('/Users/swayrian/Hello.txt', 'utf8', (err, fileData) => {
                if (err) {
                    console.error(err);
                    return;
                }
                // Send the content to the text widget
                receive('/text_widget_address', fileData);
            });

            return; // bypass original message
        }

        // return data if you want the message to be processed
        return { address, args, host, port };
    }
}
```

If the text widget has pre-defined arguments, include them in the `receive` call:

```javascript
receive('/text_widget_address', preArg1, preArg2, fileData);
```

This will effectively send the content of the text file to the specified text widget when the button is pressed.

# Performance Differences Between Devices in Open Stage Control

**Problem Description:**
When using Open Stage Control, significant performance differences were observed between an iPad with an M1 processor and a PC with an Intel i3 processor. The iPad performed fast switching between instruments in Cubase, while the PC exhibited slow performance. Questions arose regarding whether a faster CPU or GPU would improve the PC's performance and why images appeared blurry on buttons in Chrome.

**Solution:**
1. **Browser Choice:** Switching to Google Chrome or Chromium on the PC improved performance significantly compared to Firefox. It is recommended to use these browsers for better results.

2. **Image Quality:** If images appear blurry on buttons, ensure that the image-rendering CSS property is configured correctly. This can help maintain image clarity.

3. **CPU Impact on Performance:** While a faster CPU may enhance performance, specific benchmarks are not available to confirm this. It is suggested to experiment with different configurations to assess improvements.

4. **Image Rendering:** If images are sharp in Chromium but not in Chrome, consider adjusting the CSS settings for better image rendering.

[Attachment: Bildschirmfoto 2022-05-07 um 07.44.29]

# Open Stage Control Not Receiving OSC from MA3

**Problem Description:**
Open Stage Control is not receiving OSC feedback from MA3 when using an X-Touch Compact controller. The user has configured the setup but is unable to get feedback from MA3 to reflect on the X-Touch Compact.

**Solution:**
1. **Check OSC Configuration:**
   Ensure that the OSC configuration in MA3 matches the required settings. Specifically, verify that:
   - The `osc-port` in Open Stage Control is set to **9009** instead of **9007**.
   - The port numbers and other parameters align with the documentation provided by the pam-osc plugin.

2. **Port Settings:**
   - You can either set the `port` and leave `osc-port` empty (it will automatically take the same value), or leave `port` empty and only set `osc-port`.
   - The port corresponding to **9003** in pam-osc is not relevant for Open Stage Control's configuration.

3. **Edit Hardcoded Values:**
   If you are using different port numbers or IP addresses, you may need to edit the hardcoded values in the pam-osc module. This can be found in the file `pam-OSC-Module.js` within the pam-osc repository.

4. **MIDI Configuration:**
   Ensure that the MIDI configuration for the X-Touch Compact corresponds correctly to the ports listed in the MIDI device list.

By following these steps, you should be able to resolve the issue and receive OSC feedback from MA3 on your X-Touch Compact. 

For further assistance, consider reaching out to the author of the pam-osc plugin or consulting additional resources related to MA3 and Open Stage Control integration. 

[Attachment: image]

# Switch Button OSC Address Configuration

**Problem Description:**
A user is trying to configure a switch widget in Open Stage Control to trigger different cues in QLAB based on the selected option. The user has three cues (Audio1, Audio2, Audio3) and wants to set up the OSC addresses accordingly. Additionally, the user is having trouble with a custom module intended to convert OSC messages.

**Solution:**
To set up a switch widget that triggers different cues in QLAB, you can use a custom module to filter and redirect OSC messages based on the switch's state. Here’s how to do it:

1. **Define OSC Addresses:**
   - For each option in the switch widget, define the OSC address as follows:
     - Option 1: `/cue/Audio1/start`
     - Option 2: `/cue/Audio2/start`
     - Option 3: `/cue/Audio3/start`

2. **Create a Custom Module:**
   - Create a JavaScript file (e.g., `switchModule.js`) with the following code:

   ```javascript
   module.exports = {
     oscOutFilter: function(data) {
       var {address, args, host, port} = data;

       if (address == '/cue/Switch/start' && args[0].value == 1) {
         send(host, port, '/cue/Audio1/start', ...args);
         return;
       } else if (address == '/cue/Switch/start' && args[0].value == 2) {
         send(host, port, '/cue/Audio2/start', ...args);
         return;
       } else if (address == '/cue/Switch/start' && args[0].value == 3) {
         send(host, port, '/cue/Audio3/start', ...args);
         return;
       }

       return data;
     }
   }
   ```

3. **Load the Module:**
   - In Open Stage Control, set the GUI to load your custom JavaScript file.

4. **Testing:**
   - Ensure that the switch widget is configured correctly to send the appropriate OSC messages based on the selected option.

By following these steps, the switch widget will successfully trigger the corresponding cues in QLAB based on the user's selection. 

[Attachment: switchModule.js]

# OSC Fader Feedback with MadMapper

**Problem Description:**
When using Open Stage Control with MadMapper, there was an issue where the fader did not follow the position value of the playhead on the timeline. The user needed the fader to update based on the position feedback from MadMapper.

**Solution:**
To ensure that the fader updates correctly in Open Stage Control, you need to send the same message that the fader receives back to Open Stage Control. 

Additionally, the user identified that the issue was related to the feedback port configuration in MadMapper. By setting the correct feedback port (default port 8080 for Open Stage Control), the fader began to function as intended, following the position value accurately.

[Attachment: Zrzut ekranu 2021-05-02 175044]

# Scrollbars in Modal Widget

**Problem:**  
Users may want to prevent scrollbars from appearing in the modal widget.

**Solution:**  
To hide scrollbars in the modal widget, add the following CSS to the widget:

```css
.popup-content > .panel {
  overflow: hidden;
}
```

Additionally, a `scroll` option will be included in a future release of Open Stage Control, allowing for easier management of scroll behavior in modals. For updates, refer to the GitHub repository: [github.com/jean-emmanuel/open-stage-control](https://github.com/jean-emmanuel/open-stage-control).

# CSS: Using "colorFill" with "background-image"

## Problem Description
Users may want to apply a linear gradient to the `colorFill` property while also using a `background-image`. 

## Solution
To integrate a linear gradient into the `colorFill` property, remove the semicolon from the existing CSS declaration and directly assign the gradient. Here’s how to do it:

```css
:host {
    background-color: default;
    color: white;
    text-transform: none;
    colorFill: linear-gradient(to right, grey 0% 23%, black 24%, grey 25%, white 50%, grey 75%, black 76%, grey 77% 100%);
    background-image: url(' * the code is too long to include it in here * ');
    background-position: center center; 
    background-size: 100%; 
    font-size: 0;
}
```

This adjustment allows you to use both the gradient and the background image effectively.

# Setting Default Values for "multixy" Widget

## Problem Description
Users have encountered issues when attempting to set default values for the "multixy" widget in Open Stage Control. Specifically, the default values do not seem to apply correctly, resulting in all points defaulting to [0,0] or moving to unintended positions upon reset.

## Solution
To set default values for the "multixy" widget, use the following syntax for the default property:

```json
[
  [0.5, 0.5],
  [0.5, 0.5],
  [0.5, 0.5],
  [0.5, 0.5],
  [0.5, 0.5]
]
```

Alternatively, if you are using named points, it is important to note that a bug previously prevented the application of default values when points were named. This issue is expected to be fixed in a future release.

For a flat array of values, you can also use:

```json
[0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]
```

Ensure that the multixy widget's range is correctly set, and verify that the double-tap functionality is configured properly to reset nodes to their default positions. If issues persist, check for any updates or bug fixes in future releases.

[Attachment: 1MC6n4mGycvj7GQWQKV0FIC6BQ5.json]

# Using `$` in Matrix Script Field

## Problem Description
When attempting to use the `$` symbol in the script field of a matrix in Open Stage Control, it does not function as expected. Users are unsure if it is possible to use `$` in this context. Additionally, there are challenges with executing scripts for buttons in a matrix, specifically regarding color feedback and button sizing.

## Solution
The `$` symbol is not usable in the script field of a matrix. It is only available within the `props` property. For button scripts in a matrix, you cannot directly determine which button was pressed. However, in the next release, an `id` variable will be introduced to help identify the pressed button.

To achieve color feedback for matrix buttons, it is recommended to use toggle buttons with IDs that share the same prefix. For example, if the matrix ID is `matrix_id`, the buttons should have IDs like `matrix_id/x`. The script for each button can be set as follows:

```javascript
if (value) set('matrix_id/*', 0, {sync: false})
```

In the `props` property, it would look like this:

```javascript
props.script = "if (value) set('matrix_id/*', 0)"
```

This configuration will turn off all matching widgets, excluding the one that triggered the action.

For issues related to dynamically changing the number of buttons in the matrix, it has been noted that there may be a bug that affects button functionality until the session is saved and reopened. This issue has been acknowledged and is being addressed for the next release.

For further customization, if you need to define a script in matrix props, ensure that the syntax is correct. For example:

```javascript
JS{{
    var props = {}
    props.mode = "toggle"
    props.label = "Fader " + [/* your logic here */]
    props.script = "set('fader_variable', [/* your logic here */])"
    return props
}}
```

If adding `props.script` causes other options to be ignored, double-check the syntax for any errors.

[Attachment: 3ZppsoH5uedIY1x6gXCkl9rSqav.json]

[Attachment: g91xKwsMoouiXyYoTTnKgWSDzLg.json]

# Custom Module for Sending and Receiving Messages in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to send and receive messages using a custom module in Open Stage Control. Specifically, messages sent from a widget may not be received correctly within the custom module, leading to confusion about the proper implementation.

## Solution
To successfully send and receive messages using a custom module, follow these guidelines:

1. **Sending Messages**:
   Use the `send()` function to send messages from your custom module. For example:
   ```javascript
   send("midi:my_midi_device", "/control", 1, 1, 1);
   ```

2. **Receiving Messages**:
   Implement the `oscOutFilter` method in your custom module to listen for incoming messages. Here’s a basic structure:
   ```javascript
   oscOutFilter: (data) => {
     const { address, args } = data;

     if (address === "/testingSend") {
       console.log(args[0].value);
       
       // Send a message after processing
       send("midi:my_midi_device", "/control", 1, 1, 1);
     }

     // Return the data to ensure messages are processed correctly
     return data;
   }
   ```

3. **Ensure Data is Returned**:
   It is crucial to return the `data` object at the end of your `oscOutFilter` function. This allows the server to process the message correctly:
   ```javascript
   return data;
   ```

4. **Debugging**:
   If messages are still not being sent or received, enable the server's debug function to monitor the messages being sent and received.

5. **Widget Configuration**:
   You do not need to use the widget's `onValue` script if you are handling messages entirely within the custom module. Ensure that your widget is set up to send messages to the correct address that your custom module is listening for.

By following these steps, you should be able to successfully send and receive messages using a custom module in Open Stage Control. 

For further reference, please check the attached example files for additional context and code snippets. [Attachment: example_code.js]

# onValue Not Firing

When using a push-type button in Open Stage Control, you may encounter an issue where the `onValue` event does not trigger, resulting in no console output when expected.

## Solution

Ensure that you are checking the correct console for output. The client console can be accessed by pressing `Ctrl + K` or through the three-dots menu in the client application. If you are not viewing the client console, the `console.log` statements will not appear.

# Importing Multiple Sessions as Tabs in Open Stage Control

**Problem Description:**
Users may want to import multiple sessions into a single session, with each session represented as a different tab. For example, importing sessions A.json, B.json, and C.json into a new session TABS.json, which contains three empty tabs labeled TAB1, TAB2, and TAB3.

**Solution:**
To achieve this, utilize the shared clipboard feature in Open Stage Control. Follow these steps:

1. **Open Multiple Sessions:**
   - Open each session (A.json, B.json, and C.json) in separate browser tabs.
   
2. **Copy and Paste:**
   - In each session, select the elements you want to import.
   - Copy the selected elements to the clipboard.
   - Switch to the TABS.json session and paste the copied elements into the corresponding tabs (TAB1, TAB2, TAB3).

3. **Save the Session:**
   - After pasting all desired elements, save the TABS.json session.

This method allows you to effectively import multiple sessions into a single session as different tabs.

[Attachment: filename.ext]

# Using a Script Widget in Open Stage Control

## Problem Description
Users may want to trigger a script within a Script widget when interacting with other widgets, such as buttons. There are several methods to achieve this, and users seek clarification on the available options and their effectiveness.

## Solution
To execute a script in a Script widget when a button is pressed, you can use the following methods:

1. **Linking Widgets**: Use the `linkId` property to link the button and the Script widget. This allows the button to trigger the script directly.
  
2. **Matching OSC Addresses**: Set the same OSC address for both the button and the Script widget. This way, the script will execute upon receiving the corresponding OSC message.

3. **Using OSC Listener**: Implement an `OSC{}` listener in the script's value. This method is similar to matching OSC addresses and will trigger the script based on incoming OSC data.

4. **Using `eval()` Function**: If you want to execute another widget's script, you can use the JavaScript function `eval()`. This will evaluate the script as if it were coming from the calling script.

Note: Ensure that the script's event is set to `value` to execute upon receiving a value from a message or widget.

These methods provide reliable ways to trigger scripts within Open Stage Control without needing a custom module.

# Dropdown Widget Label Area Resize

**Problem Description:**
Users want to resize the label area height and the dropdown height independently in the dropdown widget. Additionally, there is a request to remove the dropdown area altogether and have the label area activate the dropdown list.

**Solution:**
To resize the label area height and the dropdown height independently, you can use the following CSS:

```css
.label {
  max-height: initial;
  height: 90%;
}
```

To remove the dropdown area and have the label area activate the dropdown list, apply this CSS:

```css
.select {
  position: absolute;
  height: 100%;
  width: 100%;
  opacity: 0;
}
```

**Note:** The dropdown list size cannot be adjusted since the widget relies on the browser's native `<select>` element, which does not allow for custom sizing. However, you can modify the font size of the options using:

```css
option {
  font-size: 20rem;
}
.select {
  font-size: 8rem;
}
```

This will affect the appearance of the dropdown options but not the dropdown list size itself. 

[Attachment: dropdown.jpg]

# Assign Colors to Buttons According to Button Text

**Problem Description:**

Users are seeking a method to dynamically assign colors to buttons based on the text of the articulations received via OSC from a MIDI track in Cubase. The challenge lies in linking the articulation names to specific colors, potentially using a switch statement or a mapping object in JavaScript.

**Solution:**

To achieve color assignment based on articulation names, you can use a JavaScript object to map articulation names to their corresponding colors. Here’s a basic implementation:

1. **Define the Color Mapping:**
   Create an object that maps each articulation name to a color.

   ```javascript
   var artcolor = {
       'Staccato': { color: 'red' },
       'Portato Short': { color: 'blue' },
       // Add additional articulations as needed
   };
   ```

2. **Receive OSC Messages:**
   In your `receiveOsc` function, check the articulation name and assign the corresponding color to the button.

   ```javascript
   function receiveOsc(message) {
       var articulationName = message[1]; // Adjust index based on your message structure
       var buttonColor = artcolor[articulationName] ? artcolor[articulationName].color : 'defaultColor';

       // Assuming you have a function to set button color
       setButtonColor(articulationName, buttonColor);
   }
   ```

3. **Set Button Color:**
   Implement the `setButtonColor` function to apply the color to the button.

   ```javascript
   function setButtonColor(articulationName, color) {
       // Logic to find the button by articulation name and set its color
   }
   ```

This approach allows you to easily manage and update articulation colors by simply modifying the `artcolor` object. 

For a working example, you can refer to the provided script that integrates with Cubase: [Attachment: gpekzV1i68uNy3AEyfnufKbzfjF.js].

# Automating Feedback Display in Open Stage Control for REAPER

**Problem Description**  
When building a template in Open Stage Control to control plugins in REAPER using ReaLearn, the user wants to map knobs to FX parameters while automatically sending text feedback to display elements without creating multiple mappings for each FX parameter.

**Solution**  
To achieve this, assign a unique `linkId` to each pair of knob and input display. This can be done under the `value` section in the inspector. By doing this, the input display will show the knob's value and will update the knob whenever a value is entered in the input. 

This method simplifies the mapping process and avoids the need for separate mappings for each FX parameter.

# Problem with Key Triggering a Toggle

When a key is configured to trigger a toggle button on keydown, the toggle changes its state correctly. However, if the toggle is switched on using the mouse, subsequent key presses do not change the toggle's state. This issue persists regardless of the method used to switch the toggle on or off.

## Solution

To resolve this issue, link the key widget and the toggle using `linkId` instead of using `@{key_id}` in the toggle’s value property. In version 1, implement this with a single script widget that responds to keyboard events as follows:

```javascript
// script property
// no JS{{}} wrapper
// using get() instead of @{}
set('toggle', get('toggle') ? 0 : 1)
```

This approach ensures that the toggle state is correctly updated regardless of whether it is changed by a key press or mouse click.

# Widget of Type Variable

## Problem Description
In a switch widget, there is a need to set variable widgets with an array of values to control the visibility of knobs based on an array like `[0,1,1]` and label them with names like `["knobname1", "knobname2", ...]`. The attempt to access the array elements using `@{id[0]}` resulted in an "undefined" error.

## Solution
To correctly access elements of an array in Open Stage Control, use the following syntax:

```javascript
#{@{id}[0]}
```

This allows you to retrieve the array item correctly, enabling you to toggle the visibility of the knobs and set their labels as intended.

# MIDI Port Number Changes After Reboot (Windows)

**Problem Description:**
When using RTP MIDI on Windows, the MIDI port numbers change after a system reboot, requiring reconfiguration of MIDI settings for multiple ports.

**Solution:**
To resolve the issue of changing MIDI port numbers after a reboot, adjust the RTP MIDI settings. Change the creation mode to "Create port, fail enable if unsuccessful." This setting helps maintain consistent port connections after rebooting.

Additionally, Open Stage Control's MIDI configuration allows you to select ports by name. Instead of using port numbers, specify the port names in the format:
```
a:portname,portname
```
If the port name contains spaces, enclose it in quotes:
```
"a:port name,port name"
```

This method ensures that the correct ports are used, even if their numbers change. 

[Attachment: filename.ext]

# Sending MIDI to Different MIDI Device Targets

**Problem:**
To avoid feedback issues with a DAW (like Studio One), it is necessary to configure different MIDI devices for input and output. However, when setting up a widget's target in Open Stage Control, only options for either sending or receiving MIDI are available. The challenge is to have separate targets for incoming and outgoing MIDI.

**Solution:**
To achieve separate MIDI input and output targets, you can create virtual MIDI ports using a tool like loopMIDI. Here’s how to set it up:

1. Create two virtual MIDI ports in loopMIDI:
   - `toOSC` (for MIDI output)
   - `fromOSC` (for MIDI input)

2. In the MIDI OSC server configuration field of Open Stage Control, enter the following:
   ```
   oscMIDI:toOSC,fromOSC
   ```
   Here, `toOSC` is the virtual MIDI port for output, and `fromOSC` is for input.

3. In your widget's OSC inspector section, set the target to:
   ```
   midi:oscMIDI
   ```
   This uses the same port name defined in step 2.

By following these steps, you will enable bidirectional MIDI communication without feedback issues. 

[Attachment: filename.ext]

# Changing an Image Path on Button Press in Open Stage Control

## Problem Description
Users may encounter issues when attempting to change the image displayed in an image widget upon pressing a button. Specifically, using the script `set("myImage", "value", "./images/1800.jpg");` results in the image not updating correctly.

## Solution
To successfully change the image path, use the following command format:

```javascript
set("myImage", "./images/1800.jpg");
```

This command directly sets the image widget's value without specifying "value" as a parameter. Ensure that the image path is correct and that the image file exists in the specified location. 

If you need to clear the image before setting a new one, you can do so with:

```javascript
set("myImage", "");  // Clear the image
```

Then, set the new image path as follows:

```javascript
set("myImage", "./images/newImage.png");  // Set the new image path
```

This approach ensures that the image updates correctly when the button is pressed.

# Receiving MIDI Messages in Open Stage Control

## Problem Description
Users may encounter difficulties in receiving MIDI messages within Open Stage Control. Specifically, the "receive" function is not available, and there may be issues with installing custom modules, resulting in error messages.

## Solution
To receive MIDI messages, follow these steps:

1. **Widget Configuration**:
   - Create a widget (e.g., a "script" widget).
   - Set the following properties:
     - `address`: Set this to the desired address (e.g., `/sysex`).
     - `target`: Set this to `midi:your_midi_input_port_name`.
   - Use the `onValue` property of the widget to process incoming values.

2. **Custom Modules**:
   - Custom modules must be written from scratch rather than loading existing source files like `callback.js` or `custom-module.js`.
   - Refer to examples available in the forum to understand how to create custom modules, as this requires some knowledge of JavaScript.

By following these guidelines, you should be able to successfully receive MIDI messages and implement custom functionality in Open Stage Control.

For further reference, see the documentation on receiving messages. 

(attachment reference missing)

# Script Type Variable New in Version 1.0.0.beta8

## Problem Description
A new feature related to script type variables was introduced in version 1.0.0.beta8 of Open Stage Control. Users may need guidance on how to utilize this feature effectively.

## Solution
To understand how to use the new script type variable feature, refer to the provided example:

- **Example File**: [Attachment: exampleUsingScriptVariable-version1beta8]
- **Script Type Variable Usage**: [Attachment: scriptTypeVariableUsage.json]

These attachments contain practical examples to illustrate the usage of the new feature.

[Attachment: 6Czxah6NqesNvlsHxvTyJpMOCZa_1.json]

# Adapting v1 Ardour Template to Mixbus 32c

**Problem Description:**
When adapting a v1 Ardour template for use with Mixbus 32c, users may encounter issues with the template not receiving feedback from the software unless a refresh command is triggered. Additionally, users may find that the main strip, which serves as the template for cloned strips, is greyed out in the tree, preventing them from adding or visually laying out elements.

**Solution:**
To ensure the template receives feedback from Mixbus 32c, use the following command in the configuration modal:

```
/set_surface
```

This command is automatically triggered when the session is opened, as defined in the `ardour-plugins-module.js` file.

To edit the main strip that is greyed out, you need to change its `visible` property to `true`. By default, this property is set to hidden because the strip is used as a template for the clone matrix. Once set to visible, you will be able to select and modify the elements of the strip as needed.

# HTML Widget Display Issues

## Problem Description
The HTML widget in Open Stage Control does not display HTML elements such as `<strong>`, `<h1>`, and `<strike>` as expected. Users have noted that the default CSS styling appears to be overly aggressive, affecting the rendering of standard HTML.

## Solution
The HTML widget is designed to parse and display HTML without predefined styles. To achieve the desired appearance, users must apply their own CSS styles. Here are the recommended steps:

1. **Use CSS for Styling**: Define styles for the HTML widget using CSS. You can either create a theme file or add the CSS rules to the root widget's CSS. For example:
   ```css
   .html-container strong {
     font-weight: bold;
   }
   .html-container i {
     font-style: italic;
   }
   /* Add more styles as needed */
   ```

2. **HTML Structure**: Note that the HTML code is wrapped in `<div class="html-container"></div>`, which allows for styling to be applied correctly.

By following these steps, you can ensure that the HTML widget displays content as intended. For further customization, consider adding additional CSS rules to meet your specific design requirements.

[Attachment: 16092021.json]  
[Attachment: lDMvj4FBe5sQ0qR19gyiWPch9kN.json]  
[Attachment: 19092021-01.json]  
[Attachment: cuzjb5OomuAmQnCHphPJR7TCfbv.json]

# Visualizing MIDI Values from a MIDI Controller & Sending OSC from Open Stage Control

## Problem Description
The goal is to integrate an external MIDI controller with Open Stage Control to visualize MIDI values in real-time on widgets and send OSC messages based on those values to an external device. The current setup allows OSC messages to be updated from the GUI, but real-time visualization of MIDI controller values is needed.

## Solution
To display real-time MIDI controller values on Open Stage Control widgets and send OSC messages, follow these steps:

1. **Configure Widgets to Display MIDI Values:**
   - Set the widget's address to `/control`.
   - Use `preArgs` to specify the MIDI channel and control change number. For example, to display the value of CC18 on channel 2:
     ```json
     {
       "address": "/control",
       "preArgs": [2, 18],
       "target": "midi:my_port"
     }
     ```
   - Ensure that `my_port` is the MIDI device configured in the server's MIDI options.
   - For fader widgets, set the range:
     ```json
     {
       "min": 0,
       "max": 127
     }
     ```

2. **Sending OSC Messages:**
   - Widgets do not automatically respond to incoming messages. To achieve this, a custom module is required to filter incoming messages and call `send()` when necessary.
   - An alternative method is to simulate user interaction on the widgets using incoming messages, which can trigger them to send a message in return.

For further details, refer to the logic and examples provided in the original discussion. 

[Attachment: filename.ext]

# Understanding Variable CSS in JavaScript

## Problem Description
There is confusion regarding the initialization of CSS variables in JavaScript, specifically when to use an empty string versus a comment within the variable assignment.

## Solution
The difference between the two code snippets is as follows:

1. **Empty String Initialization**:
   ```javascript
   var css = ' ';
   /* whatever */
   return css;
   ```
   - In this case, the variable `css` is initialized as an empty string, which can be filled with content later.

2. **Non-Empty String Initialization**:
   ```javascript
   var css = '/* whatever */';
   return css;
   ```
   - Here, the variable `css` is initialized with a comment string. 

Both approaches are valid in JavaScript and are not specific to Open Stage Control. The choice between them depends on whether you intend to start with an empty variable or include initial content.

# Canvas drawImage() Issue

**Problem Description:**
Users have encountered an error when attempting to use the `new Image()` class in the canvas API, receiving the message: "TypeError: Image is not a constructor."

**Solution:**
The `Image` constructor will be available in the next release of Open Stage Control. Users should update to the latest version to utilize the `drawImage()` method without encountering this error. 

[Attachment: filename.ext] (attachment reference missing)

# Initialize Widget Value from OSC Server

When opening a session with multiple widgets, it is often necessary for the widgets to request their current values from the OSC server. This involves sending an OSC message that differs from the widget's OSC command.

## Problem Description
Widgets need to send a request to the OSC server to retrieve their current values upon session startup. The OSC message for the widget might look like this:
- Widget OSC message: `/the/thing 100`
- Widget initial value request: `/get/the/thing`

Upon receiving the `/get/the/thing` request, the server should respond with the current value, e.g., `/the/thing <current value>`. A custom script could be created to manage these requests, but it would require tracking all widgets and changes.

## Solution
To automate the initial value requests for each widget, you can use the following code in your custom module:

```javascript
var initialRequest = false;

app.on('sessionOpened', (data, client) => {
    initialRequest = true;
    // Force all widgets to send their messages
    receive('/STATE/STORE', {clientId: client.id});
    receive('/STATE/RECALL', {clientId: client.id});
    // Wait a bit and remove flag  
    setTimeout(() => {
        initialRequest = false;
    }, 250);
});

module.exports = {
    oscOutFilter: (data) => {
        if (initialRequest) {
            data.address = '/get' + data.address;
        }
        return data;
    }
};
```

This code sets a flag when the session opens, allowing all widgets to send their `/get` messages. After a short delay, the flag is reset.

### Note
This method has been confirmed to work for a single client. However, it may encounter issues with multiple clients. In such cases, alternative methods, such as using JSON-RPC messages (e.g., `{"method": "get_parameter", "params": []}`), may be more effective for retrieving current parameter values. 

[Attachment: filename.ext] (attachment reference missing)

# Use RGB Default Format Instead of Hexadecimal

**Problem Description:**
Users have expressed difficulty in interpreting color values presented in hexadecimal format within Open Stage Control. The hexadecimal format is not easily readable, making it challenging for users to understand and manipulate colors effectively. Users prefer RGB format, which is more intuitive and allows for easier adjustments.

**Solution:**
Open Stage Control will transition to using RGBA format in the next version, as confirmed by the developer. This format is more common and user-friendly, enabling users to easily identify and modify color intensity. Users can also manually input HSLA values if needed.

For further enhancements, users have suggested the implementation of a color picker tool, but this feature is not feasible due to the current architecture of Open Stage Control, which operates in a browser environment rather than as an Electron app.

[Attachment: filename.ext] (attachment reference missing)

# Custom Module Saving Trigger in Open Stage Control

When a change is detected in the custom module's main file or one of its submodules (included via `require()`), the following sequence of events occurs:

1. `module.exports.unload` is called (if defined).
2. Timeouts and intervals created by the module are cleared.
3. Callbacks registered by the module (via `app.on`) are removed.
4. Submodules (included via `require()`, not `nativeRequire()`) are unloaded.

After these steps, the main module is evaluated and loaded again. This process ensures that any changes made to the custom module are properly reflected in the application.

# Icons Missing When Adding Clients

**Problem Description:**
Users experience intermittent issues with icons not loading when clients connect to Open Stage Control (OSC). The error message indicates that the image is not loaded or not found. This issue occurs across different clients, including mobile devices and web browsers, particularly on Chrome. The images folder is located alongside the session file, not within the OSC installation directory.

**Solution:**
To resolve the issue, ensure that the image paths are correctly set according to the theme's location. Since version 1.7.3, paths are resolved against the theme’s location (app/assets/themes/) rather than app/assets/. 

1. **Check Image Path:**
   - Verify that the images folder is correctly referenced in your CSS. For example:
     ```css
     :host {
         background-size: contain;
         background-repeat: no-repeat;
         background-position: center center;
         background-image: url(images/house-with-a-garden.png);
     }
     ```

2. **Use Base64 Encoding:**
   - If issues persist with image paths, consider using Base64 encoding for images, as this method has been reported to work without errors.

3. **Browser Compatibility:**
   - Test the application on different browsers and devices to identify if the issue is browser-specific. Some users have noted that the problem appears more frequently on Chrome for Windows compared to Android devices.

4. **Clear Cache:**
   - If using a custom build, ensure that the version is correct and clear the cache to eliminate any potential issues from previous builds.

5. **Official Build Verification:**
   - Confirm that the issue occurs with the official build downloaded from the Open Stage Control website to rule out problems with custom builds.

By following these steps, users should be able to mitigate the icon loading issues when clients connect to OSC. 

[Attachment: image]

# Setting Widget Colors in Hexadecimal Format

**Problem:**
Users may encounter difficulties when trying to set widget colors in Open Stage Control using RGB hexadecimal formats. Common formats that do not work include:
- `rgb(#aabbcc)`
- `rgba(#aabbccdd)`
- `rgb(#aa,#bb,#cc)`
- `rgba(#aa,#bb,#cc,#dd)`
- `rgba(1,2,3,4)`

**Solution:**
To set colors in hexadecimal format, use the following formats directly without any prefixes:
- For opaque colors: `#aabbcc`
- For transparent colors: `#aabbccdd`

This method is consistent with standard HTML/CSS practices. For further reference, consult the [MDN documentation on CSS colors](https://developer.mozilla.org/en-US/docs/Web/CSS/color).

# An Image on a Push Button

## Problem Description
Users may want to use an image as the background for a push button in Open Stage Control or have an image react as a push button, such as associating a bird picture with its song.

## Solution
To set an image as the background for a push button, use the following CSS properties:

```css
background: url(/path/to/file.png);
background-size: cover;
```

Alternatively, you can set the button's CSS to:

```css
background: transparent;
```

Then, place an image widget behind the button. Use the `z-index` property to manage the stacking order of the widgets if necessary.

# Retrieving Track Names from Behringer X32 Console

**Problem Description**  
Users may encounter difficulties in fetching track names from a Behringer X32 mixing console using Open Stage Control (OSC). Specifically, while the `/xremote` command updates track names upon changes, there is a need to retrieve these names immediately upon startup.

**Solution**  
To retrieve track names from the X32 console, implement the following code in your custom module. This code should be placed within the `sessionOpened` event, which ensures that the requests are sent after the client interface is loaded:

```javascript
app.on('sessionOpened', (data, client) => {
  // This event is emitted when a client loads a session
  // Ideal time to fetch the X32 values
  for (var i = 1; i <= 32; i++) {
    var n = String(i).padStart(2, "0"); // Format channel number as "01", "02", etc.
    send(X32_IP, X32_PORT, `/ch/${n}/config/name`);
  }
});
```

### Important Notes:
- The `send()` function does not return values; it only sends OSC messages. The X32 will respond with the track names through separate OSC messages.
- You cannot directly access widget properties like `button_{i}.label` in the custom module. Instead, use the `receive()` function to update widget labels based on the incoming messages from the X32.

This method ensures that all track names are fetched and can be displayed correctly in your OSC interface. 

[Attachment: filename.ext] (attachment reference missing)

# Faders 1 to 8 Unreachable in Cubase with Mackie Control

## Problem Description
Users may encounter an issue where the first eight faders in Cubase are unreachable when using multiple Mackie Control devices. Communication from Open Stage Control (OSC) to Cubase works, but not the other way around for the first eight tracks.

## Solution
To resolve this issue, ensure the following steps are taken in the correct order:

1. Launch Open Stage Control (OSC) or any Mackie remote application.
2. Start Cubase.

This sequence ensures proper communication between OSC and Cubase for all faders, including tracks 1 to 8. 

Additionally, verify that the MIDI device list in the server window has the correct port numbers configured. 

[Attachment: OSC.png]

# Fixing Freezing Issues During Dynamic Panel Cloning

When using multiple matrices to clone a panel (such as a channel strip in a mixer), users may experience freezing issues when launching a new client or when the number of channels changes during a session. This can result in significant delays, especially on older devices.

## Problem Description
The freezing occurs while the system generates clones based on the number of channels detected via OSC messages. Users have reported waiting times ranging from several seconds to a few minutes, depending on the device's performance and the complexity of the session.

## Solution
To reduce freezing time, rearrange the widget hierarchy in your session. Specifically, place the widget `eq_eq_track_@{parent.variables.n}` after `multixy_eq_track_@{parent.variables.n}` in the tree structure. This adjustment ensures that the latter is fully created before the former, preventing unnecessary build phases that contribute to freezing.

If the freezing persists, it may indicate that the current approach of cloning heavy widgets has reached its performance limits. For improved performance, consider more complex solutions such as building elements on the server side with a custom module, avoiding duplication of modals for equalizers/compressors, and using shared modals routed to the appropriate controls based on the selected track.

For further optimization tips, refer to community resources on optimizing Open Stage Control sessions.

[Attachment: laTJ9ujmh1OxnN72YLZpsADhSiK.json]

# Send OSC on Widget's State Change

**Problem Description:**
A user wants to automatically send an OSC message on `/keepAliveResponse` in response to a device sending messages on `/keepAlive` every second. The challenge arises because the `send()` function in Open Stage Control only works with user interactions.

**Solution:**
To achieve the desired functionality, you can use the `/SET` command to simulate user interactions. This may require routing the `/keepAlive` messages to the appropriate `/SET` command. Implementing a custom module can facilitate this process.

For further guidance and examples, refer to the documentation on [replying to OSC messages](https://openstagecontrol.ammd.net/docs/custom-module/examples/#reply). 

[Attachment: filename.ext]

# How to Get the Widget's Own ID

To retrieve a widget's own ID in Open Stage Control, you can use the following methods:

## Solution

- In a script, use:
  ```javascript
  getProp(this, 'id')
  ```
  
- In a non-script property, use:
  ```plaintext
  @{this.id}
  ```

# Relative Units and Editor Grid in Open Stage Control

## Problem Description
Users have expressed challenges with the use of relative units in Open Stage Control (OSC) for widget positioning and sizing. Common issues include:
- Forgetting to enable relative units, leading to widgets being created in pixels.
- Difficulty in converting existing pixel values to percentages for multiple widgets.
- The grid snapping to pixel values instead of percentages, complicating alignment.
- Rounding errors when using decimal values in widget geometry, causing display issues in browsers.

## Solution
1. **Default Setting for Relative Units**: Users can set the option to use relative units by default through the client option `usePercent`.

2. **Grid Size Configuration**: The grid size can be defined in a theme file, although it does not support percentage values. For example:
   ```css
   :root {
     --grid-width: 20; /* Set grid width in pixels */
   }
   ```

3. **Widget Positioning**: Instead of relying solely on percentages for positioning, consider using a combination of vertical/horizontal containers and expanding widgets (`expand: true`). This approach can help create responsive layouts without the need for extensive use of relative units.

4. **Handling Rounding Errors**: To avoid issues with decimal values, ensure that values are rounded appropriately. For example, using `14%` instead of `14.01%` can prevent misinterpretation in browsers.

5. **Conversion Functionality**: A feature to convert pixel values to percentage could be beneficial. This could be implemented as a right-click option on widgets.

By adopting these practices, users can enhance their experience with OSC and improve the adaptability of their interfaces across different devices.

[Attachment: trackMixer_example.json]  
[Attachment: 8cSFRDtHpgrHtH2cTLK48ySg2aV.json]

[Attachment: a1EtUDa70AZ0J7gAmAdzBkdh8Da.json]

# Accessing Updated Touch Position in onTouch Event

## Problem Description
When using the `onTouch` property in an XY-Pad, the value logged during the `start` touch event only reflects the last known value, not the updated touch position. For example, using the following script:

```javascript
if (event.type === "start") {
  console.log(value)
}
```

This will log `[0,0]` on the first touch and the previous position on subsequent touches, as the value is not updated until after the `start` event has executed.

## Solution
To retrieve the updated value during the `start` touch event, you can use `setTimeout` to defer the execution of your functions until the next processing cycle. This allows you to access the updated value using `get(this)` instead of `value`. Here is the revised code:

```javascript
if (event.type === "start") {
  setTimeout(() => {
    // executed on next processing cycle
    console.log(get(this)) // retrieves the updated value
  });
}
```

This approach ensures that your custom functions can operate with the most current touch position.

# Input Widget: Limit Character Input to 127

**Problem:**  
There is a need to restrict character input in an input widget to a maximum of 127 characters.

**Solution:**  
While a property for limiting character input is being developed, you can use the following script to truncate the value upon submission:

```javascript
// onValue
if (typeof value === 'string' && value.length > 127) {
  set(this, value.substr(0, 127));
}
```

This script checks if the input is a string and if its length exceeds 127 characters, it truncates the input to the first 127 characters. 

[Attachment: filename.ext]

# Problem: Configuring a Knob with Two Colors and Alpha Transparency

A user wanted to create a knob that changes color based on its value, transitioning from green to blue, while also adjusting the alpha transparency. The initial attempt resulted in a TypeError due to incorrect nesting of blocks.

## Solution

To achieve the desired functionality, follow these steps:

1. **Avoid Nested Blocks**: You cannot place a `#{}` block inside another `#{}` block. Instead, use string concatenation for variable definitions.

2. **Use CSS Variables**: Define the color and alpha values using JavaScript within the CSS field. Here’s an example of how to implement this:

```javascript
JS{{
var couleurB = (2*@{this});
var couleurG = (255 - 3.4*@{this});
var alphaB = (@{this}/64 - 1);
var alphaG = (1 - @{this}/63);
var css = '';

if (@{this} < 63) {
  css = ":host {--color-widget: rgb(0," + couleurG + ",0); --alpha-fill-on:" + alphaG + ";}";
}

if (@{this} == 63) {
  css = ":host {--color-widget: rgb(10,0,0); --alpha-fill-on:0;}";
}

else if (@{this} > 63) {
  css = ":host {--color-widget: rgb(0,0," + couleurB + "); --alpha-fill-on:" + alphaB + ";}";
}
}}
```

3. **Gradient Alternative**: If you are using a fader, you can utilize the gradient field for color transitions. For example:

```json
{
  "0": "blue",
  "127": "green"
}
```

4. **Final Adjustments**: Test and tweak the values as necessary to achieve the desired visual effect on the knob.

This approach allows for dynamic color and alpha adjustments based on the knob's position.

# Android Behavior with Input Widget

**Problem Description:**
When using an input widget in Open Stage Control on Chrome for Android, the browser does not remain in full screen mode. A popup appears at the top of the screen displaying the app name, loaded file name, port, and a warning about an "unsecure http" connection. The only way to return to full screen is to reload the entire session. This issue occurs on Android 4.4.4 with Chrome 81, and no updates are available.

**Solution:**
To resolve this issue, try the following:

1. **Add to Home Screen:** Ensure the page is added to the device's home screen and launch it from there. This may help maintain full screen functionality.

If the problem persists, it may be related to the "unsecure http connection." Consider using a secure connection (HTTPS) if possible.

# How to Fill a Cell with Color in a Matrix

**Problem Description:**
Users may want to fill the entire cell of a matrix with a color rather than just changing the border color and number. This is particularly useful for visual clarity in applications like DAWs (Digital Audio Workstations).

**Solution:**
To fill a cell with color in a toggle matrix, you can use the following CSS property:

```css
.toggle-container.on {
  background: var(--color-accent);
  color: black;
}
```

For additional customization, consider enabling the `alt-buttons` theme for more contrasted buttons. More tips on using CSS can be found in the general CSS documentation available online.

# Setting a Switch Default Value to the First Index

**Problem Description:**
Users need to set a switch's default value to the first index of its values without knowing the actual values in advance. The switch is populated by an external script that rewrites the .json file, ensuring it is never empty.

**Solution:**
To set the switch's default property to the first value, use the following JavaScript expression:

```javascript
JS{{
  return Object.values(@{this.values})[0]
}}
```

This expression retrieves the first value from the switch's values. Note that the default property is only applied when loading the json file.

If the values are in an array format (e.g., `["a", "b"]`), you can simplify the expression to:

```javascript
JS{{
  return @{this.values}[0]
}}
```

Alternatively, for a more concise syntax, you can use:

```javascript
#{@{this.values}[0]}
```

Ensure you are using the latest version of Open Stage Control, as functionality may vary with different releases.

[Attachment: filename.ext]

# Quicker Way to See Theme Edits

## Problem Description
Users may find it cumbersome to reload the Theme.css edits in Open Stage Control (OSC) as it requires closing and reopening the application to test changes.

## Solution
To quickly reload the Theme.css edits without restarting OSC, use the following method:

1. Open the browser's JavaScript console (press F12).
2. Paste the following code into the console:

   ```javascript
   socket = new WebSocket('ws://' + window.location.host + '/dev');
   socket.onopen = function() {
       this.send('["reloadCss"]');
       this.close();
   }
   ```

This will reload the CSS changes without needing to close the application.

# Configuring Open Stage Control with Node

## Problem Description
Users may want to simplify the process of launching the Open Stage Control server by avoiding repetitive command line input. Additionally, there is interest in automatically starting the server on startup for devices like the Raspberry Pi. Users also seek to understand the location and usage of the configuration file, as well as how to check the current state of the server from the command line or client.

## Solution
1. **Creating a Shell Script for Launch Options**:
   You can create a shell script to include all your launch options. For example:
   ```sh
   #!/bin/sh
   open-stage-control --debug --load path/to/session.json
   ```

2. **Configuration File Location**:
   The configuration file for Open Stage Control can be found at:
   ```
   ~/.config/open-stage-control/config.json
   ```

3. **Checking Server State**:
   - If launched from the command line, you can check the current state of the server by copying the command from the terminal.
   - The client application will display a notification popup when disconnected, which remains visible until addressed.

4. **Displaying Server Configuration in Client**:
   To display server configuration in the client window, you can create a custom module that reads the server configuration using `settings.read()` and feeds it to a widget when the session is loaded. Here is an example code snippet:
   ```javascript
   var config = {}
   var configStr = ''
   for (var opt in ['send', 'port', 'load']) {
     config[opt] = settings.read(opt)
     configStr += opt + ':' + config[opt] + '\n'
   }

   app.on('sessionOpened', (data, client) => {
       receive('/text_widget_address', configStr)
   })
   ```

5. **Automatic Startup on Raspberry Pi**:
   For automatic server startup on a Raspberry Pi, refer to online resources for guidance on setting up scripts to run at boot.

By following these steps, you can streamline your Open Stage Control setup and enhance your workflow.

# Setting Up Multiple MIDI Buses in Open Stage Control

## Problem Description
Users may encounter difficulties when attempting to configure multiple MIDI buses in Open Stage Control, particularly when using the OSC MIDI Router settings. For example, entering "OSC:2,2" may only apply to a single bus.

## Solution
To configure multiple MIDI buses in Open Stage Control, follow these steps:

1. **Server MIDI Configuration**: Use the following format to define your MIDI ports in the server's MIDI configuration:
   ```
   port1:1,2 port2:3,3 port3:2,1
   ```
   This creates three MIDI devices:
   - `port1`: connected with input 1 and output 2
   - `port2`: connected with input 3 and output 3
   - `port3`: connected with input 2 and output 1

2. **Widget MIDI Configuration**: For a widget to target multiple MIDI devices, set the target as follows:
   - For a single MIDI device: 
     ```
     target: midi:Port3
     ```
   - For multiple MIDI devices:
     ```
     target: ["midi:Port1", "midi:Port2", "midi:Port3"]
     ```

3. **MIDI Range and Address**: Ensure the MIDI values are within the range of 0 to 127, and set the address for control change events as:
   ```
   address: /control
   pre-args: [1, 7]  // MIDI channel 1, control number 7
   ```

By following these configurations, you can effectively manage multiple MIDI buses in Open Stage Control. For more details, refer to the MIDI configuration documentation on the Open Stage Control website.

# Basic Filesystem Operations in Open Stage Control

**Problem Description:**
Users may encounter difficulties performing basic filesystem operations such as saving and loading state files within Open Stage Control. While the platform supports reading and writing files through reserved remote control commands like `/state/save` and `/state/load`, users are often unsure how to implement custom file operations in the `onCreate` or `onValue` functions. There is a need for a clear example of how to save a string to a file or load it from a file.

**Solution:**
To perform filesystem operations, you need to implement a custom module that utilizes OSC (Open Sound Control) messages. The following steps outline the process:

1. **Create a Custom Module:**
   - Implement a custom module that listens for OSC messages using the `oscOutFilter` function.

2. **Send OSC Messages:**
   - To save data to a file, send a dummy OSC message each time you need to perform a save operation. This is necessary due to the encapsulation of functions within the custom module.

3. **Example Commands:**
   - Consider defining structured OSC commands for file operations, such as:
     - `/save {data, path}`
     - `/load {path}`
     - `/scandir {path}`

4. **Accessing State:**
   - Use `stateGet()` to retrieve the state of UI elements and convert it to a string for saving.

This approach allows you to manage filesystem operations effectively while maintaining control over the process and preventing unintended data manipulation.

For further reference, an example demonstrating this use case has been provided in the forum thread linked by **jean-emmanuel**. 

[Attachment: example_script.js]

# Dynamically Appending Widgets via Module

**Problem Description:**
Users may want to dynamically append a widget to existing sessions in Open Stage Control using a module. While it is possible to replace the entire 'root' with a new set of widgets using the command `receive('/EDIT', 'root', { widgets: interfaceWidgets })`, there is no direct command to append a widget to an existing one.

**Solution:**
To retrieve the data of an existing widget, including its children, use the command `/EDIT/GET`. However, since there is no "append" command available, an alternative approach is recommended. 

You can encode the desired widget (e.g., a QR code) as a base64 image and then modify the `html` property of the root to insert the image without altering the session tree. This method allows for dynamic updates while maintaining the existing structure.

For reference, you may find additional context in the OpenStageControlHandbook on GitHub: [Attachment: OpenStageControlHandbook/codeSamples/QRCodeModule].

# Receiving SysEx Messages through MIDI Protocol

**Problem Description:**
The user is attempting to virtualize the Ableton Launch Control XL, which requires receiving SysEx messages through the MIDI protocol. They are inquiring whether this functionality is supported in Open Stage Control.

**Solution:**
Yes, Open Stage Control supports receiving SysEx messages. To configure this, you need to append "sysex" to your MIDI configuration. 

For sending SysEx messages from a custom module, use the following command:
```javascript
send('midi', 'mididevicename', '/sysex', 'f0 xx xx');
```

When sending from a widget, ensure the target is set to MIDI, and the SysEx string should be placed in the address property. For further details, refer to the official documentation. 

[Attachment: filename.ext]

# Changing Menu and Switch Script in Open Stage Control

## Problem Description
The goal is to dynamically change the script of `MENU B` based on the selected value of `MENU A`, which contains values that send messages. The challenge is to ensure that when the script of `MENU B` is updated, it also modifies the values and messages of three associated switches.

## Solution
To achieve this, you can use the following script structure for `MENU A`. Each value in `MENU A` will dictate the corresponding settings for `MENU B` and the switches.

```javascript
if (value === "A") {
    send('midi:my_device', '/control', 1, 1, 1);

    if (get('MENU_B') === "X") {
        set("switch_1", 1);
        set("switch_2", 1);
        set("switch_3", 1);
    }
    if (value == "1") {
        send("midi:my_device", "/control", 3, 3, 80);
    }
    if (get('MENU_B') === "Y") {
        set("switch_1", 2);
        set("switch_2", 2);
        set("switch_3", 2);
    }
    if (value == "2") {
        send("midi:my_device", "/control", 3, 4, 80);
    }
    if (get('MENU_B') === "Z") {
        set("switch_1", 3);
        set("switch_2", 3);
        set("switch_3", 3);
    }
    if (value == "3") {
        send("midi:my_device", "/control", 3, 5, 80);
    }
}

if (value === "B") {
    send('midi:my_device', '/control', 1, 1, 1);

    if (get('MENU_B') === "X") {
        set("switch_1", 2);
        set("switch_2", 2);
        set("switch_3", 2);
    }
    if (value == "1") {
        send("midi:my_device", "/control", 4, 3, 80);
    }
    if (get('MENU_B') === "Y") {
        set("switch_1", 3);
        set("switch_2", 3);
        set("switch_3", 3);
    }
    if (value == "2") {
        send("midi:my_device", "/control", 4, 4, 80);
    }
    if (get('MENU_B') === "Z") {
        set("switch_1", 1);
        set("switch_2", 1);
        set("switch_3", 1);
    }
    if (value == "3") {
        send("midi:my_device", "/control", 4, 5, 80);
    }
}

if (value === "C") {
    send('midi:my_device', '/control', 1, 1, 1);

    if (get('MENU_B') === "X") {
        set("switch_1", 3);
        set("switch_2", 3);
        set("switch_3", 3);
    }
    if (value == "1") {
        send("midi:my_device", "/control", 5, 3, 80);
    }
    if (get('MENU_B') === "Y") {
        set("switch_1", 1);
        set("switch_2", 1);
        set("switch_3", 1);
    }
    if (value == "2") {
        send("midi:my_device", "/control", 5, 4, 80);
    }
    if (get('MENU_B') === "Z") {
        set("switch_1", 2);
        set("switch_2", 2);
        set("switch_3", 2);
    }
    if (value == "3") {
        send("midi:my_device", "/control", 5, 5, 80);
    }
}
```

This script ensures that the switches and their corresponding messages are updated based on the selections made in both `MENU A` and `MENU B`. 

For further reference, see the attached session files for additional context:
- [Attachment: Change menu and switch script.json]
- [Attachment: ClMxmHfs1z8BN1mqthFxS151Jg.json]
- [Attachment: Simplified version.json]

[Attachment: zHR5vmK8ENCmnbgrFeQYgg0tEXg.json]

[Attachment: 5m5morsk31KHeewLWmQZSENtu6P.json]

[Attachment: 2uuEDnF4vP6CQtwfYIceN2qq32d.json]

# Sum the Value of Two Widgets

## Problem Description
The goal is to sum the values of two XY pads in Open Stage Control. For example, if pad#1 has values x = 15 and y = 30, and pad#2 has values x = 2 and y = 6, the desired output should be x = 17 and y = 36.

## Solution
To achieve this, create an input widget with the following value configuration:

```javascript
JS{{
var xy1 = @{xy_1}
var xy2 = @{xy_2}

return [xy1[0] + xy2[0], xy1[1] + xy2[1]] 
}}
```

This script retrieves the values from the two XY pads and returns their sum. You can then use the input widget to send the resulting value by setting its address, target, etc. 

### Note on Widget Properties
- **Value**: Represents the widget’s input. When this property changes, the widget’s value is updated.
- **Script**: Acts as the widget’s output. When the widget’s value is updated, the script is executed.

# How to Use a Custom CSS Class in Open Stage Control

## Problem Description
Users may want to apply custom CSS classes to specific widget elements in Open Stage Control to achieve unique styling. However, confusion arises regarding where to declare these classes and how to apply them correctly.

## Solution
To use a custom CSS class in Open Stage Control, follow these steps:

1. **Declare the Custom Class**: In the CSS field of the root element, define your custom class. For example:
   ```css
   .my-custom-class { 
       background: yellow; 
       font-size: 3em; 
   }
   ```

2. **Apply the Class to a Widget**: In the widget's CSS field, add the following line to apply the custom class:
   ```plaintext
   class: my-custom-class
   ```

3. **Understanding CSS Selectors**: Note that CSS selectors are ignored when applying classes. This means you cannot target a specific element within a widget using selectors like:
   ```css
   .some-inner-element {
       class: my-custom-class;
   }
   ```

4. **Direct Child Combinator**: If you want to apply styles to specific elements within nested widgets, use the direct child combinator (`>`) to ensure the rule only applies to the intended elements. For example:
   ```css
   inner > navigation > tablinks { 
       /* your css code */ 
   }
   ```

By following these guidelines, you can effectively utilize custom CSS classes in Open Stage Control to enhance your widget styling. 

[Attachment: missing]

# Cubase Volume Control Issue with OSC Faders

**Problem Description:**
When configuring an OSC fader to control the volume of a selected track in Cubase, the volume automation updates only every second, resulting in a jumpy motion instead of a smooth transition. Additionally, the volume of the selected track fluctuates slightly, indicating a potential feedback loop caused by constant updates between Cubase and OSC.

**Solution:**
To resolve this issue, follow these steps:

1. **Avoid Feedback Loops:**
   - Create two separate ports in LoopMIDI: one for sending and one for receiving. This setup prevents feedback loops that can cause constant data transmission.

2. **Configure MIDI Targets:**
   - In Open Stage Control's MIDI configuration, modify the target declaration for Cubase to connect to both input and output ports:
     ```
     cubase:loopmidi_osc_to_cubase_port,loopmidi_cubase_to_osc_port
     ```
   - Ensure that the widget's target remains unchanged.

By implementing these changes, the volume control should function smoothly without unintended fluctuations. 

[Attachment: filename.ext]

# MIDI Note-Off Message with Non-Zero Velocity

**Problem Description:**
In Open Stage Control (OSC), MIDI note-off messages are typically recognized as note-on messages with a velocity of 0. This behavior can prevent certain commands from being triggered in applications like Cubase, where a note-off message with a velocity greater than 0 is required to activate specific functions, such as soloing a track.

**Solution:**
Currently, Open Stage Control does not support generating note-off messages with a velocity higher than 0. However, a feature to send note-off messages with adjustable velocity is planned for future releases. The existing behavior of receiving note-off messages as note-on messages with a velocity of 0 is expected to remain unchanged.

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]

# No Automatic View Update When Writing Props in Matrix

When using the matrix widget in Open Stage Control, changes made to the `props` property may not automatically update the widget's view. This behavior can be confusing, as modifications to the code do not reflect until the session is manually refreshed.

## Problem Description
The issue arises when the `props` property is evaluated with `$` equal to `0`. If the result remains unchanged, the matrix's children do not update. Users have reported needing to manually refresh the session using `Ctrl + S` followed by `Ctrl + R` to see their changes.

## Solution
To ensure that the widget updates correctly, you can implement one of the following methods:

1. **Make Unambiguous Changes**: Modify properties in a way that does not depend on the `$` variable. This guarantees that the result will differ, prompting an update.
   
2. **Inject a Random Value**: Add a property that changes with each update to force a refresh:
   ```javascript
   props._rand = Math.random();
   ```
   **Note**: Be cautious with this method, as it may lead to session crashes if not handled properly.

3. **Manual Refresh**: Use `Ctrl + R` to refresh the session, which reloads the page and applies the changes.

For most users, sticking to the manual refresh process is recommended until a more stable solution is implemented. 

[Attachment: filename.ext]

# Translating RGB Values to MIDI Notes

**Problem Description:**
The user wants to convert RGB values from an RGB widget into MIDI notes for use with grandMA2, specifically mapping R, G, and B values to MIDI note numbers (e.g., R = 1,1; G = 1,2; B = 1,3). However, there is a concern regarding the difference in value ranges between RGB (0-255) and MIDI (0-127).

**Solution:**
To successfully translate RGB values to MIDI notes, consider the following:

1. **Value Range Adjustment:** Since RGB values range from 0 to 255 and MIDI values range from 0 to 127, you will need to send two MIDI messages for each color channel (R, G, B). This means you will need to scale the RGB values accordingly.

2. **MIDI Message Structure:** 
   - For each color channel (R, G, B), you can send two MIDI messages:
     - The first message can represent the high 7 bits (0-127).
     - The second message can represent the low 8 bits (0-127) if needed.

This method allows you to effectively utilize the RGB values within the MIDI framework while adhering to the constraints of MIDI data transmission.

# Mouse Events in Pad XY

## Problem Description
The user wants to send different OSC messages on mouse down and mouse up events (e.g., …/xystart for mouse down and …/xyend for mouse up) in the pad xy.

## Solution
The `touchAddress` property provides only one address for sending information. To achieve different OSC messages for mouse down and mouse up events, you can create a custom module to route the messages to different addresses. 

This solution effectively addresses the requirement for distinct OSC messages based on mouse events.

# Sending to Another IP Port in Open Stage Control

**Problem Description:**
In Open Stage Control, users may need to send messages to different IP addresses and ports, particularly when working with multiple scripts in applications like Bitwig. The challenge lies in configuring the widget to specify which port to use for sending messages.

**Solution:**
To successfully send messages to different IP addresses and ports, follow these steps:

1. Set the `ignoreDefaults` property of the widget to `true`.
2. Specify the target IP address and port in the widget's configuration.

This configuration allows you to define different targets for your messages, enabling functionality for multiple scripts within your setup.

# Sending Button Labels from a Matrix to OSC Messages

**Problem Description:**
The user wants to send the label of buttons in a matrix as part of an OSC message instead of sending the button index. They are transitioning from Lemur and are looking for a solution to achieve this in Open Stage Control.

**Solution:**
To send the button label as part of the OSC message, you can configure the button properties as follows:

1. Define the button's `on` property to match its `label` property:
   ```json
   {
     "label": "#{OSC{/vca}[$]}",
     "on": "#{OSC{/vca}[$]}",
     "mode": "tap",
     "colorWidget": "rgba(109,253,147,1)",
     "preArgs": 1,
     "address": "/ipad2"
   }
   ```

2. The `preArgs` property set to `1` ensures that an additional argument (the trigger) is sent before the label value.

3. If you need to specify the types of the arguments being sent, you can use the `typeTags` property, but it's not necessary in this case since numbers are sent as floats by default.

By using the above configuration, you will send the OSC message in the desired format, such as `/ipad2` with the label as an argument. 

Make sure to check for any custom functions that might interfere with OSC messaging if you encounter issues. 

[Attachment: filename.ext]

# Triggering a Button Press from a Custom Module

## Problem Description
The goal is to simulate a button press from a custom module in Open Stage Control. Specifically, when a button (e.g., `/button_2`) is pressed, it should trigger another button (e.g., `/button_1`) without needing to know the underlying "on" value of `/button_1`.

## Solution
To achieve this, you can use the following command in your custom module:

```javascript
receive('/SCRIPT', `set('button_1', getProp('button_1', 'on'))`)
```

This command effectively simulates pressing `/button_1` before `/button_2` is activated.

# Convert Pixels to Percent in Open Stage Control

## Problem Description
Users may need to convert all elements in a template from pixels to percentages for layout adjustments in Open Stage Control.

## Solution
There is no built-in function to convert pixel values to percentages directly within Open Stage Control. However, you can programmatically alter the session file by parsing it and writing a custom script to perform the conversion. 

For example, using an AutoHotkey (AHK) script with Regex can effectively modify the *.json file to achieve this conversion, although it may require some troubleshooting to perfect the script. 

[Attachment: filename.ext] (attachment reference missing)

# Can a Button Have Two Cue Addresses?

When using QLab, you may need a toggle button to send different commands for starting and stopping cues, such as "/cue/1/start" for starting and "/cue/1/stop" for stopping.

## Solution

A button in Open Stage Control can only have one address, but you can utilize its script property to send different addresses based on the button's state. Here’s how to implement it:

1. **Set the Script Property**: Use the following script to determine the address based on the button's value:
   ```javascript
   // Assuming 'on' is 1 and 'off' is 0
   // (target property must be set)
   if (value == 1) {
     send('/cue/1/start');
   } else {
     send('/cue/1/stop');
   }
   ```

2. **Bypass Default OSC Message**: If you want to prevent the default OSC message from being sent, set the Bypass property to true.

For more information, refer to the [Scripting - Open Stage Control](attachment reference missing).

# The Logic Behind A Two Way Mixer (Reaper Integration)

## Problem Description
The challenge involves integrating Open Stage Control (OSC) with Reaper to display track information such as current dB levels, fader positions, effects, and track names. The user seeks guidance on how to receive this information from Reaper to OSC and whether it is feasible to expand upon existing templates for this purpose.

## Solution
1. **Utilize the reaperOSC File**: Check the `reaperOSC` file in the Reaper installation folder. This file contains valuable information about the OSC messages that Reaper sends out.

2. **Template Expansion**: Consider using the MOSS template from the Reaper community, which has been noted for its flexibility in handling Reaper configurations. 

3. **Hiding the Template in a Tab**:
   - To organize the interface, select all elements of the template, cut them, right-click on the root in the tree, select 'Add Tab', and then paste everything into the new tab.

4. **Debug Mode**: Ensure that debug mode is enabled in Reaper. This will allow you to see incoming messages when actions are performed in Reaper. If no messages appear, there may be an issue with the setup.

5. **Modal Views**: Consider implementing modal views to display only necessary controls at a time, reducing clutter and improving usability.

6. **Communication Issues**: If Reaper is not sending track names or fader changes to OSC, verify that the connection is properly established and that the Reaper OSC file is correctly configured, as it may still play a role in facilitating communication.

By following these steps, you should be able to effectively integrate OSC with Reaper and manage your mixer interface more efficiently.

# Switch Widget: Specifying a Range of Values

**Problem Description:**
Users want to specify a range of values for a switch widget in Open Stage Control instead of manually typing each value individually. For example, instead of inputting `[1, 2, 3, ..., 20]`, they prefer a more concise representation like `[1 to 20]`.

**Solution:**
You can achieve this by using JavaScript to generate the desired range. Here is a working example:

```javascript
Array.from(new Array(numberOfValues), (x, i) => i + lowerBound);
```

In this code:
- Replace `numberOfValues` with the total count of values you want.
- Replace `lowerBound` with the starting value of your range.

Make sure to include the `#{}` syntax to ensure the JavaScript block returns the correct output. 

This method does not require any additional libraries. 

[Attachment: image1.png]  
[Attachment: image2.png]

# Using @{ } in Matrix Properties

## Problem Description
When using advanced syntax in the matrix properties of fader widgets, there are issues with undefined properties in the JavaScript console. This occurs when attempting to access values from variables using the @{ } syntax, particularly when those variables may not be defined at the time of execution.

## Solution
To prevent errors related to undefined properties, implement an early check to ensure that the variables are defined before proceeding with the rest of the script. Here is a refined version of the script that includes this check:

```javascript
JS{{
  const p = {}, 
        colors = @{seq_colors},
        column = parseInt($ / 4), 
        rowInColumn = $ - (column * 4),
        instruments = @{seq_instruments};

  // Check if external variables are ready before continuing
  if (!colors || !instruments) return p;

  const keys = Object.keys(instruments),
        instrumentName = keys[column],
        controls = instruments[instrumentName].controls,
        controlNames = Object.keys(controls);

  if (controlNames.length == rowInColumn) {
    p.interaction = false;
    p.visible = false;
  } else {
    const controlName = controlNames[rowInColumn],
          controlNum = controls[controlName];
    p.html = controlName;
    p.id = "seq_" + instrumentName + "_" + controlName;
  }
  
  p.colorWidget = colors[column];
  p.design = "compact";
  p.address = '/live/control';
  p.css = `div.html {
    z-index: -1;
    font-size: 2em;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%) rotate(-90deg);
    opacity: .8;
  }`;

  // Fader Bank Props
  p.visible = true;
  p.interaction = true;

  return p;
}}
```

This approach ensures that the script does not attempt to access properties of undefined variables, thus avoiding potential errors in the JavaScript console.

# Fader that Snaps/Locks to Multiple Defined Values

## Problem Description
The goal is to create a fader that locks into specific values, similar to a master control fader in Cubase, rather than moving fluidly. The desired functionality is for the fader to snap to defined increments, such as +/- 3dB, resembling a cogwheel mechanism.

## Solution
To achieve this functionality, utilize the "steps" feature for knobs or faders in Open Stage Control. This allows you to define specific snap values for the fader.

1. Configure the fader with the desired range.
2. Set the step values to correspond with the increments you want (e.g., 3dB).

This setup will enable the fader to snap to the defined values as intended. 

![Example Image](image.png) [Attachment: image.png]

# OSC Input: Handling Additional Arguments After Float Value

## Problem Description
When using a fader with preargs set to `["FaderMaster", 3]`, the input float value correctly moves the fader. However, there is an issue when another message contains additional information after the float value, such as:
```
(DEBUG, OSC) In:  {
address: '/13.13.1.6.1',
args: [ 'FaderMaster', 3, 48.193359375, 'Best Sequence  1 first cue' ]
}
```
The fader cannot handle variable values followed by extraneous arguments.

## Solution
To process the additional arguments, you can use either a script widget or a custom module.

### Using a Script Widget
1. Set the script widget's `preArgs` to:
   ```javascript
   ["FaderMaster", 3]
   ```
2. Implement the `onValue` function as follows:
   ```javascript
   // value: [48.193359375, 'Best Sequence 1 first cue']
   if (Array.isArray(value) && value.length === 2) {
     set('fader_id', value[0]);
   }
   ```

### Using a Custom Module
You can also create a custom module to filter the OSC input:
```javascript
module.exports = {
  oscInFilter: function(data) {
    var {host, port, address, args} = data;

    if (address === '/fader_address') {
      if (args.length === 4) {
        // Remove the last argument and pass the rest to the client/widgets
        receive(address, args.slice(0, 3));
        return; // Bypass original message
      }
    }

    return data;
  }
}
```
These examples may need to be adapted based on your specific requirements. Note that the original fader widget cannot contain the script; it must be a separate widget.

# Matrix Velocities in Open Stage Control

## Problem Description
Users want to implement a matrix of buttons that can send different MIDI note velocities based on the position of the touch on the button. The goal is to have the velocity range from 1 to 127, allowing for low velocities when tapping at the bottom of a button and higher velocities when sliding up.

## Solution
Buttons in Open Stage Control do not support ranged velocities directly. However, you can achieve the desired functionality by using faders instead of buttons. Here’s how to set it up:

1. **Use Faders**: Create a fader for each button in the matrix. This allows you to control the velocity based on the fader's position.

2. **Script Configuration**: Use the following script to configure the faders:

   ```javascript
   var props = {}
   var labels = 'ABC' // Adjust labels as needed
   props.snap = true
   props.html = labels[$]
   props.target = "midi:your_device_name" // Replace with your MIDI device
   props.range = {min: 1, max: 127} // Velocity range
   props.address = "/note"
   props.preArgs = [1, $ + 36] // Adjust note number as needed
   return props
   ```

3. **Touch State**: To make the fader behave like a button, utilize the touch state. The `send()` function should be called when the fader is touched or released. Ensure to wrap the `send()` call in a `setTimeout()` to allow the fader value to update properly.

4. **Note Off Message**: To send a note-off message after triggering a note, you may need to implement additional logic since faders do not support the `props.off` property directly. Consider using a separate mechanism to send a note-off command after a delay.

5. **Handling Note Values**: If you want to create a scale (e.g., a major scale), you can define an array to represent the intervals and calculate the note values accordingly:

   ```javascript
   var scale = [0, 2, 4, 5, 7, 9, 11] // Major scale intervals
   var note = 60 + scale[$ % scale.length] // Base note + scale interval
   var octave = 12 * Math.floor($ / scale.length) // Calculate octave
   note = note + octave // Final note value
   ```

By following these steps, you can effectively create a matrix of faders that simulate button behavior while allowing for dynamic velocity control.

[Attachment: fader_buttons.json]

[Attachment: zK0rhdbQq2jouZt6kEaS732YujR_1.json]

[Attachment: zK0rhdbQq2jouZt6kEaS732YujR.json]

[Attachment: t7ZTNCYJ42UgnisVcNyVDvLLLOK.json]

# Search and Replace Target in All Widgets

## Problem Description
The user wants to replace the target "midi:SessionKiano" in all widgets with a different value.

## Solution
There are two methods to achieve this:

1. **Using a Text Editor**: Open the session file in a text editor and perform a search and replace for "midi:SessionKiano" with the desired target.

2. **Using a Custom Module**: Implement a custom module to change the target dynamically without modifying the session file. Use the following code:

   ```javascript
   module.exports = {
       oscOutFilter: (data) => {
           if (data.host === 'midi' && data.port === 'SessionKiano') {
               data.port = 'SomethingElse';
           }
           return data;
       }
   }
   ```

# Changing a Switch's Colors According to Its Value

## Problem Description
Users want to change a toggle's background and foreground colors based on its value. Initial attempts using incorrect syntax and structures lead to non-functional code.

## Solution
To achieve the desired color changes based on the switch's value, follow these guidelines:

1. **Use Correct Syntax**: Ensure you are using standard double quotes (`"`) instead of smart quotes (`“”`).
2. **Separate Calculation from Rendering**: Use a JavaScript block to compute colors and then apply them in the CSS.

### Example Code for Open Stage Control v1.x
```javascript
JS{{
  var my_bcolors = ["blue", "violet", "violet", "violet", "violet", "green", "green", "green", "green", "yellow"];
  var my_fcolors = ["white", "white", "white", "white", "white", "white", "white", "white", "white", "black"];
  var c = @{this.value};
  locals.color = my_fcolors[c];
  locals.bcolor = my_bcolors[c];
}}
value.on {
  margin: 0;
  border: 0;
  color: #{locals.color};
  background: #{locals.bcolor};
}
```

### Notes:
- If using arbitrary values (e.g., "00", "01"), consider using an object instead of an array:
```javascript
var colors = {
  "00": "green",
  "01": "red"
};
var c = @{this.value};
locals.color = colors[c];
```
- Ensure you reference the correct selector. Use `value` instead of `.value` if you are not targeting a class.

By following these instructions, you should be able to dynamically change the colors of your toggle based on its value. 

[Attachment: image]

[Attachment: 3G2Bn3L5Sg8Bp6YKJn6hB1PqSfW.json]

# Sending MIDI Messages with the Send() Function

**Problem Description:**
Users have encountered difficulties when attempting to send MIDI messages through the `send()` function in Open Stage Control. Errors arise from incorrect parameter formatting, leading to issues such as "TypeError: type str doesn't define __round__ method" and "Malformed address: 1".

**Solution:**
The correct usage of the `send()` function varies depending on the context (widget script vs. custom module):

- **In a widget script**, use the following format:
  ```javascript
  send('midi:messing', '/note', 1, 5, 20);
  ```

- **In a custom module**, the format should be:
  ```javascript
  send('midi', 'messing', '/note', 1, 5, 20);
  ```

Ensure that you do not use square brackets around the MIDI message parameters, as this will lead to errors.

# Harp with Pedals, Keys, and Scales

## Problem Description
Users are interested in a harp configuration that includes multiple scales and the ability to modify them using a specific JSON file. The current setup includes 9 scales, and there is a question about whether to expand the number of pedals from 3 to 5 to accommodate additional scales.

## Solution
To extend the harp functionality, users can modify the `harpScale.json` file, which is essential for the `HARP.json` session file. The following steps outline the process:

1. **Download the Harp Files**: 
   - Access the harp configuration files using the provided zip file: [Attachment: o70T9wvO7psRzbqTnjXWmbdqObS.zip].
   - The zip contains:
     - `HARP.json`: The session file.
     - `harpScale.json`: The data file with scales.

2. **Editing Scales**:
   - Use a database application like Filemaker for easier data management rather than Excel. This allows for custom interface design and automatic generation of the `harpScale.json` file.

3. **Adding More Scales**:
   - To add additional scales, input the desired notes and semitones into the database. Users can refer to various musical scale resources for guidance on which scales to include.

4. **Pedal Configuration**:
   - The current harp setup uses 3 pedals. If additional scales require more pedal configurations, consider expanding to 5 pedals. However, feedback from users suggests that maintaining 3 pedals may be less confusing.

By following these steps, users can effectively customize their harp setup to include a wider variety of musical scales while maintaining usability.

[Attachment: scales_1.json]

[Attachment: chords.json]

# Custom Module Port Address Filtering in Open Stage Control

## Problem Description
When using a custom module in Open Stage Control, conflicts arise between OSC messages sent from different ports (DAWtoOSC and midictrl) that share the same control values (116 to 127). This results in the GUI display not functioning correctly, as it defaults to the last case.

## Solution
To resolve the port conflict, filter incoming messages based on their originating port using the `data.port` property. This allows you to differentiate between messages sent from the DAWtoOSC and midictrl ports.

Here’s an example of how to implement this in your custom module:

```javascript
module.exports = {  
  oscInFilter: function(data) {
    var {address, args, host, port} = data;
    if (address !== '/control') return {address, args, host, port};

    // Filter based on port
    if (port === "DAWtoOSC") {
      if (args[1].value < 115) return {address, args, host, port};
      if (args[1].value == 127) {
        send('midi', 'OSCtoDAW', '/control', 1, 126, 1);
        return {address, args, host, port};
      }
    } else if (port === "midictrl") {
      // Handle messages from midictrl port
      if (args[1].value >= 116) {
        // Your existing logic for midictrl
      }
    }
    
    return {address, args, host, port};
  }
}
```

### Additional Notes
- To activate a specific tab from the custom module, send a value to its parent container. The value corresponds to the index of the active tab, starting from 0. Alternatively, you can use the `/TABS` command.
- Adjusting the content of a modal to fit its content is not supported in Open Stage Control.

For further assistance, refer to the documentation or community forums. 

[Attachment: filename.ext] (attachment reference missing)

# Problem with Unactivated Tracks Remaining on Screen

When using Open Stage Control on a tablet, unactivated tracks may remain visible after toggling the 'hide unactivated' button. This issue does not occur on a PC, leading to speculation that it could be caused by brief connectivity losses with the server.

## Solution

The problem was identified as a script interruption due to a probable infinite loop. To resolve this, the following action was taken:

- Added `//noprotect` to the script, which resolved the issue with unactivated tracks remaining on screen.

It is recommended to check the console for any JavaScript errors that may occur specifically on the tablet, as these could contribute to similar issues.

# Close Modal on Every Button

**Problem Description:**
Users need a method to close a modal in Open Stage Control whenever any button within that modal is pressed.

**Solution:**
To achieve this, follow these steps:

1. Set the `linkId` of all buttons in the modal to `">> closeModal"`.
2. Add a script widget with the following configurations:
   - Set `linkId` to `"<< closeModal"`.
   - Set `script` to:
     ```javascript
     JS{{
       set('replace_with_modal_id', 0)
     }}
     ```

This setup ensures that pressing any button will close the modal as intended.

# SOLVED: Using `props.onValue` in Custom Module

## Problem Description
When attempting to set the `onValue` property in a custom module, a syntax error occurs. The original code included invalid JavaScript syntax, particularly in how object properties were accessed.

## Solution
To resolve the syntax errors and correctly utilize the `onValue` property, follow these guidelines:

1. **Correct Property Access**: Ensure that object properties are accessed correctly. Instead of using dot notation with quotes (e.g., `vepKeys.keys[instrumentCode].'s'`), use either:
   - Dot notation: `vepKeys.keys[instrumentCode].s`
   - Bracket notation: `vepKeys.keys[instrumentCode]['s']`

2. **Using `getIndex()`**: The variable `$` is not recognized outside of the matrix's `props` property. Instead, use `getIndex(this)` to retrieve the current index in scripts.

Here is the corrected code for the `props.onValue`:

```javascript
props.onValue = `
	var MatrixIndex = [17,18,19,20,37,38,39,40,57,58,59,60,13,14,15,16,33,34,35,36,53,54,55,56,9,10,11,12,29,30,31,32,49,50,51,52,5,6,7,8,25,26,27,28,45,46,47,48,1,2,3,4,21,22,23,24,41,42,43,44]
	var instrumentCode = parseInt(get("text_code", value))
	var vepKeys = get('variable_vepKeys')
	var s = parseInt(vepKeys.keys[instrumentCode]['s' + MatrixIndex[getIndex(this)]])
	var e = parseInt(vepKeys.keys[instrumentCode]['e' + MatrixIndex[getIndex(this)]]) 
	var sk = vepKeys.keys[instrumentCode]['sk' + MatrixIndex[getIndex(this)]]
	var ek = vepKeys.keys[instrumentCode]['ek' + MatrixIndex[getIndex(this)]]
	set ("range_2A_art_keyboard", [s,e+1])
	set ("text_2A_art_range_key_start", sk)
	set ("text_2A_art_range_key_end", ek)
`
```

By implementing these changes, the `onValue` property should function correctly without syntax errors.

# Sending MIDI Messages to Bome's MIDI Translator

**Problem Description:**
Users may encounter difficulties when trying to send MIDI messages from Open Stage Control (OSC) to Bome's MIDI Translator. This process is essential for integrating OSC with AutoHotKey scripts to automate tasks in Cubase.

**Solution:**
To successfully send MIDI messages from OSC to Bome's MIDI Translator, follow these steps:

1. **Set Up a Virtual MIDI Port:**
   - Ensure that a virtual MIDI port is activated in Bome's MIDI Translator. Open the settings window in Bome and verify that the virtual port is enabled.

2. **Configure OSC:**
   - In Open Stage Control, set the target of your button to the virtual MIDI port. For example, use `midi:Bome MIDI Translator 1` as the target.
   - Set the `PreArgs` property of the button to an array of values that you wish to send, such as `[1, 2]`.

3. **Check for Errors:**
   - If you encounter connection issues or errors indicating that the server connection has been disturbed, check the launcher window for any JavaScript errors or warnings.
   - Ensure that the port number in your OSC configuration is valid (between 0 and 65535). If you receive an error like `RangeError [ERR_SOCKET_BAD_PORT]: Port should be >= 0 and < 65536. Received 0`, verify that the port is correctly set.

4. **Testing the Connection:**
   - After making the necessary adjustments, test the button in OSC to see if it successfully sends the MIDI message to Bome's MIDI Translator.

By following these steps, you should be able to establish a connection between OSC and Bome's MIDI Translator, allowing you to automate tasks in Cubase effectively.

[Attachment: image1.png]  
[Attachment: image2.png]  
[Attachment: image3.png]  
(attachment reference missing)

# Widget Always Sends to All Default Targets

When attempting to redefine the target of a widget in Open Stage Control, the widget continues to send messages to all targets set in the OSC server's options at startup, despite changes made in the OSC custom module.

## Solution

To ensure that the widget does not send messages to all default targets, you must set the widget's target to `null` (the null value, not the string "null"). If you require more control over message routing, you can implement a custom module to filter outgoing messages.

Here is an example of a custom module that allows you to set a widget’s target to `custom:a` and redirect its message to `127.0.0.1:5555`:

```javascript
var routing = {
  "a": ["127.0.0.1", 5555]
}

module.exports = {
  oscOutFilter: function(data) {
    var {address, args, host, port} = data
    
    if (host == 'custom' && routing[port]) {
      [host, port] = routing[port]
    }

    return {address, args, host, port}
  }
}
```

Additionally, you can also add prefixes to the address and filter them in the `oscOutFilter`, which can effectively manage message routing. 

[Attachment: filename.ext]

# Keep Track of Clients

**Problem Description:**
A user was attempting to retrieve a list of all devices currently connected to the Open Stage Control server using a custom module. However, the received message was empty, indicating that the variable tracking connected clients was not being populated correctly.

**Solution:**
The issue was resolved by updating Open Stage Control to a newer version. The user confirmed that the code worked perfectly after upgrading from version 0.48.7 to a more recent version (1.5.1). 

Ensure you are using the latest version of Open Stage Control to avoid similar issues with client tracking.

# Resetting Widgets to Default Values

## Problem Description
Users want to reset all widgets to their default values at any time, not just at startup. There is a need for a specific message or command to achieve this functionality.

## Solution
Currently, there is no direct command to reset all widgets at once. However, you can store the state of the widgets after loading your session using the side panel buttons and recall it whenever needed. 

If you prefer not to use the side panel, consider creating a custom button to manage this functionality. 

While commands like `/EDIT/GET` can retrieve the state of individual widgets, they do not allow for bulk resetting. The command `/EDIT/GET root` provides the entire session object, which can be used to compute the app's state, but it does not capture the current state directly.

A suggestion for future implementation includes adding a state control button in the switcher category to facilitate this process.

For now, the most reliable approach is to manually store and recall widget states as needed. 

[Attachment: filename.ext]

# Disable the Save Message When Closing the Window

When stopping the Open Stage Control server, a prompt appears asking whether to save changes, which can be inconvenient if you do not wish to save certain modifications.

## Solution

To disable this save prompt, append the following argument to your `/EDIT` commands:

```json
{noWarning: true}
```

This setting will prevent the warning message from appearing when you close the window.

# Create 'Presenter View' Display Using OSC and Qlab

## Problem Description
A client requires a setup to run a Qlab show from the stage while presenting. The goal is to create a second screen that emulates PowerPoint's 'Presenter View' using Open Stage Control. The display should include:
- Current Track Info (possibly with a countdown timer)
- Next Track Info
- Speaker Notes (the largest section, occupying the full left half of the screen, while Current and Next Track Info are stacked on the right).

There are questions regarding the ability to style the OSC display with tables and CSS, and whether receiving data as JSON allows for more display flexibility.

## Solution
A solution to create a similar setup has been developed by a designer named Mic Pool, who shared a project called "QLab Recital" on the QLab Cookbook. This project configures a remote display accessible via Open Stage Control and utilizes AppleScript to define the information sent to the display. Speaker notes can be integrated from QLab using cues or memo cues.

For further details and implementation guidance, refer to the following link:
- [QLab Recital | QLab Cookbook](https://qlab.app)

This resource may provide insights on modifying the setup to meet specific needs. Note that while styling options may be limited, the use of JSON data can enhance display flexibility. 

(attachment reference missing)

# Keyboard Notes to Drum Pad Notes Translation

**Problem Description:**
Users want to create a translation system in Open Stage Control (OSC) that allows MIDI notes played on a keyboard to be mapped to drum pads connected to a DAW (e.g., Cubase 12). The goal is to facilitate quick assignment of drum sounds from the keyboard to physical drum pads.

**Solution:**
To implement this functionality, follow these steps:

1. **Basic Setup:**
   - Create a button to select the note on the keyboard.
   - Use a second button to map the selected note to the desired drum pad.

2. **Mapping Process:**
   - Press and hold the note you want to map on the keyboard.
   - Press the `select_note` button (the note number will appear in the label).
   - Press and hold the `map_note` button.
   - Press the pad you want to assign the new note to.

3. **MIDI Configuration:**
   - Ensure that the MIDI port in the script for each pad is correctly set:
     ```javascript
     send("midi:yourMIDIPort", "/note", 1, value, 100)
     ```
   - Adjust the velocity as needed; the default is set to 100.

4. **Improved Version:**
   - Use the `matrix` widget for a more flexible setup. Set the number of pads by adjusting the `quantity` property of the matrix.
   - Configure MIDI parameters in the OSC section of the matrix, but keep it bypassed since the main functionality occurs in the `onValue` script.

5. **Touch Screen Considerations:**
   - If using a touch monitor, avoid simultaneous touches by using the mapping process where the button changes color to indicate the next action (e.g., from orange to green).

6. **Final Adjustments:**
   - Set the `Keyboard` ON value to `1` instead of `127`, as Cubase may only respond correctly with this setting.

**Attachments:**
- [Attachment: drum_pad_mapper.json]
- [Attachment: drum_pad_mapper_v2.json]

[Attachment: ywkD2iIOQAINISKG7uBY85zjSnx.js]

[Attachment: tdUwuk3U3iYRUiG24uUu71yE3eb.json]

[Attachment: oTXilRPavkF8qvG17uEsjjWvT06.json]

[Attachment: h9R9VV0eDXnEyLA9kIKf73lNy95.json]

[Attachment: zIGAGnhia4HSRNyFDCWVilbj03l_1.js]

[Attachment: zIGAGnhia4HSRNyFDCWVilbj03l.js]

[Attachment: pqDO825C2CnhM0vdE5jlwmt31Oa.json]

[Attachment: yrQln1nIPiZIZ89QmVtwQfU8NLu.json]

# Inverting XY Pad Directions

**Problem:**
When using the XY Pad in Open Stage Control, moving up on the pad results in the source moving left, indicating that the default directions are inverted.

**Solution:**
To invert the directions of the XY Pad, you can modify the `onValue` function to swap the x and y values. Use the following code snippet:

```javascript
send('/xy_1', get(this)[1], get(this)[0])
```

This will ensure that the x and y values are sent in the correct orientation.

# Sending MIDI CC via Menu in Open Stage Control

**Problem Description:**
When using a Menu widget to send MIDI Control Change (CC) messages, the value is only sent as 0 instead of the desired value of 127.

**Solution:**
To correctly send MIDI CC messages with the desired value, you need to use scripting. The default message format for widgets does not suit MIDI messages. Instead, implement the following JavaScript code in the script property of the widget:

```javascript
// This script is executed when the widget's value changes
send('midi:my_port', '/control', 8, value, 127);
```

This code will send the MIDI CC message with the specified channel (8) and the value you want (127). Adjust the channel number as necessary for your application.

# XY Pad: Sending X and Y Values to Different Addresses

**Problem:**
The need to send the X value of an XY pad to a different address than the Y value.

**Solution:**
To achieve this, you can modify the `onValue` property of the XY pad's script. Use the following code:

```javascript
send("/x", value[0])
send("/y", value[1])
```

This will send the X value to the address `/x` and the Y value to the address `/y`.

# Checking Widget Properties Using a Loop

## Problem Description
A user encountered an issue with a script in Open Stage Control where a variable `groupId` was not passing its value correctly within the `@{}` syntax. The script was intended to check if the value of a button widget (named "button_i") was equal to 1 and send a MIDI message if true.

## Solution
To resolve the issue, replace the `@{}` syntax with the `get()` function to retrieve the value of the widget. The corrected code should look like this:

```javascript
var i;
for(i=0; i<5; i++) {
    var groupId = "button_" + i;
    if(get(groupId) == 1) { // check to see if "button_i" value is 1
        send('/control', 1, 109, i); // send midi message if true with loop number for cc value
    }
}
```

For more information on scripting in Open Stage Control, refer to the [documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/).

# SOLVED: Timing Issue with JSON File Reading and Execution

## Problem Description
There is a recurring issue when starting the harp application where errors occur due to timing problems related to reading JSON files. Specifically, the `scale.length` in the "matrix_2A_harp" widget can lead to errors if the variable `scaleJSON` is not properly defined or loaded.

## Solution
To resolve this issue, it is recommended to wrap the code that reads the content of the variable `scale` in a conditional statement to prevent failures when the variable returns undefined. Here are two approaches:

1. **Conditional Check**:
   ```javascript
   var scale = VAR{scaleJSON};
   if (scale) {
       // Proceed with using scale
   } else {
       // Handle the case when scale is undefined
   }
   ```

2. **Fallback Value**:
   You can also provide a fallback value that will be used until the variable is properly loaded:
   ```javascript
   var scale = VAR{scaleJSON} || [];
   ```

This ensures that your application does not crash due to undefined variables and can handle cases where the JSON data has not yet been loaded.

Additionally, when using variables within a widget, they are only valid within that widget's scope unless explicitly set using `setVar`. 

For numeric variables, if you need to ensure that a value of `0` is handled correctly, you can use:
```javascript
var keyNote = VAR{keyNoteNumber} || 0;
```

This will ensure that `keyNote` is assigned `0` if `VAR{keyNoteNumber}` is undefined.

[Attachment: HarpV2.zip]  
[Attachment: 3oGeKUh7xfqzZOOphPIc7l7fAne.zip]

# Accessing Raw Output of `args` in Open Stage Control

## Problem Description
When using Open Stage Control with QLab, the `args` output is being reformatted into a JSON-like structure, which is causing issues with the data being sent. The goal is to access the raw output of `args` without any reformatting.

## Solution
Open Stage Control does not modify incoming arguments. The issue arises because QLab is splitting the string into multiple parts before sending it. The `args` array in the `oscInFilter` function contains the raw values as they are received. 

To access the raw output, you can use the following `oscInFilter` function:

```javascript
oscInFilter: function(data) {
    var {address, args, host, port} = data;

    if (address === '/json') {
        console.log(data); // This will log the raw data received
    }

    return {address, args, host, port};
}
```

This function will log the complete data structure, allowing you to see the raw `args` values as they are received without any modification. Ensure that the data being sent from QLab is in a valid format to avoid further issues.

# Change Toggle State Works on Some Buttons but Not Others

## Problem Description
The user experienced issues with changing the toggle state of transport buttons (Record, Play, Pause, Stop) in Open Stage Control. While a script worked for other buttons, the transport buttons did not respond correctly to the `/control` command, resulting in unexpected behavior where incorrect CC values were sent to the DAW.

## Solution
To resolve the issue, the following adjustments were made to the script:

1. Ensure the `send` command is outside of the conditional brackets.
2. Include a third argument in the `send` command, which specifies the value to be sent.

Here is the corrected script:

```javascript
if (value === 1) {
    set('record', 0);
    set('pause', 0);
    set('stop', 0);
}
send('midi:OSC', '/control', 16, 2, 50);
```

### Additional Notes
- The value argument in the `send` command should be between 0 and 127, depending on the requirements of the DAW. The user initially used a value of 50, which worked, but it may need to be adjusted based on specific DAW settings. 
- For debugging, enable the server's debug option to check what is being sent by Open Stage Control in the console. 

Make sure to test the configuration to ensure proper communication with the DAW.

# Button — Remain Lit While Clip is Playing Using MIDI

**Problem Description:**
Users may encounter issues with a button in Open Stage Control (OSC) not remaining illuminated while a clip is playing in Ableton Live. This situation arises when MIDI messages are sent from Ableton, causing the button to toggle between different states, which can lead to confusion regarding the button's illumination status.

**Solution:**
To ensure that a button remains illuminated while a clip is playing in Ableton Live, configure the button widget in OSC as follows:

1. Set the button's **mode** to **toggle**.
2. The button will activate (light up) when it receives its **on** value and deactivate (turn off) when it receives its **off** value.

This configuration allows the button to reflect the current state of the clip in Ableton Live effectively.

For further reference, you may want to check the OSC documentation for additional details on button configurations. 

[Attachment: filename.ext] (attachment reference missing)

# Remote Control and Touch State Issue

## Problem Description
When using an iPad-based MIDI controller (MidiDesigner) to operate Open Stage Control, the stateSet actions are triggered correctly based on a preset selector knob. However, while the Open Stage Controller updates its widgets in response to the knob's value changes, the corresponding widgets in MidiDesigner do not receive these updates. This is likely because the Open Stage preset selector knob is not physically touched when the value is changed remotely.

## Solution
To ensure that the updated widget values are sent back to MidiDesigner when the Open Stage preset selector knob is operated remotely, you need to simulate a touch interaction. The recommended approach is to send remote control commands to Open Stage Control. This can be achieved by:

1. **Converting Messages**: Create a custom module that converts messages from MidiDesigner to the appropriate OSC messages that Open Stage Control can understand.
2. **Direct Sending**: Configure MidiDesigner to send the required OSC messages directly to Open Stage Control.

By implementing one of these methods, you can ensure that the state updates are communicated back to MidiDesigner properly. 

For further details, please refer to the relevant documentation or community resources.

# How to Add a Value to a Fader via a Button - Single and Matrix

## Problem Description
Users may encounter issues when trying to set values for faders using buttons in a matrix configuration. Specifically, tapping a button may incorrectly affect the wrong fader or set unexpected values.

## Solution
To correctly set a value to a fader via a button in a matrix, follow these guidelines:

1. **Correct Syntax**: Use the following syntax in your button's script:
   ```javascript
   set('fader_' + (getIndex() + 1), 0.5)
   ```
   This ensures that the button correctly references the intended fader based on its index.

2. **Avoid Conflicts**: If you are using `linkId`, ensure that the button's `on` property is set appropriately. If you choose to use the script method, you should not use `linkId` in the same button configuration.

3. **Example Configuration**:
   - **Button Configuration**:
     ```json
     {
       "id": "volume_up_#{$+1}",
       "mode": "tap",
       "label": "Vol à 0.5",
       "colorWidget": "pink",
       "script": "set('fader_' + (getIndex() + 1), 0.5)"
     }
     ```
   - **Fader Configuration**:
     ```json
     {
       "id": "fader_#{$+1}",
       "mode": "tap",
       "snap": true,
       "doubleTap": true,
       "steps": 11,
       "default": 0,
       "colorWidget": "orange",
       "address": "/sample/#{$+1}/volume"
     }
     ```

By following these steps, you should be able to successfully control faders using buttons in a matrix setup. 

For reference, the session files related to this configuration are available:
- [faders_matrix.json|attachment]
- [buttons_controlling_faders_with_indicators_displaying_values.json|attachment]

[Attachment: wv0g9xekQKQ9zsKh9oWuBScyHWB.json]

[Attachment: 3oRDK0xLnPyB0XJaQV2pI2re32M.json]

# Force a Refresh of the Interface from OSC Message

**Problem:**
The need to programmatically refresh the Open Stage Control client interface upon receipt of an OSC message, including cache invalidation, to load a specific session JSON file based on a URL parameter.

**Solution:**
As of version 1.15.1, Open Stage Control includes a remote control command that allows you to reload the interface. You can find the documentation for this feature here: [Remote Control - Reload](https://openstagecontrol.ammd.net/docs/remote-control/#reload). 

This command can be triggered upon receiving the OSC message to refresh the interface as required.

# Menu Interaction with Button State and MIDI Values

## Problem Description
The goal is to create a sound board application where selecting a menu item sends a corresponding MIDI value and automatically sets the state of a toggle button. The desired functionality includes:
- When a menu item is selected, it sends a MIDI value (e.g., `[3, 11, 127]`) and sets the button state to "On."
- Clicking the button should toggle it to "Off" (sending a different MIDI value, e.g., `[3, 11, 64]`).
- Changing the menu item should repeat this behavior without losing the original MIDI value.

Two attempts were made to achieve this, but both had issues:
1. The first attempt caused multiple buttons to activate simultaneously and failed to retain the original MIDI value.
2. The second attempt reset the menu when the button was turned "Off," losing the original value.

## Solution
To resolve the issues, the following steps are recommended:

1. **Menu Configuration**: Ensure that the menu does not directly send MIDI values. Instead, it should only activate the button.

2. **Button Default Values**: Set default values for the buttons to avoid MIDI errors. Use `0` for the "Off" state and `127` for the "On" state.

3. **Dynamic MIDI Sending**: Modify the button's behavior to send the MIDI values based on the menu selection. The button should send the appropriate MIDI value when toggled.

4. **Avoid Resetting the Menu**: Ensure that the button's "Off" state does not reset the menu. This can be done by managing the state within the button's logic.

5. **Error Handling**: Add error handling to prevent issues when accessing undefined values in the menu. For example, check if the `valueArray` is defined before attempting to access its elements.

### Example Code Snippet
```javascript
var valueArray = get(this);
if (valueArray && valueArray.length > 1) {
    send('/note', valueArray[0], valueArray[1], 127); // Send "On" value
} else {
    // Handle error or set default values
}
```

By following these recommendations, the application should achieve the desired functionality without encountering the previous issues.

[Attachment: zMauFmQrKGrRLt5ttHUqsFzfb7.json]  
[Attachment: jcsEalbWvKraO0yaXHS7ra71UqC.json]  
[Attachment: oAh727PYwy5H0xfAPSDx02w5Yk]

[Attachment: oAh727PYwy5H0xfAPSDx02w5Ykq.json]

# MIDI SYSEX Error

When attempting to control a Kemper amplifier using SYSEX strings, an error occurs when sending certain values. The issue arises from the conversion of OSC to MIDI, specifically with values that exceed the MIDI byte limit.

## Problem Description
The user is sending SYSEX strings where 4 hexadecimal characters represent the value (00 00 to 7f 7f). The OSC setup includes:
- Address: `/sysex`
- Preargs: 
  ```javascript
  JS{{
  return “xx xx xx …” + (@{this}+0x10000).toString(16).substr(-4) + “xx”
  }}
  ```
- Target: `["midi:yyyy"]`

Errors such as "ERROR: MIDI: could not convert osc to midi…" occur for specific values (e.g., 18343, 18073), while others (e.g., 18477, 17938) do not produce errors.

## Solution
The root of the issue is that MIDI can only handle values between 0 and 127 (7-bit), while the user's code produces hexadecimal bytes that can exceed this limit. The maximum number of values that can be encoded with two 7-bit bytes is 128 * 128 = 16384, meaning values must be constrained to 0-16383.

To correctly convert values from a range of 0 to 16383 to hexadecimal format (00 00 to 7f 7f), use the following JavaScript code:

```javascript
JS{{
var v = @{this}
return (v & 0x7f).toString(16).padStart(2, '0') + ((v >> 7) & 0x7f).toString(16).padStart(2, '0')
}}
```

This code separates the two 7-bit bytes, ensuring that the first byte is the most significant (msb) and the second is the least significant (lsb). 

For converting from SYSEX back to a numerical value, use the following formula:

```javascript
// assuming msb = "7f" and lsb = "7f"
var value = parseInt(msb, 16) * 128 + parseInt(lsb, 16)
```

This approach will allow for proper handling of the MIDI SYSEX messages without errors. 

[Attachment: 338oerCHLbUIR4Vtq5qlsejEQdP.json]

# Button ID and CC Number Configuration in Open Stage Control

## Problem Description
Users may need to create multiple buttons with specific IDs and associated Control Change (CC) numbers without relying on a matrix setup. The goal is to dynamically manage button IDs and their corresponding CC values efficiently, while also exploring alternatives to scripting for this configuration.

## Solution
1. **Extracting Button Number from ID**:
   You can extract the button number directly from the button's ID using the following code snippet:
   ```javascript
   if (id.includes('Button_')) {
       var i = id.split('_')[1];
       console.log(`button ${i} pressed`);
   }
   ```

2. **Using the Button's `on` Property**:
   Instead of using the ID for CC numbers, utilize the button's `on` property to specify the CC number. This allows for easier global changes and management:
   ```javascript
   var id = value; // This will represent the CC number sent to the script.
   ```

3. **Avoiding Redundant Checks**:
   If you are using tap buttons, you can avoid unnecessary checks in your script:
   ```javascript
   if (value === 0) return; // This can be omitted for tap buttons.
   ```

4. **Custom Module for Filtering**:
   For better organization, assign a consistent address to all buttons, such as `/btnCubaseCommands`. This allows you to filter and manage CC messages more effectively within a custom module.

5. **Using Arrays for CC Numbers**:
   If you prefer scripting, you can create an array for CC numbers:
   ```javascript
   var CCs = [];
   for (let x = 0; x < 128; x++) {
       CCs.push(x);
   }

   // Example for setting CC values
   for (var i = 0; i < 5; i++) {
       setVar('a' + i, 'la', Lab_Basses[i]);
       setVar('a' + i, 'pre_ch1', [1, CCs[i]]);
   }
   ```

By following these methods, you can effectively manage button IDs and CC numbers in Open Stage Control without relying solely on scripting.

# Switch Labels Using OSC Listener

## Problem Description
When using the Open Stage Control version 1.25.6, a switch configured with a specific value format outputs an unexpected result when incorporating an OSC Listener. The intended value format is:

```plaintext
#{{
  "^house-laptop": 0,
  "Harp": 1,
  "^chart-line": 2,
  "^drum": 3,
  "^map": 4,
  "AV": 5,
  "^sliders": 6,
  "PB": 7,
  "OSC{/dorico_connectionStatus_label, ^circle-xmark Dorico ^dorico}": 8
}}
```

However, the output includes a variable reference instead of the expected string:

```plaintext
{
 "^house-laptop": 0,
 "Harp": 1,
 "^chart-line": 2,
 "^drum": 3,
 "^map": 4,
 "AV": 5,
 "^sliders": 6,
 "PB": 7,
 "__VARS.^circle-xmark Dorico ^dorico": 8
}
```

## Solution
To resolve this issue, use the following JavaScript code instead of the original format:

```javascript
JS{
var values = {
  "^house-laptop": 0,
  "Harp": 1,
  "^chart-line": 2,
  "^drum": 3,
  "^map": 4,
  "AV": 5,
  "^sliders": 6,
  "PB": 7,
}
var extra_key = OSC{/dorico_connectionStatus_label} || '^circle-xmark Dorico ^dorico'

values[extra_key] = 8

return values
}
```

This approach correctly handles the OSC Listener and ensures the intended output is achieved.

# Menu Vertical Layout Trim or Changing Menu Width

When creating a menu widget with a vertical layout, users may want to resize its height and width separately for better aesthetics.

## Problem
Users have reported difficulty in adjusting the size of a vertical menu widget, specifically whether it can be set using percentage values.

## Solution
To resize the menu widget, use the "size" property under the Geometry inspector tab. The syntax for setting the size is as follows:

```plaintext
[width, height]
```

However, it is important to note that percentage values will not work as expected. Instead, the values are converted to the `rem` CSS unit. For example, using:

```plaintext
[ "300%", "100%" ]
```

will result in `300rem` and `100rem`, which may not yield the desired effect.

If you encounter issues with the menu not responding after multiple toggles on mobile devices, it is recommended to disable the toggle feature temporarily, as a bug related to this behavior is being addressed in an upcoming release.

[Attachment: gjIxMx42A52Niy3quUE2RR9JZBB.json]

# Event Types Configuration in Open Stage Control

## Problem Description
Users may wonder how to set different event types for widgets in Open Stage Control, particularly regarding the default event mode and the specific options available for the script widget.

## Solution
In Open Stage Control, the default event type for all widgets, except the script widget, is `event:value`, which triggers when the widget receives a value. 

For the script widget, additional event types can be configured. To change the event type for a script widget, refer to the documentation on event types [here](https://openstagecontrol.ammd.net/docs/widgets/scripting/#event-types). 

In summary:
- **Default event type**: `event:value` (for all widgets except script widget)
- **Additional event types**: Available only for the script widget. 

Refer to the documentation for detailed instructions on implementing these changes.

# How to Control Widget Properties via OSC

## Problem Description
Users may want to control various properties of a widget, such as "visible" or "css", through OSC (Open Sound Control) to dynamically modify their interface. The challenge is to expose these properties through OSC addresses.

## Solution
There are several methods to control widget properties via OSC:

1. **OSC Listener Syntax**:
   - To set the "visible" property, use:
     ```
     OSC{visible, true}
     ```
   - Send this to the OSC address:
     ```
     /widget_address/visible
     ```

2. **Inheritance Syntax**:
   - Create a variable widget and set another widget's "visible" property using:
     ```
     @{variable_widget_id}
     ```
   - When you send a value to the variable's address, it will update the property containing the `@{}` block.

3. **Custom Variable Syntax with Remote Control**:
   - Set the "visible" property using:
     ```
     VAR{vis, true}
     ```
   - Send the following OSC command:
     ```
     /SCRIPT "setVar('widget_id', 'vis', false)"
     ```

4. **Remote Control /EDIT Command**:
   - This command modifies the session directly. Use:
     ```
     /EDIT widget_id "{visible: false}"
     ```

**Note**: Be cautious when toggling the value via the UI, as it may revert the property back to a static true/false instead of maintaining the OSC command format.

[Attachment: filename.ext]

# Switch Buttons Individual Style/Images

**Problem Description:**
Users want to apply different on/off background images for each button in a switch. While global images can be set, individual customization is sought.

**Solution:**
To achieve individual styles or images for each button in a switch, you can use the CSS `:nth-child()` selector. Here’s how to set a unique background image for each button:

```css
value:nth-child(1) {
  background-image: url(data:image/gif;base64,/* ... */); /* Replace with your base64 image */
}

value:nth-child(2) {
  background-image: url(data:image/gif;base64,/* ... */); /* Replace with your base64 image */
}

/* Add additional rules for more buttons as needed */
```

You can also change other styles, such as text color, using:

```css
value:nth-child(2) {
  color: red; /* Change text color for the second button */
}
```

This method allows for individual customization of each button's appearance.

# How to Make a LED Pulse/Flash in Open Stage Control

## Problem Description
Users want to create a LED that pulses or flashes when it receives a message. The goal is for the LED to stay on for one frame and then turn off again. There are various methods discussed, including CSS animations and JavaScript scripts, but some methods may be outdated or not function as intended in newer versions of Open Stage Control.

## Solution
### Method 1: CSS Animation
To make a LED pulse using CSS, you can subscribe to OSC messages on a specific address. Here is an example:

```css
/* CSS property */
JS{{
    var x = OSC{/pulse}; // subscribe to osc messages on address "/pulse"
    locals.T = Date.now(); // generate timestamped css animations to force reset 
}}

@keyframes pulse-#{locals.T} {
    0% {opacity:0;}
    10% {opacity:1;}
    100% {opacity:0;}
}
inner:after {
    animation: pulse-#{locals.T} .5s 1 forwards
}
```

### Method 2: JavaScript Script
Alternatively, you can use a script to programmatically decrease the LED's value when it changes. This method works with any value sent to the widget address:

```javascript
// Script property
var fallTime = 0.2,
    fps = 24,
    maxValue = 1,
    step = maxValue / fps / fallTime;

setTimeout(()=>{
  if (value <= 0) clearTimeout();
  set("this", value - step);
}, 1000 / fps);
```

### Adapting for Button Widgets
If you want a button to flash when it receives a message (similar to a bang button in Max or PD), you can adapt the script to work with the button's tap mode. The button should send a message when tapped and flash upon receiving the same message.

### Additional Considerations
- A button in tap mode should ideally flash when it receives a message, similar to how it behaves when physically tapped.
- The button should return to the off state immediately after being tapped, rather than holding the on value.

For further customization or specific use cases, such as flashing based on incoming OSC messages like "HoldSection," additional scripting may be required. 

[Attachment: filename.ext]

[Attachment: 2JwSgAFTbFDuw8Lm1a0boviHHlJ.json]

# Simulate User Action When Receiving a MIDI Note

**Problem Description:**
Users may encounter issues with 'double trigger' events when using OSC, prompting a switch to MIDI notes for discrete actions. The challenge lies in understanding the correct syntax to handle MIDI note messages and filter the appropriate MIDI device.

**Solution:**
To handle MIDI note messages and filter by device, use the following code structure:

```javascript
// oscInFilter
var {address, args, host, port} = data;

// First filter by port to avoid processing notes from other ports
if (port === 'fx') {
    // Then filter by message type
    if (address === '/note') {
        // Extract meaningful data
        var [channel, note, velocity] = args.map(x => x.value);
        // Filter the event accurately
        if (note === 61 && velocity === 100) {
            receive('/SET', 'Tribble-Rig-AShaperAutoOn', 1023);
            return;
        }
    }
}
```

This code checks if the incoming MIDI message is from the specified port ('fx') and if the address matches '/note'. It then extracts the channel, note, and velocity values to perform the desired action when the specific note and velocity are received. 

Make sure to replace `'fx'` with the actual name of your MIDI device as needed.

# Fader Interaction in Open Stage Control

## Problem Description
The user wants to configure two faders such that when Fader 1 is moved in a positive direction (0 to 127), Fader 2 moves in the opposite direction (127 to 0). Specifically, if Fader 1 is set to a value of 10, Fader 2 should automatically adjust to 117 (127 - 10).

## Solution
This behavior can be achieved by using the `script` property in Open Stage Control. A sample configuration file is provided for reference.

- Use the following script configuration: [Attachment: tSvUL7rKzomxvAcFMcvgDQKmd6s.json]. 

This file contains the necessary setup to link the two faders as described.

# Prevent Widget from Resending Value

**Problem Description:**
When using a fader in Open Stage Control to control a parameter in Ableton Live, changing the value directly in Ableton causes erratic behavior in both the software value and the fader. This issue arises because the fader appears to resend the value it receives from Ableton, creating a feedback loop that makes precise adjustments difficult.

**Solution:**
To prevent the widget from resending its value when updated externally, ensure that you are using a virtual MIDI device. The following steps can help achieve proper two-way communication:

1. **Create a Virtual MIDI Device:**
   - Use the following configuration in your setup:
     ```
     device_name:virtual
     ```
   - This creates a virtual MIDI device with one input and one output port. You can set any device name you prefer.

2. **Use the O-S-C Virtual MIDI Driver:**
   - After configuring the virtual MIDI device, the faders should react correctly in both directions, allowing for smooth adjustments without feedback issues.

Following these steps should resolve the erratic behavior when adjusting values in Ableton Live.

[Attachment: missing]

# Rebuilt Native Node Module with Correct NODE_MODULE_VERSION

When creating a custom module that requires a native Node module, you may encounter an error related to mismatched Node versions. This issue arises when the Node version used to build the module differs from the version required by Open Stage Control.

## Problem
The error occurs because the NODE_MODULE_VERSION of your Node installation does not match the version expected by Open Stage Control, which uses Node v16.5.0. Additionally, there may be discrepancies between the NODE_MODULE_VERSION of Node and Electron, leading to further complications.

## Solution
To resolve this issue, you should rebuild the native Node module using the version of Node that Open Stage Control is built with. Follow these steps:

1. Ensure you are using Node v16.5.0, as this is the version shipped with Open Stage Control.
2. If you continue to experience errors, use the `electron-rebuild` tool to rebuild the native module for compatibility with Electron's version of Node.

This approach should help you successfully build your custom module without NODE_MODULE_VERSION errors. 

[Attachment: abi_version_registry.json]  
[Attachment: abi_version_registry_1.json]  
[Attachment: abi_version_registry_2.json]

# User Global Variables in Custom Module Retained on Reload

## Problem Description
When using custom modules in Open Stage Control, global variables tend to lose their values upon reloading the main.js script. The user seeks a method to retain these variable values in memory during the app's lifecycle.

## Solution
Currently, there is no dedicated persistent global variable feature for this purpose. However, you can utilize the app object to store global variables. Use the following approach to initialize your variables:

```javascript
app.someVar = app.someVar || 'initial_value';
```

This method ensures that `someVar` retains its value across reloads. 

A dedicated global object variable will be introduced in a future release, which will provide a more robust solution for managing global variables.

# Button-Label with Two Images for On/Off Status

**Problem Description**  
The user seeks to implement a button-label that displays two different images based on its "on" or "off" status using CSS. Attempts to use the `label.on` class did not yield the desired results.

**Solution**  
To achieve the desired functionality, you can use the following CSS code to define the background images for both the "on" and "off" states of the button-label:

```css
label.on {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAES2lUWHRYTUw6Y29tLmFkb2JlLnhtcAABAFVURi04AFhNTDpjb20uYWRvYmUueG1wAEiJvVbdbts2FH4VQb3p0NGkKFIShbpFFrdoL7wFSYamlxRJ2UJtUZMU28mr7WKPtFfYoS3JaRDb6TJMgA2J/M7/dw759v2mkuqbab3MzIpy7P/951++V+ix/4VPybQ6N/Pi031tru5/vVb335TQ/vt33ttNullWS9NKb7NclE26GftS28yk8O6Wse9tIe23sX/mNryb6YV3bmvjxaMAKUKIF4uRUEoxbUT4s0cJpZiEOGAoYCmJU0q97vHBYK3z9HLysTMHX2N/3rZVivF6vR6tw5GtZzgQQmBCMaUIEKi5K1u5QWXzqtcwMY2qi6otbOm5b5nZ23bs+30Uy2pQWzajbUQjZZd4IyscjAjugVoNuOq2XmyNa4XNwixN2TaADfADpdPpcbXL5YBu2g+r9ji6ub6rDL40jb2tlfmwAouv9uKXJv8RcYAPwtXctraZ2wNJGLa/S0Vb5AcMup3voGZTHIC6nQFapee1ka2tr61d9PS56I17lI4C7/WXotR23fz0QMBM4Df2gUgBIhQF5NoRKUwpe0OClJAddArs1LKVA5giEjkwUI7xlIdvCN2DrS7yu5NQrdLc1ksJhSuWcmZwVc62CqbT9HPZtLJU5vNk7MPKqCh0KjIa5VIpJOIwQ0xGCUoSSlAWJZpDNwCNw15+YtWtI5WT37WYtgp0DNVIeRyaSMQR4gmD1qKMooxLgxIaxiIMQh4lqtf2W11Al8vFQ63OKw0aDVWuHQnKpaQoYkwjmUcSSUpYTAijhHPf29s9twtbQ4YgN+Ctq7ZTD0ql66+xH3SLN45ri9vdYki2Dw7cfwf4egqw3/+9LCDJ1PccY3YeXMH8AhcizkPerV8UG7O4mRQQYdMrfbj19dGWG2jb9HwqGuDdXTctrswf3dui8LaNmUq181JtCaf9brl4osjPS+dOfj035VHm7mCNzdu1rM3ZDLJ8sjPwIecbuTruOjeSG3AQRVwopAVjwKgMqJ/HCU2gffJIHXWdpSx5ieudkJrLcmbgLMIvCCbPYyE4ZN+EXCBlmESZFK7ZQmUkNczwA8FQfh1QOIdSSn40GPrvglG2XJn6AbEqWUs4T03djP28tktPVtWiUNsOw6tSdzN0aEqvtd5+BB20o01drJ62Mrjg/Yf2ThYp4omRMg5QEhGFEsLgL8sYEDCWmaYi1/mBZvn/i3QymOeN90fBHDpbnhdMOAq911OpitKtHAoH76cafjzwutNmR4yPrvTbu8SLWsrJ65PnlyFwHUxkjBIZJEhEDI4ukwRI5FGsiJYkT+Jem33p+eXSsDfdqzmDAF0imq7mv8jZUP13T3sdEB3FgoUo4RFFMC4FygSnyAhlKGeJThTZJRxUdKnfqcXH7eNHF9V+CW6/27r1N2/4GO7upoQa13Az/wedPMiwZ/5syAAABd5JREFUaIHtmWtsFFUcxc+dme2yy7ZLn1AxIEhfQMFQlEd5SICUpzUQCPERDKKGgAYMfvCj0cTESAIoisGKAcU+QiLFYq1QqBXaUioUiry2tLtNLYWWtrvbbXd37v37gbJZSkHoLG1M5pfcZCbZOXPO3Htn7v0voKOj83+GDeTNkmLSw5+ZlJhgtZpTjSaT4nK5Xa52V82xUt8VII8PhAdlIG6SMf+VBTPTp6UvXTZvfkLimKQIqyUOAFSVo621veHSZVvNoYOTC0vLK8oqKw9XDoSnJ8K6tVtW19RcPkuPQUlJWf6iRa/OH2zvj8XIkcnRvxYc/72PPJy33+b+2lrhu3qN/Ha74G4nJyLR+4c7dmR9Odg5HolZszKnuZyetmDzamMj79j1lb9pxhy/PSKW22EWdpjJLocLx7ARvHlpps+dm+sTXV08+LpzZy+fHT06LX6wMz2Q2dNXTOnVUaLt40/8dXIYtwF0HaB6GMgOU08bQvWQqRagWkDYY+JU948H1OAe73T7bsXGjrcMdrb7iI9PM7ucnV2BpO1O3jT3Rb8NEPWQyWGIIUdYDDnCovtoMeRQoqkOIBsgbr7+hi84dHXVpZC9yORQCR355XBxQuLosQBA3d2iMWkCumqq5TA5ijGDGWD0cAEGSIoFEleY53yF7C+tIMva1wgAGx4f89SIqKS4gsKDR0LlVxNrVm1eGjyMb0yb67MBwhEW+4AefViLIYchmq4C4va7W31EFJjXKSkZmudzSHr45/ycgqgoazQAcn76uWjft0cJUyJZv5c1EoMMmXWWn5BMaVPJkJQoAcCokfHjfsrZl63Fq+aV1sJ5b6YXFX/7JwAIp5McVisYFCYZIwESGpzJ8HtvwjRuMsVfO8cAQAgBWZYlAP8xPx6M1H9Hd5gz+7kFd4892XmCA0xSrNrCAgBxGOQIdNuqyftHqQoAkiRhzYr3XtYiqynw8OGThi7ISF/Scyrcu78jCQDkEC3RFSMEILn3/hAQfGnlwtVaJDUFTk1JTR0/MWE8AAiXC/6Lf8sSFID6PeLuhQQkALyxKTCMk5PGJGiR1BQ4Ni46KSLCYgEAcesWI58PDAYtkvfBAIjb7XcPMdRi1rQI0RQ4TFHMgRO/ygDBnsSOkzxdAVFJkjTt8DQF7u7ytgVOhhgJkAnQ+LLqBQFgEeGBOcJV1adFT1PghoaWmpaWthYAkOPiiJnNIGjy0yfSMCvQM4c7OtwdmrS0XHzqTPPlytPnzwIAM5mYccY0ziEAFqJhzSQIgAyJzwr0zJWqv2rOaZHU+B0+oR47erLgrr3wTW+BAIIammFNPg8UyGTZsD4geDC38IAWTc1dMSNtVeqpM7nnAQCCo8EYKbjqkmRjrKbFB2MyvN6bCJ+1kOJKixgAdHZ2eSwW81AtfjWvtMqq8i4cLy4ruaMmIzpnP3EAULv7P7SZBO7tgATQsC8+Czy1rG9ysrT6DcnmofaK88K69aveBgBDSjKj2ka/u7pcVtgQQHrMZ8oY4PfBSx4avnO3aspcJqNnJE6fuX420BTaz0B/2fN13p7g2tWNBYv5VUDYYSGH8dG2iQ3GOKpHGF0FROum9++pdW3c8NHGwc54HzXnbReDQ7du3uKzAbwWIIcUSQ7jAyoexliyw0I2gOoA3rFt+z0Vj/3fH9L0onpihIcnRzvqbzQFFwPc2Tlq49Tn+XUgUNeq62nX79SyyAaIOkC9sXgx7y6vUIOLYkcLT5YOdq6HEomx1pITp0t6FfO457cif8s7G9TmJZm8KW22+GfiC9Q0fR5vXr6Ct279wO+tPndPrxIR7c3K3jfYeR6Z7dt376K+Eb2O76tJuzo8zo0bP9w82BkemynjM8ZlZ+dnt7bebusdqi/q7Q0NO3dkbRtlTY18Up4G5M+0pzHDNHPllOWLMuZkTEhNSoywWmIVg8K8XT5/e7vzVlXVheqCw8X5RcX7iwfCj46Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6OTmj4F3kEBW9x6piCAAAAAElFTkSuQmCC);
  no-repeat;
  background-position: center;
  background-size: 70%;
}

label {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUh...); /* Add your off state image here */
  no-repeat;
  background-position: center;
  background-size: 70%;
}
```

Make sure to replace the placeholder for the "off" state image with the appropriate base64 encoded image data. This setup will allow the button-label to visually represent its state through different images. 

[Attachment: filename.ext]

# Setting the Editor Language in Open Stage Control

Open Stage Control supports multiple languages for its interface. The available languages include English, French, Polish, and German. 

## Problem
Users may wonder if the editor can be set to different languages, as there are multiple language files present in the locales folder.

## Solution
To set the editor language in Open Stage Control, the application uses the browser's default language if a translation is available. If no translation is found, it defaults to English. 

Currently, the available languages are:
- French (fr)
- English (en)
- Polish (pl)
- German (de)

To change the language, ensure your browser's language settings are configured to one of the supported languages. 

Additionally, users can contribute to adding more languages by translating the strings in the provided file. 
[Attachment: en.js]

# Sending a Fader to Multiple Ports in Open Stage Control

**Problem:**
Users may want to configure a fader to send OSC messages to multiple ports simultaneously but are unsure how to set this up in the OSC target field.

**Solution:**
To send a fader's OSC messages to multiple ports, you can specify the target field using the following format:

```json
["ip:portA", "ip:portB"]
```

This allows you to define multiple destinations for the OSC messages. For more detailed information, refer to the documentation on the [target property](https://openstagecontrol.ammd.net/docs/widgets/properties-reference/#target).

# Multi XY and EQ Widget Configuration

## Problem Description
Users have inquired about examples for the `pointsAttr` command in the multi XY widget and the correct usage of the pole parameter in the EQ widget. There was also a mention of an implementation error affecting the drawing of highpass filters with poles.

## Solution
### Example for `pointsAttr` Command
An example configuration demonstrating the use of the `pointsAttr` command within a multi XY and EQ combination is provided. This example should be used with version 1.28.1 of Open Stage Control.

- Example File: [Attachment: r19PdxJv9IAt7zn53BPuLNFvHjQ_1.json]

### Pole Parameter for EQ Widget
There is a known issue with the implementation of highpass filters that affects how poles are rendered. A patch is expected to resolve this issue in a future release.

### Additional Notes
- For HighPass and LowPass filters, the Q factor should be set to 0.7 for Butterworth and 0.5 for LR configurations.
- An improved template that allows for additional Q adjustments has been created.

- Improved Template File: [Attachment: oT4bCvTTgCYl5aC94WkhcN4eU7Z_1.json]

# Issue with HTML Title Attribute and JavaScript Reload in Open Stage Control

## Problem Description
The HTML `title` attribute is not functioning as expected in Open Stage Control. Users anticipate a tooltip to appear when hovering over elements like `<h3>` tags, but this does not occur, particularly on touch devices. Additionally, there are issues with the `oscOutfilter` function not being consistently called after modifying JavaScript and HTML attributes multiple times, requiring a server restart to restore functionality.

## Solution
1. **HTML Title Attribute**: The `title` attribute behaves as it does in standard HTML, displaying a tooltip on mouse hover. However, it does not have native support on touch devices. For touch devices, consider implementing a custom tooltip using CSS.

   Example CSS for a custom tooltip:
   ```css
   .tooltip {
       position: relative;
       display: inline-block;
   }

   .tooltip .tooltiptext {
       visibility: hidden;
       width: 120px;
       background-color: black;
       color: #fff;
       text-align: center;
       border-radius: 6px;
       padding: 5px;
       position: absolute;
       z-index: 1;
       bottom: 125%; /* Position the tooltip above the text */
       left: 50%;
       margin-left: -60px;
   }

   .tooltip:hover .tooltiptext {
       visibility: visible;
   }
   ```

2. **Text Size Consistency**: Custom HTML elements are unstyled by default. To change text size, apply CSS rules in the root's CSS or theme file. For example:
   ```css
   .html h1 {font-size: 200%;}
   .html h2 {font-size: 150%;}
   ```

3. **JavaScript Execution Issue**: If the `oscOutfilter` function is not called consistently after modifying JavaScript files, try the following:
   - Save the custom module multiple times and observe if the issue persists.
   - If the problem occurs, restarting the Open Stage Control server may be necessary to reset the execution context.

For further troubleshooting, consider sharing the module file and a step-by-step reproduction process to assist in identifying the issue.

[Attachment: openstagecontrol4reaper.js]  
[Attachment: OpenStageControl4reaper_2.json]  
[Attachment: osc_config_2_config.json]  
[Attachment: v3Z1MCWCG3HFXCslP7XeHL3Wp5B.js]  
[Attachment: g4A1IlL7mqfh9xBhYqdSuw9VD1d.json]  
[Attachment: pvLT3VDWSgK2UU9CWFvO7bSstrh.json]

[Attachment: alFi4QChFzZySl82Bl82RsZ0CBc.txt]

# Switch with Push Mode

## Problem Description
When developing a layout to select clip slots in Ableton Live using Open Stage Control, a switch was created to function in "exclusive mode" for sending MIDI CC. However, the associated text widget displaying the scene number updates with a delay. In contrast, using buttons in "push" mode allows for immediate updates of the scene number. The user seeks to know if it's possible to assign "push" mode to switch slots, or "exclusive mode" to buttons, and if the switch slots can be displayed without text.

## Solution
1. **Push Mode for Switch Slots**: It is not possible to assign "push" mode to switch slots, as this would contradict the functionality of a switch.

2. **Exclusive Mode for Buttons**: You can achieve an exclusive button behavior using scripting. For a set of buttons with IDs formatted as `some_id/1...10`, set their script property as follows:
   ```javascript
   if (value) set('some_id/*', 0, {send: false});
   ```
   This script will disable other buttons when one is activated.

3. **Removing Text from Switch Slots**: You can customize the appearance of the switch slots using CSS. To remove text and display only empty rectangles, use:
   ```css
   font-size: 0;
   ```

4. **Visual Feedback with Push Mode**: For maintaining visual feedback where the pressed button lights up until another is selected, you may need to implement a custom solution, as this behavior is not natively supported in the switch mode.

5. **Custom Python Remote Script**: For more advanced functionality, such as immediate feedback and synchronization with Ableton Live, consider using a custom Python remote script tailored for your version of Ableton Live.

[Attachment: agDH6CcVI23PdkdKmrWeWNmUcSv.json]

# Amazon Fire HD8: Full Screen Resolution Issue

**Problem Description:**
Users may encounter issues with achieving full screen resolution on the Amazon Fire HD8. Despite the device's screen resolution of 1280x800, setting the root geometry to these dimensions can result in scroll bars appearing in fullscreen mode. The browser may report a lower resolution, affecting the display.

**Solution:**
To address this issue, consider the following steps:

1. **Check Device Pixel Ratio (DPR):** The actual resolution exposed to the browser may be smaller due to the device's pixel ratio. Use a tool like [What Is My Screen Resolution](https://www.whatismyscreenresolution.org/) to verify the reported resolution.

2. **Avoid Fixed Root Sizes:** Instead of setting a fixed root size, use a combination of vertical and horizontal containers with the default fullsize root. This approach allows for a layout that scales with the screen size, accommodating the actual resolution reported by the browser.

By implementing these strategies, you can create a more adaptable layout that fits the screen without scroll bars.

# Controlling Multiple Devices Independently in Open Stage Control

**Problem Description:**
Users may encounter issues when trying to control multiple iPads with Open Stage Control, as actions like tab switching can sync across devices, leading to unintended behavior.

**Solution:**
To prevent synchronization when switching tabs on multiple devices, follow these steps:

1. **Bypass Syncing:**
   - Enable the bypass option on the button used for switching tabs. This can be done by setting the `bypass` property to true for that button.

2. **CSS for Hiding Tab Headers:**
   - If you wish to hide the tab headers, you can use the following CSS code in the root configuration:
     ```css
     inner > .navigation {
       display: none;
     }
     ```

3. **Switching Tabs Independently:**
   - Use the command `set("root", 1)` to switch tabs, ensuring that the button has the bypass option enabled to prevent syncing across devices.

By implementing these steps, you can control each device independently without unwanted synchronization.

# Encoder Widget Configuration for MIDI Notes

## Problem Description
The goal is to configure an encoder widget in Open Stage Control to send repeated MIDI notes based on its rotation direction:
- Clockwise rotation should send MIDI note 1 on channel 1.
- Counterclockwise rotation should send MIDI note 2 on the same channel.

Additionally, there is a need to reduce the number of messages sent when the encoder is turned, effectively simulating a lower resolution of 16 ticks per turn while maintaining smooth operation.

## Solution
To achieve the desired MIDI note output based on the encoder's rotation, use the following script in the widget's `script` property:

```javascript
if (value === 1) {
  send("/note", 1, 1, 127)
} else if (value === -1) {
  send("/note", 1, 2, 127)
}
```

To reduce the verbosity of the encoder messages, adjust the `sensitivity` property. A value of `0.05` is recommended to limit the number of messages sent, effectively simulating the desired behavior.

### Resources
- [Open Stage Control Scripting Documentation](https://openstagecontrol.ammd.net/docs/widgets/scripting/)
- [MIDI Messages Documentation](https://openstagecontrol.ammd.net/docs/midi/midi-messages/#note-channel-note-velocity)

# Sending OSC Messages Without Numbers

**Problem Description:**
Users may want to send OSC messages without any numerical values appended to the message.

**Solution:**
To send an OSC message without numbers, configure the widget as follows:

1. If using a button:
   - Set the `mode` property to `tap`.
   - Set the `on` property to `null`.

This configuration will allow the button to send only the OSC data without any numerical values.

# Best Way to Store Fader Values (Store & Recall)

## Problem Description
Users want to save and recall fader values dynamically assigned to different CCs based on track selection in a DAW (e.g., Logic Pro). For example, when switching between tracks, the fader values should automatically adjust to the last set values for each track.

## Solution
A reliable method to achieve this functionality involves using the `onValue` and `onCreate` properties of a widget that selects the track. Here is a simple example provided by **jean-emmanuel**:

1. **Track Selection Widget**: This widget saves the state of the faders when switching tracks and restores it based on the new selection.
2. **Implementation**: 
   - Place the `onCreate` and `onValue` code snippets on the track selection widget.
   - Ensure that all faders you wish to recall are contained within a panel or matrix.
   - Use a field to hold the track name, which gets updated via a custom script whenever a track is selected in the DAW.

For a practical implementation, refer to the provided example file: [Attachment: j2v0IReNz2Td6HK4gtTzcL9QUmb.json]. 

This approach has been confirmed to work effectively for users, allowing for seamless fader value recall when switching tracks.

# Make Panels Visible Based on Switch Value

## Problem Description
The goal is to control the visibility of multiple panels in Open Stage Control based on the value of a switch. Specifically, three panels (panel_1, panel_2, panel_3) should be shown or hidden depending on the switch's value, which can be 1, 2, or 3.

## Solution
To achieve this, you can use the `setVar` function to control the `visible` property of each panel based on the switch value. Here are two reliable methods:

### Method 1: Using Conditional Statements
You can set the visibility of each panel using conditional statements in the `onValue` event of the switch:

```javascript
if (value == 1) {
    setVar("panel_1", "show", true);
    setVar("panel_2", "show", false);
    setVar("panel_3", "show", false);
} else if (value == 2) {
    setVar("panel_1", "show", false);
    setVar("panel_2", "show", true);
    setVar("panel_3", "show", false);
} else if (value == 3) {
    setVar("panel_1", "show", false);
    setVar("panel_2", "show", false);
    setVar("panel_3", "show", true);
}
```

### Method 2: Using a Dynamic Approach
For a more dynamic solution, you can create an array of panel names and iterate through them:

```javascript
var panelMap = ["panel_1", "panel_2", "panel_3"];
value = get("switch_id"); // Replace with your switch ID

// Iterate through the panels and update visibility dynamically
panelMap.forEach((panel, index) => {
    setVar(panel, "show", (index + 1) === value);
});
```

### Alternative Method
You can also set the visibility directly in each panel's visibility property using expressions:

```javascript
#{@{switch_1} == 1 ? "true" : "false"} // For panel_1
#{@{switch_1} == 2 ? "true" : "false"} // For panel_2
#{@{switch_1} == 3 ? "true" : "false"} // For panel_3
```

Choose the method that best fits your needs.

# Slider and Touch Variable in a Script: Touch is Sent Before Value

When using a slider to trigger MIDI notes, it has been observed that the velocity of the note is based on the previous position of the slider when the slider is touched, rather than the current value. This behavior occurs because the touch event is processed before the value change is evaluated.

## Solution

To ensure that the current value of the slider is used when sending the MIDI note, you can implement a delay using `setTimeout`. This allows the value to be updated before the note is sent. Here is the recommended script:

```javascript
if (touch !== undefined) {
  setTimeout(function() {
    send("/note", 1, 62, get("this"));
  });
}
```

To generate a note-off message on release, modify the script as follows:

```javascript
if (touch !== undefined) {
  setTimeout(function() {
    send("/note", 1, 62, get("this") * touch);
  });
}
```

### Additional Notes

- When using this script in a matrix of sliders, ensure to use single quotes around the script to avoid conflicts with the surrounding double quotes. For example:

```javascript
"script": "if (touch !== undefined) { setTimeout(function(){send('/note', 1, #{$+0}, value * touch) })}"
```

This adjustment should resolve issues with the velocity being based on the previous slider position. 

For further reference, see the attached session files for examples:
- [Attachment: eKKDOHZJgt6LyiOYkmfBLuPAr0a.json]
- [Attachment: vY5UOxxCdPhe1NCopmr92z0ZKKS.json]

# Displaying the Label Instead of the Value of a Pressed Button in a Modal

**Problem Description:**
Users may want to display the label of a button (e.g., the name of a bird) in a modal instead of the value returned by the pressed button. The challenge is to correctly retrieve and display this label when using a switch widget in Open Stage Control.

**Solution:**
To display the label of the pressed button in a modal, you can use the following JavaScript code in the `text` property of the widget:

```javascript
JS{{
var values = @{switch_3.values},
    v = @{switch_3}

return Object.keys(values).find(k => values[k] == v)
}}
```

This code retrieves the active value from the switch widget and finds the corresponding label from the defined values. Ensure that you remove any `linkId` from the `text` widget where this code is applied.

For further clarification on properties and dynamic values, refer to the Open Stage Control documentation on [dynamic properties](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/#dynamic-properties).

[Attachment: modal-comment-recuperer-le-libelle-switch.json]  
[Attachment: hgE0cyGIZIW9oEzgDnEsXkJuKfw.json]

[Attachment: 68yjNPCS7LdmuCutXTftmkJqQoh.json]

# Copying to Clipboard in Open Stage Control

## Problem Description
Users may want to copy variables to the clipboard using a button script in Open Stage Control (OSC). However, attempts to use `navigator.clipboard.writeText(txt)` can lead to errors or crashes due to the `navigator` object not being exposed.

## Solution
In version 1.9.1 of Open Stage Control, the `navigator` object is accessible through the following globals:

- `globals.navigator`
- `globals.clipboard`

You can use these globals to interact with the clipboard without causing crashes.

# User ID in "Visibility" Property

## Problem Description
Users may want to set the visibility of a panel in Open Stage Control based on the user ID. A common issue arises when the visibility property is not correctly referencing the environment variable, leading to errors.

## Solution
To control the visibility of a panel based on the user ID, use the following JavaScript syntax in the visibility property:

```javascript
JS{
if (globals.env.id == "your_user_id") {
  return true;
} else {
  return false;
}
}
```

Replace `"your_user_id"` with the appropriate user ID you wish to check against.

### Example
For two panels, you can set their visibility as follows:

- For `panel_1` (user ID "1"):
  ```javascript
  JS{
  if (globals.env.id == "1") {
    return true;
  } else {
    return false;
  }
  }
  ```

- For `panel_2` (user ID "2"):
  ```javascript
  JS{
  if (globals.env.id == "2") {
    return true;
  } else {
    return false;
  }
  }
  ```

Ensure you load the client with the correct ID in the URL, such as `http://127.0.0.1:8080?id=1` or `http://127.0.0.1:8080?id=2`.

### Note
If you encounter a `ReferenceError: env is not defined`, ensure you are using `globals.env` instead of `env`.

For issues related to value parameters not updating correctly upon restarting Open Stage Control, it may be a synchronization issue with multiple clients. Close all clients before loading the session to avoid this problem.

[Attachment: filename.ext] (attachment reference missing)

# How to Brighten a Base64 Image in Open Stage Control

## Problem Description
Users may encounter issues with the brightness of Base64 images in Open Stage Control, resulting in images appearing dim or washed out. This can affect the visual quality of buttons and icons within a template.

## Solution
To address the brightness issue of a Base64 image, adjust the alpha fill value in the CSS settings. Follow these steps:

1. Set the alpha fill value to `1` to ensure full opacity:
   ```css
   :host {
       background: url([css code]) no-repeat;
       background-size: 100% 100%;
       alpha-fill: 1; /* Set opacity to 1 */
   }
   ```

2. If the image becomes invisible, revert the alpha fill value to `0` to achieve the desired visibility.

3. If the image still appears larger than adjacent buttons, verify that all buttons are set to the same size in their respective settings.

By adjusting the alpha fill value, you can enhance the brightness of your Base64 images effectively. 

(attachment reference missing)

# Receiving MIDI Clock in Open Stage Control

## Problem Description
Users may encounter difficulties in receiving MIDI clock signals in Open Stage Control. Specifically, there is confusion regarding the correct configuration to detect MIDI clock messages, which are typically sent as message type 248.

## Solution
To successfully receive MIDI clock signals in Open Stage Control, ensure the following configurations are set:

1. **MIDI Configuration**:
   - Include `mtc` (MIDI Time Code) and `sysex` (System Exclusive) in the MIDI configuration string. This allows Open Stage Control to handle the relevant MIDI messages correctly.

2. **Message Reception**:
   - MIDI clock messages will be received as `/sysex`. All message types above 240 are treated as System Exclusive messages in Open Stage Control.

By configuring both `mtc` and `sysex`, you should be able to receive the clock signals effectively. If you continue to experience issues, verify that your MIDI source (e.g., Traktor) is correctly sending the clock signals and that your Open Stage Control setup is correctly configured to receive them.

For further troubleshooting, consider using alternative applications like TouchOSC to capture MIDI clock signals and relay them to Open Stage Control if necessary.

[Attachment: filename.ext]

# Server Stopped Callback

**Problem Description**  
There is a need for a callback that triggers when the Open Stage Control server is stopped. Currently, using `app.on("close")` deletes a configuration file created when the server starts, but this file is also deleted when a client disconnects. The goal is to ensure the file is deleted only when the server is completely stopped.

**Solution**  
As of now, there is no specific server shutdown callback available in Open Stage Control. The closest callbacks are `close`, `destroyed`, and `unload`, but they do not meet the requirement for server-wide shutdown events:

- `close`: This is client-specific and triggers for each client instance, not for the server as a whole.
- `destroyed`: This is a follow-up to `close` and also does not serve the purpose of indicating a full server shutdown.
- `unload`: This is tied to the custom module's lifecycle, not the server's lifecycle.

**Recommendation**  
It has been suggested that a server shutdown callback would be a valuable addition to Open Stage Control. For now, it is advisable to monitor the server's state and manage file creation and deletion accordingly until such a callback is implemented.

[Attachment: callbacks.js]  
[Attachment: callbacks_1.js]  
[Attachment: callbacks_2.js]

# Constraining the Keyboard Widget to a Single Note in Toggle Mode

## Problem Description
The user wants to configure the keyboard widget in toggle mode such that activating a new key will deactivate any previously activated key.

## Solution
To achieve this functionality, you can use the following script:

```javascript
var keyVal = value[getIndex(id)];
if (keyVal == getProp('this', 'on')) {
  // If the key is pressed
  if (locals.lastKey) {
    // Release the last pressed key
    // Use sync:false to prevent forced release from triggering the script 
    set(locals.lastKey, 0, {sync:false});
  }
  // Store the currently pressed key 
  locals.lastKey = id;
} else if (id == locals.lastKey) {
  // If the key is released manually
  locals.lastKey = 0;
}
```

This script checks if a key is pressed and manages the state of the last pressed key accordingly.

# Customizing a Panel with External Files and Variables in Open Stage Control

## Problem Description
Users often seek an efficient method to customize the names and colors of faders and bank titles in Open Stage Control, especially when managing a large number of widgets. The goal is to avoid modifying each widget individually and instead make changes in a single script or external file that loads during the initialization of the JSON session.

## Solution
To achieve this, you can create a JSON file alongside your session file that contains the mapping for your faders and banks. Here’s a structured approach:

1. **Create a JSON Mapping File**: Save a file named `map.json` with the following structure:

   ```json
   {
     "bank1": {
         "0": {"label": "Bass", "color": "#ff0000"},
         "1": {"label": "Synth", "color": "#ffff00"}
     },
     "bank2": {
         "0": {"label": "Bass2", "color": "#ff0000"},
         "1": {"label": "Synth2", "color": "#ffff00"}
     }
   }
   ```

2. **Use a Variable Widget**: In the value property of a variable widget, implement the following JavaScript code:

   ```javascript
   var mapping = {}
   var userMapping = IMPORT{map.json}
   if (userMapping) userMapping = JSON.parse(userMapping)

   // Build mapping with fallback to default values
   for (var bank of ["bank1", "bank2", "bank3", "bank4"]) {
     mapping[bank] = {}

     for (var i = 0; i < 16; i++) {
       if (userMapping && userMapping[bank] && userMapping[bank][i]) {
         mapping[bank][i] = userMapping[bank][i]
       } else {
         mapping[bank][i] = {label: "None", color: "Grey"} 
       }
     }
   }

   return mapping
   ```

3. **Dynamic Retrieval**: Access the label and color values dynamically in your widgets using the following syntax:
   - For Bank1 / Fader 0 / Label: 
     ```
     #{@{mapping_variable_id}.bank1[0].label}
     ```
   - For Bank2 / Fader 4 / Color: 
     ```
     #{@{mapping_variable_id}.bank2[4].color}
     ```

This method allows you to edit the mapping file, and the changes will automatically reflect in your session, providing a flexible and efficient way to manage your panel customization.

[Attachment: map.json]

# Connection Issues with Open Stage Control and Cubase

## Problem Description
Users may encounter issues connecting Open Stage Control with Cubase, even after setting up the template correctly. Common symptoms include the inability to establish a connection, despite the start button being activated, and receiving error messages related to OSC addresses.

## Solution
1. **Check OSC Address Format**: Ensure that OSC addresses start with a slash (`/`). For example, use `/control` instead of `\control`.

2. **MIDI Configuration**:
   - Verify that your MIDI configuration is correct. The configuration should match the current port numbers. If the MIDI device list changes, the previous configuration may no longer work.
   - You can either:
     - Update the port numbers in the MIDI configuration to match the new port numbers.
     - Use strings instead of numbers to select the ports by name. The format should be:
       ```
       "OSC:input port name,output port name"
       ```
       - Note: Use double quotes if port names contain spaces. You do not need to write the full name; the first matching port will be selected.

3. **Generic Remote Settings**: If using a generic remote in Cubase, ensure the settings are correct. For instance, set the Device to "Command" and Channel/Category to "Transport".

For further assistance, refer to the MIDI configuration documentation for Open Stage Control.

[Attachment: screenshot1.png]  
[Attachment: screenshot2.png]  
[Attachment: screenshot3.png]  
[Attachment: screenshot4.png]  
[Attachment: screenshot5.png]  
[Attachment: screenshot6.png]  
[Attachment: screenshot7.png]  
(attachment reference missing)

# Issue with Save/Load Button and Array Initialization in Open Stage Control

## Problem Description
A user is experiencing issues with a "Save" and "Reload" button setup that interacts with a variable array in a matrix. The "Save" button correctly retrieves the array, but the "Reload" button fails to set the array back to its saved state, instead reflecting the current state of the matrix.

### Code Snippet
- **Save Button onValue:**
  ```javascript
  var Sauvegarde = getVar('matrix_2','MonArray')
  setVar('ReLoad','Memoire',Sauvegarde) 
  ```
- **Reload Button onValue:**
  ```javascript
  var memory = getVar('this','Memoire')
  setVar('matrix_2','MonArray',memory) 
  ```

The matrix properties are initialized as follows:
```javascript
props.onCreate =
`
var indexRep = [...] 
var MonArrayInitial=Array(indexRep.length).fill(1)
setVar('matrix_2','MonArray',MonArrayInitial)
`
```

## Solution
The issue arises because `getVar()` returns a reference to the original array rather than a copy. This means that any changes made to the array via the "Reload" button affect the original array.

### Recommended Fix
To resolve this, ensure that `getVar()` returns a copy of the array instead of a reference. This will prevent the "Reload" button from modifying the original array when it attempts to set the saved state.

### Technical Explanation
In JavaScript, object variables (like arrays) are pointers to their actual objects in memory. When you assign one object to another, both variables point to the same object. Thus, modifying one will affect the other. To avoid this, you should create a copy of the array when saving and reloading.

### Example of Creating a Copy
You can create a copy of the array using the spread operator or `Array.slice()`:
```javascript
// To save
var Sauvegarde = [...getVar('matrix_2','MonArray')]; // or getVar('matrix_2','MonArray').slice()
setVar('ReLoad','Memoire',Sauvegarde);

// To reload
var memory = getVar('this','Memoire');
setVar('matrix_2','MonArray',[...memory]); // or memory.slice()
```

This will ensure that the original array remains unchanged when you reload the saved state.

**Note:** This issue is expected to be addressed in a future release of Open Stage Control.

# Custom Module for OSC Processing

## Problem Description
The custom module is intended to process OSC messages from an external MIDI controller. However, it currently only recognizes control data, as indicated by the filtering condition in the `oscInFilter` function. The user seeks to understand how to modify the module to also process program change data.

## Solution
To allow the `oscInFilter` function to process program change messages, you need to modify the filtering condition. The current code prevents any messages that are not addressed to `/control` from being processed. 

Here’s how you can adjust the function:

```javascript
module.exports = {
    oscInFilter: function(data) {
        var {address, args, host, port} = data;

        // Allow both control and program change messages
        if (address !== '/control' && address !== '/programChange') return;

        if (args[1].value == 127) {
            send('midi', 'OSCtoDAW', '/control', 1, 126, 1);
            return;
        }

        return {address, args, host, port};
    },
}
```

### Key Changes:
- Added a condition to check for `/programChange` in addition to `/control`.
- Ensure that the function processes messages that meet either condition.

### Additional Notes:
- Familiarity with JavaScript is essential for writing and modifying custom modules. Consider exploring online resources to learn the basics of syntax, variables, functions, and conditionals. 

This adjustment should enable your module to process both control and program change data effectively.

# New Canvas Touch Events: Issues and Solutions

## Problem Description
The new touch event properties (force, radiusX, radiusY, rotationAngle, altitudeAngle, azimuthAngle, and touchType) in Open Stage Control have some limitations, particularly when using a stylus on iOS devices. Key issues include:

1. **Event Force Not Updating**: When using a stylus, changes in pressure (event.force) do not trigger new messages if the pointer does not move.
2. **Radius Values**: The radiusX and radiusY values appear to be quantized on iOS, providing only a few distinct values. These values are only set during the "start" event and do not update while the pointer moves.
3. **Rotation Angle**: The rotationAngle consistently returns 0 on iPad.
4. **Stylus and Touch Simultaneity**: Stylus input is ignored when touch is detected, raising questions about simultaneous input handling in browsers.

## Solution
To address these issues, consider the following approaches:

1. **Polling Force Value**: It may be possible to manually poll the force value to detect changes, which could also apply to altitudeAngle and azimuthAngle.
2. **Touch Implementation**: For better handling of touch and stylus inputs, consider rewriting the touch implementation using the Pointer API. However, this may require significant effort and is not currently prioritized.

These solutions may help improve the functionality of touch events in Open Stage Control, particularly for users on iOS devices. 

(attachment reference missing)

# Executing Two "for" Loops Sequentially in JavaScript

## Problem Description
The goal is to execute two "for" loops sequentially, ensuring that the second loop starts after the first loop has completed its execution. The initial implementation incorrectly attempts to delay the second loop using the variable `i`, which does not reflect the total execution time of the first loop.

## Solution
To ensure that the second loop starts after the first loop has completed, modify the delay for the second loop to account for the total time taken by the first loop. The corrected code is as follows:

```javascript
// 1st FOR loop (i)
for (var i = 0; i < 100; i++) {
    setTimeout(function() {
        // do first thing
    }, i * 5);
}

// 2nd FOR loop (y)
setTimeout(function() {
    for (var y = 0; y < 444; y++) {
        setTimeout(function() {
            // do second thing
        }, y * 2);
    }
}, i * 5 + 100); // Delay based on the total time of the first loop
``` 

This adjustment ensures that the second loop starts after the first loop has completed its execution.

# Automatic Configuration Load at Start Up

## Problem Description
When launching multiple instances of Open Stage Control (OSC) at startup, users want each instance to load a specific configuration automatically. However, all instances currently load the last configuration used, which only works for one instance.

## Solution
You can launch each OSC instance with command line arguments to specify different configurations. Use the following commands in the terminal:

1. To load a specific session:
   ```
   path\to\open-stage-control.exe -- --load path\to\session.json --port 9090
   ```

2. To specify a different configuration file:
   ```
   path\to\open-stage-control.exe -- --config-file path\to\config.json
   ```

3. To set a different cache directory:
   ```
   path\to\open-stage-control.exe -- --cache-dir path\to\cache\
   ```

For Windows users, ensure you use the correct syntax in the command prompt. An example command to load a specific configuration might look like this:
```
"path\to\open-stage-control.exe" --load "path\to\config.config" --port 7500
```

Make sure to replace `path\to\` with the actual path to your OSC executable and configuration files.

If you encounter errors such as "this.parent.isVisible is not a function," verify that the command syntax is correct and that the specified configuration files are valid.

# Label Content Behavior with "Shift-Enter"

## Problem Description
When entering a letter or number in a label, using "Shift-Enter" to add spaces behaves differently. Specifically, spaces added after a number are removed upon pressing Enter, while spaces after letters remain intact.

## Solution
This issue arises because numbers are interpreted differently than letters. To maintain spaces after a number, use the HTML code for a non-breaking space. For example, to display "+10" as a string without losing the formatting, use the following syntax:

```
#{
`+10

`
}
```

This ensures that the number is treated as a string, preserving the desired spacing and formatting. 

For further reference, see the attached file for additional context: [Attachment: s42tyRqdNNoqy5ZAEj6cNnRwu0.json].

# How to Set a Theme in a Folder Outside the Default Directory

**Problem Description:**
Users may want to use a CSS file as a theme located in a folder outside the default Open Stage Control directory. This allows for better project organization by decoupling custom modules and JavaScript files from Open Stage Control files and folders.

**Solution:**
You can specify the absolute path to the CSS file in the theme option. If the path contains spaces, enclose it in quotes. 

Example:
```json
{
  "theme": "/absolute/path/to/your/theme.css"
}
```

Note: In the next version of Open Stage Control, a file browser button will be added for the `theme` option, simplifying this process. 

[Attachment: filename.ext]

# Using Buttons and Matrix in Open Stage Control

## Problem Description
A beginner user seeks to create a button that sends different CC messages based on the selection of a switch. The user provides examples using buttons and a matrix, along with various programming concepts.

## Solution
To implement this functionality, you can follow these steps:

1. **Create a Button**: Use Open Stage Control to create a button that will send Control Change (CC) messages.

2. **Use a Matrix**: Implement a matrix to manage multiple button states and their corresponding messages.

3. **Programming Concepts**:
   - Utilize CSS for styling.
   - Use HTML for structure.
   - Manage states with JavaScript variables and arrays.
   - Implement the `setInterval` function for periodic updates.
   - Use a `send` function to transmit messages based on button interactions.

4. **Correct Array Structure**: Ensure your 2D array is structured correctly. For example:
   ```javascript
   [
     [ 1, 4, 7, 11 ],
     [ 2, 8, 12, 15 ],
     [ 6, 7, 8, 9 ],
     [ 1, 2, 5, 7 ]
   ]
   ```

For a practical implementation, refer to the provided JSON file for a complete example: [Attachment: eVwGl4aZmDjuJcBHwF6C09UCwiV.json].

# Utilisation du touchaddress du fader pour envoyer des données MIDI

## Problème
Il est souhaité d'utiliser le `touchAddress` d'un fader pour envoyer une donnée MIDI NoteOn, car le Mackie MCU envoie la donnée NoteOn sur G# 7 pour le fader 1, tandis que le fader utilise le pitchbend.

## Solution
Il est possible d'implémenter cette fonctionnalité en créant un module personnalisé. Ce module doit filtrer les messages correspondant au `touchAddress` et envoyer des messages MIDI différents.

Pour plus d'informations, vous pouvez consulter un exemple pertinent dans un sujet récent : "One push button sends a sequence of values?" [Attachment: filename.ext].

# Update Knob/Fader Pointer from Another Widget

## Problem Description
A user created a knob with a hidden menu-button that allows selection of dB range presets. While they successfully updated the knob's value and custom HTML text, they were unable to update the knob's pointer position using `updateProp()`. Various properties were attempted without success.

## Solution
To update the knob's pointer, use the `set` function to adjust the knob's value. This will automatically redraw the knob to reflect the new value, eliminating the need for `updateProp()`. Ensure that the value passed to `set` is a number, not a string.

For example:
```javascript
set("cubase_controlRoomFader", newValue);
```

This approach will correctly update the knob's pointer position.

# Custom Fragment File Path in Open Stage Control

## Problem Description
Users often need to manage multiple fragment files across different sessions and computers. Currently, fragment files must be located in the same directory as the main session file or specified using an absolute path, which can be inconvenient. There is a request for a feature that allows users to specify a custom fragment folder in the Open Stage Control editor preferences, enabling a more flexible file management system.

## Solution
While there is no built-in feature to specify a custom fragment folder at this time, a workaround is available. Users can begin their fragment file path with `~/`, which resolves to the user directory (e.g., `/home/username/` on Linux/macOS or `C:\Users\UserName` on Windows). This allows for easier access to fragment files without needing to specify absolute paths.

Additionally, it is noted that the cache directory can be utilized for storing fragment files, although it is not currently implemented. Users can create subfolders within the cache directory to avoid conflicts with other files. However, caution is advised as the cache directory may contain other files.

For future improvements, a user interface in the server to define the fragment path would enhance usability. 

[Attachment: filename.ext]

# Sending OSC Messages to Specific IPs with Widgets

**Problem Description:**
Users may need to send OSC messages to multiple IP addresses and ports using widgets in Open Stage Control. The challenge is to configure individual widgets to target specific IPs while maintaining the ability to send messages to different controllers from the same interface.

**Solution:**
To send OSC messages to specific IP addresses using widgets, follow these steps:

1. **Set Default Targets:**
   You can define multiple default targets in the server's `send` option. For example:
   ```
   127.0.0.1:4444 127.0.0.1:5555
   ```
   This configuration will make all widgets send messages to the specified ports.

2. **Specify Widget Targets:**
   To direct a specific widget to a different IP, use the `target` property. For example:
   ```
   127.0.0.1:6666
   ```
   This will make the widget send messages to port 6666, while still sending to the default targets unless the `ignoreDefaults` property is enabled.

3. **Multiple Targets for Widgets:**
   If you need to specify multiple targets for a widget, use the following syntax:
   ```json
   [
     "127.0.0.1:6666",
     "127.0.0.1:7777"
   ]
   ```

4. **Bypass Property:**
   For widgets that do not need to send any messages, consider enabling the `bypass` property.

5. **Using Variables for Dynamic Targets:**
   To create a set of predefined targets for widgets, you can use variable widgets. Create variable widgets with the following properties:
   - `value`: Set this to the desired `ip:port` for the controlled software.
   - `id`: Assign a short identifier for each software.

   You can then reference these variables in the `target` property of other widgets using advanced syntax:
   ```json
   @{variable_id_1}
   ```
   or for multiple targets:
   ```json
   [
     "@{variable_id_1}",
     "@{variable_id_2}"
   ]
   ```
   Open Stage Control will replace `@{variable_id_1}` with the value of the corresponding variable widget.

By following these steps, you can effectively manage OSC messages to multiple IP addresses from a single interface in Open Stage Control.

# Creating and Using an Array of `getVar` with Push

## Problem Description
The goal is to create an array that retrieves values from a matrix using `getVar` and store them in an array. However, the initial implementation returns an array of strings instead of actual values, resulting in `null` values when attempting to push the results into the array.

## Solution
To correctly retrieve values from the matrix, ensure that `getVar` is called in the appropriate context. Here’s the corrected approach:

1. Use `getVar` within the scripting properties.
2. Replace the string concatenation with proper variable interpolation.

Here’s the revised code:

```javascript
var props = {};
props.onValue = `
  var MonArray = [];
  var MesIndex = [1, 6, 9, 12, 15, 19]; // up to 26 values

  for (let x = 0; x < MesIndex.length; x++) {
    MonArray.push(getVar('matrix_2', 'A' + MesIndex[x]));
  }

  console.clear();
  console.log(MonArray);
`;
return props;
```

### Key Changes:
- Ensure `getVar` is called correctly without quotes around the variable name.
- Use `'A' + MesIndex[x]` for proper string concatenation.

This will populate `MonArray` with the actual values from the matrix instead of strings.

# Open Stage Control MIDI Export Issue

## Problem Description
When attempting to export with Node using Open Stage Control, the `--midi` option does not function as expected. The initial command used was:

```python
command = [
    node_binary,
    osc_script,
    "--fullscreen",
    f"--send={ip}:9005",
    "--port", "8080",
    "--osc-port", "6666",
    "--debug",
    "--custom-module", module_file,
    "--load", json_file,
    "--midi", "osc_mcu:virtual sysex"
]
```

## Solution
The correct syntax for the `--midi` option should be split into two separate arguments:

```python
"--midi", "osc_mcu:virtual", "sysex"
```

This adjustment resolves the issue with the MIDI export functionality. 

[Attachment: RME_iphone.json]  
[Attachment: 7AJnwlNMQ5nelYweR2NmPPsc1l4.json]

# SVG Widgets Usage

## Problem Description
Users may be confused about how to use SVG widgets in Open Stage Control, particularly regarding embedding SVG content and using external SVG files as backgrounds for other widgets.

## Solution
1. **Using SVG Widgets**: 
   - SVG is a markup language for creating images using XML. To use SVG content in an SVG widget, copy the SVG element's content directly into the SVG property of the widget.

2. **Using SVG as Background**:
   - While it is possible to place an SVG widget behind another widget, using external SVG files for static assets is generally recommended for better organization and performance. 

For detailed guidance on SVG usage, refer to the [SVG Tutorial](https://www.w3schools.com/graphics/svg_intro.asp).

# Switch Widget: Omit Typing Names for Values

**Problem Description:**
Users may find it cumbersome to type a name for every value in a switch widget configuration. An example of an undesirable configuration is shown below, where empty strings are used as names:

```json
{
  "": 1,
  "": 2,
  "": 3,
  "": 4,
  "": 5,
  "": 6,
  "": 7,
  "": 8,
  "": 9
}
```

**Solution:**
To simplify the configuration, you can use an array format instead of key-value pairs. For example, you can define the values as follows:

```json
[1, 2, 3, 4]
```

This approach eliminates the need for naming each value explicitly.

# Generating Widget Colors from MIDI Messages

## Problem Description
The goal is to change the color of a widget in Open Stage Control based on RGB-like MIDI messages. Specifically, the color should respond to three MIDI channels: Channel 1 for Red, Channel 2 for Green, and Channel 3 for Blue. Different velocity combinations sent through these channels should dynamically update the widget's color.

## Solution
To implement this functionality, follow these steps:

1. **CSS Configuration**: Set the background color of the widget using the RGB values received from the MIDI channels. Use the following CSS code in the widget's properties:

   ```css
   :host {
       background-color: #{'rgb(' + OSC{/chn1_Red, 0} + ',' + OSC{/chn2_Green, 0} + ',' + OSC{/chn3_Blue, 0} + ')'};
   }
   ```

2. **Custom Module for MIDI Filtering**: Create a custom module to filter incoming MIDI messages and associate them with the appropriate buttons. Below is a sample implementation:

   ```javascript
   module.exports = {
       oscInFilter: function(data) {
           var { address, args, host, port } = data;

           if (host === 'midi' && address === '/note') {
               var channel = args[0].value;
               var note = args[1].value;
               var velocity = args[2].value;

               if ((channel === 1 || channel === 2 || channel === 3) && (note >= 12 && note <= 19)) {
                   let buttonId = 'button_' + (note - 23);

                   if (channel === 1) {
                       receive("/chn1_Red", velocity);
                       receive('/' + buttonId + '/chn1_Red', velocity);  
                   }
                   if (channel === 2) {
                       receive("/chn2_Green", velocity);
                       receive('/' + buttonId + '/chn2_Green', velocity);  
                   }
                   if (channel === 3) {
                       receive("/chn3_Blue", velocity);
                       receive('/' + buttonId + '/chn3_Blue', velocity);  
                   }
               }
           }

           return { address, args, host, port };
       }
   };
   ```

3. **Testing**: After implementing the above code, test the functionality by sending MIDI notes on the specified channels and verifying that the corresponding buttons change color as expected.

This setup allows for dynamic color changes in response to MIDI messages, enhancing the interactivity of your Open Stage Control interface.

# Update Canvas from Another Widget or Custom Variable

## Problem Description
Users want to update a canvas widget manually from another widget, such as a fader or a custom variable. While using continuous mode is one option, it may be excessive for simpler tasks. A request was made for a function like `canvasUpdate()` that could be invoked from any widget.

## Solution
As of a recent update, the function `updateCanvas` is now available for scripting, allowing users to manually refresh the canvas widget from other widgets. However, it has been noted that calling `updateCanvas` may cause the canvas widget's `onDraw` method to execute twice. This behavior has been identified as a bug and has been fixed in the latest sources.

For implementation, you can use the following example to call `updateCanvas` from a fader:

```javascript
// Example of calling updateCanvas from a fader
fader.onChange = function(value) {
    updateCanvas();
};
```

For further reference, please see the attached example file: [Attachment: Canvas_Manual_Refresh.json].

[Attachment: czGri0M8OlOREdORUa4b1svI8De.json]

# Keyboard - Selective Background Color Change of a Key

## Problem Description
Users want to change the background color of selected keys on a keyboard in Open Stage Control. Initial attempts using CSS selectors like `.key:nth-child(n)` do not yield the desired results.

## Solution
To change the background color of specific keys, use the following CSS syntax:

```css
.key:nth-child(n) inner {
  background-color: red; /* Replace 'red' with your desired color */
}
```

For example, to color the second and third keys, use:

```css
.key:nth-child(2) inner {
  background-color: orange;
}
.key:nth-child(3) inner {
  background-color: orange;
}
```

To add a border to the keys, you can use:

```css
.key > inner {
  border: 1px solid #111; /* Adjust the color and thickness as needed */
}
```

### Additional Notes
- Use the browser inspector (F12) to explore the widget's HTML/CSS and identify the correct elements to modify.
- If you want to dynamically change the key colors based on user input, consider using variables in your custom module, although this may require additional configuration.

For a complete example of a keyboard setup that adapts to user selections, refer to the attached files:

- [Attachment: uw2cb8wkV9Hc7lrq6AYVHxZfcev.zip]
- [Attachment: harp_scale.json]
- [Attachment: Harp_v3.10.json]

[Attachment: cq7odsEQSfTgyAKAMo9nIITD1WX.json]

[Attachment: 6RvwLRdvGmDeIvLAoyGQI4tLZ9O.json]

# Widget Not Updating with OSC Message When Visibility Set to False

When a widget's visibility property is set to false, it does not receive OSC messages as expected. This behavior can be problematic for users who want to maintain functionality while the widget is not visible.

## Solution

This issue is recognized as a bug. The internal value is updated, but the widget is not rendered correctly. The bug has been fixed in version 1.9.13. 

To work around this issue prior to the fix, users can set the widget's height to 0% to effectively hide it while still allowing it to receive OSC messages.

For optimal performance, it is recommended to update to version 1.9.13 or later.

# Change Panel Position with Button

**Problem Description:**
Users may want to change the position of a panel using a button, allowing it to move from the top to the bottom of the interface or vice versa.

**Solution:**
To achieve this, you can modify the panel's geometry using a button's value. Here are the steps:

1. Set the panel's geometry to use percentages:
   ```plaintext
   #{@{button_1}*50}%
   ```
   Alternatively, you can simplify this by using:
   ```plaintext
   @{button_1}%
   ```
   - Set the button's "on" value to 50 and "off" value to 0.

2. If you prefer using absolute positioning, set the "on" and "off" values to the corresponding pixel values and remove the percentage sign (%) from the geometry.

For reference, you can view an example configuration in the attached file:
[Attachment: aVD8LYCf8wsko92rMlPxPAdyfH7.json]

# Formatting Text Widgets

**Problem:**  
Users want to display formatted text in Open Stage Control, including line breaks and headings. They are interested in using Markdown for text editing within text widgets.

**Solution:**  
To achieve precise text formatting, use the "html" widget instead of the text widget. By default, only line breaks are applied (for example, using `<p></p>` tags). Additional styling must be defined using CSS.

# Python-rtmidi Not Found on Windows ARM

**Problem Description:**
Users may encounter an issue where Open Stage Control (OSC) does not recognize the `python-rtmidi` package on Windows ARM, despite it being installed. This can occur due to multiple Python versions being installed or incorrect paths being set.

**Solution:**
1. **Check Python Version:**
   Ensure that the correct version of Python is being used. You can specify the path to the desired Python executable in OSC settings.

2. **Install `python-rtmidi`:**
   Run the following command in the terminal to ensure that `python-rtmidi` is installed for the correct version of Python:
   ```bash
   cd C:\path\to\python_folder
   Python39.exe -m pip install python-rtmidi --upgrade
   ```

3. **Verify Installation:**
   After installation, verify that `python-rtmidi` is recognized by running:
   ```bash
   python --version
   python -c 'import rtmidi; print(rtmidi.version, rtmidi._rtmidi.file)'
   ```

4. **Install Visual C++ Redistributable:**
   If issues persist, install `vc_redist.x86.exe` to resolve dependencies that `python-rtmidi` may require.

5. **MIDI Port Recognition:**
   If Windows does not recognize MIDI ports (both virtual and USB), further troubleshooting may be necessary, including checking for any MSI installer issues related to `rtpmidi`.

By following these steps, users should be able to resolve the issue with `python-rtmidi` not being recognized by Open Stage Control on Windows ARM systems. 

[Attachment: IMG_20210506_232806]
[Attachment: IMG_20210507_102605]

# Button State Control in Open Stage Control

**Problem Description:**
Users want to configure a button (Button A) to send different MIDI control change messages based on the state of another button (Button B). Specifically, when Button A is pressed, it should send `cc1` if Button B is on and `cc2` if Button B is off.

**Solution:**
To achieve this functionality, you can use scripting in the onValue event of Button A. Here are two methods to implement this:

1. **Using Conditional Statements:**
   ```javascript
   var state = get('button_1'); // Replace 'button_1' with the ID of Button B
   if (state == 1) {
       send('midi:virtual_midi', '/control', 1, 1, value); // Sends cc1
   } else {
       send('midi:virtual_midi', '/control', 1, 2, value); // Sends cc2
   }
   ```
   This script checks the state of Button B and sends the appropriate MIDI message based on its state.

   [Attachment: V4mj804ZHlE6LQ9jbOXhIXS1yT.json]

2. **Using a Ternary Operator:**
   For a more concise solution, you can use the following one-liner:
   ```javascript
   send('midi:virtual_midi', '/control', 1, get("button_1") === 0 ? 1 : 2, value);
   ```
   This line achieves the same result in a more compact format and can be used in any script field or within `#{}`.

   [Attachment: gSjkzQ8fiAiofz9rdBFGjzcYr7V.json]

# Insertion of Unicode Characters in Text Modules

**Problem Description:**
Users want to know how to insert Unicode characters into text modules within Open Stage Control.

**Solution:**
To insert Unicode characters in a text module, you can follow these steps:

1. **Copy and Paste Method:**
   - Perform a web search for the desired Unicode character.
   - Copy the character from a Unicode resource (e.g., fileformat.info or unicode-table.com).
   - Paste it directly into the text module editor using keyboard shortcuts:
     - **Windows:** `Ctrl + C` to copy and `Ctrl + V` to paste.
     - **Mac:** `Cmd + C` to copy and `Cmd + V` to paste.

2. **Manual Editing:**
   - Alternatively, you can manually edit the session file to include Unicode characters.

3. **Example Usage:**
   - When defining values for a switch, you can include Unicode characters as follows:
     ```json
     {
       "Off": 0,
       "∿": 1,
       "□": 2,
       "◿": 3,
       "◺": 4
     }
     ```

4. **Font Awesome Integration:**
   - If using Font Awesome icons, you can also insert them alongside Unicode characters, but this is separate from Unicode usage.

By following these methods, you should be able to successfully insert Unicode characters into your text modules.

# Custom Module: /EDIT Instruction Updates All Clones

## Problem Description
When using the `/EDIT` command to update fader clones (e.g., fader_1, fader_2, etc.) in Open Stage Control, all clones are updated if the command is sent to the original fader (fader_0). This behavior occurs despite each fader having a separate ID.

## Solution
This behavior is expected. To prevent all faders from updating when the original fader is addressed, consider changing the original fader's ID to something unique, such as `fader_-1` or `fader_original`. Then, ensure that the clones (fader_0 and others) derive from this modified original fader. This way, there will be no need to use `/EDIT` on the original fader.

[Attachment: filename.ext]

# Changing a Single Parameter in a Matrix from a Custom Module

## Problem Description
When attempting to send a single value to a specific fader in a matrix created within a custom module, the user encountered issues with overwriting all properties of the fader instead of just updating the desired value. The user sought clarification on how to directly address an individual fader within the matrix.

## Solution
To update the value of a specific fader in a matrix, use the following approach:

1. **Directly Address the Widget**: Instead of using `/EDIT`, send the value directly to the widget's address. The syntax is as follows:
   ```javascript
   receive('/widget_address', value)
   ```
   If the widget has `preArgs`, include them:
   ```javascript
   receive('/widget_address', preArg1, preArg2, value)
   ```

2. **Understanding Widget Addressing**: 
   - The address for each fader in the matrix is derived from the matrix's ID. If your matrix widget has the ID `matrix_cFad_L`, the first fader's address will be `matrix_cFad_L/0` if the address property is not explicitly set.
   - If you have defined an address in the properties of the matrix, use that address to control the faders.

3. **Example**: To set the value of the first fader to 60, use:
   ```javascript
   receive('/control', 1, CC, 60)
   ```
   Here, `/control` is the address you assigned to the faders, and `1` corresponds to the first fader in the matrix.

By following this method, you can effectively update the value of a specific fader without affecting the other properties.

# OSC Connection to Server Interrupted - Fix Requires Restart

**Problem Description:**
Users may encounter an error where the Open Stage Control (OSC) editor becomes unresponsive, preventing the saving of work. The server continues to function on client devices (e.g., tablets), but the master computer running the server shows a "disconnected" status. The only solution is to restart the OSC editor, which can result in loss of unsaved work.

**Solution:**
This issue is often caused by network problems or if the server process hangs. Here are some recommended steps to address the issue:

1. **Check for Errors:**
   - Monitor the server's debug window for any error messages. If the server is unresponsive, it may not show errors immediately.

2. **Export Session:**
   - If the server becomes unresponsive, you can use the "export" function to download the session file from the client device before restarting.

3. **Investigate Custom Modules:**
   - If you are using custom modules, check for any loops or processes that may be causing the server to hang. For example, a loop in your JavaScript code could block the server process.

4. **Launch Server from Terminal:**
   - Consider launching the OSC server from a terminal to capture any logs that may provide insight into the issue when it occurs.

5. **Monitor System Performance:**
   - Look for contextual information such as high CPU load, system updates, or temperature spikes that might correlate with the disconnection events.

6. **WebSocket Connection Errors:**
   - If you see WebSocket connection errors in the console, this could indicate network issues affecting the connection between the server and clients.

By following these steps, you can better diagnose and potentially resolve the issue of the OSC editor becoming unresponsive. 

[Attachment: w7zqkql1LaY5aTsZf5zuXibCKXJ.js]

# Receiving Variables as OSC Info

**Problem:**
A user is seeking to control additional parameters of a widget through OSC, specifically wanting to receive widget size information via OSC.

**Solution:**
It is possible to make any property OSC-controllable using the following syntax:

```javascript
// Example syntax for OSC control
oscControl('widgetName.property', 'value');
```

This allows you to receive and manipulate various widget properties, including size, through OSC messages.

# Button - Send One OSC Message on Single Tap; Another on Double Tap

## Problem Description
A user wants to configure a button in Open Stage Control to send different OSC messages based on whether the button is tapped once or double-tapped. The desired OSC addresses are "media_explorer_replace_keeping_sends" for a single tap and "insert_media_explorer_stuff" for a double tap.

## Solution
To achieve this functionality, you can create a global function that handles single and double taps. Follow these steps:

1. **Create a Button**:
   - Set the button's mode to `tap`.
   - Set the `On` value to `1` and `Off` value to `0`.

2. **Add Variables in `onCreate`**:
   ```javascript
   setVar(this, "isDoubleTap", false);
   setVar(this, "doubleTapTimeout", null);
   ```

3. **Implement the `onValue` Function**:
   ```javascript
   globals.doubleTap(
     id,
     // Single tap function
     () => send("media_explorer_replace_keeping_sends"),
     // Double tap function
     () => send("insert_media_explorer_stuff")
   );
   ```

4. **Create a Global Function**:
   Add the following code to a Variable widget's `onCreate`:
   ```javascript
   globals.doubleTap = (id, singleTapFunction, doubleTapFunction) => {
     const touchData = {
       id,
       isDoubleTap: getVar(id, "isDoubleTap"),
       doubleTapTimeout: getVar(id, "doubleTapTimeout"),
     };

     if (!touchData.isDoubleTap) {
       setVar(
         touchData.id,
         "doubleTapTimeout",
         (touchData.doubleTapTimeout = setTimeout(function () {
           touchData.isDoubleTap = setVar(touchData.id, "isDoubleTap", false);
           singleTapFunction();
         }, 300))
       );
     }

     if (touchData.isDoubleTap) {
       doubleTapFunction();
       setVar(
         touchData.id,
         "doubleTapTimeout",
         (touchData.doubleTapTimeout = clearTimeout(touchData.doubleTapTimeout))
       );
       touchData.isDoubleTap = setVar(touchData.id, "isDoubleTap", false);
     } else {
       touchData.isDoubleTap = setVar(touchData.id, "isDoubleTap", true);
     }
   };
   ```

This implementation allows the button to send the specified OSC messages based on the tap type. Adjust the timeout duration in the `setTimeout` function if necessary to fine-tune the double-tap detection speed.

# Accessing the Notification Class from a Custom Module in Open Stage Control

## Problem Description
Users may want to send custom notification messages from a custom module in Open Stage Control but are unsure how to access the notification class. There is confusion regarding whether properties of the notification class, such as the icon, can be accessed directly.

## Solution
To send custom notification messages from a custom module, use the `receive` function as follows:

```javascript
const msg = "this is a notification";
receive("/NOTIFY", msg);
```

It is important to note that the notification class is not directly exposed, and the only argument that can be passed is the message itself. Properties such as the icon cannot be accessed or modified directly. The notification is created using the `notifications.add` method, which only accepts the message as an argument. 

For example, the relevant code snippet for handling notifications is:

```javascript
'/NOTIFY': function(args) {
    if (!Array.isArray(args)) args = [args];
    notifications.add({
        message: args.join('\n') || ' '
    });
}
```

# Hiding Elements Using Buttons or Matrix

**Problem Description:**
The "visible" property of elements in Open Stage Control cannot be directly manipulated using the `set()` function. Users are seeking a method to toggle the visibility of elements using buttons or matrices.

**Solution:**
To toggle the visibility of elements, you can directly use conditional logic within the widget's `visible` property. Here are two approaches:

1. For a toggle button with values of 0 and 1:
   ```plaintext
   @{toggle_1}
   ```

2. For more control based on a fader's value:
   ```javascript
   JS{{
   // Control visibility based on fader's value
   if (@{fader_1} > 0.5) return true;
   else return false;
   }}
   ```

Note that the `set()` function is intended for changing a widget's value, and the first argument must be a string (the widget's ID). Currently, you cannot change a widget's property directly from a script with a single function call. Instead, you need to modify a widget's value (using `set()`) that is referenced in another widget's property (using `@{}`). 

As of beta8, you can also use a widget of type "variable" (found in the "scripts" category) as a global variable, which can be invisible but still functional for this purpose.

# Read-only Causes Receive to Fail

## Problem Description
The `/EDIT` command is not functioning when the session is set to read-only mode, preventing any modifications.

## Solution
To enable the `/EDIT` command while maintaining read-only functionality, you need to disable the read-only setting. Currently, there is no option to allow `/EDIT` commands to work while in read-only mode. However, it is confirmed that in the next version, the read-only setting will not affect `/EDIT` commands sent from custom modules. Note that `/EDIT` commands from other sources on the network will still be bypassed.

# Tab Navigation on the Bottom

## Problem Description
Users want to implement tab navigation at the bottom of a panel in Open Stage Control. The existing property `verticalTabs` allows for left-side navigation, but there is a need for a solution to position tabs at the bottom.

## Solution
To achieve bottom tab navigation, you can use CSS. Replace the `verticalTabs` property with a new property called `tabsAlignment` (upcoming feature). For now, you can apply the following CSS:

```css
inner {
  flex-direction: column-reverse;
}
```

This will position the tabs at the bottom of the panel. 

Additionally, for right-side navigation, you can use:

```css
inner {
  flex-direction: row-reverse;
}
```

For reference, example session files demonstrating these configurations are available:
- [Attachment: uzyT4rOnH6bVbdjb3X8GnnsMELO.json]
- [Attachment: 4Q0mh7CNAIz2eWkr6bbPljMT49.json]

In the next release, the `verticalTabs` property will be replaced with `tabsPosition`, which will natively support all four directions for tab placement.

# Is Multiple OSC (osc-port) Connections Possible?

When attempting to control multiple devices, such as two Behringer XR18 mixers, using OSC messages, users may wonder if it is possible to define multiple OSC ports in Open Stage Control.

## Problem Description
Users are unable to define multiple OSC ports for sending messages to different devices. The challenge arises when trying to differentiate between identical OSC messages coming from multiple sources.

## Solution
It is not possible to define multiple OSC ports in Open Stage Control. However, both devices can communicate with Open Stage Control over the same OSC port. To distinguish between messages from different origins, you will need to create a custom module that processes incoming messages based on their source IP addresses.

For filtering incoming OSC messages by origin IP, you can implement logic in your custom module to restrict widget updates to messages from specific IP addresses. This will allow you to display values from different sources separately, even if the messages are identical.

For further guidance on filtering and processing OSC messages, refer to the relevant documentation or community resources.

[Attachment: filename.ext] (attachment reference missing)

# Adding a Wildcard to a Script

## Problem Description
Users may encounter difficulties using wildcards in the 'on value' script field within Open Stage Control. Specifically, there is a need to match strings that start with a specific prefix, such as "macro_", but the syntax for achieving this can be unclear.

## Solution
To match strings that begin with a specific prefix using JavaScript, you should use a regular expression with the `match()` method. Here’s the correct syntax:

```javascript
if (typeof value == 'string' && value.match(/^macro_/)) {
    // Your code here
}
```

This code checks if the `value` is a string and matches the pattern that starts with "macro_". The caret (`^`) indicates that the match should occur at the beginning of the string.

For example, to check for any string that contains "Macro", you can use:

```javascript
if (value.match(/Macro/)) {
    // Your code here
}
```

This solution effectively allows you to handle cases where the value starts with or contains the specified prefix.

# Syncing Animations to MIDI Clock

**Problem Description:**
Users have reported difficulties in synchronizing visual elements in Open Stage Control with MIDI clock signals. Specifically, using the MIDI clock to control properties like opacity can lead to performance issues, especially when multiple elements are involved. The primary concern is that frequent updates from the MIDI clock can cause noticeable drops in performance, particularly on devices like iPads.

**Solution:**
To improve performance when syncing animations to MIDI clock signals, consider the following approaches:

1. **Reduce Clock Update Frequency:**
   - Limit the clock updates to a maximum of 30 times per second. This can help mitigate performance issues caused by excessive repainting.
   - Example implementation:
     ```javascript
     // slowclock.onCreate
     setInterval(() => {
       set(this, get('clock'));
     }, 1000 / 30); // 30 updates per second
     ```
   - Use `@{slowclock}` in your CSS instead of `@{clock}`.

2. **Utilize Canvas for Rendering:**
   - Instead of directly manipulating CSS properties, use a canvas widget to draw visuals based on the clock value. This method is generally more efficient as it allows for fixed-rate drawing.
   - Ensure that the canvas's `continuous` property is set to `true` to allow periodic redrawing without needing new values.
   - Reference for implementation: [Attachment: k52TYxATu9OFxNJZwkK2rO0d42b.json].

3. **Consider SVG Performance:**
   - While using SVG elements with dynamic CSS properties is possible, it may lead to performance degradation, especially on mobile devices. The overhead of JavaScript in CSS can be heavy.
   - If SVG is necessary, ensure that the number of elements and the complexity of operations are minimized.

By implementing these strategies, users can achieve smoother synchronization of animations with MIDI clock signals while maintaining optimal performance across devices.

# Variable Not Sending MIDI CC

**Problem Description:**
A user is attempting to send MIDI Control Change (CC) messages from a script that calculates a MIDI value based on the tempo received from Ableton. Although the MIDI value is generated correctly, the `send()` function does not appear to transmit the CC message as expected.

**Solution:**
The `send()` function in Open Stage Control does not execute when the script is not triggered by user interaction. To resolve this issue, a custom module should be implemented to facilitate sending MIDI messages without requiring user input.

For example, consider creating a custom module that listens for changes in the variable and triggers the `send()` function accordingly. This will ensure that the MIDI CC messages are sent as intended.

# How to Identify the Source of an Error Message

When encountering an error message in Open Stage Control, it can be challenging to determine its source. 

## Solution

1. **Post the Error Message**: Share the specific error message you are receiving in the community forum, along with as much contextual information as possible. This helps others reproduce the issue and provide assistance.

2. **Common Cause**: A frequent cause of errors is an incoming message attempting to update a non-existent key in the keyboard. In such cases, the keyboard should ideally ignore these messages, but this may not always happen. This issue has been addressed in the source code.

For further assistance, refer to the sources provided in the community forum. 

[Attachment: filename.ext]

# L-ISA Controller OSC Command Configuration

## Problem Description
When attempting to control the solo function of an object in the L-ISA Controller using Open Stage Control, the command `/ext/solo/src/1 1` does not yield any results. The user has tried various configurations, including adjusting the value parameters, but has not achieved success.

## Solution
To properly configure the OSC command for toggling the solo function, follow these settings:

1. Set the **address** to `/ext/solo/src/1`.
2. Set the **on** value to `1`.
3. Set the **off** value to `1`.
4. Set **typeTags** to `i` (indicating that an integer is expected, as opposed to the default float format).

This configuration should resolve the issue and allow for successful control of the solo function. 

[Attachment: image.png]

# Setting a Variable in Open Stage Control for OSC Message Addresses

## Problem Description
Users may encounter difficulties in setting a variable within a panel in Open Stage Control, which is intended to be used in OSC message addresses for widgets. Specifically, the challenge lies in defining a variable that can be referenced by child widgets to dynamically construct OSC addresses.

## Solution
To set a variable in a panel and use it in OSC message addresses for child widgets, follow these steps:

1. Define the variable in the panel's `variable` property. For example:
   ```json
   {
     "xx": "foo"
   }
   ```

2. In the properties of the child widgets, reference the variable using the following format:
   ```
   /ch/@{parent.variables.xx}/fader
   ```

This setup will result in the OSC address being constructed as:
```
/ch/foo/fader
```

By following these steps, you can effectively use a variable from the panel in the OSC message addresses of its child widgets.

# Drawing Lines and Organizing a Structured Layout on a Button

**Problem Description:**
The user wants to create a table-like structure using buttons in Open Stage Control, displaying symbols using fonts instead of images. They seek to draw lines within a button to create corners and place one-letter text in each corner, while also organizing the layout with embedded Font Awesome icons.

**Solution:**
You can achieve this by inserting custom HTML into a button widget and applying CSS for styling. While there is no pre-defined function for drawing lines within a button, using HTML and CSS allows for flexibility in design.

Here’s a basic approach:
1. **Insert HTML**: Use the button's HTML content to structure your layout.
2. **Apply CSS**: Style the button using CSS to create lines and position text as needed.

For example, you can use a combination of `<div>` elements and CSS properties like `border` to create the desired layout.

If you prefer a more straightforward approach, you can also use the `<table>` element along with `border-style` for initial prototyping.

[Attachment: image]

# Creating a Button with an Embedded Image

## Problem Description
Users are seeking a method to create a button that incorporates an embedded image. Initial attempts using superposition have not been successful.

## Solution
To create a button with an embedded image, apply the following CSS code to the button:

```css
background-image: url('path/to/your/image.jpg');
background-size: cover;  /* Covers the entire button */
background-repeat: no-repeat;  /* Prevents the image from repeating */
```

This approach effectively allows the image to be displayed on the button as intended.

# Reading and Setting Fader Values from MIDI Messages

## Problem Description
The user wants to control multiple faders with a single switch while retaining the last set value for each fader when switching between them. The current implementation sends values but does not store them, resulting in the loss of the last set value when switching back to a previously used fader.

## Solution
To achieve the desired functionality, follow these steps:

1. **Store Values in Variables**: Create a variable for each fader to store its last value. For example:
   ```javascript
   var vln1 = 0;
   var vln2 = 0;
   var vln3 = 0;
   var vln4 = 0;
   var vln5 = 0;
   ```

2. **Set Values on Switch**: Modify the switch case to store the current value in the corresponding variable before sending the new value. For example:
   ```javascript
   if(@{CSSCloseSwitch} == 1){
       vln1 = value; // Store current value
       send("/control", 1, 60, value);
   }
   if(@{CSSCloseSwitch} == 2){
       vln2 = value; // Store current value
       send("/control", 2, 61, value);
   }
   // Repeat for other cases...
   ```

3. **Retrieve Stored Values**: When switching back to a fader, retrieve the stored value and set it accordingly:
   ```javascript
   if(@{CSSCloseSwitch} == 1){
       value = vln1; // Retrieve stored value
       send("/control", 1, 60, value);
   }
   if(@{CSSCloseSwitch} == 2){
       value = vln2; // Retrieve stored value
       send("/control", 2, 61, value);
   }
   // Repeat for other cases...
   ```

4. **Avoid Feedback Issues**: To prevent feedback loops when sending and receiving MIDI messages, ensure that the sending of values does not trigger the same event that updates the stored values.

5. **Use `get()` Function**: Instead of using the `@{widget_id}` syntax, utilize the `get()` function to access widget values properly:
   ```javascript
   var currentValue = get("widget_id"); // Ensure widget_id is in quotes
   ```

By implementing these changes, you can ensure that each fader retains its last set value when switching modes.

[Attachment: 422hysKz8ZTzVf6xqTlllUSDtAi.json]  
[Attachment: 3dpZRCrvFr6KOTmU36vcbAIz3X5.json]

[Attachment: 7iQzuzt3UJq9CjBq4vEk7jYNyuM.zip]

# Matrix Grid Template Configuration

## Problem Description
A user is attempting to create a matrix of faders with a maximum width of 100px each, arranged in a single horizontal row. The goal is to have a scrollbar appear when the total width exceeds the container's limit. However, the current configuration results in additional rows being created instead of a horizontal scroll.

## Solution
To achieve the desired layout, wrap the matrix in a scrolling container and configure the following settings:

1. Set the matrix's width to:
   ```
   #{100 * @{this.quantity}}
   ```
2. Set the height to:
   ```
   100%
   ```
3. Set the top and left properties to:
   ```
   0
   ```
4. Set the layout to:
   ```
   horizontal
   ```

This configuration will allow the faders to remain in a single row and enable scrolling when necessary.

### Additional Resources
The user has shared a template that can be utilized as a reference:
[Attachment: rnuYAoq4rFtt3QB1KHPO3zFb8KN.json]

# Resetting All Toggles in a Button Matrix

## Problem Description
In a matrix of buttons, there is a need to reset all toggle buttons without sending the associated "off" OSC messages. The initial approach using the `set` message in the script's `onValue` property did not yield the desired results.

## Solution
To reset all toggle buttons effectively, use the following approach:

1. Ensure that the button IDs are correctly referenced in your JavaScript code.
2. Instead of sending individual commands for each button, you can use a wildcard to target all buttons at once.

Here’s an example of how to implement this:

### Matrix Button Configuration
```javascript
id: LX_Moving_Matrix
props
JS{{
  var props = {}
  var ids = ["Stage_Right_Spot", "Stage_Left_Spot", "Stage_Left_Wash", "Stage_Right_Wash"]
  var labels = ["Stage Right Spot", "Stage Left Spot", "Stage Left Wash", "Stage Right Wash"]
  var OSCaddresses = ["/eos/chan/101/", "/eos/chan/103/", "/eos/chan/104/", "/eos/chan/102/"]
  
  props.id = ids[$]
  props.mode = "toggle"
  props.label = labels[$]
  props.on = OSCaddresses[$]
  props.off = "-" + OSCaddresses[$]
  props.address = OSCaddresses[$]
  return props
}}
```

### Separate Button Configuration
For the button that resets all toggles, use the following `onValue` script:
```javascript
set("Stage*", 0, {send: false});
```

This command will effectively reset all buttons labeled with "Stage" without sending the "off" OSC messages.

### Note
If you encounter issues with the `props.off` property, ensure that each button's "off" value is correctly defined. If necessary, you can also send multiple `set()` commands for each button, but using a wildcard as shown above is more efficient.

This method should work seamlessly within your modal setup. If you continue to experience issues, consider checking for any conflicting settings or scripts that may be affecting the behavior.

# Displaying DHCP IP Address in Open Stage Control

**Problem Description:**
Users may want to display the DHCP IP address of their Mac in a widget within Open Stage Control. The default method using `#{globals.url}` only shows the local IP address (127.0.0.1) and does not provide the DHCP-assigned IP address.

**Solution:**
To display the available IP addresses in a text widget, follow these steps:

1. Ensure you have a text widget in your session with the address set to `/text_widget_address`.

2. Implement the following custom module JavaScript code in the `custom-module.js` file located in your Open Stage Control directory:

   ```javascript
   function updateIp(id) {
       var ipString = settings.appAddresses().join("\n");
       receive('/text_widget_address', ipString, id ? {clientId: id} : undefined);
   }

   app.on('sessionOpened', (data, client) => {
       // Update clients when they finish loading a session
       updateIp(client.id);
   });

   // Update all clients when the custom module is loaded
   updateIp();
   ```

3. After adding the code, make sure to restart your session for the changes to take effect.

This code will gather all available IP addresses and display them in the specified text widget. 

[Attachment: Capture d’écran 2024-11-07 à 08.53.57.png]

# Starting Open Stage Control via Terminal (Inconsistencies)

**Problem Description:**
Users experience issues when attempting to launch Open Stage Control from the terminal with specific MIDI port configurations. The command results in errors indicating that certain ports cannot be connected, despite them functioning correctly within the application. Additionally, there is confusion regarding the required syntax for command-line options, particularly on Windows.

**Solution:**
To successfully start Open Stage Control from the terminal, ensure the following:

1. **Correct Command Syntax:**
   - Remove any parentheses around the MIDI options.
   - Use a double hyphen (`--`) before the first option to avoid issues with arguments containing colons. For example:
     ```
     open-stage-control --no-gui --force-gpu -l "PATH" -c "PATH" -m cubase:0,1 cubase_art:1,2 mtc:2,3 protools:3,4 vep:4,5
     ```

2. **MIDI Port Configuration:**
   - Verify that the MIDI ports specified in the command match those listed in the application. The correct output ports should be referenced without quotes or parentheses.

3. **System Tray Launch:**
   - Currently, Open Stage Control does not support starting in the system tray.

4. **Version Considerations:**
   - If you encounter issues with the command not accepting the double dash, ensure you are using the latest version. A bug affecting this functionality was identified in version 1.28 and is expected to be resolved in version 1.29.5.

For further reference, please consult the documentation or community forums for updates on command-line options and configurations. 

(attachment reference missing)

# State Widget Not Saving Complete State

The issue arises when using the state widget to save and load settings in Open Stage Control. Specifically, one fader does not retain its value when loading the saved state, consistently reverting to 0, while other faders behave as expected.

## Problem Description

A user reports that after sending OSC messages to update widget values and subsequently saving the state using a state widget, one particular fader resets to 0 upon loading the saved state. This fader is configured similarly to others but fails to retain its value.

## Solution

The issue is likely due to the `value` property of the problematic fader being set to an empty string (`""`) in its JSON configuration. To resolve this, ensure that the `value` property is initialized correctly. 

Update the fader's JSON configuration as follows:

```json
"value": 1
```

By setting the `value` to a numeric value rather than an empty string, the state widget should correctly save and restore the fader's state.

If the problem persists after this adjustment, verify that there are no conflicting OSC messages or other configurations affecting the fader's behavior.

[Attachment: implication_organ.json]

# Error: Unknown Hex Color

## Problem Description
Users may encounter the following error message in Open Stage Control:
```
(ERROR, CLIENT) Uncaught Error: unknown hex color: off
```
This error typically arises from an invalid color specified in a `colorSomething` property of a container widget.

## Solution
To resolve this issue, ensure that all color properties in your widgets are set to valid hex color values. If you are experiencing issues with switches not displaying colors correctly (e.g., remaining black when set to white), consider resetting all colors of elements using a script.

For a comprehensive reset, you can implement a script that iterates through all elements and sets their color properties to default values. 

If you need further assistance or a specific script example, please refer to the community for additional resources. 

[Attachment: filename.ext]

# Sending Different MIDI Notes Based on Knob Value

**Problem Description:**
Users may want to send different MIDI notes based on the value of a knob in Open Stage Control. For instance, sending one MIDI note when the knob value is less than 60, another between 60 and 120, and a third when the value exceeds 120.

**Solution:**
You can achieve this by adding a script to the knob widget's script field. Use the following code:

```javascript
var note = 60; // Sets the default note for values lower than 60

if (value >= 60 && value <= 120) {
    note = 60; // Sets note for values between 60 and 120
} else if (value > 120) {
    note = 62; // Sets note for values greater than 120
}

send("midi:oscMIDI", "/note", 1, note, 100); // Sends note "on" to channel 1 with defined note and velocity 100
send("midi:oscMIDI", "/note", 1, note, 0); // Sends note "off" with velocity 0
```

This script will send a new MIDI note each time the knob is adjusted. Note that you can further refine the logic to send the note after the knob is turned, if desired.

# MIDI Note Value Conversion in Open Stage Control

## Problem Description
When setting up keyswitches in instruments like Kontakt, users need to convert note names (e.g., C0, F#2) into MIDI note numbers for use in Open Stage Control. This can be cumbersome when managing multiple tracks and instruments, as it requires constant reference to a MIDI note chart. There is a suggestion to implement a feature that allows note names to be entered directly and parsed into their corresponding MIDI note numbers.

## Solution
Open Stage Control primarily functions as a MIDI converter, and it is recommended to create a custom module or script to handle the conversion of note names to MIDI note numbers. This approach aligns with the intended use of Open Stage Control and allows for flexibility in managing MIDI data.

For users who prefer to see note names in the GUI while still sending the correct MIDI note numbers, implementing a custom function within a module to convert note names to numeric values is a viable solution. 

Consider the following example for a custom function:
```javascript
function noteNameToNumber(noteName) {
    const noteMapping = {
        'C0': 12, 'C#0': 13, 'D0': 14, 'D#0': 15, 'E0': 16, 'F0': 17, 'F#0': 18, 'G0': 19, 'G#0': 20, 'A0': 21, 'A#0': 22, 'B0': 23,
        // Add additional mappings as needed
    };
    return noteMapping[noteName] || null; // Return null if note name is not found
}
```
This allows users to input note names in their templates while maintaining the functionality of MIDI note number conversion in the background.

# Scripting Icons in Open Stage Control

## Problem Description
Users are seeking a list of codes to create icons in Open Stage Control, specifically looking for symbols like arrows without the need to add images. 

## Solution
The icons available in Open Stage Control can be referenced using the Font Awesome icon set. You can find the list of icons and their corresponding codes at the following link: [Font Awesome Icons](https://fontawesome.com/v5.0/icons?d=gallery&p=2&s=solid&m=free). 

It is important to note that these icons are included within Open Stage Control, so there is no need to rely on third-party sources.

# Setting Min/Max for Multi XY Widget with OSC Commands

**Problem Description**  
Users may encounter difficulties when attempting to set the minimum and maximum values for the Multi XY widget using OSC commands. Initial attempts may result in errors or unintended behavior, such as multiple lines being created instead of setting the desired min/max values.

**Solution**  
To successfully set the `rangeX` and `rangeY` minimum and maximum values for the Multi XY widget, follow these steps:

1. **Create Custom Variables**: Define two custom variables for maximum X and maximum Y values.
   
   Example:
   ```javascript
   setVar("multixy_1", "maxX", value);
   setVar("multixy_1", "maxY", value);
   ```

2. **Use `onValue`**: Assign the `onValue` property to update the custom variables when needed.

This method allows you to effectively manage the min/max values for the Multi XY widget without encountering errors.

For further reference, see the attached example: [Attachment: example_file.ext].

# V1 Features Related to Scripts and Layout

## Problem Description
Users have expressed the need for enhanced scripting capabilities within Open Stage Control (OSC) to facilitate complex interactions without the need for multiple script widgets. Current limitations include the requirement to create separate script widgets for each control element, which can lead to a cumbersome workflow.

## Solution
**jean-emmanuel** confirmed that a 'script' field for each widget is being implemented, allowing for programmatic handling of received values. This will enable users to compare current and previous values easily using a local variable. 

### Proposed Enhancements:
1. **Script Field in Widgets**: Each widget will have an integrated script field to handle values programmatically.
2. **Value Comparison**: Users can compare received values with previous ones using:
   ```javascript
   if (value != previous_value) {…}
   ```
3. **Automatic Function Calls**: Functions can be triggered automatically on specific events (e.g., `on_fader1_change()`, `on_fader1_receive()`, etc.), improving modularity and version control.
4. **Syncing Values**: Simplified methods for syncing values between widgets using:
   ```javascript
   set(text, this.value)
   ```
5. **Multi-Window Support**: Consideration for multiple windows to enhance editing capabilities, especially for multi-monitor setups.

These features aim to streamline the scripting process, making OSC more powerful and user-friendly.

# Menu Array Values Issue in Send Script

**Problem Description:**
When using a menu with array values intended for MIDI channel and control change (cc) messages, the script `send('/control',get(('this')[0]),get(('this')[1]),127)` was returning 0 instead of the expected values. The user confirmed that logging `console.log(get('this')[1])` and `console.log(get('this')[0])` returned the correct values.

**Solution:**
The issue was caused by excessive parentheses in the `get` function calls. The correct script should be:

```javascript
send('/control', get('this')[0], get('this')[1], 127);
```

This adjustment resolved the issue, allowing the script to send the expected values correctly.

# Installing Big Custom Module Directions

## Problem Description
The user is attempting to install a large custom module named `OSC Midi Sequences.js` but is encountering issues with the module structure and JavaScript syntax. The user has created a main file and is trying to bundle it using Browserify, but is unsure how to properly structure the module and handle multiple functions with the same name.

## Solution
1. **Module Structure**: Ensure that your module is properly structured. Instead of using:
   ```javascript
   module.exports = osc_midi_sequences {
   ```
   it should be:
   ```javascript
   module.exports = {
   ```

2. **Combining Functions**: If you have multiple functions with the same name (e.g., `oscOutFilter`), you cannot duplicate them in the same object. Instead, you can combine their logic into a single function. For example:
   ```javascript
   module.exports = {
       oscOutFilter: function(data) {
           var {host, port, address, args} = data

           if (address === '/bpm/tap' && args[0].value === 1) {
               receiveTap(data);
               return; // bypass original osc message
           }

           if (sequenceRouting[address]) {
               if (args[0].value == 1) controlSequence(host, port, ...sequenceRouting[address]);
               return;
           }

           // process other messages normally
           return data;
       }
   }
   ```

3. **Bundling with Browserify**: After correcting the module structure, you can bundle your sources using Browserify:
   ```bash
   browserify main.js -o custom-module.js --standalone module.exports
   ```

4. **Testing**: After making these changes, test the custom module in the launcher window to ensure it loads correctly.

By following these steps, you should be able to successfully create and load your custom module.

# Using Multiple Variables to Control Widget Visibility

**Problem Description:**
Users may want to control the visibility of a widget in Open Stage Control using multiple variables.

**Solution:**
To achieve this, you can use the `#{}` block syntax to combine conditions. For example, to set the visibility of a widget based on the values of two other widgets (`widget_a` and `widget_b`), use the following syntax:

```javascript
#{@{widget_a} || @{widget_b}}
```

If you need to control the widget's visibility independently with multiple other widgets, you can use the `VAR{"var_name", false}` syntax in the visibility property of the widget. Then, use the `setVar("widget_id", "var_name", true)` command in the `onValue` script property of the other widgets to control the visibility.

This method allows for flexible and independent control of widget visibility based on various conditions.

# Sending to Multiple OSC Addresses from a Single Button/Slider

**Problem:**
Users may want to send the value of a single button or slider to multiple OSC addresses without creating multiple hidden widgets as a workaround.

**Solution:**
You can achieve this by using custom scripts or modules. Refer to the tutorial on creating custom scripts/modules for detailed instructions on how to implement this functionality effectively. 

For more information, see the tutorial linked in the community forum.

# Adding Buttons Dynamically to a Panel

**Problem Description:**
The goal is to dynamically add buttons to a panel in Open Stage Control by reading a JSON file at startup. Each button should have a specified ID and associated functions.

**Solution:**
To achieve this, you can use a custom module along with the `/EDIT` command. Below is a sample implementation:

1. Load the JSON data containing the default properties for the buttons.
2. Create a list of buttons derived from the loaded data.
3. Use the `sessionOpened` event to send the button list to the specified panel.

Here’s a code example:

```javascript
var data = loadJSON('widget-data.json');

// Create a list of buttons based on the loaded data
var buttonList = [
    {
        ...data,
        id: 'dynbutton_1',
        colorWidget: 'red'
    },
    {
        ...data,
        id: 'dynbutton_2',
        colorWidget: 'cyan'
    },
    // Add more buttons as needed
];

app.on('sessionOpened', function(data, client) {
    // Event triggered when a client finishes loading a session
    receive('/EDIT', 'panel_id',
        {widgets: buttonList}, // Replace content of panel (must not contain tabs)
        {noWarning: true}, // Prevent "unsaved changes" prompt
        {clientId: client.id} // Send command only to the client that just connected 
    );
});

module.exports = {
    // Include OSC filtering functions if needed
};
```

This code will dynamically create buttons based on the JSON data and add them to the specified panel upon a client session opening.

# Monitoring TCP Client Connections in Open Stage Control

## Problem Description
Users need to monitor the clients connected to the Open Stage Control server to serve different pages based on their connection status. The requirements include:
- Knowing who is connected at any time.
- Being notified of new connections and disconnections.
- Handling server crashes or restarts, with clients reconnecting automatically.

## Solution
The `tcpServer` is not suitable for monitoring client connections as it is intended for exchanging OSC messages with other software over TCP, rather than tracking browser connections. Instead, you can use the app's built-in events to reliably keep track of connected clients.

For more information on how to implement this, refer to the following resources:
- [Keep track of clients](https://open-stage-control.readthedocs.io/en/latest/examples.html#keep-track-of-clients)
- [Check if users are active](https://open-stage-control.readthedocs.io/en/latest/examples.html#check-if-users-are-active)

By using these events, you can effectively monitor client connections and manage their status. 

[Attachment: tcp_1.js]

# Menu Items Clipped by Enclosing Panel

When using a menu widget inside a panel, the menu items may be clipped to the panel area. This issue does not occur with dropdown menus.

## Solution

To resolve the clipping issue, add the following CSS to the panel:

```css
contain: unset;
```

This setting is not the default because it may not work well in all situations. If you experience any strange behavior, consider using a dropdown menu as an alternative.

[Attachment: Clipping Menu 3264×2448 1.5 MB]

# Button Styles from Theme

**Problem:**
Users want to apply CSS styles defined in a theme's CSS file to buttons in Open Stage Control. Specifically, they need to know how to reference these styles correctly in the button's CSS input.

**Solution:**
To apply CSS classes from your theme's CSS file to a button, follow these steps:

1. Define your CSS classes in the theme's CSS file (e.g., `theme.css`):
   ```css
   .red {
       background-color: red;
   }
   .orange {
       background-color: orange;
   }
   ```

2. In the button widget, enter the class names in the CSS field as follows:
   ```
   class: red
   class: orange
   ```

This will apply the specified styles to the button as intended.

# Clone Root CSS Variable Access

**Problem Description:**
When cloning a panel widget in Open Stage Control, the cloned instance is wrapped in an additional div that does not have access to the CSS variable defined in the child div. This results in the z-index manipulation only functioning for the original widget instance. The challenge is to propagate the CSS variable from the cloned panel to its parent wrapper.

**Solution:**
To resolve this issue, add the following CSS properties to the cloned widget:

```css
contain: size;
z-index: unset;
```

This configuration allows the clone's content to break out of the wrapper, enabling the use of the CSS variable as intended.

For reference, a minimal setup demonstrating this solution is provided in the attached file:
[Attachment: oa3JyTZrOEIgOHsRCTpBYqjayK4.json]

# Executing an onValue Script via OSC Message

**Problem Description:**

A button's `onValue` script works when activated manually but does not execute when the button's value is updated via an OSC message. The button receives the OSC message, changing its value from 0 to 1, but the `onValue` script does not trigger.

**Solution:**

The `onValue` script is triggered when a widget receives an OSC message. However, the `send()` function does not work in this context, as no widget will send any messages if set using `set()`, due to the requirement for user interaction for message transmission. Incoming OSC messages are treated as "feedback."

To simulate user interaction and execute the `onValue` script via an OSC message, use the `/SET` command. For more information, refer to the [Remote control - Open Stage Control](https://open-stage-control.com/docs/#remote-control) documentation.

# OSC Listener and Objects

## Problem Description
When attempting to use an OSC listener with dynamic keys from an object, the following syntax produces an invalid JSON string:
```javascript
receive('/widgetid/listenerid','{' + obj[key][0] + ':' + 1 + ', ' + obj[key][1] + ':' + 125 + '}');
```
The issue arises because the keys are not enclosed in double quotes, which is required for valid JSON formatting.

## Solution
To resolve this issue, ensure that the keys in the JSON string are enclosed in double quotes. Alternatively, you can send a plain object directly, as it will be automatically converted to JSON. Here is a corrected example:
```javascript
receive('/widgetid/listenerid', {
    [obj[key][0]]: 1,
    [obj[key][1]]: 125
});
```
This approach avoids the need for manual string manipulation and ensures valid JSON formatting.

# Problem with Child Visibility in Matrix

When attempting to control the visibility of a child element within a matrix, the following configuration was used:

```javascript
props.id = "Guit_"+$
props.visible = VAR{visiFAV}
```

A button's `onValue` was set to:

```javascript
setVar('Guit_6','visiFAV',1)
```

However, toggling the button did not change the visibility of the child element.

## Solution

To correctly reference the visibility variable for a child in a matrix, use the underscored version of the variable syntax. Update the visibility property as follows:

```javascript
props.visible = "VAR_{visiFAV}"
```

This adjustment ensures that the variable applies to the child element rather than the matrix itself.

# How to Align Vertical and Horizontal Font Awesome Icons in a Button

**Problem Description:**
Users may encounter issues when trying to align Font Awesome icons both vertically and horizontally within a button.

**Solution:**
To achieve proper alignment of Font Awesome icons in a button, add the following CSS property to the `<i>` element:

```css
display: block;
```

This adjustment ensures that the icon is displayed correctly within the button.

# Clone vs. Fragment Performance in Open Stage Control

## Problem Description
Performance tests indicate that using fragment widgets in Open Stage Control can lead to higher CPU usage compared to using clone widgets. In a setup with seven tracks, the CPU consumption was observed to be 60% when using fragments, while it dropped to 30% with clones. Additionally, the JSON file for the clone version was significantly larger than that of the fragment version.

## Solution
The performance difference is likely not solely due to the choice of widget type, but rather the layout differences between the two versions. Small variations in layout can significantly impact rendering times in the browser engine. To improve performance, consider modifying the layout to utilize both horizontal and vertical arrangements, which can enhance responsiveness and efficiency.

For reference, a modified version of `track.json` that performs better can be found here: [Attachment: hwgYQHsKAGyzSqlnisnkzCYkIV0.json].

[Attachment: hcPgY7P4tA7xiR3Oz7aoj6hhyE4.json]

[Attachment: 3VRonRPAJkilaHa4Bx8OpUzgx7K.json]

[Attachment: e7j5YUy6XX8TCae19ku9oS6Yu4n.js]

# Executing External Scripts or Applications with OSC

**Problem Description**  
Users may want to execute external scripts or applications, such as AutoHotKey scripts or Apple Shortcuts, using Open Stage Control (OSC). However, there are limitations and specific methods to achieve this.

**Solution**  
1. **AutoHotKey Execution**:  
   Direct execution of `.exe` files from OSC is not supported. An alternative method is to use BOME's MIDI Translator, which can execute AHK scripts when an OSC button is triggered.

2. **Executing Apple Shortcuts**:  
   To call Apple Shortcuts from OSC, you can use the following code in your `module.js`:

   ```javascript
   var exec = nativeRequire('node:child_process');
   var cmd = 'shortcuts';
   var spawnArgs = ['run', 'my shortcuts script name'];
   exec.spawn(cmd, spawnArgs, {
       stdio: 'ignore', // piping all stdio to /dev/null
       detached: true,
       env: process.env,
   }).unref();
   ```

   Note: The `spawn` method requires the command as the first argument and options as an array for the second argument. This allows for the execution of various commands, but be aware of potential security implications.

For more information on using BOME's MIDI Translator, refer to their documentation.

# Issue with Fader and Input Sharing the Same ID When Validation Field is Set

When a fader and an input share the same ID for synchronization and the validation property is set to allow digit values (including a decimal point), moving the fader only updates the value to 0 or 100, depending on the range set. Removing the validation property resolves this issue.

## Solution

To fix this behavior, modify the regular expression used in the validation property. Use the following regex:

```
^\d{1,3}(\.\d*)?$
```

This adjustment removes the digit limit after the decimal point, allowing the input widget to receive the fader's value with all decimals intact.

For reference, see the attached session file for an example: [Attachment: validation bug.json].

[Attachment: zkK4Slnjmu85jlr5afb6g5hUxvP.json]

# Send OSC Response When Receiving Messages

**Problem Description:**
Users may want to configure a widget in Open Stage Control to send a reply when it receives a value or an OSC message. However, widgets do not natively support this functionality.

**Solution:**
To achieve this, you can create a custom module that utilizes the `oscInFilter` to filter incoming messages and the `send` function to send replies based on specific conditions (e.g., message address).

### Example Implementation:
1. **Filter Incoming Messages:**
   Use `oscInFilter` to listen for specific OSC messages, such as `/test ping`.

2. **Send Replies:**
   Use the `send` function to send a response, like "ok", back to the client when the specified message is received.

3. **Handling Multiple Clients:**
   If you need to specify the IP address in the reply, ensure your custom module is designed to handle multiple clients appropriately.

For further examples and detailed guidance, refer to the documentation: [Custom Module Examples](https://openstagecontrol.ammd.net/docs/custom-module/examples/#reply). 

[Attachment: filename.ext]

# Performance Issues with OSC on iPad

## Problem Description
Users have reported experiencing significant lag when using Open Stage Control (OSC) on their iPads, particularly when pushing buttons and receiving visual feedback. This lag appears to worsen as more elements are added to the template. Additionally, there are concerns about OSC's network configuration, specifically regarding IP address usage and potential conflicts with other network services.

## Solution
1. **Network Configuration**:
   - OSC does not directly use an IP address; it relies on a service called Bonjour. If there are multiple devices with the same hostname on the network, it may lead to configuration errors. 
   - To avoid conflicts, specify a unique name in the server's `instance-name` option, especially if running multiple OSC servers on the same network.

2. **iOS Compatibility**:
   - Ensure that the iPad is running iOS 10.3 or higher, as earlier versions (like iOS 9.3) are no longer supported by OSC version 1.

3. **Session Optimization**:
   - While the session file may not be large, the inclusion of images/icons can affect performance. Reducing the number of images or optimizing their sizes may help improve responsiveness.

4. **Testing on Different Devices**:
   - If possible, test the OSC setup on another iPad to determine if the issue is device-specific. Users have noted better performance on iPhones compared to older iPads.

5. **Wired Connection**:
   - Consider using a wired network connection if feasible, as it can provide a more stable connection. However, the primary issue seems to be related to input lag rather than connection stability.

For further assistance, users can provide their session files for analysis. 

[Attachment: session-file.zip]

# Synchronizing XY Pad with Two Faders in Open Stage Control

## Problem Description
The goal is to synchronize an XY pad with two faders, `x_value` and `y_value`, such that adjusting either fader updates the XY pad accordingly, and vice versa. This functionality is similar to that found in Ableton Live, with a range set from 0 to 127.

## Solution
To achieve this synchronization, you can use the following approach:

1. **Create the XY Pad and Faders**: Set up an XY pad and two faders in your Open Stage Control layout.

2. **Linking the Controls**:
   - Use the `onChange` event of the faders to update the XY pad position.
   - Use the `onChange` event of the XY pad to update the values of the faders.

3. **Example Configuration**:
   - For the `x_value` fader:
     ```javascript
     onChange: (value) => {
         xy_pad.setValue(value, y_value.getValue());
     }
     ```
   - For the `y_value` fader:
     ```javascript
     onChange: (value) => {
         xy_pad.setValue(x_value.getValue(), value);
     }
     ```
   - For the XY pad:
     ```javascript
     onChange: (x, y) => {
         x_value.setValue(x);
         y_value.setValue(y);
     }
     ```

This setup ensures that any change in one control reflects in the other, maintaining synchronization.

For a practical example, refer to the attached configuration files:
- [Attachment: xy_pad_with_2_faders.json]
- [Attachment: boqgiRuqfFqhG9SvyhWHraS6VX6.json] 

This method should provide the desired functionality for your project.

[Attachment: diPqBtx6iFtYTvwwLMzVfXlEZkP.json]

# How to Achieve Even Distances with Uneven Differences on a Knob

**Problem Description:**
Users may want to configure a knob in Open Stage Control to have evenly spaced steps while displaying uneven numerical differences between those steps. For example, the desired values include: 0.0909, 0.111, 0.125, 0.143, 0.167, 0.2, 0.25, 0.334, 0.5, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, and 11. Attempts to set the range and steps directly have resulted in uneven spacing, particularly for values below 1.

**Solution:**
To achieve the desired configuration, follow these steps:

1. Set the range of the knob:
   ```json
   {
     "min": 0.0909,
     "max": 11
   }
   ```

2. Define the steps for the knob:
   ```json
   [0.0909, 0.111, 0.125, 0.143, 0.167, 0.2, 0.25, 0.334, 0.5, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
   ```

3. To process the values correctly, create a separate input widget. Set its `value` property to:
   ```javascript
   #{
     @{knob_1} < 0 ? (-1 / @{knob_1}) : @{knob_1}
   }
   ```

This approach allows for more complex value mapping and helps maintain the desired spacing and numerical representation.

Note: For more advanced configurations, consider using a custom module to handle complex value mappings more effectively.

# Virtual MIDI Port Limitations on Windows

**Problem Description:**
Creating virtual MIDI ports is not supported by the Windows MultiMedia API, which limits routing MIDI in Windows 10. Users have reported difficulties in connecting to MIDI ports when another software is already using them.

**Solution:**
While Open Stage Control (OSC) cannot create virtual MIDI ports on Windows, it can connect to existing ports. To effectively route MIDI on Windows, consider using third-party software like loopMIDI by Tobias Erichsen, which allows for seamless MIDI routing.

For optimal performance, ensure that no other software is connected to the MIDI port you wish to use with OSC.

# Array with Duplicate Keys

**Problem Description:**

Creating lists with duplicate keys in Open Stage Control can be problematic, especially when using a color picker where the text color and background color are identical. The challenge arises when trying to display a specific icon (e.g., `^palette`) after the picker is closed, as arrays cannot have duplicate keys. This limitation necessitates the use of unique identifiers, which may inadvertently display unwanted text alongside the icon.

**Solution:**

1. **Use a Text Widget Overlay:**
   - Instead of relying on the menu's label, place a text widget over the menu. This allows you to ignore the menu's label while still being able to interact with the color picker. Note that interactions on text widgets are ignored, except when the editor is enabled, as non-interactable widgets must remain editable.

2. **Alternative Customization:**
   - Set the menu button's background color to match the text color, making it invisible:
     ```css
     #2c3a4b  /* Background color */
     ```
   - Hide the original arrow icon indicating that it’s a menu:
     ```css
     div.icon { display: none; }
     ```
   - Change the text color inside the tag that contains the new icon:
     ```css
     div.text > i { color: #fff; }
     ```
   - Adjust the font size and color of the text:
     ```css
     div.text { font-size: 150%; color: #2c3a4b; }
     ```

This approach allows you to circumvent the limitation of duplicate keys while achieving the desired visual outcome without displaying unwanted text.

# Setting track_id with AbletonOSC

When using AbletonOSC with Open Stage Control, you may want to change the volume of a specific track. The key to doing this lies in the `track_id` within the OSC message.

## Solution

To set the `track_id`, you can utilize the `preArgs` property. This property allows you to add constant values to a widget's message, which can include the `track_id`. 

For more detailed information on how to implement this, refer to the properties reference in Open Stage Control documentation: [Properties reference - Open Stage Control](https://openstagecontrol.ammd.net).

For further assistance, consider exploring the GitHub repository for AbletonOSC: [ideoforms/AbletonOSC](https://github.com/ideoforms/AbletonOSC). 

[Attachment: filename.ext]

# No Control in Mobile Browser

When attempting to connect to an Open Stage Control server using mobile devices, users may encounter an issue where no widgets are displayed, accompanied by an error message stating, “The connection to the server has been interrupted.”

## Solution

The issue can often be resolved by adjusting the server configuration related to SSL. If you have the "use-ssl" option enabled in the server settings, try disabling it. This has been found to resolve connectivity problems specifically on mobile browsers, which may have stricter security protocols regarding self-signed certificates.

1. Access your server configuration.
2. Locate the "use-ssl" option and disable it.
3. Restart the server and attempt to connect again using your mobile device.

If you previously attempted to connect with SSL enabled, ensure that the URL includes "https://". If the mobile browser displays a "this site is not secure" message, it may indicate that the connection could not be established due to SSL issues.

By disabling SSL, users have reported successful connections and visibility of widgets on mobile devices.

[Attachment: IMG_0135]

# Troubleshooting Crosstalk Between Devices

When using Open Stage Control with multiple instances (e.g., on a computer and an iPad simultaneously), users may experience issues where MIDI notes trigger multiple times. This results in unreliable functionality, particularly with commands like `/SET`.

## Problem Description
When one instance of the interface is running, the system operates correctly. However, when multiple instances are active, the same MIDI note can trigger multiple responses, leading to crosstalk and inconsistent behavior. The debug logs show repeated messages for the same actions when multiple interfaces are open.

## Solution
To resolve this issue, avoid relying on the `/SET` command to broadcast to all clients. Instead, modify your custom module to send the command directly to a specific client. This ensures that the command is processed only once, preventing duplication.

Refer to the documentation for examples on how to implement this approach effectively. 

[Attachment: filename.ext]

# Auto Responsive Font in Button

## Problem Description
The font size of labels in buttons does not adjust responsively when the button size changes. While the icons and button containers resize correctly, the text remains static, causing layout issues as the container shrinks or grows.

## Solution
To achieve responsive font sizing in your buttons, you can use the `vw` (viewport width) unit for the font size. This allows the font size to scale relative to the width of the viewport. Here’s an example of how to modify your CSS:

```css
/* Label Settings */
.label {
  align-items: flex-end;
  padding-bottom: 0em;
  font-size: 5vw; /* Adjust this value as needed */
  color: white;
}
```

Using `vw` will ensure that the font size increases or decreases based on the width of the viewport, allowing for a more responsive design. Adjust the `5vw` value to suit your specific design needs. 

Make sure to test the responsiveness across different screen sizes to ensure the text remains legible and well-positioned within the button.

# Adding Color to Buttons in Open Stage Control

## Problem Description
Users have reported difficulties in applying custom colors to buttons in Open Stage Control, with the default color being a low-contrast blue. There is a need for clear examples and guidance on how to effectively implement colors in the interface.

## Solution
To successfully add colors to buttons in Open Stage Control, ensure the following:

1. **Browser Compatibility**: Use Chrome or Chromium version 50 or above. For iOS, the minimum supported version is 9.3. Older versions may not support custom colors.

2. **CSS Customization**: In the current version, you can change button colors using CSS. However, be aware that this method may not be supported in future releases.

3. **Upcoming Changes**: The upcoming v1 release will introduce a more flexible color system, but it will also be incompatible with existing layouts. Users are advised to consider this before updating.

For further details on the new version and its features, keep an eye on the official blog for updates. 

[Attachment: filename.ext] (attachment reference missing)

# Adapting Lemur Features in Open Stage Control

## Problem Description
Users transitioning from Lemur to Open Stage Control (OSC) may want to replicate specific features, such as a MultiBall object that functions as a fader with unique capabilities. Key features include:
1. The ability to "throw" a ball (point in OSC) that moves based on the direction and speed of the gesture, allowing for dynamic control of playback speed and direction.
2. The creation of the ball only upon touch, with a fading effect for the ball to disappear.
3. The need for a physics engine to manage these interactions, which is currently not supported in OSC.

## Solution
1. **Physics Features**: OSC does not support physics-based interactions natively, and there are no plans to implement such features. Custom modules have been attempted, but they may not provide the desired convenience.
   
2. **Ephemeral Property**: For the second feature, consider using the ephemeral property to create temporary widgets that disappear after use. However, this may not fully meet the requirements you have in mind.

3. **External Libraries**: Integrating an external JavaScript library (such as Planck.js or Matter.js) for physics interactions is technically possible but would require modifying the OSC source code and creating a custom build. There is no straightforward pipeline for this integration.

For further exploration, users may need to consider custom development to achieve the desired functionality.

# Setting Grid Template for Custom Row Proportions in Open Stage Control

**Problem Description**  
Users may encounter difficulties when trying to establish a grid layout that prioritizes rows over columns and allows for custom proportions in Open Stage Control. The built-in properties do not provide a straightforward way to set `grid-template-rows`, as the `gridTemplate` property only affects columns.

**Solution**  
To achieve a layout with custom row proportions, you can utilize CSS within the wrapper container. Here’s how to do it:

1. **Define the Wrapper Properties**: Set up your wrapper (panel/tab) with the following properties:
   ```json
   {
       "type": "tab",
       "layout": "grid",
       "justify": "start",
       "gridTemplate": 10
   }
   ```

2. **Apply Custom CSS for Rows**: Embed custom CSS to define the row proportions. For example:
   ```css
   :host {
       display: grid;
       grid-template-rows: 45% 5% 45% 5%; /* Adjust percentages as needed */
       grid-template-columns: repeat(10, auto); /* Maintain your column setup */
   }
   ```

3. **Span Columns for Specific Widgets**: If you need certain widgets to span multiple columns, you can specify this in their CSS. For example, to make an LED panel span 8 columns:
   ```css
   :host {
       grid-column: span 8;
   }
   ```

4. **Set Starting Column for Knobs**: Ensure that the first knob below each LED panel starts at column 1:
   ```css
   :host {
       grid-column-start: 1;
   }
   ```

By following these steps, you can effectively manage the layout of your grid in Open Stage Control, allowing for a more customized design that meets your specific needs.

[Attachment: miCmiWLtRPeyEKq22TuWMeq8cRa.json]

[Attachment: ji2hBjMKL7LtvVXf9j8su1glawd.json]

[Attachment: 4Foj4roEPCJTR9MFc5jueqIZZd8.json]

# OSC Data Best Practices

**Problem Description**  
When transferring data over OSC (Open Sound Control), there is a question regarding the best practice: Should one serialize and send a large JSON object as a single OSC message, or send multiple smaller OSC messages corresponding to individual widget fields? The concerns are primarily about packet loss, speed, and stability.

**Solution**  
Both approaches—sending a single large JSON object or multiple smaller OSC messages—are valid. However, consider the following:

1. **Packet Size**: Be aware of the maximum packet size when sending JSON over UDP. Exceeding this limit can lead to issues.
  
2. **Implementation Testing**: The speed and stability of either method depend heavily on the specific implementation. It is recommended to conduct tests and measurements to determine the most effective approach for your use case.

3. **Packet Loss Mitigation**: To minimize packet loss, it is advisable to use OSC over UDP on a loopback network. On Linux systems, increasing the UDP buffer size may be necessary to prevent packet loss. Other platforms typically do not require this adjustment.

4. **Recommended Pattern**: A practical approach is to serialize JSON from your DAW (Digital Audio Workstation), deserialize it in a custom module for debugging, and then send smaller OSC messages from that module to individual widgets. This method helps maintain organization and efficiency.

For example, when using Ableton Live, you can utilize the Python Remote Scripting API to export data in JSON format. This allows you to structure your data effectively while ensuring it is manageable for OSC communication.

For further reference, see the Python Remote Scripting API documentation: [Attachment: 11.0.0.xml].

# How to Receive a Bundle from Unreal Engine or Any OSC Sender

## Problem Description
Users may encounter difficulties in receiving OSC bundles sent from Unreal Engine or other OSC senders in Open Stage Control. Understanding how to access and log these bundles can be challenging, especially for those new to Open Stage Control and OSC.

## Solution
1. **Receiving OSC Bundles**: Open Stage Control automatically unpacks received OSC bundles. The OSC messages contained within the bundles are transmitted to the clients without requiring any additional configuration.

2. **Logging Incoming Messages**: To log all incoming OSC messages, enable the server's `debug` option. This will log all incoming and outgoing messages in the server's console.

For further reference, please see the attached files if applicable: [Attachment: filename.ext].

# Multiple MIDI Ports per Session

**Problem:**
Users transitioning from Lemur to Open Stage Control may want to know if it's possible to configure multiple MIDI targets within a single session, as the initial session setup requires specifying a pair of MIDI ports.

**Solution:**
To assign multiple MIDI ports in Open Stage Control, you can define them in the MIDI configuration line by separating each port declaration with a space. Here is an example configuration:

```plaintext
midi: "port1 port2 port3"
```

This allows you to utilize multiple MIDI devices within the same session.

# Patchbay Display Issue

## Problem Description
Users have reported that the connection line in the patchbay appears to be off by one level, connecting to the wrong input and output options. This issue has been observed in version 1.27.3 on macOS 14.7.2.

## Solution
This issue is identified as a layout problem where the labels are not evenly distributed vertically. To resolve this, apply the following CSS:

```css
.patchbaynode-container {
  flex: 1;
}
```

This adjustment should correct the alignment of the patchbay elements. 

[Attachment: 412476015-0c300654-1e5b-44a1-bd6c-6b50521be90d.mov]

# Change PreArg and/or MidiTarget Using Custom Module

## Problem Description
Users may want to dynamically change the `preArgs` values and MIDI targets for widgets, such as sliders, using a custom module in Open Stage Control. This is particularly relevant for scenarios where multiple MIDI channels and CC values need to be managed efficiently without causing performance issues.

## Solution
There are several methods to achieve this:

1. **Using the `/EDIT` Command**:
   You can change a widget's properties dynamically by sending an `/EDIT` command. For example:
   ```javascript
   receive('/EDIT', 'widget_id', {preArgs: [1], target: 'midi:device_name'});
   ```

2. **Using OSC Listeners**:
   Set up OSC listeners in the widget properties to update them from the custom module. For instance:
   ```javascript
   // Assuming a widget's target is: OSC{/widget_target, midi:a, false}
   receive('/widget_target', 'midi:b');
   ```

3. **Dynamic Routing from the Custom Module**:
   You can manage routing directly within your custom module. Below is a sample implementation:
   ```javascript
   var currentTarget = 'midi_device_a';

   module.exports = {
       oscInFilter: function(data) {
           var {address, args, host, port} = data;

           if (address === '/some_address') { // Match specific incoming message
               currentTarget = 'midi_device_b';
           }

           return {address, args, host, port};
       },

       oscOutFilter: function(data) {
           var {address, args, host, port} = data;

           if (address === '/some_widget_address') {  // Match specific outgoing message
               port = currentTarget; // Change target on the fly
           }

           return {address, args, host, port};
       }
   };
   ```

4. **Updating PreArgs with OSC**:
   To update `preArgs`, ensure you use the correct syntax. For example:
   ```javascript
   [
       1,
       #{osc{CCVAL, ,false}} // Note: OSC{} should be uppercase
   ]
   ```
   The `#{} wrapper` is not necessary if you are not modifying the received value.

5. **Using `receive` for Readability**:
   Instead of using `receiveOsc`, you may find the shorthand `receive` function more readable:
   ```javascript
   receive(Object.values(ccVal)[i], ccInt);
   ```

By implementing these methods, you can effectively manage MIDI targets and `preArgs` dynamically without significant performance degradation.

# Multi-client Synchronization in Open Stage Control

## Problem Description
Users have reported issues with synchronizing multiple clients in Open Stage Control, particularly when using multi-cast for communication. The primary concerns include:
- Inability to receive OSC messages sent back from external applications (e.g., TouchDesigner).
- Widgets not syncing across different clients, such as an iPad and an iPhone, despite being configured with the same address.

## Solution
1. **Multi-cast Configuration**: 
   - Open Stage Control does not natively support multi-cast, but it may be possible to implement it using the options provided by the underlying OSC engine. Refer to the documentation for [osc.js](https://github.com/colinbdclark/osc.js/#udp-in-nodejs) for more details.

2. **Client Synchronization**:
   - Ensure that all widgets intended for synchronization have the same `[address, preargs, & targets]`. 
   - The `targets` property must not contain a `null` value, and the `bypass` property should be set to `false`.
   - Note that synchronization may fail if the widget's `[address, preargs, or targets]` depend on its own value. This issue has been noted for future resolution in the Open Stage Control GitHub repository: [Issue #587](https://github.com/jean-emmanuel/open-stage-control/issues/587).
   - If you are using a version between v0.41.4 and v0.44.0, be aware that synchronization features were broken in that range. Ensure you are using the latest version of Open Stage Control.

3. **Session Management**:
   - On the `sessionOpened` event, consider sending the current state of the controls to the multi-cast address. This will help in syncing the widget states across clients when a new client connects.

By following these guidelines, you should be able to achieve the desired synchronization across multiple clients in Open Stage Control.

# External File in Custom Module

## Problem Description
Users want to define an object (e.g., a 'tracks' object) in a separate file and import it into a custom module in Open Stage Control. However, there are limitations regarding dynamic loading of JavaScript modules for security reasons.

## Solution
To manage your sources in multiple files and bundle them into one custom module file, follow these steps:

1. **Create your tracks file**: Define your tracks in a JSON format. Name the file `tracks.json`. For example:
   ```json
   {
     "track_1": {
       "name": "bass",
       "volume": 0
     }
   }
   ```

2. **Load the JSON in your custom module**: In your main module file (e.g., `custom-module.js`), use the following code to load the JSON data:
   ```javascript
   var tracks = loadJSON('./tracks.json');
   console.log(tracks.track_1);
   
   module.exports = {
     // other module exports
   };
   ```

3. **Bundle your sources**: If you need to use JavaScript files, you can manage them in separate files and bundle them using the `browserify` library. Create a `main.js` file and require your tracks file:
   ```javascript
   var tracks = require('./tracks.js');

   module.exports = {
     oscInFilter: function(data){
       // your code here
     }
   };
   ```
   Then, run the following command to create a bundled file:
   ```bash
   browserify main.js -o custom-module.js --standalone module.exports
   ```

Note: As of version 0.47.0, Open Stage Control allows reading/writing external JSON files from custom modules, but dynamic loading of JavaScript modules is not permitted. 

For further information on JSON formatting, refer to [JSON.org](https://json.org/). 

[Attachment: tracks.json]  
[Attachment: custom-module.js]  
[Attachment: main.js]

# Fader Moves with MIDI Controller Command by Script, but Does Not Send Signal to DAW

**Problem Description:**
When using a MIDI controller (WORLDE Easy Control) with Open Stage Control to control a volume fader in Ableton Live via OSC, the fader moves as expected when controlled by the MIDI controller. However, it does not send a MIDI signal to the DAW, whereas moving the fader directly with the mouse does send the signal.

**Solution:**
To resolve this issue, you need to implement a custom module in Open Stage Control that allows the widget to respond to incoming MIDI messages and send corresponding OSC messages to Ableton Live.

1. **Create a Custom Module:**
   Use the following code to create a custom module that will handle incoming MIDI messages and send OSC messages:

   ```javascript
   module.exports = {
       init: function() {
           console.log("Module initialized"); // This will execute once when the OSC server starts
       },

       oscInFilter: function(data) {
           var {address, args, host, port} = data;
           console.log("Received OSC data:", data);
           if (host === 'midi') {
               console.log("MIDI detected via host value!");
               // Process incoming MIDI messages here
           }
           return data; // Return the data for further processing if needed
       }
   };
   ```

2. **Configure the Widget:**
   Ensure that your widget is set up to send OSC messages when it receives input from the MIDI controller. You may need to adjust the properties of the widget to ensure it is not set to interactive mode, depending on your setup.

3. **MIDI and OSC Ports:**
   If you are using LoopMIDI on Windows, set up two ports:
   - One for DAW to Open Stage Control
   - One for Open Stage Control to DAW

4. **Testing:**
   After implementing the custom module and configuring the widget, test the setup by moving the fader on the MIDI controller and monitoring the MIDI signal in your DAW.

By following these steps, you should be able to ensure that moving the fader on your MIDI controller sends the appropriate MIDI signals to Ableton Live.

[Attachment: OSC Configuration Image]

[Attachment: c6lEB6s3xcTqnBOki18tjd18IpL.js]

[Attachment: 9YZ0mlsFYhq8GHyrMq1uEdKYPLc.json]

# No Possibility to Add Tabs

In Open Stage Control, users may encounter a situation where the option to add tabs is unavailable in a session. This typically occurs when there are existing widgets in the same container.

## Solution

To resolve this issue, follow these steps:

1. Cut all existing widgets from the container.
2. Add a new tab to the container.
3. Paste the widgets back into the new tab.

Note that you cannot have both tabs and widgets in the same container.

# Knob Non-Linear Value Adjustment

## Problem Description
A user is attempting to configure a knob in Open Stage Control that outputs a non-linear range of values. The knob should map a MIDI Control Change (CC) value of 0-127 to a range of 0.5 to 2.5, specifically ensuring that a CC value of 64 corresponds to a value of 1. The user has encountered issues with unexpected results when applying a multiplicative factor to the knob's output.

## Solution
To achieve the desired mapping, the following JavaScript code can be used in the value text of the knob:

```javascript
JS{{
var val = @{knob_speedfree_@{parent.variables.ID}}
var val2 = Math.round(@{switch_multiplier_@{parent.variables.ID}}/16)
var result = val < 64 ? // if val < 64
  (val / 64 * 0.5 + 0.5) : // convert 0-64 range to 0.5-1.0
  ((val - 64) / 63 * val2 + 1) // else: convert 64-127 range to 1.0-2.0
result = result.toFixed(2); // limit to 2 decimal places
console.log(result); // use console to debug
return result
}}
```

### Notes:
- Ensure that the multiplicative factor (`val2`) is applied correctly to the range of 64-127.
- If unexpected results occur, use `console.log` to inspect variable values and debug the output.
- If issues persist, simplify the template by removing unnecessary elements to isolate the knob and text components.

### Attachments:
- [Attachment: knob_nonlinear.json]
- [Attachment: wozvq34c1mtmCy3MiOPEwWEXXuQ.json]
- [Attachment: cXOhcWZoXpUejrtiN0CwZNMkSg9.json]
- [Attachment: 4xiX8zeWTaC9EHvz28102Rh7tck.json]

# Setting a Fader Value with a Button Press

**Problem Description:**
A user needed to create a button that sets a fader to 50% when pressed. The initial approach involved using a JavaScript snippet but required clarification on the correct implementation.

**Solution:**
To achieve this functionality, you can use the `receive` function in a custom module. This allows you to send messages to the interface as if they were received from an external sender. Here’s a simple implementation:

```javascript
JS{{
set("all35", 0.5)
}}
```

For more detailed information on using custom modules, refer to the [Open Stage Control documentation](https://openstagecontrol.ammd.net/docs/custom-module/#available-globals).

# Setting Button Names Based on Dropdown List

## Problem Description
A user wants to label buttons based on the options available in a dropdown menu. The dropdown menu contains multiple items, and the user needs the buttons to dynamically reflect the names of these items. Additionally, the user seeks to retrieve the associated values from the dropdown list for further use.

## Solution
To set the button labels based on the dropdown menu, use the following expression for each button:

For Button 1:
```javascript
#{Object.keys(@{switch_1.values})[0]}
```
For Button 2, replace `[0]` with `[1]`, and so on for additional buttons.

To retrieve the associated values from the dropdown, use:
```javascript
#{Object.values(@{ColScr_Selection_1.values})[0]}
```
This will provide the value corresponding to the first item in the dropdown list. Adjust the index as needed for other items.

# Retrieving and Displaying Knob Values in a Text Box

**Problem:**
Users may encounter issues when trying to display the value of a knob (ranging from 0-127) in a text box while manipulating it. The initial approach using `getVar()` does not yield the expected dynamic updates.

**Solution:**
To display the current value of a knob in a text box, you can use the following methods:

1. **Using Knob's Script Property:**
   In the knob's script property, you can directly access the knob's value with the `value` variable. Use the following code:
   ```javascript
   console.log("Knob " + getProp("this", "id") + ": " + value);
   set("text_id", value); // Pass value to another widget
   ```

2. **Using Text Widget's Value Property:**
   Alternatively, you can set the value of the text widget directly by using the knob's ID:
   ```
   @{knob_id}
   ```
   This method does not require any scripting.

By implementing either of these solutions, the text box will dynamically reflect the current value of the knob as it is adjusted.

# Displaying Dropdown Selection in a Button

**Problem:**
The goal is to display the selected text from a dropdown menu (e.g., `NameList_1`) in an adjacent button. The dropdown contains names associated with non-sequential indices, and the requirement is to use the dropdown index to retrieve the corresponding name.

**Solution:**
To achieve this, you can use the following JavaScript code in the button's label:

```javascript
var values = @{dropdown_id.values},
    v = @{dropdown_id}

return Object.keys(values).find(k => values[k] == v)
```

**Note:** If you are using Open Stage Control version 1.0.3, ensure to format the JavaScript code as follows:

```javascript
JS{{ 
// your code here 
}}
```

This adjustment will allow the code to function correctly in that version.

[Attachment: e9HIUoTTvi499AmWGaHIqECftKq.json]

# Using Aspect Ratio in Open Stage Control

## Problem Description
Users may encounter difficulties maintaining a square panel container in Open Stage Control (OSC) based on screen resolution. Specifically, there is a need to implement CSS aspect-ratio properties effectively.

## Solution
To achieve a square panel container, the following CSS can be used:

```css
aspect-ratio: 1 / 1;
height: auto !important;
```

Alternatively, for a different aspect ratio, you can use:

```css
aspect-ratio: 16 / 9;
height: auto !important;
```

Note that while the aspect-ratio property works well on most devices, it may not function on older iOS devices. For more information, refer to the [MDN documentation on aspect-ratio](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio).

If additional stability is required when using other widgets, consider employing CSS grid templates as part of your layout strategy.

[Attachment: filename.ext]

# Creating a Button to Lock/Latch Notes from Keyboard Widget

## Problem Description
There is a need to create a button that can lock or latch notes played from a keyboard widget in Open Stage Control.

## Solution
To achieve this functionality, you can use the Mode option of the button to set it to either Push or Toggle. Implement the following variable:

```javascript
VAR{keyMode, push}
```

This method is effective for locking or latching notes played from the keyboard widget.

# Define MIDI Ports Command Line - MIDI Format Issue

When starting Open Stage Control from the command line, users may encounter issues with the `--midi` parameter format, resulting in an "Unknown arguments" error.

## Problem Description
The command line input for the `--midi` parameter may be incorrectly formatted, leading to errors when launching Open Stage Control. The input string provided was:
```
--midi "flow:flow-main-in,flow-main-out flow1:flow-1-in,flow-1-out flow2:flow-2-in,flow-2-out flow3:flow-3-in,flow-3-out"
```

## Solution
To resolve this issue, remove the quotes surrounding the entire MIDI configuration string. Instead, quotes should only be used around each MIDI device declaration if they contain spaces. The corrected command should look like this:
```
--midi flow:flow-main-in,flow-main-out flow1:flow-1-in,flow-1-out flow2:flow-2-in,flow-2-out flow3:flow-3-in,flow-3-out
``` 

This adjustment should allow Open Stage Control to recognize the MIDI ports correctly.

# Summing Values of Widgets with IDs "button_*"

## Problem Description
Users want to create a variable that sums the values of multiple widgets with IDs following the pattern "button_*". The goal is to store the total sum of these values in a variable.

## Solution
To sum the values of widgets with IDs "button_*", you can use the following JavaScript code in the scripting property of a widget:

```javascript
var sum = 0;
for (var i = 0; i < 20; i++) {
  sum += get("button_" + i) || 0; // Fallback to 0 if the value is undefined
}
```

### Additional Steps
1. **Display the Sum**: To display the sum in a text box, you can use a script widget with the following line added to the above code:
   ```javascript
   set("text_id", sum);
   ```
   Replace `"text_id"` with the actual ID of your text box.

2. **Triggering the Script**: Configure the buttons to trigger the script when pressed by setting their `linkId` to `>> sumLink` and the script widget's `linkId` to `<< sumLink`.

3. **Testing the Sum**: For debugging purposes, you can log the sum to the console using:
   ```javascript
   console.log(sum);
   ```

### References
- For more details on scripting, refer to the [Scripting - Open Stage Control](https://open-stage-control.github.io/) documentation.
- For general mechanics, see [General mechanics - Open Stage Control](https://open-stage-control.github.io/).
- For properties reference, check [Properties reference - Open Stage Control](https://open-stage-control.github.io/).

# Creating Multiple Clones with Individual Widths in Open Stage Control

## Problem Description
The goal is to create multiple clones in a matrix or panel where each clone has its own momentary width, based on specific options within a channel strip. The left position of each clone should adjust dynamically according to the widths of the preceding clones, avoiding any blank spaces. The challenge is to automate the width assignment for each clone without manually configuring each one.

## Solution
To achieve this, you can define the properties of the matrix using a JavaScript block. This allows for more complex logic regarding the `left` property of each child widget. Below is a sample code snippet that demonstrates how to implement this:

```javascript
JS{
var props = {}
props.widgetId = '/myInput'
props.props = {
  variables: {n: $ + 1, visible: true} 
}

// Define logic for width based on the clone number
if ($ + 1 >= 1 && $ + 1 <= @{num_channels}) {
  switch ($ + 1) {
    case 1:
      props.width = @{varWidth_1};
      break;
    case 2:
      props.width = @{varWidth_2};
      break;
    // Add cases as needed
    default:
      props.width = 60; // Default width
  }
} else {
  props.width = 60; // Default width if out of range
}

return props
}
```

### Key Points:
- The `props` object is constructed to define the widget's properties.
- The `variables` object is used to manage the visibility and index of each clone.
- The `switch` statement is used to assign widths based on the clone's index, allowing for individual customization.
- If the number of channels exceeds the defined cases, a default width can be set.

This approach provides a more elegant solution for managing multiple clones with varying widths, reducing the need for manual configuration.

[Attachment: clones_width.png]
[Attachment: matrix_clones.png]

[Attachment: qE75zAvkkw5BW5LaEQTQDNws8mt.json]

[Attachment: tYr1GoueB7OP6oSksqTAidVzevt.json]

# Stringify and Depth Level for Pretty Export of JSON

## Problem Description
There is a need to export an array as part of a JSON file in a more readable format. The default behavior of `JSON.stringify` results in line breaks and indentation down to the deepest level of the object, which may not be desirable. The goal is to limit the depth of indentation and line breaks to a certain level without implementing a custom prettifier.

## Solution
A potential solution is to use a regular expression to limit the displayed depth of objects. This approach can be adapted from the implementation found in the Open Stage Control repository. For reference, see the following file:

- [Attachment: ui-inspector-field.js]

# Matrix Buttons Scrollable

**Problem:**  
Is it possible to scroll within a matrix of buttons, either horizontally or vertically?

**Solution:**  
Yes, to enable scrolling within a matrix of buttons, set a fixed width for the buttons and configure the matrix's `contain` property to `false`.

# Math Syntax in OSC Messages

**Problem Description:**
Users may want to integrate mathematical formulas into their OSC messages, such as converting `/i=2+3/int` to `/5/int`.

**Solution:**
To achieve this, you can use advanced property syntax in Open Stage Control. Specifically, you can utilize the formula syntax `#{}` or the JavaScript syntax `JS{{}}`. 

Here are examples of how to format your OSC messages:

- Using formula syntax:
  ```
  /#{2 + 3}/int
  ```

- Using JavaScript syntax:
  ```
  /JS{{return 2 + 3}}/int
  ```

- For dynamic values from widgets:
  ```
  /JS{{return 2 + @{input_1}}}/int
  ```
  Here, `@{input_1}` retrieves the value of the widget with the identifier `input_1`.

For more details, refer to the documentation on [advanced property syntax](https://openstagecontrol.ammd.net/docs/advanced-property-syntax/).